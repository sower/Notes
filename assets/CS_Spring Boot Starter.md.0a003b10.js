import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.1f7d9302.js";const b=JSON.parse('{"title":"Spring Boot Starter","description":"","frontmatter":{"title":"Spring Boot Starter","created_at":"2023-06-24T02:32:43.000Z","updated_at":"2023-10-05T09:51:18.000Z","word_count":2243},"headers":[],"relativePath":"CS/Spring Boot Starter.md","filePath":"CS/Spring Boot Starter.md"}'),p={name:"CS/Spring Boot Starter.md"},e=l(`<h2 id="bean-validation" tabindex="-1">Bean Validation <a class="header-anchor" href="#bean-validation" aria-label="Permalink to &quot;Bean Validation&quot;">​</a></h2><p>Java Specification Requests：Java 规范提案，指向JCP(Java Community Process)提出新增一个标准化技术规范的正式请求</p><p>JSR-303 是JAVA EE 6 中的一项子规范，叫做Bean Validation。 <br> <a href="https://hibernate.org/validator/" target="_blank" rel="noreferrer">Hibernate Validator</a> 提供了 JSR 303 规范中所有内置 constraint 的实现，除此之外还有一些附加的 constraint。</p><p><strong>spring-boot-starter-validation</strong></p><table><thead><tr><th>名称</th><th>说明</th></tr></thead><tbody><tr><td>@Null</td><td>被标注的元素必须为 null</td></tr><tr><td>@NotNull</td><td>被标注的元素必须不为 null</td></tr><tr><td>@AssertTrue</td><td>被标注的元素必须为 true</td></tr><tr><td>@AssertFalse</td><td>被标注的元素必须为 false</td></tr><tr><td>@Min(value)</td><td>一个数字，其值必须大于等于指定的最小值</td></tr><tr><td>@Max(value)</td><td>一个数字，其值必须小于等于指定的最大值</td></tr><tr><td>@DecimalMax(value)</td><td>一个数字，其值必须小于等于指定的最大值</td></tr><tr><td>@DecimalMin(value)</td><td>一个数字，其值必须大于等于指定的最小值</td></tr><tr><td>@Size</td><td>被标注的元素的大小必须在指定的范围内</td></tr><tr><td>@Digits（integer，fraction）</td><td>一个数字，其值必须在可接受的范围内；integer 指定整数精度，fraction 指定小数精度</td></tr><tr><td>@Past</td><td>一个过去的日期</td></tr><tr><td>@Future</td><td>一个将来的日期</td></tr><tr><td>@Pattern(value)</td><td>被标注的元素必须符合指定的正则表达式</td></tr></tbody></table><table><thead><tr><th>@Email</th><th>字符串，邮箱格式</th></tr></thead><tbody><tr><td>@NotEmpty</td><td>集合，不为空</td></tr><tr><td>@NotBlank</td><td>字符串，不为空字符串</td></tr><tr><td>@Positive</td><td>数字，正数</td></tr><tr><td>@PositiveOrZero</td><td>数字，正数或0</td></tr><tr><td>@Negative</td><td>数字，负数</td></tr><tr><td>@NegativeOrZero</td><td>数字，负数或0</td></tr><tr><td>@PastOrPresent</td><td>过去或者现在</td></tr></tbody></table><ul><li><code>@Valid</code> 嵌套校验</li><li><code>@Validated</code> 分组校验</li><li>自定义注解校验</li></ul><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Bean</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Validator</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">validator</span><span style="color:#E06C75;">(</span><span style="color:#E5C07B;">AutowireCapableBeanFactory</span><span style="color:#E06C75;"> springFactory) {</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">try</span><span style="color:#E06C75;"> (</span><span style="color:#E5C07B;">ValidatorFactory</span><span style="color:#E06C75;"> factory </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Validation</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">byProvider</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">HibernateValidator</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E06C75;">            </span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">configure</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#E06C75;">            </span><span style="color:#7F848E;font-style:italic;">// 快速失败</span></span>
<span class="line"><span style="color:#E06C75;">            </span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">failFast</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E06C75;">            </span><span style="color:#7F848E;font-style:italic;">// 解决 SpringBoot 依赖注入问题</span></span>
<span class="line"><span style="color:#E06C75;">            </span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">constraintValidatorFactory</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">SpringConstraintValidatorFactory</span><span style="color:#ABB2BF;">(springFactory))</span></span>
<span class="line"><span style="color:#E06C75;">            </span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">buildValidatorFactory</span><span style="color:#ABB2BF;">()</span><span style="color:#E06C75;">) {</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">factory</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getValidator</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">    }</span></span>
<span class="line"><span style="color:#E06C75;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="spring-security" tabindex="-1"><a href="https://docs.spring.io/spring-security/reference/index.html" target="_blank" rel="noreferrer">Spring Security</a> <a class="header-anchor" href="#spring-security" aria-label="Permalink to &quot;[Spring Security](https://docs.spring.io/spring-security/reference/index.html)&quot;">​</a></h2><ul><li><a href="https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html#servlet-authentication-securitycontextholder" target="_blank" rel="noreferrer">SecurityContextHolder</a> - The SecurityContextHolder is where Spring Security stores the details of who is <a href="https://docs.spring.io/spring-security/reference/features/authentication/index.html#authentication" target="_blank" rel="noreferrer">authenticated</a>.</li><li><a href="https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html#servlet-authentication-securitycontext" target="_blank" rel="noreferrer">SecurityContext</a> - is obtained from the SecurityContextHolder and contains the Authentication of the currently authenticated user.</li><li><a href="https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html#servlet-authentication-authentication" target="_blank" rel="noreferrer">Authentication</a> - Can be the input to AuthenticationManager to provide the credentials a user has provided to authenticate or the current user from the SecurityContext.</li><li><a href="https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html#servlet-authentication-granted-authority" target="_blank" rel="noreferrer">GrantedAuthority</a> - An authority that is granted to the principal on the Authentication (i.e. roles, scopes, etc.)</li><li><a href="https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html#servlet-authentication-authenticationmanager" target="_blank" rel="noreferrer">AuthenticationManager</a> - the API that defines how Spring Security’s Filters perform <a href="https://docs.spring.io/spring-security/reference/features/authentication/index.html#authentication" target="_blank" rel="noreferrer">authentication</a>.</li><li><a href="https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html#servlet-authentication-providermanager" target="_blank" rel="noreferrer">ProviderManager</a> - the most common implementation of AuthenticationManager.</li><li><a href="https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html#servlet-authentication-authenticationprovider" target="_blank" rel="noreferrer">AuthenticationProvider</a> - used by ProviderManager to perform a specific type of authentication.</li><li><a href="https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html#servlet-authentication-authenticationentrypoint" target="_blank" rel="noreferrer">Request Credentials withAuthenticationEntryPoint</a> - used for requesting credentials from a client (i.e. redirecting to a log in page, sending a WWW-Authenticate response, etc.)</li><li><a href="https://docs.spring.io/spring-security/reference/servlet/authentication/architecture.html#servlet-authentication-abstractprocessingfilter" target="_blank" rel="noreferrer">AbstractAuthenticationProcessingFilter</a> - a base Filter used for authentication. This also gives a good idea of the high level flow of authentication and how pieces work together.</li></ul><p>默认用户名、密码和权限在 application.yaml 中配置</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">spring</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">security</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">user</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">ming</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">password</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">123456</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">roles</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">admin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Configuration</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">EnableWebSecurity</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 开启注解设置权限</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">EnableGlobalMethodSecurity</span><span style="color:#E06C75;">(</span><span style="color:#D19A66;">prePostEnabled</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">true</span><span style="color:#E06C75;">)</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">WebSecurityConfig</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">extends</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">WebSecurityConfigurerAdapter</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#7F848E;font-style:italic;">// 配置密码加密器</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Bean</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">PasswordEncoder</span><span style="color:#61AFEF;"> passwordEncoder</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">BCryptPasswordEncoder</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#7F848E;font-style:italic;">// 配置认证管理器</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">protected</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> configure</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">AuthenticationManagerBuilder</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">auth</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Exception</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">auth</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">inMemoryAuthentication</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">withUser</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;admin&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">password</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">passwordEncoder</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">encode</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;123&quot;</span><span style="color:#ABB2BF;">)).</span><span style="color:#61AFEF;">roles</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;admin&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">and</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">withUser</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;user&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">password</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">passwordEncoder</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">encode</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;456&quot;</span><span style="color:#ABB2BF;">)).</span><span style="color:#61AFEF;">roles</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;user&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#7F848E;font-style:italic;">// 配置安全策略</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">protected</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> configure</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">HttpSecurity</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">http</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Exception</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 配置认证</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">http</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">formLogin</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#7F848E;font-style:italic;">// 哪个URL为登录页面</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">loginPage</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#7F848E;font-style:italic;">// 当发现什么URL时执行登录逻辑</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">loginProcessingUrl</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/login&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#7F848E;font-style:italic;">// 成功后跳转到哪里</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">successForwardUrl</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/success&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#7F848E;font-style:italic;">// 失败后跳转到哪里</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">failureForwardUrl</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/fail&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 设置URL的授权问题</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 多个条件取交集</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">http</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">authorizeRequests</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#7F848E;font-style:italic;">// 匹配 / 控制器  permitAll() 不需要被认证就可以访问</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">antMatchers</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;/&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">permitAll</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#7F848E;font-style:italic;">// anyRequest() 所有请求   authenticated() 必须被认证</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">anyRequest</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">authenticated</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//开启记住我功能   cookie  默认保存时间14天</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//自定义接收前端参数，remember为表单中的名字</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">http</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">rememberMe</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">rememberMeParameter</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;remember&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 关闭csrf</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">http</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">csrf</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">disable</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h2 id="spring-data-redis" tabindex="-1"><a href="https://spring.io/projects/spring-data-redis" target="_blank" rel="noreferrer">Spring Data Redis</a> <a class="header-anchor" href="#spring-data-redis" aria-label="Permalink to &quot;[Spring Data Redis](https://spring.io/projects/spring-data-redis)&quot;">​</a></h2><p><a href="https://docs.spring.io/spring-data/data-redis/docs/current/reference/html/#pubsub" target="_blank" rel="noreferrer">Pubsub</a></p><h2 id="spring-cache" tabindex="-1"><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache" target="_blank" rel="noreferrer">Spring Cache</a> <a class="header-anchor" href="#spring-cache" aria-label="Permalink to &quot;[Spring Cache](https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#cache)&quot;">​</a></h2><p>spring-boot-starter-cache</p><table><thead><tr><th>名称</th><th>解释</th></tr></thead><tbody><tr><td>Cache</td><td>缓存接口，定义缓存操作。实现有：RedisCache、EhCacheCache、ConcurrentMapCache等</td></tr><tr><td>CacheManager</td><td>缓存管理器，管理各种缓存（cache）组件</td></tr><tr><td>@Cacheable</td><td>主要针对方法配置，能够根据方法的请求参数对其进行缓存</td></tr><tr><td>@CacheEvict</td><td>清空缓存</td></tr><tr><td>@CachePut</td><td>保证方法被调用，又希望结果被缓存。与@Cacheable区别在于是否每次都调用方法，常用于更新</td></tr><tr><td>@Caching</td><td>让一个类或方法上定义多个cache相关的注解</td></tr><tr><td>@EnableCaching</td><td>开启基于注解的缓存</td></tr><tr><td>keyGenerator</td><td>缓存数据时key生成策略</td></tr><tr><td>serialize</td><td>缓存数据时value序列化策略</td></tr><tr><td>@CacheConfig</td><td>统一配置本类的缓存注解的属性</td></tr></tbody></table><p>SpEL上下文数据</p><table><thead><tr><th>名称</th><th>位置</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>methodName</td><td>root对象</td><td>当前被调用的方法名</td><td>#root.methodname</td></tr><tr><td>method</td><td>root对象</td><td>当前被调用的方法</td><td>#root.method.name</td></tr><tr><td>target</td><td>root对象</td><td>当前被调用的目标对象实例</td><td>#root.target</td></tr><tr><td>targetClass</td><td>root对象</td><td>当前被调用的目标对象的类</td><td>#root.targetClass</td></tr><tr><td>args</td><td>root对象</td><td>当前被调用的方法的参数列表</td><td>#root.args[0]</td></tr><tr><td>caches</td><td>root对象</td><td>当前方法调用使用的缓存列表</td><td>#root.caches[0].name</td></tr><tr><td>Argument Name</td><td>执行上下文</td><td>当前被调用的方法的参数，如findArtisan(Artisan artisan)，可以通过#artsian.id获得参数</td><td>#artsian.id</td></tr><tr><td>result</td><td>执行上下文</td><td>法执行后的返回值（仅当方法执行后的判断有效，如 unless cacheEvict的beforeInvocation=false）</td><td>#result</td></tr></tbody></table><h2 id="spring-data-rest" tabindex="-1"><a href="https://spring.io/projects/spring-data-rest" target="_blank" rel="noreferrer">Spring Data REST</a> <a class="header-anchor" href="#spring-data-rest" aria-label="Permalink to &quot;[Spring Data REST](https://spring.io/projects/spring-data-rest)&quot;">​</a></h2><p>Annoation</p><ul><li>@RepositoryRestResource</li><li>@RestResource(exported = false)</li><li>@Projection</li><li>@RepositoryEventHandler</li><li>@BasePathAwareController</li></ul><p><strong>Events</strong></p><ul><li>BeforeCreateEvent</li><li>AfterCreateEvent</li><li>BeforeSaveEvent</li><li>AfterSaveEvent</li><li>BeforeLinkSaveEvent</li><li>AfterLinkSaveEvent</li><li>BeforeDeleteEvent</li><li>AfterDeleteEvent</li></ul><h2 id="quartz" tabindex="-1"><a href="https://github.com/quartz-scheduler/quartz" target="_blank" rel="noreferrer">Quartz</a> <a class="header-anchor" href="#quartz" aria-label="Permalink to &quot;[Quartz](https://github.com/quartz-scheduler/quartz)&quot;">​</a></h2><ul><li>Scheduler 和调度程序交互的主要API</li><li>Job 调度器调度的任务组件接口</li><li>JobDetail Job实例，包含了该实例的执行计划和所需要的数据</li><li>Trigger 触发器，定义了一个触发策略</li></ul><table><thead><tr><th>触发器</th><th>适用场景</th></tr></thead><tbody><tr><td>SimpleTrigger</td><td>简单触发器，适用于 按指定的时间间隔执行多少次任务的情况</td></tr><tr><td>CronTrigger</td><td>Cron触发器，通过Cron表达式来控制任务的执行时间</td></tr><tr><td>DailyTimeIntervalTrigger</td><td>日期触发器，在给定的时间范围内或指定的星期内以秒、分钟或者小时为周期进行重复的情况</td></tr><tr><td>CalendarIntervalTrigger</td><td>日历触发器，根据一个给定的日历时间进行重复</td></tr></tbody></table><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">QuartzTest</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#7F848E;font-style:italic;">// 你需要在start和shutdown之间执行你的任务。</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 从工厂中获取Scheduler示例</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">Scheduler</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">scheduler</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">StdSchedulerFactory</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getDefaultScheduler</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 开始</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">scheduler</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">start</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 定义Job，并将其绑定到HelloJob类中</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">JobDetail</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">job</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">JobBuilder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">newJob</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">HelloJob</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">withIdentity</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;job1&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;group1&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#7F848E;font-style:italic;">// name 和 group</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">usingJobData</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;username&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;snow&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#7F848E;font-style:italic;">// 置入JobDataMap</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">usingJobData</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;age&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;20&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">withDescription</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;desc-demo&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 触发Job执行，每30s执行一次，直到22：00</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">Trigger</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">trigger</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">TriggerBuilder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">newTrigger</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">withIdentity</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;trigger1&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;group1&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">startNow</span><span style="color:#ABB2BF;">() </span><span style="color:#7F848E;font-style:italic;">// 立即开始</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">withSchedule</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">SimpleScheduleBuilder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">simpleSchedule</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                            .</span><span style="color:#61AFEF;">withIntervalInSeconds</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">30</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                            .</span><span style="color:#61AFEF;">repeatForever</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">endAt</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">dateOf</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">22</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                    .</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 告诉 quartz 使用trigger来调度job</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">scheduler</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">scheduleJob</span><span style="color:#ABB2BF;">(job, trigger);</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#7F848E;font-style:italic;">// 关闭，线程终止</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">scheduler</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">shutdown</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">SchedulerException</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">se</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">se</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">printStackTrace</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Slf4j</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">NoArgsConstructor</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">HelloJob</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">implements</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Job</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> execute</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">JobExecutionContext</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">context</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">JobExecutionException</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 从context中获取属性</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">JobDetail</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">jobDetail</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">context</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getJobDetail</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">JobKey</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">jobDetail</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getKey</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Class</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Job</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#E06C75;">jobClass</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">jobDetail</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getJobClass</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">description</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">jobDetail</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getDescription</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">JobDataMap</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">jobDataMap</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">jobDetail</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getJobDataMap</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">username</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">jobDataMap</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getString</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;username&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">jobDataMap</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getIntValue</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;age&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;</span><span style="color:#56B6C2;">\\n</span><span style="color:#98C379;">JobKey : {},</span><span style="color:#56B6C2;">\\n</span><span style="color:#98C379;"> JobClass : {},</span><span style="color:#56B6C2;">\\n</span><span style="color:#98C379;"> JobDesc : {},</span><span style="color:#56B6C2;">\\n</span><span style="color:#98C379;"> username : {},</span><span style="color:#56B6C2;">\\n</span><span style="color:#98C379;"> age : {}&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                key, </span><span style="color:#E5C07B;">jobClass</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getName</span><span style="color:#ABB2BF;">(), description, username, age);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><p><strong>SpringBoot整合</strong> <br> spring-boot-starter-quartz</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Slf4j</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">DemoJob</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">extends</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">QuartzJobBean</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">protected</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> executeInternal</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">JobExecutionContext</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">jobExecutionContext</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">JobExecutionException</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">now</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">DateTimeFormatter</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">ofPattern</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">format</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">LocalDateTime</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">now</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;当前的时间: &quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> now);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>调度器Scheduler绑定</p><ul><li>Bean自动配置</li></ul><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Configuration</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">QuartzConfig</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Bean</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">JobDetail</span><span style="color:#61AFEF;"> jobDetail1</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">JobBuilder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">newJob</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">DemoJob</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">withIdentity</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;demo 01&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">withDescription</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;demo job test&quot;</span><span style="color:#ABB2BF;">) </span><span style="color:#7F848E;font-style:italic;">// 任务描述</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">storeDurably</span><span style="color:#ABB2BF;">() </span><span style="color:#7F848E;font-style:italic;">// 每次任务执行后进行存储</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Bean</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Trigger</span><span style="color:#61AFEF;"> trigger1</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 简单的调度计划的构造器</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">SimpleScheduleBuilder</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">scheduleBuilder</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">SimpleScheduleBuilder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">simpleSchedule</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">withIntervalInSeconds</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">) </span><span style="color:#7F848E;font-style:italic;">// 频率</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">repeatForever</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">// 次数</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">TriggerBuilder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">newTrigger</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">forJob</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">jobDetail1</span><span style="color:#ABB2BF;">()) </span><span style="color:#7F848E;font-style:italic;">// 绑定工作任务</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">withIdentity</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;demo 01 Trigger&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">withSchedule</span><span style="color:#ABB2BF;">(scheduleBuilder)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><ul><li>手动配置</li></ul><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Component</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">JobInit</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">implements</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">ApplicationRunner</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">static</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">final</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> ID </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&quot;DEMO&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Autowired</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Scheduler</span><span style="color:#E06C75;"> scheduler</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> run</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">ApplicationArguments</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Exception</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">JobDetail</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">jobDetail</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">JobBuilder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">newJob</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">DemoJob</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">withIdentity</span><span style="color:#ABB2BF;">(ID </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot; 01&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">storeDurably</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">CronScheduleBuilder</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">scheduleBuilder</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E5C07B;">CronScheduleBuilder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">cronSchedule</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;0/5 * * * * ? *&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 创建任务触发器</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Trigger</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">trigger</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">TriggerBuilder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">newTrigger</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">forJob</span><span style="color:#ABB2BF;">(jobDetail)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">withIdentity</span><span style="color:#ABB2BF;">(ID </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot; 01Trigger&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">withSchedule</span><span style="color:#ABB2BF;">(scheduleBuilder)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">startNow</span><span style="color:#ABB2BF;">() </span><span style="color:#7F848E;font-style:italic;">//立即執行一次任務</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 手动将触发器与任务绑定到调度器内</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">scheduler</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">scheduleJob</span><span style="color:#ABB2BF;">(jobDetail, trigger);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><strong>数据库方式存储任务信息</strong> <br> yml配置</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">spring</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;"># Quartz 的配置，对应 QuartzProperties 配置类</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">quartz</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">job-store-type</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">jdbc</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;"># Job 存储器类型。默认为 memory 表示内存</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">auto-startup</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;"># Quartz 是否自动启动</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">startup-delay</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;"># 延迟 N 秒启动</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">wait-for-jobs-to-complete-on-shutdown</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;"># 应用关闭时，是否等待定时任务执行完成。默认false</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">overwrite-existing-jobs</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;"># 是否覆盖已有 Job 的配置</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;"># 添加 Quartz Scheduler 附加属性</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">properties</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">org</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">quartz</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">scheduler</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">instanceName</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">clusteredScheduler</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">instanceId</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">AUTO</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">jobStore</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">class</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">org.springframework.scheduling.quartz.LocalDataSourceJobStore</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">driverDelegateClass</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">org.quartz.impl.jdbcjobstore.StdJDBCDelegate</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">tablePrefix</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">QRTZ_</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">isClustered</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">clusterCheckinInterval</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">10000</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">useProperties</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">threadPool</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">class</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">org.quartz.simpl.SimpleThreadPool</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;"># 线程池类型</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">threadCount</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;"># 线程池大小 默认为 10</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">threadPriority</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">5</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">threadsInheritContextClassLoaderOfInitializingThread</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><table><thead><tr><th>表名</th><th>解释</th></tr></thead><tbody><tr><td>QRTZ_CALENDARS</td><td>以 Blob 类型存储 Quartz 的 Calendar 信息</td></tr><tr><td>QRTZ_CRON_TRIGGERS</td><td>存储 Cron Trigger，包括 Cron 表达式和时区信息</td></tr><tr><td>QRTZ_FIRED_TRIGGERS</td><td>存储与已触发的 Trigger 相关的状态信息，以及相联 Job 的执行信息</td></tr><tr><td>QRTZ_PAUSED_TRIGGER_GRPS</td><td>存储已暂停的 Trigger 组的信息</td></tr><tr><td>QRTZ_SCHEDULER_STATE</td><td>存储少量的有关 Scheduler 的状态信息，和别的 Scheduler 实例(假如是用于一个集群中)</td></tr><tr><td>QRTZ_LOCKS</td><td>存储程序的悲观锁的信息</td></tr><tr><td>QRTZ_JOB_DETAILS</td><td>存储每一个已配置的 Job 的详细信息</td></tr><tr><td>QRTZ_SIMPLE_TRIGGERS</td><td>存储简单的 Trigger，包括重复次数，间隔，以及已触的次数</td></tr><tr><td>QRTZ_BLOG_TRIGGERS</td><td>Trigger 作为 Blob 类型存储(用于 Quartz 用户用 JDBC 创建他们自己定制的 Trigger 类型，JobStore 并不知道如何存储实例的时候)</td></tr><tr><td>QRTZ_TRIGGER_LISTENERS</td><td>存储已配置的 TriggerListener 的信息</td></tr><tr><td>QRTZ_TRIGGERS</td><td>存储已配置的 Trigger 的信息</td></tr></tbody></table>`,39),o=[e];function t(r,c,B,i,y,F){return n(),a("div",null,o)}const u=s(p,[["render",t]]);export{b as __pageData,u as default};
