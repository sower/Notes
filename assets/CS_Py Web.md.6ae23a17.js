import{_ as s,c as n,o as a,a as l}from"./app.7d58ac0d.js";const C=JSON.parse('{"title":"Py Web","description":"","frontmatter":{"title":"Py Web","created_at":"2022-02-01T05:44:43.000Z","updated_at":"2022-10-25T14:02:03.000Z","word_count":9821},"headers":[{"level":2,"title":"PyMySQL","slug":"pymysql","link":"#pymysql","children":[{"level":3,"title":"mysql.connector","slug":"mysql-connector","link":"#mysql-connector","children":[]}]},{"level":2,"title":"SQLAlchemy","slug":"sqlalchemy","link":"#sqlalchemy","children":[]},{"level":2,"title":"redis","slug":"redis","link":"#redis","children":[]},{"level":2,"title":"Flask","slug":"flask","link":"#flask","children":[]},{"level":2,"title":"jinja","slug":"jinja","link":"#jinja","children":[]},{"level":2,"title":"Django","slug":"django","link":"#django","children":[{"level":3,"title":"\u6A21\u578B\uFF08Model\uFF09","slug":"\u6A21\u578B\uFF08model\uFF09","link":"#\u6A21\u578B\uFF08model\uFF09","children":[]},{"level":3,"title":"django-rest-framework","slug":"django-rest-framework","link":"#django-rest-framework","children":[]}]},{"level":2,"title":"FastAPI","slug":"fastapi","link":"#fastapi","children":[]},{"level":2,"title":"requests","slug":"requests","link":"#requests","children":[]},{"level":2,"title":"aiohttp","slug":"aiohttp","link":"#aiohttp","children":[]},{"level":2,"title":"lxml","slug":"lxml","link":"#lxml","children":[]},{"level":2,"title":"Selenium","slug":"selenium","link":"#selenium","children":[]},{"level":2,"title":"Scrapy","slug":"scrapy","link":"#scrapy","children":[]},{"level":2,"title":"Pytest","slug":"pytest","link":"#pytest","children":[]}],"relativePath":"CS/Py Web.md","lastUpdated":1667217212000}'),p={name:"CS/Py Web.md"},e=l(`<h1 id="py-web" tabindex="-1">Py Web <a class="header-anchor" href="#py-web" aria-hidden="true">#</a></h1><h2 id="pymysql" tabindex="-1">PyMySQL <a class="header-anchor" href="#pymysql" aria-hidden="true">#</a></h2><p>class pymysql.connections.Connection</p><ul><li>host\xA0\u2013 Host where the database server is located</li><li>user\xA0\u2013 Username to log in as</li><li>password\xA0\u2013 Password to use.</li><li>database\xA0\u2013 Database to use, None to not use a particular one.</li><li>port\xA0\u2013 MySQL port to use, default is usually OK. (default: 3306)</li><li>bind_address\xA0\u2013 When the client has multiple network interfaces, specify the interface from which to connect to the host. Argument can be a hostname or an IP address.</li><li>unix_socket\xA0\u2013 Optionally, you can use a unix socket rather than TCP/IP.</li><li>read_timeout\xA0\u2013 The timeout for reading from the connection in seconds (default: None - no timeout)</li><li>write_timeout\xA0\u2013 The timeout for writing to the connection in seconds (default: None - no timeout)</li><li>charset\xA0\u2013 Charset you want to use.</li><li>sql_mode\xA0\u2013 Default SQL_MODE to use.</li><li>read_default_file\xA0\u2013 Specifies my.cnf file to read these parameters from under the [client] section.</li><li>conv\xA0\u2013 Conversion dictionary to use instead of the default one. This is used to provide custom marshalling and unmarshalling of types. See converters.</li><li>use_unicode\xA0\u2013 Whether or not to default to unicode strings. This option defaults to true for Py3k.</li><li>client_flag\xA0\u2013 Custom flags to send to MySQL. Find potential values in constants.CLIENT.</li><li>cursorclass\xA0\u2013 Custom cursor class to use.</li><li>init_command\xA0\u2013 Initial SQL statement to run when connection is established.</li><li>connect_timeout\xA0\u2013 Timeout before throwing an exception when connecting. (default: 10, min: 1, max: 31536000)</li><li>ssl\xA0\u2013 A dict of arguments similar to mysql_ssl_set()\u2019s parameters.</li><li>read_default_group\xA0\u2013 Group to read from in the configuration file.</li><li>compress\xA0\u2013 Not supported</li><li>named_pipe\xA0\u2013 Not supported</li><li>autocommit\xA0\u2013 Autocommit mode. None means use server default. (default: False)</li><li>local_infile\xA0\u2013 Boolean to enable the use of LOAD DATA LOCAL command. (default: False)</li><li>max_allowed_packet\xA0\u2013 Max size of packet sent to server in bytes. (default: 16MB) Only used to limit size of \u201CLOAD LOCAL INFILE\u201D data packet smaller than default (16KB).</li><li>defer_connect\xA0\u2013 Don\u2019t explicitly connect on construction - wait for connect call. (default: False)</li><li>auth_plugin_map\xA0\u2013 A dict of plugin names to a class that processes that plugin.</li><li>server_public_key\xA0\u2013 SHA256 authentication plugin public key value. (default: None)</li><li>db\xA0\u2013 Alias for database. (for compatibility to MySQLdb)</li><li>passwd\xA0\u2013 Alias for password. (for compatibility to MySQLdb)</li><li>binary_prefix\xA0\u2013 Add _binary prefix on bytes and bytearray. (default: False)</li><li>begin() Begin transaction.</li><li>close() Send the quit message and close the socket.</li><li>commit() Commit changes to stable storage.</li><li>cursor(cursor=None) Create a new cursor to execute queries with.</li><li>rollback() Roll back the current transaction.</li><li>select_db(db)</li></ul><p><strong>class pymysql.cursors.Cursor(connection)</strong></p><ul><li>execute(op) \u6267\u884C\u4E00\u4E2A\u6570\u636E\u5E93\u7684\u67E5\u8BE2\u547D\u4EE4</li><li>executemany(query, args) Run several data against one query</li><li>fetchone() \u53D6\u5F97\u7ED3\u679C\u96C6\u7684\u4E0B\u4E00\u884C</li><li>fetchmany(size) \u83B7\u53D6\u7ED3\u679C\u96C6\u7684\u4E0B\u51E0\u884C</li><li>fetchall() \u83B7\u53D6\u7ED3\u679C\u96C6\u4E2D\u7684\u6240\u6709\u884C</li><li>rowcount() \u8FD4\u56DE\u6570\u636E\u6761\u6570\u6216\u5F71\u54CD\u884C\u6570</li><li>close() \u5173\u95ED\u6E38\u6807\u5BF9\u8C61</li></ul><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#676E95;"># \u8FDE\u63A5\u6570\u636E\u5E93</span></span>
<span class="line"><span style="color:#A6ACCD;">db </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> pymysql</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">connect</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#A6ACCD;">port</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">3310</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">woider</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#A6ACCD;">passwd</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3243</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">python</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#A6ACCD;">charset</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">utf8</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u83B7\u53D6\u6E38\u6807</span></span>
<span class="line"><span style="color:#A6ACCD;">cursor </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">cursor</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#676E95;"># \u67E5\u8BE2\u6570\u636E</span></span>
<span class="line"><span style="color:#A6ACCD;">sql </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">SELECT name,saving FROM trade WHERE account = &#39;123&#39; </span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">cursor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">execute</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">sql</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> row </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> cursor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fetchall</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Name:</span><span style="color:#F78C6C;">%s</span><span style="color:#A6ACCD;">\\t</span><span style="color:#C3E88D;">Saving:</span><span style="color:#F78C6C;">%.2f</span><span style="color:#89DDFF;">&quot;</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">%</span><span style="color:#82AAFF;"> row</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u5171\u67E5\u627E\u51FA</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> cursor</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">rowcount</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u6761\u6570\u636E</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u63D2\u5165\u6570\u636E</span></span>
<span class="line"><span style="color:#A6ACCD;">sql </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">INSERT INTO trade (name, account, saving) VALUES ( &#39;</span><span style="color:#F78C6C;">%s</span><span style="color:#C3E88D;">&#39;, &#39;</span><span style="color:#F78C6C;">%s</span><span style="color:#C3E88D;">&#39;, </span><span style="color:#F78C6C;">%.2f</span><span style="color:#C3E88D;"> )</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">data </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u96F7\u519B</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">13512345678</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10000</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">cursor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">execute</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">sql </span><span style="color:#89DDFF;">%</span><span style="color:#82AAFF;"> data</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">commit</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u6210\u529F\u63D2\u5165</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> cursor</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">rowcount</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u6761\u6570\u636E</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u4E8B\u52A1\u5904\u7406</span></span>
<span class="line"><span style="color:#A6ACCD;">sql_1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UPDATE trade SET saving = saving + 1000 WHERE account = &#39;18012345678&#39; </span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">sql_2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UPDATE trade SET expend = expend + 1000 WHERE account = &#39;18012345678&#39; </span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">sql_3 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UPDATE trade SET income = income + 2000 WHERE account = &#39;18012345678&#39; </span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    cursor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">execute</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">sql_1</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;"># \u50A8\u84C4\u589E\u52A01000</span></span>
<span class="line"><span style="color:#A6ACCD;">    cursor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">execute</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">sql_2</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;"># \u652F\u51FA\u589E\u52A01000</span></span>
<span class="line"><span style="color:#A6ACCD;">    cursor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">execute</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">sql_3</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;"># \u6536\u5165\u589E\u52A02000</span></span>
<span class="line"><span style="color:#89DDFF;">except</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> e</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">rollback</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;"># \u4E8B\u52A1\u56DE\u6EDA</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u4E8B\u52A1\u5904\u7406\u5931\u8D25</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> e</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">commit</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;"># \u4E8B\u52A1\u63D0\u4EA4</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u4E8B\u52A1\u5904\u7406\u6210\u529F</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> cursor</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">rowcount</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#676E95;"># \u5173\u95ED\u8FDE\u63A5</span></span>
<span class="line"><span style="color:#A6ACCD;">cursor</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h3 id="mysql-connector" tabindex="-1">mysql.connector <a class="header-anchor" href="#mysql-connector" aria-hidden="true">#</a></h3><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> mysql.connector</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"># \u5EFA\u7ACB\u8FDE\u63A5</span></span>
<span class="line"><span style="color:#A6ACCD;">mydb = mysql.connector.connect(user=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> password=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">password</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">[</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> database=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">test</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">])</span></span>
<span class="line"><span style="color:#A6ACCD;">cursor = mydb.cursor()</span></span>
<span class="line"><span style="color:#A6ACCD;"># \u521B\u5EFAuser\u8868:</span></span>
<span class="line"><span style="color:#A6ACCD;">cursor.execute(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">create table user (id varchar(20) primary key, name varchar(20))</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"># \u63D2\u5165\u591A\u884C\u8BB0\u5F55\uFF0C\u6CE8\u610FMySQL\u7684\u5360\u4F4D\u7B26\u662F%s:</span></span>
<span class="line"><span style="color:#A6ACCD;">sql = </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">INSERT INTO customers (name, address) VALUES (%s, %s)</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">val = [</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Peter</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Lowstreet 4</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Amy</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Apple st 652</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">mycursor.executemany(sql</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> val)</span></span>
<span class="line"><span style="color:#A6ACCD;">print(cursor.rowcount)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"># \u63D0\u4EA4\u4E8B\u52A1:</span></span>
<span class="line"><span style="color:#A6ACCD;">mydb.commit()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"># \u8FD0\u884C\u67E5\u8BE2:</span></span>
<span class="line"><span style="color:#A6ACCD;">cursor.execute(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">select * from user where id = %s</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">values = cursor.fetchall()</span></span>
<span class="line"><span style="color:#A6ACCD;">print(values)</span></span>
<span class="line"><span style="color:#A6ACCD;"># \u5173\u95EDCursor\u548CConnection</span></span>
<span class="line"><span style="color:#A6ACCD;">cursor.close()</span></span>
<span class="line"><span style="color:#A6ACCD;">mydb.close()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="sqlalchemy" tabindex="-1"><a href="https://www.sqlalchemy.org/" target="_blank" rel="noreferrer">SQLAlchemy</a> <a class="header-anchor" href="#sqlalchemy" aria-hidden="true">#</a></h2><p><a href="https://www.osgeo.cn/sqlalchemy/" target="_blank" rel="noreferrer">https://www.osgeo.cn/sqlalchemy/</a></p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#676E95;"># \u5BFC\u5165:</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> sqlalchemy </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> Column</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> String</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> create_engine</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> sqlalchemy</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">orm </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> sessionmaker</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> sqlalchemy</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ext</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">declarative </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> declarative_base</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u521B\u5EFA\u5BF9\u8C61\u7684\u57FA\u7C7B:</span></span>
<span class="line"><span style="color:#A6ACCD;">Base </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">declarative_base</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u5B9A\u4E49User\u5BF9\u8C61:</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">User</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Base</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u8868\u7684\u540D\u5B57:</span></span>
<span class="line"><span style="color:#A6ACCD;">    __tablename__ </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">user</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u8868\u7684\u7ED3\u6784:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">id</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Column</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">),</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">primary_key</span><span style="color:#89DDFF;">=True)</span></span>
<span class="line"><span style="color:#A6ACCD;">    name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Column</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">String</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#676E95;"># \u521D\u59CB\u5316\u6570\u636E\u5E93\u8FDE\u63A5:</span></span>
<span class="line"><span style="color:#A6ACCD;">engine </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">create_engine</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mysql+mysqlconnector://root:password@localhost:3306/test</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u521B\u5EFADBSession\u7C7B\u578B:</span></span>
<span class="line"><span style="color:#A6ACCD;">DBSession </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">sessionmaker</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">bind</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">engine</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u521B\u5EFAsession\u5BF9\u8C61:</span></span>
<span class="line"><span style="color:#A6ACCD;">session </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DBSession</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#676E95;"># \u521B\u5EFA\u65B0User\u5BF9\u8C61:</span></span>
<span class="line"><span style="color:#A6ACCD;">new_user </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">User</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">5</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Bob</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u6DFB\u52A0\u5230session:</span></span>
<span class="line"><span style="color:#A6ACCD;">session</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">new_user</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u63D0\u4EA4\u5373\u4FDD\u5B58\u5230\u6570\u636E\u5E93:</span></span>
<span class="line"><span style="color:#A6ACCD;">session</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">commit</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#676E95;"># \u5173\u95EDsession:</span></span>
<span class="line"><span style="color:#A6ACCD;">session</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="redis" tabindex="-1"><a href="https://github.com/andymccurdy/redis-py" target="_blank" rel="noreferrer">redis</a> <a class="header-anchor" href="#redis" aria-hidden="true">#</a></h2><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> redis</span></span>
<span class="line"><span style="color:#A6ACCD;">redis_conn </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> redis</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Redis</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">127.0.0.1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">port</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> </span><span style="color:#F78C6C;">6379</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">password</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">your pw</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;">#\u8FDE\u63A5\u6C60\u65B9\u5F0F</span></span>
<span class="line"><span style="color:#A6ACCD;">redis_pool </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> redis</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ConnectionPool</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">127.0.0.1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">port</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> </span><span style="color:#F78C6C;">6379</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">password</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">your pw</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">redis_conn </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> redis</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Redis</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">connection_pool</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> redis_pool</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="flask" tabindex="-1"><a href="https://flask.palletsprojects.com/en/2.0.x/" target="_blank" rel="noreferrer">Flask</a> <a class="header-anchor" href="#flask" aria-hidden="true">#</a></h2><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> flask </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> Flask</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">app </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Flask</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">__name__</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">hello_world</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello, World!</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/user/&lt;username&gt;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">methods</span><span style="color:#89DDFF;">=[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">POST</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">])</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">show_user_profile</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">username</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">method</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">POST</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;"># show the user profile for that user</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">User </span><span style="color:#F78C6C;">%s</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">escape</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">username</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        ...</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/post/&lt;int:post_id&gt;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">show_post</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">post_id</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># show the post with the given id, the id is an integer</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Post </span><span style="color:#F78C6C;">%d</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%</span><span style="color:#A6ACCD;"> post_id</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/path/&lt;path:subpath&gt;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">show_subpath</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">subpath</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># show the subpath after /path/</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Subpath </span><span style="color:#F78C6C;">%s</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">escape</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">subpath</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">errorhandler</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">404</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">not_found</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">error</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    resp </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">make_response</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">render_template</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">error.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">),</span><span style="color:#82AAFF;"> </span><span style="color:#F78C6C;">404</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    resp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">headers</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">X-Something</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">A value</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> resp</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> __name__ </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__main__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">debug</span><span style="color:#89DDFF;">=True,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">0.0.0.0</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">port</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">5000</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><ul><li><a href="http://werkzeug.pocoo.org/" target="_blank" rel="noreferrer">Werkzeug</a>: WSGI\u5DE5\u5177\uFF0C\u662F\u4ECB\u4E8E\u5E94\u7528\u548C\u670D\u52A1\u5668\u4E4B\u95F4\u6807\u51C6\u7684\u63A5\u53E3\u5DE5\u5177\u3002</li><li><a href="http://jinja.pocoo.org/" target="_blank" rel="noreferrer">Jinja</a>: \u6A21\u677F\u6E32\u67D3\u5E93\uFF0Cweb \u524D\u7AEF\u9875\u9762\u4E2D\u4F7F\u7528\u7684\u6A21\u677F\u8BED\u8A00\u3002</li><li><a href="https://pypi.org/project/MarkupSafe/" target="_blank" rel="noreferrer">MarkupSafe</a>: \u4E0E Jinja \u914D\u5408\u4F7F\u7528\uFF0C\u5F53\u8868\u5355\u9875\u9762\u8DF3\u8F6C\u65F6\u4F1A\u8FDB\u884C\u9A8C\u8BC1\u4ECE\u800C\u907F\u514D\u906D\u9047\u4E0D\u4FE1\u4EFB\u7684\u8F93\u5165\u5E26\u6765\u7684\u653B\u51FB\u3002</li><li><a href="https://pythonhosted.org/itsdangerous/" target="_blank" rel="noreferrer">ItsDangerous</a>: \u5B89\u5168\u5730\u6CE8\u5165\u6570\u636E\u4EE5\u786E\u4FDD\u6570\u636E\u7684\u5B8C\u6574\u6027\uFF0C\u901A\u5E38\u7528\u4E8E\u4FDD\u62A4 Flask \u7684 session cookie\u3002</li><li><a href="https://click.palletsprojects.com/en/7.x/" target="_blank" rel="noreferrer">Click</a>: \u4E00\u4E2A\u89E3\u6790\u547D\u4EE4\u884C\u7684\u5E94\u7528\uFF0C\u5B83\u652F\u6301\u5728 Flask \u4E2D\u81EA\u5B9A\u4E49\u7BA1\u7406\u547D\u4EE4\u3002</li></ul><p><code>&lt;converter:variable_name&gt;</code>\u4E3B\u8981\u7C7B\u578B</p><table><thead><tr><th>\u7C7B\u578B</th><th>\u542B\u4E49</th></tr></thead><tbody><tr><td>string</td><td>\u9ED8\u8BA4\u7684\u6570\u636E\u7C7B\u578B\uFF0C\u63A5\u53D7\u6CA1\u6709\u4EFB\u4F55\u659C\u6760\u201C/\u201D\u7684\u5B57\u7B26\u4E32</td></tr><tr><td>int</td><td>\u63A5\u53D7\u6574\u578B</td></tr><tr><td>float</td><td>\u63A5\u53D7\u6D6E\u70B9\u7C7B\u578B</td></tr><tr><td>path</td><td>\u548C string \u7C7B\u4F3C\uFF0C\u4F46\u662F\u63A5\u53D7\u659C\u6760\u201C/\u201D</td></tr><tr><td>uuid</td><td>\u63A5\u53D7 uuid \u5B57\u7B26\u4E32</td></tr></tbody></table><p>\u5728\u4F60\u7684\u5305\u4E2D\u6216\u6A21\u5757\u65C1\u8FB9\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3A static \u7684\u6587\u4EF6\u5939 <br> \u7ED9\u9759\u6001\u6587\u4EF6\u751F\u6210 URL \uFF0C\u4F7F\u7528\u7279\u6B8A\u7684 static \u7AEF\u70B9\u540D\uFF1A <br> <code>url_for(&#39;static&#39;, filename=&#39;style.css&#39;)</code> <br> \u8FD9\u4E2A\u6587\u4EF6\u662F\u5E94\u8BE5\u5B58\u50A8\u5728\u6587\u4EF6\u7CFB\u7EDF\u4E0A\u7684 static/style.css \u3002</p><p><strong>\u6E32\u67D3\u6A21\u677F</strong> <br> \u4F7F\u7528\u65B9\u6CD5 render_template()</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/hello/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/hello/&lt;name&gt;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">hello</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">=None):</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;"># \u9ED8\u8BA4 name \u4E3A None</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">render_template</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">name</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;"># \u5C06 name \u53C2\u6570\u4F20\u9012\u5230\u6A21\u677F\u53D8\u91CF\u4E2D</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Flask \u5C06\u4F1A\u5728 templates \u6587\u4EF6\u5939\u4E2D\u5BFB\u627E\u6A21\u677F</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">!DOCTYPE html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">html lang</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">zh-CN</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">link</span></span>
<span class="line"><span style="color:#A6ACCD;">      rel</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stylesheet</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#FFCB6B;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">text/css</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">{{</span><span style="color:#C3E88D;"> url_for(&#39;static&#39;, filename=&#39;hello.css&#39;) </span><span style="color:#F78C6C;">}}</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">/&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">title</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Hello From Flask</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">title</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> name </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">!-- \u5982\u679C name \u4E0D\u4E3A\u7A7A\u5219\u5C06 name \u6E32\u67D3\u51FA\u6765 --</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">h1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Hello </span><span style="color:#89DDFF;">{{</span><span style="color:#A6ACCD;"> name </span><span style="color:#89DDFF;">}}</span><span style="color:#A6ACCD;">!</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">!-- \u5982\u679C name \u4E3A\u7A7A\u5219\u6253\u5370 Hello World! --</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">h1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Hello World!</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> endif </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>\u6587\u4EF6\u4E0A\u4F20 <br> \u5728 HTML \u8868\u5355\u8BBE\u7F6E\u5C5E\u6027 enctype=&quot;multipart/form-data&quot;</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> flask </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> request</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> werkzeug </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> secure_filename  </span><span style="color:#676E95;"># \u83B7\u53D6\u4E0A\u4F20\u6587\u4EF6\u7684\u6587\u4EF6\u540D</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/upload</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">methods</span><span style="color:#89DDFF;">=[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">POST</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">upload_file</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">method</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">POST</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        f </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">files</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">the_file</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">        f</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">save</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/var/www/uploads/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">+</span><span style="color:#82AAFF;"> secure_filename</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">f</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">filename</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">    ...</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>cookies</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> flask </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> make_response</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">index</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u8BFB\u53D6 cookies </span></span>
<span class="line"><span style="color:#A6ACCD;">    username </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">cookies</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u6CE8\u610F\u8FD9\u91CC\u5F15\u7528cookies\u5B57\u5178\u7684\u952E\u503C\u5BF9\u662F\u4F7F\u7528cookies.get(key)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u800C\u4E0D\u662Fcookies[key]\uFF0C\u8FD9\u662F\u9632\u6B62\u8BE5\u5B57\u5178\u4E0D\u5B58\u5728\u65F6\u62A5\u9519&quot;keyerror&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u5B58\u50A8 cookies </span></span>
<span class="line"><span style="color:#A6ACCD;">    resp </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">make_response</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">render_template</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">...</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">    resp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set_cookie</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">the username</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> resp</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>session</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> flask </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> Flask</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> session</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> redirect</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> url_for</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> request</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> markupsafe </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> escape</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">app </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Flask</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">__name__</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u8BBE\u7F6E\u5BC6\u94A5\uFF0C\u4FDD\u8BC1\u4F1A\u8BDD\u5B89\u5168</span></span>
<span class="line"><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">secret_key</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">_5#y2L&quot;F4Q8z</span><span style="color:#A6ACCD;">\\n\\xec</span><span style="color:#C3E88D;">]/</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">index</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> session</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Logged in as </span><span style="color:#F78C6C;">%s</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">escape</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">session</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">You are not logged in</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/login</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">methods</span><span style="color:#89DDFF;">=[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">POST</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">login</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">method</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">POST</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        session</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">form</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">redirect</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">url_for</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">index</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#C3E88D;">        &lt;form method=&quot;post&quot;&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">            &lt;p&gt;&lt;input type=text name=username&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">            &lt;p&gt;&lt;input type=submit value=Login&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">        &lt;/form&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">    </span><span style="color:#89DDFF;">&#39;&#39;&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/logout</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">logout</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u5982\u679C\u7528\u6237\u540D\u5B58\u5728\uFF0C\u5219\u4ECE\u4F1A\u8BDD\u4E2D\u79FB\u9664\u8BE5\u7528\u6237\u540D</span></span>
<span class="line"><span style="color:#A6ACCD;">    session</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pop</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">None)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">redirect</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">url_for</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">index</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>escape()\u53EF\u4EE5\u5728\u4F60\u4E0D\u4F7F\u7528\u6A21\u677F\u5F15\u64CE\u7684\u65F6\u5019\u505A\u8F6C\u4E49 <br> redirect() \u51FD\u6570\u91CD\u5B9A\u5411\u7528\u6237\u5230\u5176\u5B83\u5730\u65B9 <br> abort() \u51FD\u6570\u63D0\u524D\u4E2D\u65AD\u4E00\u4E2A\u8BF7\u6C42\u5E76\u5E26\u6709\u4E00\u4E2A\u9519\u8BEF\u4EE3\u7801\u3002</p><p>api\u793A\u4F8B</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> flask</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> flask </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> request</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">api </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> flask</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Flask</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">__name__</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># CORS</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">api</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">after_request</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">after</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">resp</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># resp = make_response(resp)</span></span>
<span class="line"><span style="color:#A6ACCD;">    resp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">headers</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Access-Control-Allow-Methods</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    resp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">headers</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Access-Control-Allow-Headers</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    resp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">headers</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Access-Control-Allow-Origin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> resp</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># &#39;index&#39;\u662F\u63A5\u53E3\u8DEF\u5F84</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">api</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/index</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">methods</span><span style="color:#89DDFF;">=[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">get</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">index</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    res </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">msg</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u6210\u529F\u8BBF\u95EE\u9996\u9875</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">msg_code</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">200</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># json.dumps \u5E8F\u5217\u5316\u65F6\u5BF9\u4E2D\u6587\u9ED8\u8BA4\u4F7F\u7528\u7684ascii\u7F16\u7801.\u60F3\u8F93\u51FA\u4E2D\u6587\u9700\u8981\u6307\u5B9Aensure_ascii=False</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> json</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">dumps</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">res</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">ensure_ascii</span><span style="color:#89DDFF;">=False)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># post\u5165\u53C2\u8BBF\u95EE\u65B9\u5F0F1\uFF1Aurl\u683C\u5F0F\u53C2\u6570?id=1&amp;name=&#39;2&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">api</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/translate1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">methods</span><span style="color:#89DDFF;">=[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">post</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">translate1</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    param </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> flask</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">args</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> json</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">dumps</span><span style="color:#89DDFF;">({</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">value</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">},</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">ensure_ascii</span><span style="color:#89DDFF;">=False)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># post\u5165\u53C2\u8BBF\u95EE\u65B9\u5F0F2\uFF1Afrom-data\uFF08k-v\uFF09\u683C\u5F0F\u53C2\u6570</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">api</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/translate2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">methods</span><span style="color:#89DDFF;">=[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">post</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">translate2</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    param </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> flask</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">values</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> json</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">dumps</span><span style="color:#89DDFF;">({</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">value</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">},</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">ensure_ascii</span><span style="color:#89DDFF;">=False)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># post\u5165\u53C2\u8BBF\u95EE\u65B9\u5F0F3\uFF1Ajosn\u683C\u5F0F\u53C2\u6570</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">api</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/translate3</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">methods</span><span style="color:#89DDFF;">=[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">POST</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">translate3</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    param </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> flask</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">json</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> json</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">dumps</span><span style="color:#89DDFF;">({</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">value</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">},</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">ensure_ascii</span><span style="color:#89DDFF;">=False)</span></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> __name__ </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__main__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    api</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">port</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">8888</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">debug</span><span style="color:#89DDFF;">=True,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">127.0.0.1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><p><a href="https://flask-cors.readthedocs.io/en/latest/#" target="_blank" rel="noreferrer"><strong>Flask-Cors</strong></a></p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> flask </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> Flask</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> flask_cors </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> CORS</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> cross_origin</span></span>
<span class="line"><span style="color:#A6ACCD;">app </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Flask</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">__name__</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">cors </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CORS</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">app</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="jinja" tabindex="-1"><a href="https://palletsprojects.com/" target="_blank" rel="noreferrer">jinja</a> <a class="header-anchor" href="#jinja" aria-hidden="true">#</a></h2><p>Delimiters\uFF08\u5206\u9694\u7B26\uFF09</p><ul><li><code>{% ... %}</code> \u8BED\u53E5</li><li><code>{ { ... } }</code> \u6253\u5370\u6A21\u677F\u8F93\u51FA\u7684\u8868\u8FBE\u5F0F</li><li><code>{# ... #} </code>\u6CE8\u91CA</li><li><code>... ##</code> \u884C\u8BED\u53E5</li></ul><p>Variables\uFF08\u53D8\u91CF\uFF09</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">{{</span><span style="color:#A6ACCD;"> mydict</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}}</span></span>
<span class="line"><span style="color:#89DDFF;">{{</span><span style="color:#A6ACCD;"> mylist</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}}</span></span>
<span class="line"><span style="color:#89DDFF;">{{</span><span style="color:#A6ACCD;"> mylist</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">myintvar</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}}</span></span>
<span class="line"><span style="color:#89DDFF;">{{</span><span style="color:#A6ACCD;"> myobj</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">somemethod</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>Filter\uFF08\u8FC7\u6EE4\u5668\uFF09</strong> <br> \u7528\u6765\u4FEE\u6539\u53D8\u91CF\uFF0C\u4F7F\u7528\u4E00\u4E2A\u7AD6\u7EBF\u548C\u53D8\u91CF\u76F8\u9694\u3002</p><table><thead><tr><th><a href="https://jinja.palletsprojects.com/en/master/templates/#abs" target="_blank" rel="noreferrer">abs()</a></th><th><a href="https://jinja.palletsprojects.com/en/master/templates/#float" target="_blank" rel="noreferrer">float()</a></th><th><a href="https://jinja.palletsprojects.com/en/master/templates/#lower" target="_blank" rel="noreferrer">lower()</a></th><th><a href="https://jinja.palletsprojects.com/en/master/templates/#round" target="_blank" rel="noreferrer">round()</a></th><th><a href="https://jinja.palletsprojects.com/en/master/templates/#tojson" target="_blank" rel="noreferrer">tojson()</a></th></tr></thead><tbody><tr><td><a href="https://jinja.palletsprojects.com/en/master/templates/#attr" target="_blank" rel="noreferrer">attr()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#forceescape" target="_blank" rel="noreferrer">forceescape()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#map" target="_blank" rel="noreferrer">map()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#safe" target="_blank" rel="noreferrer">safe()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#trim" target="_blank" rel="noreferrer">trim()</a></td></tr><tr><td><a href="https://jinja.palletsprojects.com/en/master/templates/#batch" target="_blank" rel="noreferrer">batch()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#format" target="_blank" rel="noreferrer">format()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#max" target="_blank" rel="noreferrer">max()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#select" target="_blank" rel="noreferrer">select()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#truncate" target="_blank" rel="noreferrer">truncate()</a></td></tr><tr><td><a href="https://jinja.palletsprojects.com/en/master/templates/#capitalize" target="_blank" rel="noreferrer">capitalize()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#groupby" target="_blank" rel="noreferrer">groupby()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#min" target="_blank" rel="noreferrer">min()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#selectattr" target="_blank" rel="noreferrer">selectattr()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#unique" target="_blank" rel="noreferrer">unique()</a></td></tr><tr><td><a href="https://jinja.palletsprojects.com/en/master/templates/#center" target="_blank" rel="noreferrer">center()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#indent" target="_blank" rel="noreferrer">indent()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#pprint" target="_blank" rel="noreferrer">pprint()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#slice" target="_blank" rel="noreferrer">slice()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#upper" target="_blank" rel="noreferrer">upper()</a></td></tr><tr><td><a href="https://jinja.palletsprojects.com/en/master/templates/#default" target="_blank" rel="noreferrer">default()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#int" target="_blank" rel="noreferrer">int()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#random" target="_blank" rel="noreferrer">random()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#sort" target="_blank" rel="noreferrer">sort()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#urlencode" target="_blank" rel="noreferrer">urlencode()</a></td></tr><tr><td><a href="https://jinja.palletsprojects.com/en/master/templates/#dictsort" target="_blank" rel="noreferrer">dictsort()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#join" target="_blank" rel="noreferrer">join()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#reject" target="_blank" rel="noreferrer">reject()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#string" target="_blank" rel="noreferrer">string()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#urlize" target="_blank" rel="noreferrer">urlize()</a></td></tr><tr><td><a href="https://jinja.palletsprojects.com/en/master/templates/#escape" target="_blank" rel="noreferrer">escape()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#last" target="_blank" rel="noreferrer">last()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#rejectattr" target="_blank" rel="noreferrer">rejectattr()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#striptags" target="_blank" rel="noreferrer">striptags()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#wordcount" target="_blank" rel="noreferrer">wordcount()</a></td></tr><tr><td><a href="https://jinja.palletsprojects.com/en/master/templates/#filesizeformat" target="_blank" rel="noreferrer">filesizeformat()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#length" target="_blank" rel="noreferrer">length()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#replace" target="_blank" rel="noreferrer">replace()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#sum" target="_blank" rel="noreferrer">sum()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#wordwrap" target="_blank" rel="noreferrer">wordwrap()</a></td></tr><tr><td><a href="https://jinja.palletsprojects.com/en/master/templates/#first" target="_blank" rel="noreferrer">first()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#list" target="_blank" rel="noreferrer">list()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#reverse" target="_blank" rel="noreferrer">reverse()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#title" target="_blank" rel="noreferrer">title()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#xmlattr" target="_blank" rel="noreferrer">xmlattr()</a></td></tr></tbody></table><p>Tests\uFF08\u6D4B\u8BD5\uFF0C\u5224\u65AD\uFF09</p><table><thead><tr><th><a href="https://jinja.palletsprojects.com/en/master/templates/#boolean" target="_blank" rel="noreferrer">boolean()</a></th><th><a href="https://jinja.palletsprojects.com/en/master/templates/#even" target="_blank" rel="noreferrer">even()</a></th><th><a href="https://jinja.palletsprojects.com/en/master/templates/#integer" target="_blank" rel="noreferrer">integer()</a></th><th><a href="https://jinja.palletsprojects.com/en/master/templates/#ne" target="_blank" rel="noreferrer">ne()</a></th><th><a href="https://jinja.palletsprojects.com/en/master/templates/#string" target="_blank" rel="noreferrer">string()</a></th></tr></thead><tbody><tr><td><a href="https://jinja.palletsprojects.com/en/master/templates/#callable" target="_blank" rel="noreferrer">callable()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#false" target="_blank" rel="noreferrer">false()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#iterable" target="_blank" rel="noreferrer">iterable()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#none" target="_blank" rel="noreferrer">none()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#true" target="_blank" rel="noreferrer">true()</a></td></tr><tr><td><a href="https://jinja.palletsprojects.com/en/master/templates/#defined" target="_blank" rel="noreferrer">defined()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#float" target="_blank" rel="noreferrer">float()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#le" target="_blank" rel="noreferrer">le()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#number" target="_blank" rel="noreferrer">number()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#undefined" target="_blank" rel="noreferrer">undefined()</a></td></tr><tr><td><a href="https://jinja.palletsprojects.com/en/master/templates/#divisibleby" target="_blank" rel="noreferrer">divisibleby()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#ge" target="_blank" rel="noreferrer">ge()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#lower" target="_blank" rel="noreferrer">lower()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#odd" target="_blank" rel="noreferrer">odd()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#upper" target="_blank" rel="noreferrer">upper()</a></td></tr><tr><td><a href="https://jinja.palletsprojects.com/en/master/templates/#eq" target="_blank" rel="noreferrer">eq()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#gt" target="_blank" rel="noreferrer">gt()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#lt" target="_blank" rel="noreferrer">lt()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#sameas" target="_blank" rel="noreferrer">sameas()</a></td><td></td></tr><tr><td><a href="https://jinja.palletsprojects.com/en/master/templates/#escaped" target="_blank" rel="noreferrer">escaped()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#in" target="_blank" rel="noreferrer">in()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#mapping" target="_blank" rel="noreferrer">mapping()</a></td><td><a href="https://jinja.palletsprojects.com/en/master/templates/#sequence" target="_blank" rel="noreferrer">sequence()</a></td><td></td></tr></tbody></table><p>List of Control Structures</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> kenny</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">sick</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#A6ACCD;">    Kenny </span><span style="color:#89DDFF;">is</span><span style="color:#A6ACCD;"> sick</span><span style="color:#89DDFF;">.</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">elif</span><span style="color:#A6ACCD;"> kenny</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">dead</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#A6ACCD;">    You killed Kenny!  You bastard!!!</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#A6ACCD;">    Kenny looks okay --</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> so far</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> endif </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> users </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">li</span><span style="color:#89DDFF;">&gt;{{</span><span style="color:#A6ACCD;"> user</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">username</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">e </span><span style="color:#89DDFF;">}}&lt;/</span><span style="color:#A6ACCD;">li</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">li</span><span style="color:#89DDFF;">&gt;&lt;</span><span style="color:#A6ACCD;">em</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">no users found</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">em</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#A6ACCD;">li</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> endfor </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Whitespace Control\uFF08\u7A7A\u683C\u63A7\u5236\uFF09 <br> \u9ED8\u8BA4</p><ul><li>\u5982\u679C\u672B\u5C3E\u6709\u6362\u884C\u7B26\uFF0C\u5219\u53BB\u9664\uFF1B</li><li>\u5176\u4ED6\u7A7A\u683C\u539F\u6837\u4FDD\u7559\u3002</li></ul><p>\u53BB\u6389Jinja2\u8BED\u53E5\u5360\u636E\u7684\u7A7A\u884C</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">jinja_env</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">trim_blocks</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">True</span></span>
<span class="line"><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">jinja_env</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">lstrip_blocks</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">True</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Escaping\uFF08\u8F6C\u4E49\uFF09</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> raw </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">ul</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> item </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> seq </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">li</span><span style="color:#89DDFF;">&gt;{{</span><span style="color:#A6ACCD;"> item </span><span style="color:#89DDFF;">}}&lt;/</span><span style="color:#A6ACCD;">li</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> endfor </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">ul</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> endraw </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u6A21\u677F\u7EE7\u627F</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> extends </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">base.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> block content </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u5B50\u6A21\u677F\u7684\u5185\u5BB9</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> endblock </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Macros</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> macro </span><span style="color:#82AAFF;">input</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">name</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">text</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">size</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-%}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#82AAFF;">input</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">{{</span><span style="color:#C3E88D;"> type </span><span style="color:#F78C6C;">}}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">{{</span><span style="color:#C3E88D;"> name </span><span style="color:#F78C6C;">}}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> value</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">{{</span></span>
<span class="line"><span style="color:#A6ACCD;">        value</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">e }}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> size=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">{{</span><span style="color:#A6ACCD;"> size </span><span style="color:#89DDFF;">}}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">{%-</span><span style="color:#A6ACCD;"> endmacro </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Call</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> macro </span><span style="color:#82AAFF;">render_dialog</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">title</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dialog</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-%}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">div </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">{{</span><span style="color:#C3E88D;"> class </span><span style="color:#F78C6C;">}}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">h2</span><span style="color:#89DDFF;">&gt;{{</span><span style="color:#A6ACCD;"> title </span><span style="color:#89DDFF;">}}&lt;/</span><span style="color:#A6ACCD;">h2</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">div </span><span style="color:#C792EA;">class</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">contents</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">{{</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">caller</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">{%-</span><span style="color:#A6ACCD;"> endmacro </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> call </span><span style="color:#82AAFF;">render_dialog</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello World</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#A6ACCD;">    This </span><span style="color:#89DDFF;">is</span><span style="color:#A6ACCD;"> a simple dialog rendered by using a macro </span><span style="color:#89DDFF;">and</span></span>
<span class="line"><span style="color:#A6ACCD;">    a call block</span><span style="color:#89DDFF;">.</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> endcall </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Filters</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">filter</span><span style="color:#A6ACCD;"> upper </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#A6ACCD;">    This text becomes uppercase</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> endfilter </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Assignments</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">set</span><span style="color:#A6ACCD;"> navigation = </span><span style="color:#89DDFF;">[(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">index.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Index</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">),</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">about.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">About</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">set</span><span style="color:#A6ACCD;"> key</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> value = </span><span style="color:#82AAFF;">call_something</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">set</span><span style="color:#A6ACCD;"> navigation </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">li</span><span style="color:#89DDFF;">&gt;&lt;</span><span style="color:#A6ACCD;">a href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Index</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">li</span><span style="color:#89DDFF;">&gt;&lt;</span><span style="color:#A6ACCD;">a href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/downloads</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Downloads</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> endset </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Include</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> include </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">header.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> include </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">page_detailed.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">page.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#A6ACCD;">    Body</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> include </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">footer.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Import</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">forms.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> forms </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">dl</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">dt</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Username</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">dt</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">dd</span><span style="color:#89DDFF;">&gt;{{</span><span style="color:#A6ACCD;"> forms</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">input</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}}&lt;/</span><span style="color:#A6ACCD;">dd</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">dt</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Password</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">dt</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">dd</span><span style="color:#89DDFF;">&gt;{{</span><span style="color:#A6ACCD;"> forms</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">input</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">password</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">type</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">password</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}}&lt;/</span><span style="color:#A6ACCD;">dd</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">dl</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">p</span><span style="color:#89DDFF;">&gt;{{</span><span style="color:#A6ACCD;"> forms</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">textarea</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">comment</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}}&lt;/</span><span style="color:#A6ACCD;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Global Functions <br> range([start, ]stop[, step]) <br> lipsum(n=5, html=True, min=20, max=100) <br> \u4E3A\u6A21\u677F\u751F\u6210\u4E00\u4E9Blorem ipsum</p><h2 id="django" tabindex="-1"><a href="https://docs.djangoproject.com/zh-hans/3.0/" target="_blank" rel="noreferrer">Django</a> <a class="header-anchor" href="#django" aria-hidden="true">#</a></h2><p>python -m django --version</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">django</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">admin </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">command</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">manage</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">command</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">py </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">m django </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">command</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">django</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">admin </span><span style="color:#82AAFF;">help</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">command</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    check</span></span>
<span class="line"><span style="color:#A6ACCD;">    compilemessages</span></span>
<span class="line"><span style="color:#A6ACCD;">    createcachetable</span></span>
<span class="line"><span style="color:#A6ACCD;">    dbshell</span></span>
<span class="line"><span style="color:#A6ACCD;">    diffsettings</span></span>
<span class="line"><span style="color:#A6ACCD;">    dumpdata</span></span>
<span class="line"><span style="color:#A6ACCD;">    flush</span></span>
<span class="line"><span style="color:#A6ACCD;">    inspectdb</span></span>
<span class="line"><span style="color:#A6ACCD;">    loaddata</span></span>
<span class="line"><span style="color:#A6ACCD;">    makemessages</span></span>
<span class="line"><span style="color:#A6ACCD;">    makemigrations</span></span>
<span class="line"><span style="color:#A6ACCD;">    migrate</span></span>
<span class="line"><span style="color:#A6ACCD;">    runserver</span></span>
<span class="line"><span style="color:#A6ACCD;">    sendtestemail</span></span>
<span class="line"><span style="color:#A6ACCD;">    shell</span></span>
<span class="line"><span style="color:#A6ACCD;">    showmigrations</span></span>
<span class="line"><span style="color:#A6ACCD;">    sqlflush</span></span>
<span class="line"><span style="color:#A6ACCD;">    sqlmigrate</span></span>
<span class="line"><span style="color:#A6ACCD;">    sqlsequencereset</span></span>
<span class="line"><span style="color:#A6ACCD;">    squashmigrations</span></span>
<span class="line"><span style="color:#A6ACCD;">    startapp</span></span>
<span class="line"><span style="color:#A6ACCD;">    startproject</span></span>
<span class="line"><span style="color:#A6ACCD;">    test</span></span>
<span class="line"><span style="color:#A6ACCD;">    testserver</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>\u521B\u5EFA\u9879\u76EE django-admin startproject</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">myProject</span></span>
<span class="line"><span style="color:#A6ACCD;">\u251C\u2500\u2500 manage</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;">	\u9879\u76EE\u7684\u5165\u53E3\u6587\u4EF6\uFF0C\u7528\u5B83\u6765\u6267\u884C\u4E00\u4E9B\u547D\u4EE4\u8FDB\u884C\u521B\u5EFA\u5E94\u7528\u3001\u542F\u52A8\u9879\u76EE\u3001\u63A7\u5236\u6570\u636E\u8868\u8FC1\u79FB\u7B49\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">\u2514\u2500\u2500 myProject	\u4E3B\u76EE\u5F55\u4E0B\u7684\u540C\u540D\u5B50\u76EE\u5F55\uFF0C\u4E3A\u9879\u76EE\u7684\u6838\u5FC3\u76EE\u5F55\uFF0C\u5305\u542B\u914D\u7F6E\u6587\u4EF6\u548C\u7BA1\u7406\u5E94\u7528\u7684\u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u251C\u2500\u2500 </span><span style="color:#82AAFF;">__init__</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;">	\u7A7A\u6587\u4EF6\uFF0C\u5728\u9700\u8981\u7684\u65F6\u5019\u4F1A\u5F15\u5165\u76EE\u5F55\u4E0B\u7684\u5BF9\u8C61\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u251C\u2500\u2500 settings</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;">	\u914D\u7F6E\u6587\u4EF6\uFF0C\u91CC\u9762\u5305\u542B\u5BF9\u6570\u636E\u5E93\u7684\u8BBE\u7F6E\u9879\u3001CSRF Token \u7684\u8BBE\u7F6E\u9879\u3001\u6A21\u677F\u7684\u8BBE\u7F6E\u9879\u7B49\u5168\u90E8\u8BBE\u7F6E\u3002</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u251C\u2500\u2500 urls</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;">	\u8DEF\u7531\u63A7\u5236\u6587\u4EF6\uFF0C\u5904\u7406\u5BA2\u6237\u7AEF\u8BF7\u6C42\uFF0C\u5206\u53D1\u5230\u5BF9\u5E94\u7684\u89C6\u56FE\u51FD\u6570\u53BB\u5904\u7406</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2514\u2500\u2500 wsgi</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;">	\u5904\u7406\u8BF7\u6C42\u548C\u54CD\u5E94</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u914D\u7F6E <a href="http://settings.py" target="_blank" rel="noreferrer">settings.py</a></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#A6ACCD;">## \u5176\u5B83\u914D\u7F6E\u4EE3\u7801</span><span style="color:#89DDFF;">...</span></span>
<span class="line"><span style="color:#A6ACCD;"># \u6539\u4E3A\u4E2D\u6587</span></span>
<span class="line"><span style="color:#A6ACCD;">LANGUAGE_CODE </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">zh-hans</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"># \u628A\u56FD\u9645\u65F6\u533A\u6539\u4E3A\u4E2D\u56FD\u65F6\u533A\uFF08\u4E1C\u516B\u533A\uFF09</span></span>
<span class="line"><span style="color:#A6ACCD;">TIME_ZONE </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Asia/Shanghai</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">## \u5176\u5B83\u914D\u7F6E\u4EE3\u7801</span><span style="color:#89DDFF;">...</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u521B\u5EFA\u5E94\u7528 python <a href="http://manage.py" target="_blank" rel="noreferrer">manage.py</a> startapp <br> \u5E76\u65B0\u5EFA\u4E00\u4E2A <a href="http://urls.py" target="_blank" rel="noreferrer">urls.py</a></p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">myProject</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u251C\u2500\u2500 manage</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u251C\u2500\u2500 myApp</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u251C\u2500\u2500 admin</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;">	\u63A7\u5236\u540E\u53F0\u7BA1\u7406\u7684\u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u251C\u2500\u2500 apps</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;">	\u7BA1\u7406\u5E94\u7528\u672C\u8EAB\u7684\u6587\u4EF6\uFF0C\u5305\u62EC\u5E94\u7528\u7684\u540D\u5B57\u5982\u4F55\u547D\u540D\uFF0C\u9ED8\u8BA4\u5C31\u662F myApp </span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u251C\u2500\u2500 </span><span style="color:#82AAFF;">__init__</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u251C\u2500\u2500 migrations	\u8BB0\u5F55\u6570\u636E\u5E93\u53D8\u66F4\u4FE1\u606F\u7684\u76EE\u5F55\uFF0CDjango \u4E2D\u81EA\u5E26\u7684\u6570\u636E\u5E93\u7248\u672C\u63A7\u5236\u529F\u80FD\u5C31\u4F53\u73B0\u5728\u8FD9\u4E2A\u76EE\u5F55</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u2502    \u2514\u2500\u2500 </span><span style="color:#82AAFF;">__init__</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u251C\u2500\u2500 models</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;">	\u521B\u5EFA\u6620\u5C04\u7C7B\u7684\u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u251C\u2500\u2500 tests</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;">	\u7F16\u5199\u6D4B\u8BD5\u4EE3\u7801\u7684\u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u251C\u2500\u2500 views</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;">	\u521B\u5EFA\u89C6\u56FE\u51FD\u6570\u7684\u6587\u4EF6\uFF0C\u7528\u4E8E\u5904\u7406\u5BA2\u6237\u7AEF\u53D1\u6765\u7684\u8BF7\u6C42</span></span>
<span class="line"><span style="color:#A6ACCD;">    \u2502   \u2514\u2500\u2500 urls</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;">	\u4E3A\u4E86\u521B\u5EFA URLconf\uFF0C\u81EA\u5EFA\u6587\u4EF6</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u5728 myProject/settings.py \u4FEE\u6539 INSTALLED_APPS \u9879\uFF0C\u6DFB\u52A0\u521B\u5EFA\u7684\u5E94\u7528\u540D\u79F0 myApp\uFF0C <br> <strong>View</strong> <br> \u7F16\u5199\u89C6\u56FE</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#676E95;"># myApp/views.py</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">shortcuts </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> render</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">http </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> HttpResponse</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">index</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">HttpResponse</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hello, world!</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u6620\u5C04\u8DEF\u5F84</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#676E95;"># myApp/urls.py</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">urls </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> path</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> views</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">urlpatterns </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> views</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">index</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">index</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u5728\u6839 URLconf \u6587\u4EF6\u4E2D\u6307\u5B9A\u6211\u4EEC\u521B\u5EFA\u7684myApp.urls</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#676E95;"># myProject/urls.py</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">contrib </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> admin</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">urls </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> path</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">include</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> myApp </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> views  </span><span style="color:#676E95;"># \u5F15\u5165\u89C6\u56FE\u51FD\u6570</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">urlpatterns </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">admin/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> admin</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">site</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">urls</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">myApp/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> include</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">myApp.urls</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)),</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;"># \u65B0\u589E\u8DEF\u7531\u6620\u5C04</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Model \u6A21\u578B</strong></p><ul><li>\u7F16\u8F91 <a href="http://models.py" target="_blank" rel="noreferrer">models.py</a> \u6587\u4EF6\uFF0C\u6539\u53D8\u6A21\u578B\u3002</li><li>python <a href="http://manage.py" target="_blank" rel="noreferrer">manage.py</a> makemigrations \u5BF9\u6A21\u578B\u7684\u66F4\u6539\u521B\u5EFA\u65B0\u7684\u8FC1\u79FB\u8868</li><li>python <a href="http://manage.py" target="_blank" rel="noreferrer">manage.py</a> migrate \u5E94\u7528\u8FC1\u79FB\u5230\u6570\u636E\u5E93\u4E2D</li></ul><p><strong>\u6570\u636E\u8FC1\u79FB\uFF08Migrations\uFF09</strong> <br> \u4FEE\u6539Model\u540E\uFF0C\u9700\u8981\u8FDB\u884C\u6570\u636E\u8FC1\u79FB\u3002\u8FC1\u79FB\u662FDjango\u5BF9\u6A21\u578B\u6240\u505A\u7684\u66F4\u6539\u4F20\u9012\u5230\u6570\u636E\u5E93\u4E2D\u7684\u65B9\u5F0F\u3002 <br> \u6BCF\u5F53\u5BF9\u6570\u636E\u5E93\u8FDB\u884C\u4E86\u66F4\u6539\uFF08\u6DFB\u52A0\u3001\u4FEE\u6539\u3001\u5220\u9664\u7B49\uFF09\u64CD\u4F5C\uFF0C\u90FD\u9700\u8981\u8FDB\u884C\u6570\u636E\u8FC1\u79FB\u3002</p><p>\u6A21\u578B\u662F\u771F\u5B9E\u6570\u636E\u7684\u7B80\u660E\u63CF\u8FF0\uFF0C\u5BF9\u5E94\u6570\u636E\u5E93\u7684\u4E00\u5F20\u8868\uFF0C\u5305\u542B\u4E86\u5B58\u50A8\u7684\u6570\u636E\u6240\u5FC5\u8981\u7684\u5B57\u6BB5\u548C\u884C\u4E3A\u3002</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#676E95;"># myApp/models.py</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">db </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> models</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Book</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">models</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Model</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> models</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">CharField</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">max_length</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">200</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    author </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> models</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">CharField</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">max_length</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    pub_date </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> models</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">DateTimeField</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">date published</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u6A21\u578B\u662F django.db.models.Model \u7C7B\u7684\u5B50\u7C7B\u3002\u6BCF\u4E2A\u5B57\u6BB5\u90FD\u662F Field \u7C7B\u7684\u5B9E\u4F8B\u3002</p><p>\u4E3A\u8FD9\u4E2A\u5E94\u7528\u521B\u5EFA\u6570\u636E\u5E93 schema\uFF08\u751F\u6210 CREATE TABLE \u8BED\u53E5\uFF09\u3002 <br> \u521B\u5EFA\u53EF\u4EE5\u4E0E Book \u5BF9\u8C61\u8FDB\u884C\u4EA4\u4E92\u7684 Python \u6570\u636E\u5E93 API\u3002</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#676E95;"># myProject/settings.py</span></span>
<span class="line"><span style="color:#A6ACCD;">INSTALLED_APPS </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">django.contrib.admin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">django.contrib.auth</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">django.contrib.contenttypes</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">django.contrib.sessions</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">django.contrib.messages</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">django.contrib.staticfiles</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">myApp</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#676E95;"># \u7B49\u540C&#39;myApp.apps.MyappConfig&#39;,</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">python manage</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;"> makemigrations myApp</span></span>
<span class="line"><span style="color:#A6ACCD;">\u68C0\u6D4B\u6A21\u578B\u6587\u4EF6\u7684\u4FEE\u6539\uFF0C\u5E76\u4E14\u628A\u4FEE\u6539\u7684\u90E8\u5206\u50A8\u5B58\u4E3A\u4E00\u6B21\u8FC1\u79FB</span></span>
<span class="line"><span style="color:#A6ACCD;">python manage</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;"> sqlmigrate myApp </span><span style="color:#F78C6C;">0001</span></span>
<span class="line"><span style="color:#A6ACCD;">\u5C55\u793A\u8FC1\u79FB\u547D\u4EE4\u4F1A\u6267\u884C\u81EA\u52A8\u6267\u884C\u7684SQL \u8BED\u53E5</span></span>
<span class="line"><span style="color:#A6ACCD;">\u5728\u6570\u636E\u5E93\u91CC\u521B\u5EFA\u65B0\u5B9A\u4E49\u7684\u6A21\u578B\u7684\u6570\u636E\u8868</span></span>
<span class="line"><span style="color:#A6ACCD;">python manage</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;"> migrate</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>Template \u6A21\u677F</strong> <br> \u5728 myProject/myApp \u91CC\u521B\u5EFA\u4E00\u4E2A templates \u76EE\u5F55\u3002Django \u4F1A\u5728\u8FD9\u4E2A\u76EE\u5F55\u91CC\u67E5\u627E\u6A21\u677F\u6587\u4EF6\u3002 <br> myProject/settings.py \u6587\u4EF6\u4E2D\u7684 TEMPLATES \u914D\u7F6E\u9879\u63CF\u8FF0\u4E86 Django \u5982\u4F55\u8F7D\u5165\u548C\u6E32\u67D3\u6A21\u677F\u3002\u9ED8\u8BA4\u8BBE\u7F6E\u4E86 DjangoTemplates \u540E\u7AEF\uFF0C\u5E76\u8BBE\u7F6E APP_DIRS = True\u3002\u8FD9\u4E00\u9009\u9879\u5C06\u4F1A\u8BA9 DjangoTemplates \u5728\u6BCF\u4E2A INSTALLED_APPS \u6587\u4EF6\u5939\u4E2D\u5BFB\u627E templates \u5B50\u76EE\u5F55\u3002 <br> \u65B0\u5EFA\u6A21\u677F\u6587\u4EF6 myApp/templates/myApp/detail.html\uFF0C</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">!--myApp</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">templates</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">myApp</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">detail</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">html</span><span style="color:#A6ACCD;">--</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">h1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Book List</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">h1</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">table</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">tr</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">td</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">\u4E66\u540D</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">td</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">td</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">\u4F5C\u8005</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">td</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">td</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">\u51FA\u7248\u793E</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">td</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">td</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">\u51FA\u7248\u65F6\u95F4</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">td</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">tr</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> book </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> book_list</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">all</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">tr</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">td</span><span style="color:#89DDFF;">&gt;{{</span><span style="color:#A6ACCD;"> book</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}}&lt;/</span><span style="color:#A6ACCD;">td</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">td</span><span style="color:#89DDFF;">&gt;{{</span><span style="color:#A6ACCD;"> book</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">author</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}}&lt;/</span><span style="color:#A6ACCD;">td</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">td</span><span style="color:#89DDFF;">&gt;{{</span><span style="color:#A6ACCD;"> book</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">pub_house</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}}&lt;/</span><span style="color:#A6ACCD;">td</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">td</span><span style="color:#89DDFF;">&gt;{{</span><span style="color:#A6ACCD;"> book</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">pub_date</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}}&lt;/</span><span style="color:#A6ACCD;">td</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">tr</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{%</span><span style="color:#A6ACCD;"> endfor </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">table</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>\u5BF9\u4E8E <code>{ { book.name } }</code> \uFF0C\u9996\u5148 Django \u5C1D\u8BD5\u5BF9 book \u5BF9\u8C61\u4F7F\u7528\u5B57\u5178\u67E5\u627E\uFF08\u4E5F\u5C31\u662F\u4F7F\u7528 obj.get(str) \u64CD\u4F5C\uFF09\uFF0C\u5982\u679C\u5931\u8D25\u4E86\u5C31\u5C1D\u8BD5\u5C5E\u6027\u67E5\u627E\uFF08\u4E5F\u5C31\u662F obj.str \u64CD\u4F5C\uFF09\uFF0C\u6700\u540E\u5C1D\u8BD5\u5217\u8868\u67E5\u627E\uFF08\u4E5F\u5C31\u662F obj[int] \u64CD\u4F5C\uFF09\u3002 <br> book_list.all \u88AB\u89E3\u91CA\u4E3A Python \u4EE3\u7801 book_list.objects.all()\uFF0C\u5C06\u4F1A\u8FD4\u56DE\u4E00\u4E2A\u53EF\u8FED\u4EE3\u7684 Book \u5BF9\u8C61 <br> \u521B\u5EFA\u89C6\u56FE\u6765\u8FD4\u56DE\u56FE\u4E66\u5217\u8868\uFF1A</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#676E95;"># myApp/views.py</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">shortcuts </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> render</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">http </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> HttpResponse</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> myApp</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">models </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> Book</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">detail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    book_list </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Book</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">objects</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">order_by</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">-pub_date</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)[:</span><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">    context </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">book_list</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> book_list</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">render</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">myApp/detail.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> context</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#676E95;"># \u7C7B\u89C6\u56FE</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DetailView</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">generic</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">DetailView</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    model </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Book</span></span>
<span class="line"><span style="color:#A6ACCD;">    template_name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">myApp/detail.html</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>\u901A\u7528\u89C6\u56FE\uFF1A ListView \u548C DetailView <br> \u89C6\u56FE\u51FD\u6570 detail \u4E2D\uFF0C\u9996\u5148\u5C06\u6570\u636E\u5E93\u7684 Book \u5217\u8868\u6309\u7167 pub_date \u65F6\u95F4\u6765\u6392\u5E8F\uFF0C\u5B58\u50A8\u5230\u53D8\u91CF book_list \u4E2D\u3002 <br> render() \u51FD\u6570\u8FD4\u56DE\u7ED9\u5B9A\u6A21\u677F\u5448\u73B0\u7684\u7ED9\u5B9A\u6587\u672C\u7684\u4E00\u4E2A HttpResponse \u5BF9\u8C61\u3002 <br> context \u4FE1\u606F\u5C06\u4F1A\u8FD4\u56DE\u5230\u6A21\u677F myApp/detail.html <br> \u6DFB\u52A0\u65B0\u89C6\u56FE</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#676E95;"># myApp/urls.py</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">urls </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> path</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> views</span></span>
<span class="line"><span style="color:#A6ACCD;">app_name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">myApp</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;"># URL names\u7684\u547D\u540D\u7A7A\u95F4</span></span>
<span class="line"><span style="color:#A6ACCD;">urlpatterns </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> views</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">index</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">index</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&lt;int:num&gt;/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> views</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">detail</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">detail</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#676E95;">// \u6A21\u677F\u4E2D\u786C\u7F16\u7801\u7684URLs</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">li</span><span style="color:#89DDFF;">&gt;&lt;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/myApp/{{ book.id }}/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">li</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#676E95;">// \u63A8\u8350</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">li</span><span style="color:#89DDFF;">&gt;&lt;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">{% url &#39;myApp:detail&#39; book.id %}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">li</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u542F\u52A8\u9879\u76EE python <a href="http://manage.py" target="_blank" rel="noreferrer">manage.py</a> runserver [127.0.0.1:8000]</p><p><strong>\u540E\u53F0</strong> <br> python <a href="http://manage.py" target="_blank" rel="noreferrer">manage.py</a> createsuperuser \u521B\u5EFA\u7BA1\u7406\u5458\u8D26\u53F7 <br> Username: rain <br> Email address: <a href="mailto:1493636205@qq.com" target="_blank" rel="noreferrer">1493636205@qq.com</a> <br> Password:15675347347 <br> \u5728admin\u4E2D\u6CE8\u518C\u5E94\u7528</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre><code><span class="line"><span style="color:#A6ACCD;"># myApp</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">admin</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py</span></span>
<span class="line"><span style="color:#A6ACCD;">from django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">contrib </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> admin</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> .models import Book</span></span>
<span class="line"><span style="color:#A6ACCD;">admin.site.register(Book)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u5FEB\u6377\u51FD\u6570 <br> django.shortcuts</p><ul><li>render(request, template_name, context=None, content_type=None, status=None, using=None)\uFF1A\u5C06\u7ED9\u5B9A\u7684\u6A21\u677F\u4E0E\u7ED9\u5B9A\u7684\u4E0A\u4E0B\u6587\u5B57\u5178\u7EC4\u5408\u5728\u4E00\u8D77\uFF0C\u5E76\u4EE5\u6E32\u67D3\u7684\u6587\u672C\u8FD4\u56DE\u4E00\u4E2A HttpResponse \u5BF9\u8C61\u3002</li><li>redirect(to, *args, permanent=False, **kwargs)\uFF1A\u5C06\u4E00\u4E2A HttpResponseRedirect \u8FD4\u56DE\u5230\u4F20\u9012\u7684\u53C2\u6570\u7684\u9002\u5F53URL\u3002</li><li>get_object_or_404(klass, *args, **kwargs)\uFF1A\u5728\u7ED9\u5B9A\u7684\u6A21\u578B\u7BA1\u7406\u5668( model manager) \u4E0A\u8C03\u7528 get() \uFF0C\u4F46\u5B83\u4F1A\u5F15\u53D1 Http404 \u800C\u4E0D\u662F\u6A21\u578B\u7684 DoesNotExist \u5F02\u5E38\u3002</li><li>get_list_or_404(klass, *args, **kwargs)\uFF1A\u8FD4\u56DE\u7ED9\u5B9A\u6A21\u578B\u7BA1\u7406\u5668\u4E0A filter() \u8F6C\u6362\u4E3A\u5217\u8868\u7684\u7ED3\u679C\uFF0C\u5982\u679C\u7ED3\u679C\u5217\u8868\u4E3A\u7A7A\uFF0C\u5219\u5F15\u53D1 Http404\u3002</li></ul><h3 id="\u6A21\u578B\uFF08model\uFF09" tabindex="-1">\u6A21\u578B\uFF08Model\uFF09 <a class="header-anchor" href="#\u6A21\u578B\uFF08model\uFF09" aria-hidden="true">#</a></h3><ul><li>\u6BCF\u4E2A\u6A21\u578B\u5728Django\u4E2D\u7684\u5B58\u5728\u5F62\u5F0F\u4E3A\u4E00\u4E2Adjango.db.models.Model\u7684\u5B50\u7C7B</li><li>\u6A21\u578B\u7684\u6BCF\u4E2A\u5B57\u6BB5\uFF08\u5C5E\u6027\uFF09\u4EE3\u8868\u6570\u636E\u8868\u7684\u67D0\u4E00\u5217</li></ul><p>\u5B57\u6BB5\u540D\u4E2D\u4E0D\u80FD\u6709\u4E24\u4E2A\u4EE5\u4E0A\u4E0B\u5212\u7EBF\u5728\u4E00\u8D77\uFF0C\u56E0\u4E3A\u4E24\u4E2A\u4E0B\u5212\u7EBF\u662FDjango\u7684\u67E5\u8BE2\u8BED\u6CD5 <br> \u5B57\u6BB5\u7C7B\u578B</p><table><thead><tr><th>\u7C7B\u578B</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>AutoField</td><td>\u4E00\u4E2A\u81EA\u52A8\u589E\u52A0\u7684\u6574\u6570\u7C7B\u578B\u5B57\u6BB5\uFF0C\u4ECE1\u5F00\u59CB\u8BA1\u6570\u3002 id = models.AutoField(primary_key=True) \u4E00\u4E2A\u6A21\u578B\u4E2D\u53EA\u5141\u8BB8\u6709\u4E00\u4E2A\u81EA\u589E\u5B57\u6BB5\uFF0C\u5E76\u4E14\u8BE5\u5B57\u6BB5\u5FC5\u987B\u4E3A\u4E3B\u952E\uFF01</td></tr><tr><td>BigAutoField</td><td>64\u4F4D\u6574\u6570\u7C7B\u578B\u81EA\u589E\u5B57\u6BB5</td></tr><tr><td>BigIntegerField</td><td>64\u4F4D\u6574\u6570\u5B57\u6BB5</td></tr><tr><td>BinaryField</td><td>\u4E8C\u8FDB\u5236\u6570\u636E\u7C7B\u578B</td></tr><tr><td>BooleanField</td><td>\u5E03\u5C14\u503C\u7C7B\u578B\uFF0C\u9ED8\u8BA4\u503C\u662FNone</td></tr><tr><td>CharField</td><td>\u5B57\u7B26\u4E32\u7C7B\u578B\u3002\u5FC5\u987B\u63A5\u6536\u4E00\u4E2Amax_length\u53C2\u6570</td></tr><tr><td>CommaSeparatedIntegerField</td><td>\u9017\u53F7\u5206\u9694\u7684\u6574\u6570\u7C7B\u578B\u3002\u5FC5\u987B\u63A5\u6536\u4E00\u4E2Amax_length\u53C2\u6570\u3002\u5E38\u7528\u4E8E\u8868\u793A\u8F83\u5927\u7684\u91D1\u989D\u6570\u76EE\uFF0C\u4F8B\u59821,000,000\u5143\u3002</td></tr><tr><td>DateField</td><td>class DateField(auto_now=False, auto_now_add=False, **options) \u65E5\u671F\u7C7B\u578B auto_now\uFF1A\u7528\u4E8E\u4FDD\u5B58\u6700\u540E\u4FEE\u6539\u65F6\u95F4\u3002 auto_now_add\uFF1A\u7528\u4E8E\u4FDD\u5B58\u521B\u5EFA\u65E5\u671F</td></tr><tr><td>DateTimeField</td><td>\u65E5\u671F\u65F6\u95F4\u7C7B\u578B</td></tr><tr><td>DecimalField</td><td>\u56FA\u5B9A\u7CBE\u5EA6\u7684\u5341\u8FDB\u5236\u5C0F\u6570 max_digits\uFF1A\u6700\u5927\u7684\u4F4D\u6570\uFF0C\u5FC5\u987B\u5927\u4E8E\u6216\u7B49\u4E8E\u5C0F\u6570\u70B9\u4F4D\u6570 \u3002 decimal_places\uFF1A\u5C0F\u6570\u70B9\u4F4D\u6570\uFF0C\u7CBE\u5EA6\u3002</td></tr><tr><td>DurationField</td><td>\u6301\u7EED\u65F6\u95F4\u7C7B\u578B\u3002\u5B58\u50A8\u4E00\u5B9A\u671F\u95F4\u7684\u65F6\u95F4\u957F\u5EA6\u3002</td></tr><tr><td>EmailField</td><td>\u90AE\u7BB1\u7C7B\u578B\uFF0C\u9ED8\u8BA4max_length\u6700\u5927\u957F\u5EA6254\u4F4D</td></tr><tr><td>FileField</td><td>class FileField(upload_to=None, max_length=100, **options) \u4E0A\u4F20\u6587\u4EF6\u7C7B\u578B</td></tr><tr><td>FilePathField</td><td>\u6587\u4EF6\u8DEF\u5F84\u7C7B\u578B</td></tr><tr><td>FloatField</td><td>\u6D6E\u70B9\u6570\u7C7B\u578B</td></tr><tr><td>ImageField</td><td>\u56FE\u50CF\u7C7B\u578B</td></tr><tr><td>IntegerField</td><td>\u6574\u6570\u7C7B\u578B</td></tr><tr><td>GenericIPAddressField</td><td>class GenericIPAddressField(protocol=&#39;both&#39;, unpack_ipv4=False, **options)[source] IPV4\u6216\u8005IPV6\u5730\u5740</td></tr><tr><td>NullBooleanField</td><td>\u542BNULL\u7684\u5E03\u5C14\u5B57\u6BB5</td></tr><tr><td>PositiveIntegerField</td><td>\u6B63\u6574\u6570\u5B57\u6BB5\uFF0C0-2147483647\u3002</td></tr><tr><td>PositiveSmallIntegerField</td><td>\u8F83\u5C0F\u7684\u6B63\u6574\u6570\u5B57\u6BB5\uFF0C0-32767\u3002</td></tr><tr><td>SlugField</td><td>\u6807\u7B7E\uFF0C\u7528\u4E8EURLs\uFF0Cmax_length=50\u3002</td></tr><tr><td>SmallIntegerField</td><td>\u5C0F\u6574\u6570\uFF0C-32768-32767\u3002</td></tr><tr><td>TextField</td><td>\u6587\u672C\u5185\u5BB9</td></tr><tr><td>TimeField</td><td>\u65F6\u95F4\u5B57\u6BB5</td></tr><tr><td>URLField</td><td>\u7528\u4E8E\u4FDD\u5B58URL\u5730\u5740\u7684\u5B57\u7B26\u4E32\u7C7B\u578B\uFF0C\u9ED8\u8BA4\u6700\u5927\u957F\u5EA6200\u3002</td></tr><tr><td>UUIDField</td><td>\u7528\u4E8E\u4FDD\u5B58\u901A\u7528\u552F\u4E00\u8BC6\u522B\u7801\uFF08Universally Unique Identifier\uFF09\u7684\u5B57\u6BB5</td></tr></tbody></table><p>\u5173\u7CFB\u7C7B\u578B\u5B57\u6BB5 <br> class ForeignKey(to, on_delete, **options) <br> class ManyToManyField(to, **options) <br> class OneToOneField(to, on_delete, parent_link=False, **options)</p><p>\u5B57\u6BB5\u9009\u9879 <br> null\uFF1A\u5B57\u6BB5\u4E3A\u7A7A\u65F6\uFF0CDjango \u4F1A\u5C06\u6570\u636E\u5E93\u4E2D\u8BE5\u5B57\u6BB5\u8BBE\u7F6E\u4E3A NULL\u3002 <br> blank\uFF1A\u662F\u5426\u5141\u8BB8\u5B57\u6BB5\u4E3A\u7A7A\u3002 <br> choices\uFF1A\u4E00\u7CFB\u5217\u4E8C\u5143\u7EC4\uFF0C\u7528\u4F5C\u6B64\u5B57\u6BB5\u7684\u9009\u9879 <br> default\uFF1A\u5B57\u6BB5\u7684\u9ED8\u8BA4\u503C <br> help_text\uFF1A\u989D\u5916\u7684\u201C\u5E2E\u52A9\u201D\u6587\u672C\uFF0C\u968F\u8868\u5355\u63A7\u4EF6\u4E00\u540C\u663E\u793A <br> primary_key\uFF1A <br> unique\uFF1A <br> db_column\uFF1A\u5B9A\u4E49\u5F53\u524D\u5B57\u6BB5\u5728\u6570\u636E\u8868\u5185\u7684\u5217\u540D\u3002\u5982\u679C\u672A\u6307\u5B9A\uFF0CDjango\u5C06\u4F7F\u7528\u5B57\u6BB5\u540D\u4F5C\u4E3A\u5217\u540D\u3002 <br> db_index\uFF1A\u662F\u5426\u4E3A\u8BE5\u5B57\u6BB5\u521B\u5EFA\u7D22\u5F15\u3002 <br> db_tablespace\uFF1A\u7528\u4E8E\u5B57\u6BB5\u7D22\u5F15\u7684\u6570\u636E\u5E93\u8868\u7A7A\u95F4\u7684\u540D\u5B57\uFF0C\u524D\u63D0\u662F\u5F53\u524D\u5B57\u6BB5\u8BBE\u7F6E\u4E86\u7D22\u5F15 <br> editable\uFF1A\u5982\u679C\u8BBE\u4E3AFalse\uFF0C\u90A3\u4E48\u5F53\u524D\u5B57\u6BB5\u5C06\u4E0D\u4F1A\u5728admin\u540E\u53F0\u6216\u8005\u5176\u5B83\u7684ModelForm\u8868\u5355\u4E2D\u663E\u793A\uFF0C\u540C\u65F6\u8FD8\u4F1A\u88AB\u6A21\u578B\u9A8C\u8BC1\u529F\u80FD\u8DF3\u8FC7\u3002 <br> error_messages\uFF1A\u7528\u4E8E\u81EA\u5B9A\u4E49\u9519\u8BEF\u4FE1\u606F\u3002\u53C2\u6570\u63A5\u6536\u5B57\u5178\u7C7B\u578B\u7684\u503C\u3002\u5B57\u5178\u7684\u952E\u53EF\u4EE5\u662Fnull\u3001 blank\u3001 invalid\u3001 invalid_choice\u3001 unique\u548Cunique_for_date\u5176\u4E2D\u7684\u4E00\u4E2A\u3002 <br> unique_for_date\uFF1A\u65E5\u671F\u552F\u4E00 <br> unique_for_month <br> unique_for_year <br> verbose_name\uFF1A\u4E3A\u5B57\u6BB5\u8BBE\u7F6E\u4E00\u4E2A\u4EBA\u7C7B\u53EF\u8BFB\uFF0C\u66F4\u52A0\u76F4\u89C2\u7684\u522B\u540D\u3002</p><p>\u67E5\u8BE2\u96C6 <br> class QuerySet(model=None, query=None, using=None)</p><table><thead><tr><th>\u65B9\u6CD5\u540D</th><th>\u89E3\u91CA</th></tr></thead><tbody><tr><td>filter()</td><td>\u8FC7\u6EE4\u67E5\u8BE2\u5BF9\u8C61\u3002</td></tr><tr><td>exclude()</td><td>\u6392\u9664\u6EE1\u8DB3\u6761\u4EF6\u7684\u5BF9\u8C61</td></tr><tr><td>annotate()</td><td>\u4F7F\u7528\u805A\u5408\u51FD\u6570</td></tr><tr><td>order_by()</td><td>\u5BF9\u67E5\u8BE2\u96C6\u8FDB\u884C\u6392\u5E8F</td></tr><tr><td>reverse()</td><td>\u53CD\u5411\u6392\u5E8F</td></tr><tr><td>distinct()</td><td>\u5BF9\u67E5\u8BE2\u96C6\u53BB\u91CD</td></tr><tr><td>values()</td><td>\u8FD4\u56DE\u5305\u542B\u5BF9\u8C61\u5177\u4F53\u503C\u7684\u5B57\u5178\u7684QuerySet</td></tr><tr><td>values_list()</td><td>\u4E0Evalues()\u7C7B\u4F3C\uFF0C\u8FD4\u56DE\u5143\u7EC4</td></tr><tr><td>dates()</td><td>\u6839\u636E\u65E5\u671F\u83B7\u53D6\u67E5\u8BE2\u96C6</td></tr><tr><td>datetimes()</td><td>\u6839\u636E\u65F6\u95F4\u83B7\u53D6\u67E5\u8BE2\u96C6</td></tr><tr><td>none()</td><td>\u521B\u5EFA\u7A7A\u7684\u67E5\u8BE2\u96C6</td></tr><tr><td>all()</td><td>\u83B7\u53D6\u6240\u6709\u7684\u5BF9\u8C61</td></tr><tr><td>union()</td><td>\u5E76\u96C6</td></tr><tr><td>intersection()</td><td>\u4EA4\u96C6</td></tr><tr><td>difference()</td><td>\u5DEE\u96C6</td></tr><tr><td>select_related()</td><td>\u9644\u5E26\u67E5\u8BE2\u5173\u8054\u5BF9\u8C61</td></tr><tr><td>prefetch_related()</td><td>\u9884\u5148\u67E5\u8BE2</td></tr><tr><td>extra()</td><td>\u9644\u52A0SQL\u67E5\u8BE2</td></tr><tr><td>defer()</td><td>\u4E0D\u52A0\u8F7D\u6307\u5B9A\u5B57\u6BB5</td></tr><tr><td>only()</td><td>\u53EA\u52A0\u8F7D\u6307\u5B9A\u7684\u5B57\u6BB5</td></tr><tr><td>using()</td><td>\u9009\u62E9\u6570\u636E\u5E93</td></tr><tr><td>select_for_update()</td><td>\u9501\u4F4F\u9009\u62E9\u7684\u5BF9\u8C61\uFF0C\u76F4\u5230\u4E8B\u52A1\u7ED3\u675F\u3002</td></tr><tr><td>raw()</td><td>\u63A5\u6536\u4E00\u4E2A\u539F\u59CB\u7684SQL\u67E5\u8BE2</td></tr></tbody></table><table><thead><tr><th>\u65B9\u6CD5\u540D</th><th>\u89E3\u91CA</th></tr></thead><tbody><tr><td>get()</td><td>\u83B7\u53D6\u5355\u4E2A\u5BF9\u8C61</td></tr><tr><td>create()</td><td>\u521B\u5EFA\u5BF9\u8C61\uFF0C\u65E0\u9700save()</td></tr><tr><td>get_or_create()</td><td>\u67E5\u8BE2\u5BF9\u8C61\uFF0C\u5982\u679C\u6CA1\u6709\u627E\u5230\u5C31\u65B0\u5EFA\u5BF9\u8C61</td></tr><tr><td>update_or_create()</td><td>\u66F4\u65B0\u5BF9\u8C61\uFF0C\u5982\u679C\u6CA1\u6709\u627E\u5230\u5C31\u521B\u5EFA\u5BF9\u8C61</td></tr><tr><td>bulk_create()</td><td>\u6279\u91CF\u521B\u5EFA\u5BF9\u8C61</td></tr><tr><td>count()</td><td>\u7EDF\u8BA1\u5BF9\u8C61\u7684\u4E2A\u6570</td></tr><tr><td>in_bulk()</td><td>\u6839\u636E\u4E3B\u952E\u503C\u7684\u5217\u8868\uFF0C\u6279\u91CF\u8FD4\u56DE\u5BF9\u8C61</td></tr><tr><td>iterator()</td><td>\u83B7\u53D6\u5305\u542B\u5BF9\u8C61\u7684\u8FED\u4EE3\u5668</td></tr><tr><td>latest()</td><td>\u83B7\u53D6\u6700\u8FD1\u7684\u5BF9\u8C61</td></tr><tr><td>earliest()</td><td>\u83B7\u53D6\u6700\u65E9\u7684\u5BF9\u8C61</td></tr><tr><td>first()</td><td>\u83B7\u53D6\u7B2C\u4E00\u4E2A\u5BF9\u8C61</td></tr><tr><td>last()</td><td>\u83B7\u53D6\u6700\u540E\u4E00\u4E2A\u5BF9\u8C61</td></tr><tr><td>aggregate()</td><td>\u805A\u5408\u64CD\u4F5C</td></tr><tr><td>exists()</td><td>\u5224\u65ADqueryset\u4E2D\u662F\u5426\u6709\u5BF9\u8C61</td></tr><tr><td>update()</td><td>\u6279\u91CF\u66F4\u65B0\u5BF9\u8C61</td></tr><tr><td>delete()</td><td>\u6279\u91CF\u5220\u9664\u5BF9\u8C61</td></tr><tr><td>as_manager()</td><td>\u83B7\u53D6\u7BA1\u7406\u5668</td></tr></tbody></table><p>\u67E5\u8BE2\u53C2\u6570</p><table><thead><tr><th>\u5B57\u6BB5\u540D</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>exact</td><td>\u7CBE\u786E\u5339\u914D</td></tr><tr><td>iexact</td><td>\u4E0D\u533A\u5206\u5927\u5C0F\u5199\u7684\u7CBE\u786E\u5339\u914D</td></tr><tr><td>contains</td><td>\u5305\u542B\u5339\u914D</td></tr><tr><td>icontains</td><td>\u4E0D\u533A\u5206\u5927\u5C0F\u5199\u7684\u5305\u542B\u5339\u914D</td></tr><tr><td>in</td><td>\u5728..\u4E4B\u5185\u7684\u5339\u914D</td></tr><tr><td>gt</td><td>\u5927\u4E8E</td></tr><tr><td>gte</td><td>\u5927\u4E8E\u7B49\u4E8E</td></tr><tr><td>lt</td><td>\u5C0F\u4E8E</td></tr><tr><td>lte</td><td>\u5C0F\u4E8E\u7B49\u4E8E</td></tr><tr><td>startswith</td><td>\u4ECE\u5F00\u5934\u5339\u914D</td></tr><tr><td>istartswith</td><td>\u4E0D\u533A\u5206\u5927\u5C0F\u5199\u4ECE\u5F00\u5934\u5339\u914D</td></tr><tr><td>endswith</td><td>\u4ECE\u7ED3\u5C3E\u5904\u5339\u914D</td></tr><tr><td>iendswith</td><td>\u4E0D\u533A\u5206\u5927\u5C0F\u5199\u4ECE\u7ED3\u5C3E\u5904\u5339\u914D</td></tr><tr><td>range</td><td>\u8303\u56F4\u5339\u914D</td></tr><tr><td>date</td><td>\u65E5\u671F\u5339\u914D</td></tr><tr><td>year</td><td>\u5E74\u4EFD</td></tr><tr><td>month</td><td>\u6708\u4EFD</td></tr><tr><td>day</td><td>\u65E5\u671F</td></tr><tr><td>week</td><td>\u7B2C\u51E0\u5468</td></tr><tr><td>week_day</td><td>\u5468\u51E0</td></tr><tr><td>time</td><td>\u65F6\u95F4</td></tr><tr><td>hour</td><td>\u5C0F\u65F6</td></tr><tr><td>minute</td><td>\u5206\u949F</td></tr><tr><td>second</td><td>\u79D2</td></tr><tr><td>isnull</td><td>\u5224\u65AD\u662F\u5426\u4E3A\u7A7A</td></tr><tr><td>regex</td><td>\u533A\u5206\u5927\u5C0F\u5199\u7684\u6B63\u5219\u5339\u914D</td></tr><tr><td>iregex</td><td>\u4E0D\u533A\u5206\u5927\u5C0F\u5199\u7684\u6B63\u5219\u5339\u914D</td></tr></tbody></table><p>\u805A\u5408\u51FD\u6570</p><ul><li>expression\uFF1A\u5F15\u7528\u6A21\u578B\u5B57\u6BB5\u7684\u4E00\u4E2A\u5B57\u7B26\u4E32\uFF0C\u6216\u8005\u4E00\u4E2Aquery expression\u3002</li><li>output_field\uFF1A\u8868\u793A\u8FD4\u56DE\u503C\u7684model field\uFF0C\u4E00\u4E2A\u53EF\u9009\u7684\u53C2\u6570\u3002</li><li>**extra\uFF1A\u5173\u952E\u5B57\u53C2\u6570\u53EF\u4EE5\u7ED9\u805A\u5408\u51FD\u6570\u751F\u6210\u7684SQL\u63D0\u4F9B\u989D\u5916\u7684\u4FE1\u606F\u3002</li><li>Avg\uFF1Aclass Avg(expression, output_field=FloatField(), **extra)</li><li>Count\uFF1Aclass Count(expression, distinct=False, **extra)</li><li>Max\uFF1Aclass Max(expression, output_field=None, **extra)</li><li>Min\uFF1Aclass Min(expression, output_field=None, **extra)</li><li>StdDev\uFF1Aclass StdDev(expression, sample=False, **extra) \u6807\u51C6\u5DEE</li><li>Sum\uFF1Aclass Sum(expression, output_field=None, **extra)</li><li>Variance\uFF1Aclass Variance(expression, sample=False, **extra) \u65B9\u5DEE</li></ul><p>\u89C6\u56FE <br> class HttpRequest <br> \u6BCF\u5F53\u4E00\u4E2A\u7528\u6237\u8BF7\u6C42\u53D1\u9001\u8FC7\u6765\uFF0CDjango\u5C06HTTP\u6570\u636E\u5305\u4E2D\u7684\u76F8\u5173\u5185\u5BB9\uFF0C\u6253\u5305\u6210\u4E3A\u4E00\u4E2AHttpRequest\u5BF9\u8C61\uFF0C\u5E76\u4F20\u9012\u7ED9\u6BCF\u4E2A\u89C6\u56FE\u51FD\u6570\u4F5C\u4E3A\u7B2C\u4E00\u4F4D\u7F6E\u53C2\u6570\uFF0C\u4E5F\u5C31\u662Frequest\uFF0C\u4F9B\u6211\u4EEC\u8C03\u7528 <br> class QueryDict <br> HttpRequest\u5BF9\u8C61\u7684GET\u548CPOST\u5C5E\u6027\u90FD\u662F\u4E00\u4E2Adjango.http.QueryDict <br> class HttpResponse <br> \u6BCF\u4E2A\u89C6\u56FE\u5B9E\u4F8B\u5316\u3001\u586B\u5145\u548C\u8FD4\u56DE\u4E00\u4E2AHttpResponse\u5BF9\u8C61</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#676E95;"># views.py</span></span>
<span class="line"><span style="color:#676E95;"># \u89C6\u56FE\u51FD\u6570</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">article_list</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;&quot;&quot;</span><span style="color:#676E95;">\u5904\u7406GET\u8BF7\u6C42</span><span style="color:#89DDFF;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">method</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        articles </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ArticlePost</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">objects</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">        context </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">articles</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> articles</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">render</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">article/list.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> context</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;"># \u7C7B\u89C6\u56FE</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> django</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">views </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> View</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ArticleListView</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">View</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;&quot;&quot;</span><span style="color:#676E95;">\u5904\u7406GET\u8BF7\u6C42</span><span style="color:#89DDFF;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        articles </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ArticlePost</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">objects</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">all</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">        context </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">articles</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> articles</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">render</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">article/list.html</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> context</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#676E95;"># urls.py</span></span>
<span class="line"><span style="color:#676E95;"># \u89C6\u56FE\u51FD\u6570</span></span>
<span class="line"><span style="color:#A6ACCD;">urlpatterns </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.../&lt;int:id&gt;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> views</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">article_list</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">...</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#676E95;"># \u7C7B\u89C6\u56FE</span></span>
<span class="line"><span style="color:#A6ACCD;">urlpatterns </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">path</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.../&lt;int:pk&gt;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> views</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ArticleListView</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">as_view</span><span style="color:#89DDFF;">(),</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">...</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u6A21\u677F <br> get_template\uFF08template_name\uFF0Cusing = None\uFF09 <br> \u4F7F\u7528\u7ED9\u5B9A\u7684\u540D\u79F0\u67E5\u627E\u548C\u52A0\u8F7D\u6A21\u677F\uFF0C\u5E76\u8FD4\u56DE\u4E00\u4E2ATemplate\u5BF9\u8C61 <br> select_template\uFF08template_name_list\uFF0Cusing = None\uFF09 <br> Template.render(context=None, request=None) <br> \u901A\u8FC7\u7ED9\u5B9A\u7684context\u5BF9\u8BE5\u6A21\u677F\u8FDB\u884C\u6E32\u67D3\u3002 <br> render_to_string(template_name, context=None, request=None, using=None)</p><table><thead><tr><th>\u6807\u7B7E</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>autoescape</td><td>\u81EA\u52A8\u8F6C\u4E49\u5F00\u5173</td></tr><tr><td>block</td><td>\u5757\u5F15\u7528</td></tr><tr><td>comment</td><td>\u6CE8\u91CA</td></tr><tr><td>csrf_token</td><td>CSRF\u4EE4\u724C</td></tr><tr><td>cycle</td><td>\u5FAA\u73AF\u5BF9\u8C61\u7684\u503C</td></tr><tr><td>debug</td><td>\u8C03\u8BD5\u6A21\u5F0F</td></tr><tr><td>extends</td><td>\u7EE7\u627F\u6A21\u7248</td></tr><tr><td>filter</td><td>\u8FC7\u6EE4\u529F\u80FD</td></tr><tr><td>firstof</td><td>\u8F93\u51FA\u7B2C\u4E00\u4E2A\u4E0D\u4E3AFalse\u7684\u53C2\u6570</td></tr><tr><td>for</td><td>\u5FAA\u73AF\u5BF9\u8C61</td></tr><tr><td>for \u2026 empty</td><td>\u5E26empty\u8BF4\u660E\u7684\u5FAA\u73AF</td></tr><tr><td>if</td><td>\u6761\u4EF6\u5224\u65AD</td></tr><tr><td>ifequal</td><td>\u5982\u679C\u7B49\u4E8E</td></tr><tr><td>ifnotequal</td><td>\u5982\u679C\u4E0D\u7B49\u4E8E</td></tr><tr><td>ifchanged</td><td>\u5982\u679C\u6709\u53D8\u5316\uFF0C\u5219..</td></tr><tr><td>include</td><td>\u5BFC\u5165\u5B50\u6A21\u7248\u7684\u5185\u5BB9</td></tr><tr><td>load</td><td>\u52A0\u8F7D\u6807\u7B7E\u548C\u8FC7\u6EE4\u5668</td></tr><tr><td>lorem</td><td>\u751F\u6210\u65E0\u7528\u7684\u5E9F\u8BDD</td></tr><tr><td>now</td><td>\u5F53\u524D\u65F6\u95F4</td></tr><tr><td>regroup</td><td>\u6839\u636E\u5BF9\u8C61\u91CD\u7EC4\u96C6\u5408</td></tr><tr><td>resetcycle</td><td>\u91CD\u7F6E\u5FAA\u73AF</td></tr><tr><td>spaceless</td><td>\u53BB\u9664\u7A7A\u767D</td></tr><tr><td>templatetag</td><td>\u8F6C\u4E49\u6A21\u7248\u6807\u7B7E\u7B26\u53F7</td></tr><tr><td>url</td><td>\u83B7\u53D6url\u5B57\u7B26\u4E32</td></tr><tr><td>verbatim</td><td>\u7981\u7528\u6A21\u7248\u5F15\u64CE</td></tr><tr><td>widthratio</td><td>\u5BBD\u5EA6\u6BD4\u4F8B</td></tr><tr><td>with</td><td>\u4E0A\u4E0B\u6587\u53D8\u91CF\u7BA1\u7406\u5668</td></tr></tbody></table><h3 id="django-rest-framework" tabindex="-1"><a href="https://github.com/encode/django-rest-framework" target="_blank" rel="noreferrer">django-rest-framework</a> <a class="header-anchor" href="#django-rest-framework" aria-hidden="true">#</a></h3><h2 id="fastapi" tabindex="-1"><a href="https://fastapi.tiangolo.com/" target="_blank" rel="noreferrer">FastAPI</a> <a class="header-anchor" href="#fastapi" aria-hidden="true">#</a></h2><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> typing </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> Optional</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> fastapi </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> FastAPI</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> uvicorn</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">app </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FastAPI</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">read_root</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Hello</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">World</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/items/</span><span style="color:#F78C6C;">{item_id}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">read_item</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">item_id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">int</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">q</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> Optional</span><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None):</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">item_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> item_id</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">q</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> q</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> __name__ </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">__main__</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    uvicorn</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">app</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">127.0.0.1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">port</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">5000</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">log_level</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">info</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="requests" tabindex="-1"><a href="https://github.com/psf/requests" target="_blank" rel="noreferrer">requests</a> <a class="header-anchor" href="#requests" aria-hidden="true">#</a></h2><p>**requests.request(method, url, <strong>kwargs)</strong> <br> request(method, url, params=None, data=None, headers=None, cookies=None, files=None, auth=None, timeout=None, allow_redirects=True, proxies=None, hooks=None, stream=None, verify=None, cert=None, json=None) <br> \u53C2\u6570:</p><ul><li>method -- method for the new Request object.</li><li>url\uFF1A\u8BF7\u6C42\u670D\u52A1\u5668\u5730\u5740\uFF1B</li><li>params\uFF1A\u5B57\u5178\u6216\u5B57\u8282\u5E8F\u5217\u5F62\u5F0F\u7684\u8BF7\u6C42\u53C2\u6570\uFF08\u8BF7\u6C42\u5730\u5740\u4E2D\uFF1F\u540E\u9762\u7684\u952E\u503C\u5BF9\u53C2\u6570\uFF09\uFF1B</li><li>data\uFF1A\u5B57\u5178\uFF0C\u5B57\u8282\u5E8F\u6216\u6587\u4EF6\u5BF9\u8C61\uFF1B\u5411\u670D\u52A1\u5668\u63D0\u4EA4\u7684\u6570\u636E\u5185\u5BB9\uFF1B</li><li>json\uFF1Ajson\u683C\u5F0F\u7684\u6570\u636E\uFF08\u4E0Edata=json.dumps(jsBody)\u7B49\u4EF7\uFF09\uFF1B</li><li>headers\uFF1A\u5B57\u5178\uFF0C\u8BF7\u6C42\u5934\u4FE1\u606F\uFF1B</li><li>cookies\uFF1A\u5B57\u5178\u6216CookieJar\uFF0C\u53EA\u4ECEhttp\u4E2D\u89E3\u6790cookie\uFF1B</li><li>auth\uFF1A\u5143\u7EC4\uFF0C\u652F\u6301http\u8BA4\u8BC1\u529F\u80FD\uFF1B</li><li>files\uFF1A\u5B57\u5178\uFF0C\u5411\u670D\u52A1\u5668\u4E0A\u4F20\u6587\u4EF6\uFF1B</li><li>timeout\uFF1A\u8BBE\u5B9A\u8D85\u65F6\u79D2\u6570\uFF1B</li><li>proxies\uFF1A\u5B57\u5178\uFF0C\u8BBE\u5B9A\u8BBF\u95EE\u4EE3\u7406\u670D\u52A1\u5668\uFF1B</li><li>allow_redirects: \u5F00\u5173\uFF0C \u8868\u793A\u662F\u5426\u5141\u8BB8\u5BF9url\u8FDB\u884C\u91CD\u5B9A\u5411\uFF0C \u9ED8\u8BA4\u4E3ATrue\u3002</li><li>stream: \u5F00\u5173\uFF0C \u6307\u662F\u5426\u5BF9\u83B7\u53D6\u5185\u5BB9\u8FDB\u884C\u7ACB\u5373\u4E0B\u8F7D\uFF0C \u9ED8\u8BA4\u4E3ATrue\u3002</li><li>verify\uFF1A\u5F00\u5173\uFF0C \u7528\u4E8E\u8BA4\u8BC1SSL\u8BC1\u4E66\uFF0C \u9ED8\u8BA4\u4E3ATrue\u3002</li><li>cert\uFF1A \u7528\u4E8E\u8BBE\u7F6E\u4FDD\u5B58\u672C\u5730SSL\u8BC1\u4E66\u8DEF\u5F84</li></ul><p>**requests.head(url, <strong>kwargs)</strong> <br> **requests.get(url, params=None, <strong>kwargs)</strong> <br> **requests.post(url, data=None, json=None, <strong>kwargs)</strong> <br> **requests.put(url, data=None, <strong>kwargs)</strong> <br> **requests.patch(url, data=None, <strong>kwargs)</strong> <br> **requests.delete(url, <strong>kwargs)</strong></p><p><strong>class requests.Session</strong></p><p><strong>class\xA0requests.Response</strong></p><ul><li>request <ul><li>body</li><li>method</li><li>headers</li></ul></li><li>url</li><li>text -- Content of the response, in unicode.</li><li>content -- Content of the response, in bytes.</li><li>json(**kwargs) -- Returns the json-encoded content of a respon</li><li>status_code</li><li>raw</li><li>ok</li><li>is_redirect</li><li>headers</li><li>cookies</li><li>history</li></ul><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> json</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> functools </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> wraps</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> requests</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">log</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">func</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">wraps</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">func</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">wrapper</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">args</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">**</span><span style="color:#A6ACCD;">kwargs</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">running</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> func</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">__name__</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            res </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">func</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">*</span><span style="color:#82AAFF;">args</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">**</span><span style="color:#82AAFF;">kwargs</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            request </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> res</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">request</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&#39;send -&gt; </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">method</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;"> </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">res</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">url</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&#39;request headers: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">headers</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&#39;request body: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">body</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&#39;recevie &lt;- </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">res</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">status_code</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&#39;response headers: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">res</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">headers</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">except</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> exception</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">request error: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> exception</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">not</span><span style="color:#A6ACCD;"> res</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ok</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">request failed: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">text</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">headers</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Content-Type</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">].</span><span style="color:#82AAFF;">find</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">response result:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">                      json</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">dumps</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">res</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">json</span><span style="color:#89DDFF;">(),</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">indent</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">ensure_ascii</span><span style="color:#89DDFF;">=False))</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">response result:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">text</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> res</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> wrapper</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ApiGateway</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">object</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">__init__</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">path_prefix</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">host</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> host</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">path_prefix</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> path_prefix</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Session</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;"># self.session.proxies = {&quot;https&quot;: None, &quot;http&quot;: None}</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">verify</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">False</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">update_headers</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#FFCB6B;">property</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">context_path</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">host</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">path_prefix</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">update_headers</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">headers</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">_request</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">method</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">path</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">**</span><span style="color:#A6ACCD;">kwargs</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">hasattr</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> method</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">raise</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ValueError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;don&#39;t have </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">method</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        request_method </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getattr</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> method</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">request_method</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">context_path</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">+</span><span style="color:#82AAFF;"> path</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">**</span><span style="color:#82AAFF;">kwargs</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">_get</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">path</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">**</span><span style="color:#A6ACCD;">kwargs</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">context_path</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">+</span><span style="color:#82AAFF;"> path</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">**</span><span style="color:#82AAFF;">kwargs</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">_post</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">path</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">=None,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">json</span><span style="color:#89DDFF;">=None,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">**</span><span style="color:#A6ACCD;">kwargs</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">context_path</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">+</span><span style="color:#82AAFF;"> path</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> data</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> json</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">                                          </span><span style="color:#89DDFF;">**</span><span style="color:#82AAFF;">kwargs</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">_put</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">path</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">**</span><span style="color:#A6ACCD;">kwargs</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">put</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">context_path</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">+</span><span style="color:#82AAFF;"> path</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> data</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">                                         </span><span style="color:#89DDFF;">**</span><span style="color:#82AAFF;">kwargs</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">_delete</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">path</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">**</span><span style="color:#A6ACCD;">kwargs</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">delete</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">context_path</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">+</span><span style="color:#82AAFF;"> path</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">**</span><span style="color:#82AAFF;">kwargs</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">__del__</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">CloudJson</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">ApiGateway</span><span style="color:#89DDFF;">):</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">__init__</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">security_key</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">super</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">__init__</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://json.extendsclass.com</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> security_key</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">headers</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">update</span><span style="color:#89DDFF;">({</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Security-key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> security_key</span><span style="color:#89DDFF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">log</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">create_bin</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">api_key</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">private</span><span style="color:#89DDFF;">=False):</span></span>
<span class="line"><span style="color:#A6ACCD;">        headers </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Api-key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> api_key</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Private</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">true</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> private </span><span style="color:#89DDFF;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">false</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">_post</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&#39;/bin&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">data</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">encode</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">),</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">headers</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">headers</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">log</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">obtain</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">_get</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&#39;/bin/</span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">id</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">log</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">update</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">_put</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&#39;/bin/</span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">id</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">data</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">encode</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">log</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">partially_update</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        headers </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Content-type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">application/json-patch+json</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">_request</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">PATCH</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">                      </span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&#39;/bin/</span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">id</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">                      </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">data</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">encode</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#82AAFF;">                      </span><span style="color:#A6ACCD;">headers</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">headers</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">log</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">delete</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">_delete</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&#39;/bin/</span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">id</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">log</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">bins</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">api_key</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        headers </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Api-key</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> api_key</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">_get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/bins</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">headers</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">headers</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#676E95;"># \u4E0B\u8F7D\u5927\u6587\u4EF6\uFF0C\u4E00\u6B21\u6027\u52A0\u8F7D\u53EF\u80FD\u4F1A\u5BFC\u81F4\u5185\u5B58\u7206\u6EE1\uFF0C\u53EF\u91C7\u53D6\u5206\u5757\u8BFB\u5199\u7684\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">download_file</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    req </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://www.test.com/test.jpg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">stream</span><span style="color:#89DDFF;">=True)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">with</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">open</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">r</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">c:</span><span style="color:#A6ACCD;">\\t</span><span style="color:#C3E88D;">est.jpg</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">wb</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> f</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> chunk </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> req</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">iter_content</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">chunk_size</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1024</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;"># \u6BCF\u6B21\u52A0\u8F7D1024\u5B57\u8282</span></span>
<span class="line"><span style="color:#A6ACCD;">            f</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">write</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">chunk</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> __name__ </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__main__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">id</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">659e99c04915</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">7816b5a9-451c-11ec-b95c-0242ac110002</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    cj </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CloudJson</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">ec</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    r </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> cj</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">obtain</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">id</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># cj.bins(key)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br></div></div><h2 id="aiohttp" tabindex="-1"><a href="https://github.com/aio-libs/aiohttp" target="_blank" rel="noreferrer">aiohttp</a> <a class="header-anchor" href="#aiohttp" aria-hidden="true">#</a></h2><p>class aiohttp.ClientSession(base_url=None, *, connector=None, cookies=None, headers=None, skip_auto_headers=None, auth=None, json_serialize=json.dumps, version=aiohttp.HttpVersion11, cookie_jar=None, read_timeout=None, conn_timeout=None, timeout=sentinel, raise_for_status=False, connector_owner=True, auto_decompress=True, read_bufsize=2 ** 16, requote_redirect_url=False, trust_env=False, trace_configs=None)</p><p>coroutine async-with request(method, url, *, params=None, data=None, json=None, cookies=None, headers=None, skip_auto_headers=None, auth=None, allow_redirects=True, max_redirects=10, compress=None, chunked=None, expect100=False, raise_for_status=None, read_until_eof=True, read_bufsize=None, proxy=None, proxy_auth=None, timeout=sentinel, ssl=None, verify_ssl=None, fingerprint=None, ssl_context=None, proxy_headers=None)</p><p>coroutine async-with ws_connect(url, *, method=&#39;GET&#39;, protocols=(), timeout=10.0, receive_timeout=None, auth=None, autoclose=True, autoping=True, heartbeat=None, origin=None, params=None, headers=None, proxy=None, proxy_auth=None, ssl=None, verify_ssl=None, fingerprint=None, ssl_context=None, proxy_headers=None, compress=0, max_msg_size=4194304)</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">with</span><span style="color:#A6ACCD;"> aiohttp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ClientSession</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> session</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        headers</span><span style="color:#89DDFF;">={</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Accept</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">application/json</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">with</span><span style="color:#A6ACCD;"> session</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://httpbin.org/get</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">headers</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">headers</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> resp</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">resp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">status</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">await</span><span style="color:#82AAFF;"> resp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">text</span><span style="color:#89DDFF;">())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">asyncio</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">with</span><span style="color:#A6ACCD;"> session</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ws_connect</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://example.org/ws</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> ws</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> msg </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> ws</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> aiohttp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">WSMsgType</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">TEXT</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">data</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">close cmd</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> ws</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">break</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> ws</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send_str</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">msg</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">data</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">+</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/answer</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">elif</span><span style="color:#A6ACCD;"> msg</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> aiohttp</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">WSMsgType</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ERROR</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">break</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ApiGateway</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">object</span><span style="color:#89DDFF;">):</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">__init__</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">path_prefix</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">host</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> host</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">path_prefix</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> path_prefix</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> aiohttp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ClientSession</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">headers</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#FFCB6B;">property</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">context_path</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">host</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">path_prefix</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">_get</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">path</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">**</span><span style="color:#A6ACCD;">kwargs</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">context_path</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">+</span><span style="color:#82AAFF;"> path</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">                                               </span><span style="color:#89DDFF;">**</span><span style="color:#82AAFF;">kwargs</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">_post</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">path</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">=None,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">**</span><span style="color:#A6ACCD;">kwargs</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">post</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">context_path</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">+</span><span style="color:#82AAFF;"> path</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">                                                </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">data</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">                                                </span><span style="color:#89DDFF;">**</span><span style="color:#82AAFF;">kwargs</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">_put</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">path</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">**</span><span style="color:#A6ACCD;">kwargs</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">put</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">context_path</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">+</span><span style="color:#82AAFF;"> path</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">                                               </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">data</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">                                               </span><span style="color:#89DDFF;">**</span><span style="color:#82AAFF;">kwargs</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">_delete</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">path</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">**</span><span style="color:#A6ACCD;">kwargs</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">delete</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">context_path</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">+</span><span style="color:#82AAFF;"> path</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">                                                  </span><span style="color:#89DDFF;">**</span><span style="color:#82AAFF;">kwargs</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">session</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    api </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ApiGateway</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://httpbin.org</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> api</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">_post</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/post</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">json</span><span style="color:#89DDFF;">={</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">value</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#A6ACCD;">    res </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> api</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">json</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">await</span><span style="color:#A6ACCD;"> api</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">json</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">dumps</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">res</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">indent</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">))</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">asyncio</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">run</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">())</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h2 id="lxml" tabindex="-1"><a href="https://lxml.de/" target="_blank" rel="noreferrer">lxml</a> <a class="header-anchor" href="#lxml" aria-hidden="true">#</a></h2><p>Class _Element(\u9876\u7EA7\u57FA\u7C7B)</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#676E95;"># =====================================</span></span>
<span class="line"><span style="color:#676E95;"># Properties(\u5C5E\u6027)</span></span>
<span class="line"><span style="color:#676E95;"># =====================================</span></span>
<span class="line"><span style="color:#A6ACCD;">attrib  </span><span style="color:#676E95;"># \u5143\u7D20\u5C5E\u6027\u5B57\u5178</span></span>
<span class="line"><span style="color:#A6ACCD;">base  </span><span style="color:#676E95;"># \u539F\u59CB\u6587\u6863\u7684url\u6216None</span></span>
<span class="line"><span style="color:#A6ACCD;">sourceline  </span><span style="color:#676E95;"># \u539F\u59CB\u884C\u6570\u6216None</span></span>
<span class="line"><span style="color:#A6ACCD;">tag  </span><span style="color:#676E95;"># tag\u540D</span></span>
<span class="line"><span style="color:#A6ACCD;">tail  </span><span style="color:#676E95;"># \u5C3E\u5DF4\u6587\u672C(\u5B58\u5728\u4E8E\u5144\u5F1F\u8282\u70B9\u95F4\uFF0C\u5C5E\u4E8E\u7236\u8282\u70B9\u7684\u6587\u672C\u5185\u5BB9)</span></span>
<span class="line"><span style="color:#A6ACCD;">text  </span><span style="color:#676E95;"># \u4F4D\u4E8E\u7B2C\u4E00\u4E2A\u5B50\u6807\u7B7E\u4E4B\u524D\u7684\u5B50\u6587\u672C</span></span>
<span class="line"><span style="color:#A6ACCD;">prefix  </span><span style="color:#676E95;"># \u547D\u540D\u7A7A\u95F4\u524D\u7F00(XML)(\u8BE6\u89E3\u89C1\u5E95\u90E8\u9644\u5F55)</span></span>
<span class="line"><span style="color:#A6ACCD;">nsmap  </span><span style="color:#676E95;"># \u547D\u540D\u7A7A\u95F4\u4E0EURL\u6620\u5C04\u5173\u7CFB(XML)(\u8BE6\u89E3\u89C1\u5E95\u90E8\u9644\u5F55)</span></span>
<span class="line"><span style="color:#676E95;"># =====================================</span></span>
<span class="line"><span style="color:#676E95;"># Instance Methods(\u5B9E\u4F8B\u65B9\u6CD5)(\u5E38\u7528)</span></span>
<span class="line"><span style="color:#676E95;"># =====================================</span></span>
<span class="line"><span style="color:#82AAFF;">xpath</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> _path</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">namespaces</span><span style="color:#89DDFF;">=None,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">extensions</span><span style="color:#89DDFF;">=None,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">smart_strings</span><span style="color:#89DDFF;">=True,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">**</span><span style="color:#82AAFF;">_variables</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u901A\u8FC7xpath\u8868\u8FBE\u5F0F\u67E5\u627E\u6307\u5B9A\u8282\u70B9\u5143\u7D20\uFF0C\u8FD4\u56DE\u6307\u5B9A\u8282\u70B9\u5143\u7D20\u5217\u8868\u6216None</span></span>
<span class="line"><span style="color:#82AAFF;">getparent</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u67E5\u627E\u7236\u8282\u70B9\uFF0C\u8FD4\u56DE\u627E\u5230\u7684\u7236\u8282\u70B9\u5BF9\u8C61\u6216None</span></span>
<span class="line"><span style="color:#82AAFF;">getprevious</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u67E5\u627E\u524D\u4E00\u4E2A\u76F8\u90BB\u7684\u5144\u5F1F\u8282\u70B9\u5143\u7D20\uFF0C\u8FD4\u56DE\u627E\u5230\u7684\u8282\u70B9\u5BF9\u8C61\u6216None</span></span>
<span class="line"><span style="color:#82AAFF;">getnext</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u67E5\u627E\u540E\u4E00\u4E2A\u76F8\u90BB\u7684\u5144\u5F1F\u8282\u70B9\u5BF9\u8C61\uFF0C\u8FD4\u56DE\u627E\u5230\u7684\u8282\u70B9\u5BF9\u8C61\u6216None</span></span>
<span class="line"><span style="color:#82AAFF;">getchildren</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u8FD4\u56DE\u6240\u6709\u76F4\u5C5E\u7684\u5B50\u8282\u70B9\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#82AAFF;">getroottree</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u8FD4\u56DE\u6240\u5728\u6587\u6863\u7684\u6839\u8282\u70B9\u6811</span></span>
<span class="line"><span style="color:#82AAFF;">find</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> path</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">namespaces</span><span style="color:#89DDFF;">=None)</span></span>
<span class="line"><span style="color:#676E95;"># \u6839\u636E\u6807\u7B7E\u540D\u6216\u8DEF\u5F84\uFF0C\u8FD4\u56DE\u7B2C\u4E00\u4E2A\u5339\u914D\u5230\u7684\u5B50\u8282\u70B9\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#82AAFF;">findall</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> path</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">namespaces</span><span style="color:#89DDFF;">=None)</span></span>
<span class="line"><span style="color:#676E95;"># \u6839\u636E\u6807\u7B7E\u540D\u6216\u8DEF\u5F84\uFF0C\u8FD4\u56DE\u5168\u90E8\u7B26\u5408\u8981\u6C42\u7684\u5B50\u8282\u70B9\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#82AAFF;">findtext</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> path</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">default</span><span style="color:#89DDFF;">=None,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">namespaces</span><span style="color:#89DDFF;">=None)</span></span>
<span class="line"><span style="color:#676E95;"># \u6839\u636E\u6807\u7B7E\u540D\u6216\u8DEF\u5F84\uFF0C\u8FD4\u56DE\u7B2C\u4E00\u4E2A\u5339\u914D\u5230\u7684\u5B50\u8282\u70B9\u5BF9\u8C61\u7684text\u6587\u672C</span></span>
<span class="line"><span style="color:#82AAFF;">clear</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u91CD\u7F6E\u8282\u70B9\u5BF9\u8C61\uFF0C\u6E05\u9664\u6240\u6709\u5B50\u8282\u70B9\u5BF9\u8C61\uFF0C\u4EE5\u53CA\u6240\u6709\u7684text\u3001tail\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> key</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">default</span><span style="color:#89DDFF;">=None)</span></span>
<span class="line"><span style="color:#676E95;"># \u8FD4\u56DE\u8282\u70B9\u5C5E\u6027key\u5BF9\u5E94\u7684\u503C</span></span>
<span class="line"><span style="color:#82AAFF;">items</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u4EE5\u4EFB\u610F\u987A\u5E8F\u8FD4\u56DE\u8282\u70B9\u5C5E\u6027\u952E\u548C\u503C</span></span>
<span class="line"><span style="color:#82AAFF;">keys</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u4EE5\u4EFB\u610F\u987A\u5E8F\u8FD4\u56DE\u5305\u542B\u8282\u70B9\u5168\u90E8\u5C5E\u6027\u540D\u7684\u5217\u8868</span></span>
<span class="line"><span style="color:#82AAFF;">values</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u4EE5\u4EFB\u610F\u987A\u5E8F\u8FD4\u56DE\u5305\u542B\u8282\u70B9\u5168\u90E8\u5C5E\u6027\u503C\u7684\u5217\u8868</span></span>
<span class="line"><span style="color:#FFCB6B;">set</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> key</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> value</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u8BBE\u7F6E\u8282\u70B9\u5C5E\u6027</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p>lxml.etree</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#FFCB6B;">object</span><span style="color:#A6ACCD;"> --</span><span style="color:#89DDFF;">-+</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">|</span></span>
<span class="line"><span style="color:#A6ACCD;">   _Element --</span><span style="color:#89DDFF;">-+</span></span>
<span class="line"><span style="color:#A6ACCD;">               </span><span style="color:#89DDFF;">|</span></span>
<span class="line"><span style="color:#A6ACCD;">              ElementBase</span></span>
<span class="line"><span style="color:#676E95;"># =====================================</span></span>
<span class="line"><span style="color:#82AAFF;">Functions</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">\u51FD\u6570</span><span style="color:#89DDFF;">)(</span><span style="color:#82AAFF;">\u5E38\u7528</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># =====================================</span></span>
<span class="line"><span style="color:#82AAFF;">HTML</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">text</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">parser</span><span style="color:#89DDFF;">=None,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">base_url</span><span style="color:#89DDFF;">=None)</span></span>
<span class="line"><span style="color:#676E95;"># \u5C06\u5B57\u7B26\u578BHTML\u6587\u6863\u5185\u5BB9\u8F6C\u6362\u4E3A\u8282\u70B9\u6811\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#82AAFF;">fromstring</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">text</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">parser</span><span style="color:#89DDFF;">=None,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">base_url</span><span style="color:#89DDFF;">=None)</span></span>
<span class="line"><span style="color:#676E95;"># \u5C06\u5B57\u7B26\u578BXML\u6587\u6863\u6216\u6587\u6863\u7247\u6BB5\u8F6C\u6362\u95EE\u8282\u70B9\u6811\u5BF9\u8C61</span></span>
<span class="line"><span style="color:#82AAFF;">tostring</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">element_or_tree</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">encoding</span><span style="color:#89DDFF;">=None,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">method</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">xml</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">xml_declaration</span><span style="color:#89DDFF;">=None,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">pretty_print</span><span style="color:#89DDFF;">=False,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">with_tail</span><span style="color:#89DDFF;">=True,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">standalone</span><span style="color:#89DDFF;">=None,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">doctype</span><span style="color:#89DDFF;">=None,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">exclusive</span><span style="color:#89DDFF;">=False,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">with_commments</span><span style="color:#89DDFF;">=True,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">inclusive_ns_prefixes</span><span style="color:#89DDFF;">=None)</span></span>
<span class="line"><span style="color:#676E95;"># \u5C06\u8282\u70B9\u6811\u5BF9\u8C61\u5E8F\u5217\u5316\u4E3A\u7F16\u7801\u7684\u5B57\u7B26\u578B</span></span>
<span class="line"><span style="color:#82AAFF;">tounicode</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">element_or_tree</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">method</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">xml</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">pretty_print</span><span style="color:#89DDFF;">=False,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">with_tail</span><span style="color:#89DDFF;">=True,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">doctype</span><span style="color:#89DDFF;">=None)</span></span>
<span class="line"><span style="color:#676E95;"># \u5C06\u8282\u70B9\u6811\u5BF9\u8C61\u5E8F\u5217\u5316\u4E3AUnicode\u578B</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>lxml.html</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#FFCB6B;">object</span><span style="color:#A6ACCD;"> --</span><span style="color:#89DDFF;">-+</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">etree</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_Element</span><span style="color:#A6ACCD;"> --</span><span style="color:#89DDFF;">-+</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    etree</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ElementBase</span><span style="color:#A6ACCD;">--</span><span style="color:#89DDFF;">-+</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">         </span><span style="color:#FFCB6B;">object</span><span style="color:#A6ACCD;"> --</span><span style="color:#89DDFF;">-+</span><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">                   </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">|</span></span>
<span class="line"><span style="color:#A6ACCD;">           HtmlMixin --</span><span style="color:#89DDFF;">-+</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">|</span></span>
<span class="line"><span style="color:#A6ACCD;">                       HtmlElement</span></span>
<span class="line"><span style="color:#676E95;"># =====================================</span></span>
<span class="line"><span style="color:#82AAFF;">Functions</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">\u51FD\u6570</span><span style="color:#89DDFF;">)(</span><span style="color:#82AAFF;">\u5E38\u7528</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># =====================================</span></span>
<span class="line"><span style="color:#82AAFF;">fromstring</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">html</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">base_url</span><span style="color:#89DDFF;">=None,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">parser</span><span style="color:#89DDFF;">=None,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">**</span><span style="color:#82AAFF;">kwargs</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u5C06\u5B57\u7B26\u578Bhtml\u6587\u6863\u8F6C\u6362\u4E3A\u8282\u70B9\u6811\u6216\u6587\u6863\u6811</span></span>
<span class="line"><span style="color:#82AAFF;">tostring</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">doc</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">pretty_print</span><span style="color:#89DDFF;">=False,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">include_meta_content_type</span><span style="color:#89DDFF;">=False,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">encoding</span><span style="color:#89DDFF;">=None,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">method</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">with_tail</span><span style="color:#89DDFF;">=True,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">doctype</span><span style="color:#89DDFF;">=None)</span></span>
<span class="line"><span style="color:#676E95;"># \u5C06\u8282\u70B9\u6811\u6216\u6587\u6863\u6811\u5E8F\u5217\u5316\u4E3A\u5B57\u7B26\u578B</span></span>
<span class="line"><span style="color:#676E95;">######################################</span></span>
<span class="line"><span style="color:#89DDFF;">**</span><span style="color:#A6ACCD;">Class HtmlMixin</span><span style="color:#89DDFF;">**</span></span>
<span class="line"><span style="color:#FFCB6B;">object</span><span style="color:#A6ACCD;"> --</span><span style="color:#89DDFF;">-+</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">|</span></span>
<span class="line"><span style="color:#A6ACCD;">          HtmlMixin</span></span>
<span class="line"><span style="color:#676E95;"># =====================================</span></span>
<span class="line"><span style="color:#82AAFF;">Properties</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">\u5C5E\u6027</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># =====================================</span></span>
<span class="line"><span style="color:#A6ACCD;">base_url  </span><span style="color:#676E95;"># \u6587\u6863url</span></span>
<span class="line"><span style="color:#A6ACCD;">head  </span><span style="color:#676E95;"># &lt;head&gt;\u6807\u7B7E\u90E8\u5206</span></span>
<span class="line"><span style="color:#A6ACCD;">body  </span><span style="color:#676E95;"># &lt;body&gt;\u6807\u7B7E\u90E8\u5206</span></span>
<span class="line"><span style="color:#A6ACCD;">forms  </span><span style="color:#676E95;"># \u8FD4\u56DE\u5168\u90E8form\u5217\u8868</span></span>
<span class="line"><span style="color:#A6ACCD;">label  </span><span style="color:#676E95;"># \u5143\u7D20\u7684label\u6807\u7B7E</span></span>
<span class="line"><span style="color:#A6ACCD;">classes  </span><span style="color:#676E95;"># class\u5C5E\u6027\u503C\u7684\u96C6\u5408</span></span>
<span class="line"><span style="color:#676E95;"># =====================================</span></span>
<span class="line"><span style="color:#A6ACCD;">Instance </span><span style="color:#82AAFF;">Methods</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">\u5B9E\u4F8B\u65B9\u6CD5</span><span style="color:#89DDFF;">)(</span><span style="color:#82AAFF;">\u5E38\u7528</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># =====================================</span></span>
<span class="line"><span style="color:#82AAFF;">drop_tag</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u79FB\u9664\u6807\u7B7E\uFF0C\u4F46\u4E0D\u79FB\u9664\u5176\u5B50\u6807\u7B7E\u548Ctext\u6587\u672C\uFF0C\u5C06\u5176\u5408\u5E76\u5230\u7236\u8282\u70B9</span></span>
<span class="line"><span style="color:#82AAFF;">drop_tree</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u79FB\u9664\u8282\u70B9\u6811\uFF08\u5305\u542B\u5B50\u8282\u70B9\u548Ctext\uFF09\uFF0C\u4F46\u4E0D\u79FB\u9664\u5B83\u7684tail\u6587\u672C\uFF0C\u5C06\u5176\u5408\u5E76\u5230\u7236\u8282\u70B9\u6216\u524D\u4E00\u4E2A\u5144\u5F1F\u8282\u70B9</span></span>
<span class="line"><span style="color:#82AAFF;">find_class</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> class_name</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u6839\u636Eclass\u5C5E\u6027\u503C\u67E5\u627E\u8282\u70B9\u5143\u7D20</span></span>
<span class="line"><span style="color:#82AAFF;">get_element_by_id</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> rel</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u6839\u636Eid\u5C5E\u6027\u503C\u67E5\u627E\u8282\u70B9\u5143\u7D20</span></span>
<span class="line"><span style="color:#FFCB6B;">set</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> key</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">=None)</span></span>
<span class="line"><span style="color:#676E95;"># \u8BBE\u7F6E\u8282\u70B9\u5143\u7D20\u7684\u5C5E\u6027</span></span>
<span class="line"><span style="color:#82AAFF;">text_content</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">self</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u8FD4\u56DE\u5176\u540E\u4EE3\u8282\u70B9\u4E0E\u5176\u81EA\u8EAB\u7684\u5168\u90E8text\u5185\u5BB9</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p>\u722C\u53D6Bilibili\u6392\u884C\u699C</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> requests</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> lxml </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> etree</span></span>
<span class="line"><span style="color:#A6ACCD;">url </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://www.bilibili.com/ranking</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">header </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">User-Agent</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Mozilla/5.0</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">response </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> requests</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">url</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">headers</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">header</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">response</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">encoding</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">hot_text </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">text</span></span>
<span class="line"><span style="color:#A6ACCD;">tree </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> etree</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">HTML</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">hot_text</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">rank_list </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> tree</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">xpath</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">//ul[@class=&quot;rank-list&quot;]/li</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u6392\u540D</span><span style="color:#A6ACCD;">\\t</span><span style="color:#C3E88D;">\u6807\u9898</span><span style="color:#A6ACCD;">\\t</span><span style="color:#C3E88D;">\u7EFC\u5408\u5F97\u5206</span><span style="color:#A6ACCD;">\\t</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> num</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">li </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">enumerate</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">rank_list</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">num</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">\\t</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">join</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">li</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">xpath</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.//a[@class=&quot;title&quot;]/text() | .//div[@class=&quot;pts&quot;]/div/text()</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)))</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="selenium" tabindex="-1"><a href="https://www.selenium.dev/" target="_blank" rel="noreferrer">Selenium</a> <a class="header-anchor" href="#selenium" aria-hidden="true">#</a></h2><p><a href="https://www.selenium.dev/zh-cn/documentation/getting_started/installing_browser_drivers/" target="_blank" rel="noreferrer">browser drivers</a></p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> selenium</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">webdriver </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> Chrome</span></span>
<span class="line"><span style="color:#676E95;"># \u7B80\u5355\u8D4B\u503C</span></span>
<span class="line"><span style="color:#A6ACCD;">driver </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Chrome</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">executable_path</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./chromedriver</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u6216\u8005\u4F7F\u7528\u4E0A\u4E0B\u6587\u7BA1\u7406\u5668</span></span>
<span class="line"><span style="color:#89DDFF;">with</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Chrome</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> driver</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#676E95;"># \u6253\u5F00\u767E\u5EA6</span></span>
<span class="line"><span style="color:#A6ACCD;">driver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://www.baidu.com/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u8F93\u5165\u641C\u7D22\u5173\u952E\u5B57</span></span>
<span class="line"><span style="color:#A6ACCD;">    element </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> driver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find_element_by_id</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">kw</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    element</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send_keys</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">selenium</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u70B9\u51FB\u641C\u7D22\u6309\u94AE</span></span>
<span class="line"><span style="color:#A6ACCD;">    driver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find_element_by_id</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">su</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">click</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u5173\u95ED</span></span>
<span class="line"><span style="color:#A6ACCD;">    driver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">quit</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><strong>package API</strong> <br> <strong>WebDriver</strong> <br> chrome</p><ul><li>class selenium.webdriver.chrome.options.Options</li><li>class selenium.webdriver.chrome.webdriver.WebDriver(executable_path=&#39;chromedriver&#39;, port=0, options: selenium.webdriver.chrome.options.Options = None, service_args=None, desired_capabilities=None, service_log_path=None, chrome_options=None, service: selenium.webdriver.chrome.service.Service = None, keep_alive=None)</li><li>class selenium.webdriver.chrome.service.Service(executable_path: str, port: int = 0, service_args: List[str] = None, log_path: str = None, env: str = None)</li></ul><p><strong>\u5143\u7D20\u5B9A\u4F4D</strong> <br> class <a href="http://selenium.webdriver.common.by.By" target="_blank" rel="noreferrer">selenium.webdriver.common.by.By</a></p><ul><li>CLASS_NAME = &#39;class name&#39;</li><li>CSS_SELECTOR = &#39;css selector&#39;</li><li>ID = &#39;id&#39;</li><li>LINK_TEXT = &#39;link text&#39;</li><li>NAME = &#39;name&#39;</li><li>PARTIAL_LINK_TEXT = &#39;partial link text&#39;</li><li>TAG_NAME = &#39;tag name&#39;</li><li>XPATH = &#39;xpath&#39;</li></ul><p><a href="https://www.selenium.dev/selenium/docs/api/py/webdriver/selenium.webdriver.common.keys.html#module-selenium.webdriver.common.keys" target="_blank" rel="noreferrer"><strong>selenium.webdriver.common.keys</strong></a> <br> Set of special keys codes. <br> <a href="https://www.selenium.dev/selenium/docs/api/py/webdriver_support/selenium.webdriver.support.event_firing_webdriver.html#module-selenium.webdriver.support.event_firing_webdriver" target="_blank" rel="noreferrer"><strong>selenium.webdriver.support.event_firing_webdriver</strong></a> <br> <a href="https://www.selenium.dev/selenium/docs/api/py/webdriver_support/selenium.webdriver.support.abstract_event_listener.html#module-selenium.webdriver.support.abstract_event_listener" target="_blank" rel="noreferrer"><strong>selenium.webdriver.support.abstract_event_listener</strong></a></p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> selenium</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">webdriver </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> Firefox</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> selenium</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">webdriver</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">support</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">events </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> EventFiringWebDriver</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> AbstractEventListener</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">MyListener</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">AbstractEventListener</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">before_navigate_to</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">driver</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Before navigate to </span><span style="color:#F78C6C;">%s</span><span style="color:#89DDFF;">&quot;</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">%</span><span style="color:#82AAFF;"> url</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">after_navigate_to</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;">self</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">driver</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">After navigate to </span><span style="color:#F78C6C;">%s</span><span style="color:#89DDFF;">&quot;</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">%</span><span style="color:#82AAFF;"> url</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">driver </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Firefox</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">ef_driver </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">EventFiringWebDriver</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> MyListener</span><span style="color:#89DDFF;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">ef_driver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://www.google.co.in/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><a href="https://www.selenium.dev/zh-cn/documentation/webdriver/browser_manipulation/" target="_blank" rel="noreferrer">\u64CD\u63A7\u6D4F\u89C8\u5668</a></p><ul><li>current_url</li><li>page_source</li><li>title</li><li>back() \u540E\u9000</li><li>forward() \u524D\u8FDB</li><li>refresh() \u5237\u65B0</li><li>close() \u5173\u95ED\u5355\u4E2A\u7A97\u53E3</li><li>quit() \u5173\u95ED\u6240\u6709\u7A97\u53E3</li><li>execute_async_script(script, *args)</li><li>execute_script(script, *args)</li><li>find_element(by=&#39;id&#39;, value=None)</li><li>find_elements(by=&#39;id&#39;, value=None)</li></ul><p>\u7A97\u53E3\u7BA1\u7406</p><ul><li>set_window_size(480, 800)</li><li>get_window_size()</li><li>set_window_position(0, 0)</li><li>get_window_position()</li><li>maximize_window()</li><li>minimize_window(self)</li><li>fullscreen_window(self)</li><li>save_screenshot(&#39;./image.png&#39;)</li><li>get_screenshot_as_file()</li></ul><p>\u7A97\u53E3\u548C\u6807\u7B7E\u9875</p><ul><li>current_window_handle\uFF1A\u83B7\u5F97\u5F53\u524D\u7A97\u53E3\u53E5\u67C4\u3002</li><li>window_handles\uFF1A\u8FD4\u56DE\u6240\u6709\u7A97\u53E3\u7684\u53E5\u67C4\u5230\u5F53\u524D\u4F1A\u8BDD\u3002</li></ul><p><strong>class SwitchTo</strong></p><ul><li>window(window_name)</li><li>default_content() \u8DF3\u56DE\u6700\u5916\u5C42\u7684\u9875\u9762</li><li>frame(frame_reference) \u53EF\u4EE5\u76F4\u63A5\u53D6\u8868\u5355\u7684id \u6216name\u5C5E\u6027</li><li>parent_frame()</li></ul><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> selenium </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> webdriver</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> selenium</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">webdriver</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">support</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ui </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> WebDriverWait</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> selenium</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">webdriver</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">support </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> expected_conditions </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> EC</span></span>
<span class="line"><span style="color:#676E95;"># \u542F\u52A8\u9A71\u52A8\u7A0B\u5E8F</span></span>
<span class="line"><span style="color:#89DDFF;">with</span><span style="color:#A6ACCD;"> webdriver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Firefox</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">as</span><span style="color:#A6ACCD;"> driver</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u6253\u5F00\u7F51\u5740</span></span>
<span class="line"><span style="color:#A6ACCD;">    driver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://seleniumhq.github.io</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u8BBE\u7F6E\u7B49\u5F85</span></span>
<span class="line"><span style="color:#A6ACCD;">    wait </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">WebDriverWait</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u5B58\u50A8\u539F\u59CB\u7A97\u53E3\u7684 ID</span></span>
<span class="line"><span style="color:#A6ACCD;">    original_window </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> driver</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">current_window_handle</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u68C0\u67E5\u4E00\u4E0B\uFF0C\u6211\u4EEC\u8FD8\u6CA1\u6709\u6253\u5F00\u5176\u4ED6\u7684\u7A97\u53E3</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">len</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">window_handles</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u5355\u51FB\u5728\u65B0\u7A97\u53E3\u4E2D\u6253\u5F00\u7684\u94FE\u63A5</span></span>
<span class="line"><span style="color:#A6ACCD;">    driver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find_element</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">By</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">LINK_TEXT</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">new window</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">click</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u7B49\u5F85\u65B0\u7A97\u53E3\u6216\u6807\u7B7E\u9875</span></span>
<span class="line"><span style="color:#A6ACCD;">    wait</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">until</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">EC</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">number_of_windows_to_be</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u5FAA\u73AF\u6267\u884C\uFF0C\u76F4\u5230\u627E\u5230\u4E00\u4E2A\u65B0\u7684\u7A97\u53E3\u53E5\u67C4</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">for</span><span style="color:#A6ACCD;"> window_handle </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> driver</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">window_handles</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> window_handle </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> original_window</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            driver</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">switch_to</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">window</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">window_handle</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">break</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u7B49\u5F85\u65B0\u6807\u7B7E\u9875\u5B8C\u6210\u52A0\u8F7D\u5185\u5BB9</span></span>
<span class="line"><span style="color:#A6ACCD;">    wait</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">until</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">EC</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">title_is</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">SeleniumHQ Browser Automation</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u901A\u8FC7 id \u5207\u6362\u6846\u67B6</span></span>
<span class="line"><span style="color:#A6ACCD;">    driver</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">switch_to</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">frame</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">buttonframe</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;"># \u5355\u51FB\u6309\u94AE</span></span>
<span class="line"><span style="color:#A6ACCD;">    driver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find_element</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">By</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">TAG_NAME</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">button</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">click</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><a href="https://www.selenium.dev/zh-cn/documentation/webdriver/page_loading_strategy/" target="_blank" rel="noreferrer">\u9875\u9762\u52A0\u8F7D\u7B56\u7565</a></p><ul><li>normal(\u9ED8\u8BA4)\uFF1A\u7B49\u5F85\u6574\u4E2A\u9875\u9762\u7684\u52A0\u8F7D\uFF08\u8FD4\u56DE\xA0load\xA0\u4E8B\u4EF6\uFF09</li><li>eager\uFF1A\u4FDD\u6301\u7B49\u5F85, \u76F4\u5230\u5B8C\u5168\u52A0\u8F7D\u5E76\u89E3\u6790\u4E86HTML\u6587\u6863\uFF08\u8FD4\u56DE\xA0DOMContentLoaded\xA0\u4E8B\u4EF6\uFF09</li><li>none\uFF1A\u4EC5\u7B49\u5F85\u81F3\u521D\u59CB\u9875\u9762\u4E0B\u8F7D\u5B8C\u6210.</li></ul><p><a href="https://www.selenium.dev/selenium/docs/api/py/webdriver_support/selenium.webdriver.support.wait.html#module-selenium.webdriver.support.wait" target="_blank" rel="noreferrer"><strong>selenium.webdriver.support.wait</strong></a> <br> WebDriverWait(driver, timeout, poll_frequency=0.5, ignored_exceptions=None) \u663E\u6027\u7B49\u5F85</p><ul><li>driver \uFF1A\u6D4F\u89C8\u5668\u9A71\u52A8\u3002</li><li>timeout \uFF1A\u6700\u957F\u8D85\u65F6\u65F6\u95F4\uFF0C\u9ED8\u8BA4\u4EE5\u79D2\u4E3A\u5355\u4F4D\u3002</li><li>poll_frequency \uFF1A\u68C0\u6D4B\u7684\u95F4\u9694\uFF08\u6B65\u957F\uFF09\u65F6\u95F4\uFF0C\u9ED8\u8BA4\u4E3A0.5S\u3002</li><li>ignored_exceptions \uFF1A\u8D85\u65F6\u540E\u7684\u5F02\u5E38\u4FE1\u606F\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u629BNoSuchElementException\u5F02\u5E38\u3002</li><li>until(method, message=\u2018\u2019) \u8C03\u7528\u8BE5\u65B9\u6CD5\u63D0\u4F9B\u7684\u9A71\u52A8\u7A0B\u5E8F\u4F5C\u4E3A\u4E00\u4E2A\u53C2\u6570\uFF0C\u76F4\u5230\u8FD4\u56DE\u503C\u4E3ATrue\u3002</li><li>until_not(method, message=\u2018\u2019) \u8C03\u7528\u8BE5\u65B9\u6CD5\u63D0\u4F9B\u7684\u9A71\u52A8\u7A0B\u5E8F\u4F5C\u4E3A\u4E00\u4E2A\u53C2\u6570\uFF0C\u76F4\u5230\u8FD4\u56DE\u503C\u4E3AFalse\u3002</li></ul><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">element </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">WebDriverWait</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#F78C6C;">0.5</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">until</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">EC</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">presence_of_element_located</span><span style="color:#89DDFF;">((</span><span style="color:#82AAFF;">By</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ID</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">kw</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)))</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>\u9690\u6027\u7B49\u5F85\u6700\u5927\u65F6\u95F4 <br> driver.implicitly_wait(seconds) <br> <strong>cookies</strong></p><ul><li>get_cookies()\uFF1A \u83B7\u5F97\u6240\u6709cookie\u4FE1\u606F\u3002</li><li>get_cookie(name)\uFF1A \u8FD4\u56DE\u5B57\u5178\u7684key\u4E3A\u201Cname\u201D\u7684cookie\u4FE1\u606F\u3002</li><li>add_cookie(cookie_dict) \uFF1A \u6DFB\u52A0cookie\u3002\u201Ccookie_dict\u201D\u6307\u5B57\u5178\u5BF9\u8C61\uFF0C\u5FC5\u987B\u6709name \u548Cvalue \u503C\u3002</li><li>delete_cookie(name,optionsString)\uFF1A\u5220\u9664cookie\u4FE1\u606F\u3002\u201Cname\u201D\u662F\u8981\u5220\u9664\u7684cookie\u7684\u540D\u79F0\uFF0C\u201CoptionsString\u201D\u662F\u8BE5cookie\u7684\u9009\u9879\uFF0C\u76EE\u524D\u652F\u6301\u7684\u9009\u9879\u5305\u62EC\u201C\u8DEF\u5F84\u201D\uFF0C\u201C\u57DF\u201D\u3002</li><li>delete_all_cookies()\uFF1A \u5220\u9664\u6240\u6709cookie\u4FE1\u606F</li></ul><p><strong>class WebElement()</strong></p><ul><li>tag_name</li><li>location</li><li>size\uFF1A \u8FD4\u56DE\u5143\u7D20\u7684\u5C3A\u5BF8\u3002</li><li>text\uFF1A \u83B7\u53D6\u5143\u7D20\u7684\u6587\u672C\u3002</li><li>rect \u5143\u7D20\u7684\u5C3A\u5BF8\u548C\u5750\u6807</li><li>clear() \u6E05\u9664\u6587\u672C</li><li>send_keys(*value) \u6A21\u62DF\u6309\u952E\u8F93\u5165</li><li>click()</li><li>submit()</li><li>get_property(name)</li><li>get_attribute(name)</li><li>is_displayed() \u662F\u5426\u7528\u6237\u53EF\u89C1</li><li>is_selected()</li><li>is_enabled()</li></ul><p><a href="https://www.selenium.dev/selenium/docs/api/py/webdriver/selenium.webdriver.common.action_chains.html#module-selenium.webdriver.common.action_chains" target="_blank" rel="noreferrer"><strong>selenium.webdriver.common.action_chains</strong></a> <br> **class ActionChains(**driver)</p><ul><li>click(on_element=None)</li><li>click_and_hold(on_element=None)</li><li>context_click(on_element=None) \u53F3\u51FB</li><li>double_click(on_element=None)</li><li>drag_and_drop(source, target)</li><li>drag_and_drop_by_offset(source, xoffset, yoffset)</li><li>key_down(value, element=None)</li><li>key_up(value, element=None)</li><li>move_to_element(to_element) \u9F20\u6807\u60AC\u505C</li><li>move_by_offset(xoffset, yoffset)</li><li>perform()\uFF1A \u6267\u884C\u6240\u6709 ActionChains \u4E2D\u5B58\u50A8\u7684\u884C\u4E3A\uFF1B</li><li>pause(seconds)</li><li>release(on_element=None)</li><li>reset_actions()</li><li>send_keys(*keys_to_send)</li><li>send_keys_to_element(element, *keys_to_send)</li></ul><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#676E95;"># pressing ctrl+c</span></span>
<span class="line"><span style="color:#82AAFF;">ActionChains</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">key_down</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">Keys</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">CONTROL</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">send_keys</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">c</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">key_up</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">Keys</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">CONTROL</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">perform</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><a href="https://www.selenium.dev/selenium/docs/api/py/webdriver/selenium.webdriver.common.touch_actions.html#module-selenium.webdriver.common.touch_actions" target="_blank" rel="noreferrer"><strong>selenium.webdriver.common.touch_actions</strong></a> <br> TouchActions(driver)</p><ul><li>double_tap(on_element)</li><li>flick(xspeed, yspeed)</li><li>flick_element(on_element, xoffset, yoffset, speed)</li><li>long_press(on_element)</li><li>move(xcoord, ycoord)</li><li>perform()</li><li>release(xcoord, ycoord)</li><li>scroll(xoffset, yoffset)</li><li>scroll_from_element(on_element, xoffset, yoffset)</li><li>tap(on_element)</li><li>tap_and_hold(xcoord, ycoord)</li></ul><p>Others</p><ul><li>selenium.webdriver.common.utils</li><li>selenium.webdriver.common.proxy</li><li>selenium.webdriver.common.service</li><li>selenium.webdriver.common.html5.application_cache</li><li>selenium.webdriver.support.abstract_event_listener</li><li>selenium.webdriver.support.color</li><li>selenium.webdriver.support.event_firing_webdriver</li><li>selenium.webdriver.support.expected_conditions</li><li>selenium.webdriver.support.select</li><li>Webdriver.remote</li></ul><p>Chrome</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> selenium </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> webdriver</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> selenium</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">webdriver</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">common</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">action_chains </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> ActionChains</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> selenium</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">webdriver</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">common</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">keys </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> Keys</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> selenium</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">webdriver</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">support</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ui </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> WebDriverWait</span></span>
<span class="line"><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> time </span><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> sleep</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">find_element_wait</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">driver</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">locator</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">timeout</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#676E95;">        \u663E\u5F0F\u7B49\u5F85\uFF0C\u52A8\u6001\u67E5\u627E\u5143\u7D20</span></span>
<span class="line"><span style="color:#676E95;">    </span><span style="color:#89DDFF;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">WebDriverWait</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> timeout</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">until</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">lambda</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> s</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">find_element</span><span style="color:#89DDFF;">(*</span><span style="color:#82AAFF;">locator</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">options </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> webdriver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ChromeOptions</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">binary_location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./chrome.exe</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#676E95;"># \u89E3\u51B3\u5D29\u6E83\u95EE\u9898</span></span>
<span class="line"><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_argument</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">--no-sandbox</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u63A7\u5236chrome\u4EE5\u65E0\u754C\u9762\u6A21\u5F0F\u6253\u5F00</span></span>
<span class="line"><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_argument</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">--headless</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_argument</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">--disable-gpu</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u53BB\u9664 \u2018Chrome\u6B63\u53D7\u5230\u81EA\u52A8\u6D4B\u8BD5\u8F6F\u4EF6\u7684\u63A7\u5236\u2019 \u63D0\u793A</span></span>
<span class="line"><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_experimental_option</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">excludeSwitches</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">enable-automation</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#676E95;"># \u6253\u5F00\u8C37\u6B4C\u6D4F\u89C8\u5668</span></span>
<span class="line"><span style="color:#A6ACCD;">driver </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> webdriver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Chrome</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">executable_path</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./chromedriver.exe</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">options</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">driver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://www.agefans.tv</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;"># \u8F93\u5165\u641C\u7D22\u5173\u952E\u5B57</span></span>
<span class="line"><span style="color:#82AAFF;">find_element_wait</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">,(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">top_search_input</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)).</span><span style="color:#82AAFF;">send_keys</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u6597\u7F57\u5927\u9646</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">find_element_wait</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">class name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">search_submit</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)).</span><span style="color:#82AAFF;">click</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">driver</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">switch_to</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">window</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">window_handles</span><span style="color:#89DDFF;">[-</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#82AAFF;">find_element_wait</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">link text</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> animate</span><span style="color:#89DDFF;">)).</span><span style="color:#82AAFF;">click</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">driver</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">switch_to</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">window</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">window_handles</span><span style="color:#89DDFF;">[-</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#82AAFF;">find_element_wait</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">partial link text</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">100</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)).</span><span style="color:#82AAFF;">click</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">driver</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">switch_to</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">window</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">window_handles</span><span style="color:#89DDFF;">[-</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">play_frame </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">find_element_wait</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">xpath</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">//*[@id=&quot;age_playfram&quot;]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">driver</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">switch_to</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">frame</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">play_frame</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">e </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">find_element_wait</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">xpath</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/html/body/div/div[4]/div[4]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#82AAFF;">ActionChains</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">driver</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">move_to_element_with_offset</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">e</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#F78C6C;">150</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">click</span><span style="color:#89DDFF;">()\\</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send_keys</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">Keys</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">SPACE</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">perform</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">driver</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">quit</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h2 id="scrapy" tabindex="-1"><a href="https://scrapy.org/" target="_blank" rel="noreferrer">Scrapy</a> <a class="header-anchor" href="#scrapy" aria-hidden="true">#</a></h2><p><a href="https://www.osgeo.cn/scrapy/index.html" target="_blank" rel="noreferrer">https://www.osgeo.cn/scrapy/index.html</a> <br> conda install -c conda-forge scrapy <br> scrapy [options] [args] <br> bench Run quick benchmark test <br> fetch Fetch a URL using the Scrapy downloader <br> genspider Generate new spider using pre-defined templates <br> runspider Run a self-contained spider (without creating a project) <br> settings Get settings values <br> shell Interactive scraping console <br> startproject Create new project <br> version Print Scrapy version <br> view Open URL in browser, as seen by Scrapy <br> <img src="https://www.runoob.com/wp-content/uploads/2018/10/8c591d54457bb033812a2b0364011e9c_articlex.png#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=GKVZl&amp;originHeight=494&amp;originWidth=700&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><ul><li>Scrapy Engine(\u5F15\u64CE): \u8D1F\u8D23Spider\u3001ItemPipeline\u3001Downloader\u3001Scheduler\u4E2D\u95F4\u7684\u901A\u8BAF\uFF0C\u4FE1\u53F7\u3001\u6570\u636E\u4F20\u9012\u7B49\u3002</li><li>Scheduler(\u8C03\u5EA6\u5668): \u63A5\u53D7\u5F15\u64CE\u53D1\u9001\u8FC7\u6765\u7684Request\u8BF7\u6C42\uFF0C\u5E76\u6309\u7167\u4E00\u5B9A\u7684\u65B9\u5F0F\u8FDB\u884C\u6574\u7406\u6392\u5217\uFF0C\u5165\u961F</li><li>Downloader\uFF08\u4E0B\u8F7D\u5668\uFF09\uFF1A\u8D1F\u8D23\u4E0B\u8F7D\u5F15\u64CE\u53D1\u9001\u7684\u6240\u6709Requests\u8BF7\u6C42\uFF0C\u5E76\u5C06\u5176\u83B7\u53D6\u5230\u7684Responses\u4EA4\u8FD8</li><li>Spider\uFF08\u722C\u866B\uFF09\uFF1A\u5904\u7406\u6240\u6709Responses\uFF0C\u4ECE\u4E2D\u5206\u6790\u63D0\u53D6\u6570\u636E\uFF0C\u83B7\u53D6Item\u5B57\u6BB5\u9700\u8981\u7684\u6570\u636E\uFF0C\u5E76\u5C06\u9700\u8981\u8DDF\u8FDB\u7684URL\u63D0\u4EA4\u7ED9\u5F15\u64CE</li><li>Item Pipeline(\u7BA1\u9053)\uFF1A\u8D1F\u8D23\u5904\u7406Spider\u4E2D\u83B7\u53D6\u5230\u7684Item\uFF0C\u5E76\u8FDB\u884C\u8FDB\u884C\u540E\u671F\u5904\u7406\uFF08\u8BE6\u7EC6\u5206\u6790\u3001\u8FC7\u6EE4\u3001\u5B58\u50A8\u7B49\uFF09\u7684\u5730\u65B9\u3002</li><li>Downloader Middlewares\uFF08\u4E0B\u8F7D\u4E2D\u95F4\u4EF6\uFF09\uFF1A\u53EF\u4EE5\u81EA\u5B9A\u4E49\u6269\u5C55\u4E0B\u8F7D\u529F\u80FD\u7684\u7EC4\u4EF6\u3002</li><li>Spider Middlewares\uFF08Spider\u4E2D\u95F4\u4EF6\uFF09\uFF1A\u53EF\u4EE5\u81EA\u5B9A\u6269\u5C55\u548C\u64CD\u4F5C\u5F15\u64CE\u548CSpider\u4E2D\u95F4\u901A\u4FE1\u7684\u529F\u80FD\u7EC4\u4EF6</li></ul><h2 id="pytest" tabindex="-1">Pytest <a class="header-anchor" href="#pytest" aria-hidden="true">#</a></h2><p><a href="https://www.osgeo.cn/pytest/contents.html" target="_blank" rel="noreferrer">https://www.osgeo.cn/pytest/contents.html</a> <br> \u8C03\u7528\u65B9\u6CD5</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">pytest </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">file_or_dir</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">file_or_dir</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">pytest </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">s \u663E\u793A\u7A0B\u5E8F\u4E2D\u7684print</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">logging\u8F93\u51FA</span></span>
<span class="line"><span style="color:#A6ACCD;">pytest --fixtures  </span><span style="color:#676E95;"># \u663E\u793A\u53EF\u7528\u7684\u5185\u7F6E\u65B9\u6CD5\u53C2\u6570</span></span>
<span class="line"><span style="color:#A6ACCD;">pytest --maxfail</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">n    </span><span style="color:#676E95;"># n\u6B21\u5931\u8D25\u540E\u505C\u6B62</span></span>
<span class="line"><span style="color:#A6ACCD;">pytest </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">k </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">MyClass and not method</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">	</span><span style="color:#676E95;">#\u6309\u5173\u952E\u5B57\u8868\u8FBE\u5F0F\u8FD0\u884C\u7528\u4F8B</span></span>
<span class="line"><span style="color:#A6ACCD;">pytest test_mod</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#89DDFF;">::</span><span style="color:#A6ACCD;">TestClass</span><span style="color:#89DDFF;">::</span><span style="color:#A6ACCD;">test_method	</span><span style="color:#676E95;">#\u6267\u884C\u6A21\u5757\u4E2D\u67D0\u6761\u6307\u5B9A\u7684\u6D4B\u8BD5\u7528\u4F8B</span></span>
<span class="line"><span style="color:#A6ACCD;">pytest </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">m slow	</span><span style="color:#676E95;">#\u6267\u884C\u6240\u6709\u5E26@pytest.mark.slow\u88C5\u9970\u5668\u7684\u7528\u4F8B</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>\u6D4B\u8BD5\u6587\u4EF6\u4EE5test_\u5F00\u5934\uFF08\u4EE5_test\u7ED3\u5C3E\u4E5F\u53EF\u4EE5\uFF09</li><li>\u6D4B\u8BD5\u7C7B\u4EE5Test\u5F00\u5934\uFF0C\u5E76\u4E14\u4E0D\u80FD\u5E26\u6709 <strong>init</strong> \u65B9\u6CD5</li><li>\u6D4B\u8BD5\u51FD\u6570\u4EE5test_\u5F00\u5934</li><li>\u65AD\u8A00\u4F7F\u7528\u57FA\u672C\u7684assert\u5373\u53EF</li></ul><p>\u81EA\u5B9A\u4E49\u8FD0\u884C\u89C4\u5219</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#676E95;">#pytest.ini</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">pytest</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">addopts </span><span style="color:#89DDFF;">=-</span><span style="color:#A6ACCD;">s</span></span>
<span class="line"><span style="color:#A6ACCD;">testpaths </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> testcase  </span><span style="color:#676E95;">#\u5F53\u524D\u76EE\u5F55\u4E0B\u7684testcase\u6587\u4EF6\u5939</span></span>
<span class="line"><span style="color:#A6ACCD;">python_files </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> test_</span><span style="color:#89DDFF;">*.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">#\u5F53\u524D\u76EE\u5F55\u4E0B,\u4EE5test_\u5F00\u5934,\u4EE5.py\u7ED3\u5C3E\u7684\u6240\u6709\u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">python_classes </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Test_</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">#\u5F53\u524D\u76EE\u5F55\u4E0B,\u4EE5Test_\u5F00\u5934\u7684\u7C7B</span></span>
<span class="line"><span style="color:#A6ACCD;">python_functions </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> test_</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">#\u5F53\u524D\u76EE\u5F55\u4E0B,\u4EE5test_\u5F00\u5934\u7684\u65B9\u6CD5</span></span>
<span class="line"><span style="color:#A6ACCD;">log_cli_level </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> INFO    </span><span style="color:#676E95;"># \u5B9E\u65F6\u65E5\u5FD7\u8BB0\u5F55\u6355\u83B7\u7684\u6700\u5C0F\u65E5\u5FD7\u6D88\u606F\u7EA7\u522B</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>@pytest.fixture(scope=&#39;function&#39;, params=None, autouse=False, ids=None, name=None)</strong> <br> scope</p><ul><li>function\xA0\uFF1A\u9ED8\u8BA4\u8303\u56F4\uFF0C\u5219\u5728\u6D4B\u8BD5\u7ED3\u675F\u65F6\u9500\u6BC1fixture\u3002</li><li>class\xA0\uFF1A\u5728\u8BFE\u7A0B\u4E2D\u6700\u540E\u4E00\u6B21\u6D4B\u8BD5\u7684\u62C6\u5378\u8FC7\u7A0B\u4E2D\uFF0C\u5939\u5177\u88AB\u7834\u574F\u3002</li><li>module\xA0\uFF1A\u5728\u6A21\u5757\u4E2D\u6700\u540E\u4E00\u6B21\u6D4B\u8BD5\u7684\u62C6\u5378\u8FC7\u7A0B\u4E2D\uFF0C\u5939\u5177\u88AB\u7834\u574F\u3002</li><li>package\xA0\uFF1A\u5728\u62C6\u4E0B\u5305\u88C5\u4E2D\u7684\u6700\u540E\u4E00\u6B21\u8BD5\u9A8C\u65F6\uFF0C\u5939\u5177\u88AB\u7834\u574F\u3002</li><li>session\xA0\uFF1A\u5939\u5177\u5728\u6D4B\u8BD5\u4F1A\u8BDD\u7ED3\u675F\u65F6\u88AB\u9500\u6BC1\u3002</li></ul><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> pytest</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fixture</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">user</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">setup -- \u524D\u7F6E\u521D\u59CB\u5316</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">yield</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yoyo</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">teardown -- \u540E\u7F6E\u6E05\u7406</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_1</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">assert</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yoyo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u6D4B\u8BD5\u901A\u8FC7</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_2</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">assert</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">yuyu</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u6D4B\u8BD5\u5931\u8D25</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#A6ACCD;"> __name__</span><span style="color:#89DDFF;">==</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__main__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">([</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">-s</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">test_fixture.py</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">])</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u53C2\u6570\u5316</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#A6ACCD;">data </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">username1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">password1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">),</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">username2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">password2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)]</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fixture</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">params</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">data</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">get_data</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">request</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">param</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">return</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">param</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_login</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">get_data</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u8D26\u53F7\uFF1A</span><span style="color:#F78C6C;">%s</span><span style="color:#89DDFF;">&quot;</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">%</span><span style="color:#82AAFF;"> get_data</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">],</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u5BC6\u7801\uFF1A</span><span style="color:#F78C6C;">%s</span><span style="color:#89DDFF;">&quot;</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">%</span><span style="color:#82AAFF;"> get_data</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">])</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><a href="/pytest.mark..html">_@_pytest.mark. </a></p><ul><li>skip - \u59CB\u7EC8\u8DF3\u8FC7\u8BE5\u6D4B\u8BD5\u7528\u4F8B</li><li>skipif - \u9047\u5230\u7279\u5B9A\u60C5\u51B5\u8DF3\u8FC7\u8BE5\u6D4B\u8BD5\u7528\u4F8B</li><li>xfail - \u9047\u5230\u7279\u5B9A\u60C5\u51B5\uFF0C\u4EA7\u751F\u4E00\u4E2A\u201C\u671F\u671B\u5931\u8D25\u201D\u8F93\u51FA</li><li>parametrize(argnames,argvalues,indirect = False,ids = None,scope = None) - \u5728\u540C\u4E00\u4E2A\u6D4B\u8BD5\u7528\u4F8B\u4E0A\u8FD0\u884C\u591A\u6B21\u8C03\u7528(\u53C2\u6570\u5316\u6570\u636E\u9A71\u52A8)</li><li>filterwarnings - \u4E3A\u6807\u8BB0\u7684\u6D4B\u8BD5\u9879\u6DFB\u52A0\u8B66\u544A\u8FC7\u6EE4\u5668\u3002</li></ul><p><strong>\u65AD\u8A00</strong> <br> \u4F7F\u7528assert\u8BED\u53E5\u8FDB\u884C\u65AD\u8A00 <br> \u5F02\u5E38\u65AD\u8A00</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre><code><span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">myfunc</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">raise</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ValueError</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Exception 123 raised</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_match</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">with</span><span style="color:#A6ACCD;"> pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">raises</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">ValueError</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">match</span><span style="color:#89DDFF;">=</span><span style="color:#C792EA;">r</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">*</span><span style="color:#C3E88D;"> 123 .</span><span style="color:#89DDFF;">*&#39;</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">myfunc</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">\u7B49\u540C </span><span style="color:#89DDFF;">@</span><span style="color:#A6ACCD;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">mark</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">xfail</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">raises</span><span style="color:#89DDFF;">=</span><span style="color:#FFCB6B;">ValueError</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>\u8B66\u793A\u65AD\u8A00 pytest.warns <br> <strong>\u63D2\u4EF6</strong></p><ul><li><p>pytest-timeout \u6807\u8BB0\u8D85\u65F6\u65F6\u95F4 @pytest.mark.timeout(60)</p></li><li><p>pytest-html \u751F\u6210html\u62A5\u544A\u63D2\u4EF6 --html=report.html</p></li><li><p><a href="https://docs.pytest.org/en/latest/reference/reference.html#functions" target="_blank" rel="noreferrer">Functions</a></p><ul><li>approx(expected, rel=None, abs=None, nan_ok=False)</li><li>fail(msg=&#39;&#39;, pytrace=True)</li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-skip" target="_blank" rel="noreferrer">pytest.skip</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-importorskip" target="_blank" rel="noreferrer">pytest.importorskip</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-xfail" target="_blank" rel="noreferrer">pytest.xfail</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-exit" target="_blank" rel="noreferrer">pytest.exit</a></li><li><strong>main(<em>args=None</em>, <em>plugins=None</em>)</strong></li><li><strong>param(<em>*values</em>[, <em>id</em>][, <em>marks</em>])</strong></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-raises" target="_blank" rel="noreferrer">pytest.raises</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-deprecated-call" target="_blank" rel="noreferrer">pytest.deprecated_call</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-register-assert-rewrite" target="_blank" rel="noreferrer">pytest.register_assert_rewrite</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-warns" target="_blank" rel="noreferrer">pytest.warns</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-freeze-includes" target="_blank" rel="noreferrer">pytest.freeze_includes</a></li></ul></li><li><p><a href="https://docs.pytest.org/en/latest/reference/reference.html#marks" target="_blank" rel="noreferrer">Marks</a></p><ul><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-mark-filterwarnings" target="_blank" rel="noreferrer">pytest.mark.filterwarnings</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-mark-parametrize" target="_blank" rel="noreferrer">pytest.mark.parametrize</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-mark-skip" target="_blank" rel="noreferrer">pytest.mark.skip</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-mark-skipif" target="_blank" rel="noreferrer">pytest.mark.skipif</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-mark-usefixtures" target="_blank" rel="noreferrer">pytest.mark.usefixtures</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-mark-xfail" target="_blank" rel="noreferrer">pytest.mark.xfail</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-version" target="_blank" rel="noreferrer">pytest.<strong>version</strong></a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-version-tuple" target="_blank" rel="noreferrer">pytest.version_tuple</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#custom-marks" target="_blank" rel="noreferrer">Custom marks</a></li></ul></li><li><p><a href="https://docs.pytest.org/en/latest/reference/reference.html#fixtures" target="_blank" rel="noreferrer">Fixtures</a></p><ul><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytest-fixture" target="_blank" rel="noreferrer">@pytest.fixture</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#config-cache" target="_blank" rel="noreferrer">config.cache</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#capsys" target="_blank" rel="noreferrer">capsys</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#capsysbinary" target="_blank" rel="noreferrer">capsysbinary</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#capfd" target="_blank" rel="noreferrer">capfd</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#capfdbinary" target="_blank" rel="noreferrer">capfdbinary</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#doctest-namespace" target="_blank" rel="noreferrer">doctest_namespace</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#request" target="_blank" rel="noreferrer">request</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytestconfig" target="_blank" rel="noreferrer">pytestconfig</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#record-property" target="_blank" rel="noreferrer">record_property</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#record-testsuite-property" target="_blank" rel="noreferrer">record_testsuite_property</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#caplog" target="_blank" rel="noreferrer">caplog</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#monkeypatch" target="_blank" rel="noreferrer">monkeypatch</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytester" target="_blank" rel="noreferrer">pytester</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#testdir" target="_blank" rel="noreferrer">testdir</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#recwarn" target="_blank" rel="noreferrer">recwarn</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#tmp-path" target="_blank" rel="noreferrer">tmp_path</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#tmp-path-factory" target="_blank" rel="noreferrer">tmp_path_factory</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#tmpdir" target="_blank" rel="noreferrer">tmpdir</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#tmpdir-factory" target="_blank" rel="noreferrer">tmpdir_factory</a></li></ul></li><li><p><a href="https://docs.pytest.org/en/latest/reference/reference.html#hooks" target="_blank" rel="noreferrer">Hooks</a></p><ul><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#bootstrapping-hooks" target="_blank" rel="noreferrer">Bootstrapping hooks</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#initialization-hooks" target="_blank" rel="noreferrer">Initialization hooks</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#collection-hooks" target="_blank" rel="noreferrer">Collection hooks</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#test-running-runtest-hooks" target="_blank" rel="noreferrer">Test running (runtest) hooks</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#reporting-hooks" target="_blank" rel="noreferrer">Reporting hooks</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#debugging-interaction-hooks" target="_blank" rel="noreferrer">Debugging/Interaction hooks</a></li></ul></li><li><p><a href="https://docs.pytest.org/en/latest/reference/reference.html#objects" target="_blank" rel="noreferrer">Objects</a></p><ul><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#callinfo" target="_blank" rel="noreferrer">CallInfo</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#class" target="_blank" rel="noreferrer">Class</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#collector" target="_blank" rel="noreferrer">Collector</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#collectreport" target="_blank" rel="noreferrer">CollectReport</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#config" target="_blank" rel="noreferrer">Config</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#exceptioninfo" target="_blank" rel="noreferrer">ExceptionInfo</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#exitcode" target="_blank" rel="noreferrer">ExitCode</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#file" target="_blank" rel="noreferrer">File</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#fixturedef" target="_blank" rel="noreferrer">FixtureDef</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#fscollector" target="_blank" rel="noreferrer">FSCollector</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#function" target="_blank" rel="noreferrer">Function</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#functiondefinition" target="_blank" rel="noreferrer">FunctionDefinition</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#item" target="_blank" rel="noreferrer">Item</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#markdecorator" target="_blank" rel="noreferrer">MarkDecorator</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#markgenerator" target="_blank" rel="noreferrer">MarkGenerator</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#mark" target="_blank" rel="noreferrer">Mark</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#metafunc" target="_blank" rel="noreferrer">Metafunc</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#module" target="_blank" rel="noreferrer">Module</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#node" target="_blank" rel="noreferrer">Node</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#parser" target="_blank" rel="noreferrer">Parser</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#optiongroup" target="_blank" rel="noreferrer">OptionGroup</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#pytestpluginmanager" target="_blank" rel="noreferrer">PytestPluginManager</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#session" target="_blank" rel="noreferrer">Session</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#testreport" target="_blank" rel="noreferrer">TestReport</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#result" target="_blank" rel="noreferrer">_Result</a></li><li><a href="https://docs.pytest.org/en/latest/reference/reference.html#stash" target="_blank" rel="noreferrer">Stash</a></li></ul></li><li><p><a href="https://docs.pytest.org/en/latest/reference/reference.html#global-variables" target="_blank" rel="noreferrer">Global Variables</a></p></li><li><p><a href="https://docs.pytest.org/en/latest/reference/reference.html#environment-variables" target="_blank" rel="noreferrer">Environment Variables</a></p></li><li><p><a href="https://docs.pytest.org/en/latest/reference/reference.html#exceptions" target="_blank" rel="noreferrer">Exceptions</a></p></li><li><p><a href="https://docs.pytest.org/en/latest/reference/reference.html#warnings" target="_blank" rel="noreferrer">Warnings</a></p></li><li><p><a href="https://docs.pytest.org/en/latest/reference/reference.html#configuration-options" target="_blank" rel="noreferrer">Configuration Options</a></p></li><li><p><a href="https://docs.pytest.org/en/latest/reference/reference.html#command-line-flags" target="_blank" rel="noreferrer">Command-line Flags</a></p></li></ul>`,205),o=[e];function r(t,c,D,F,y,i){return a(),n("div",null,o)}const b=s(p,[["render",r]]);export{C as __pageData,b as default};
