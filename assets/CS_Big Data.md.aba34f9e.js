import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.1f7d9302.js";const F=JSON.parse('{"title":"Big Data","description":"","frontmatter":{"title":"Big Data","created_at":"2022-01-31T15:12:13.000Z","updated_at":"2023-03-19T01:36:53.000Z","word_count":2506},"headers":[],"relativePath":"CS/Big Data.md","filePath":"CS/Big Data.md"}'),p={name:"CS/Big Data.md"},e=l(`<h2 id="big-data" tabindex="-1">Big data <a class="header-anchor" href="#big-data" aria-label="Permalink to &quot;Big data&quot;">​</a></h2><p><a href="https://github.com/heibaiying/BigData-Notes" target="_blank" rel="noreferrer">BigData-Notes</a> <br> <a href="https://github.com/andkret/Cookbook" target="_blank" rel="noreferrer">Cookbook</a> The Data Engineering Cookbook <br> <a href="https://github.com/ossu/data-science" target="_blank" rel="noreferrer">data-science</a> <br> <a href="https://dunwu.github.io/bigdata-tutorial" target="_blank" rel="noreferrer">大数据</a></p><h2 id="hdfs" tabindex="-1"><a href="https://dunwu.github.io/bigdata-tutorial/hdfs" target="_blank" rel="noreferrer">HDFS</a> <a class="header-anchor" href="#hdfs" aria-label="Permalink to &quot;[HDFS](https://dunwu.github.io/bigdata-tutorial/hdfs)&quot;">​</a></h2><p><strong>Hadoop Distributed File System</strong>，Hadoop 的分布式文件系统</p><p>用于存储具有流数据访问模式的超大文件的文件系统</p><p><strong>优点</strong></p><ul><li><strong>高容错</strong> - 数据冗余多副本，副本丢失后自动恢复</li><li><strong>高可用</strong> - NameNode HA、安全模式</li><li><strong>高扩展</strong> - 能够处理 10K 节点的规模；处理数据达到 GB、TB、甚至 PB 级别的数据；能够处理百万规模以上的文件数量，数量相当之大。</li><li><strong>批处理</strong> - 流式数据访问；数据位置暴露给计算框架</li><li><strong>构建在廉价商用机器上</strong> - 提供了容错和恢复机制</li></ul><p><strong>缺点</strong></p><ul><li><strong>不适合低延迟数据访问</strong> - 适合高吞吐率的场景，就是在某一时间内写入大量的数据。但是它在低延时的情况下是不行的，比如毫秒级以内读取数据，它是很难做到的。</li><li><strong>不适合大量小文件存储</strong><ul><li>存储大量小文件(这里的小文件是指小于 HDFS 系统的 Block 大小的文件（默认 64M）)的话，它会占用 NameNode 大量的内存来存储文件、目录和块信息。这样是不可取的，因为 NameNode 的内存总是有限的。</li><li>磁盘寻道时间超过读取时间</li></ul></li><li><strong>不支持并发写入</strong> - 一个文件同时只能有一个写入者</li><li><strong>不支持文件随机修改</strong> - 仅支持追加写入</li></ul><p>主从架构</p><p><strong>NameNode 负责管理文件系统的命名空间以及客户端对文件的访问</strong></p><ul><li>管理命名空间</li><li>管理元数据：文件的位置、所有者、权限、数据块等</li><li>管理 Block 副本策略：默认 3 个副本</li><li>处理客户端读写请求，为 DataNode 分配任务</li></ul><p><strong>DataNode 负责文件数据的存储和读写操作，HDFS 将文件数据分割成若干数据块（Block），每个 DataNode 存储一部分数据块，这样文件就分布存储在整个 HDFS 服务器集群中</strong>。</p><ul><li>存储 Block 和数据校验和</li><li>执行客户端发送的读写操作</li><li>通过心跳机制定期（默认 3 秒）向 NameNode 汇报运行状态和 Block 列表信息</li><li>集群启动时，DataNode 向 NameNode 提供 Block 列表信息</li></ul><p>Block 数据块</p><ul><li>HDFS 最小存储单元</li><li>文件写入 HDFS 会被切分成若干个 Block</li><li>Block 大小固定，默认为 128MB，可自定义</li><li>若一个 Block 的大小小于设定值，不会占用整个块空间</li><li>默认情况下每个 Block 有 3 个副本</li></ul><p>Client</p><ul><li>将文件切分为 Block 数据块</li><li>与 NameNode 交互，获取文件元数据</li><li>与 DataNode 交互，读取或写入数据</li><li>管理 HDFS</li></ul><h2 id="hbase" tabindex="-1"><a href="https://dunwu.github.io/bigdata-tutorial/hbase" target="_blank" rel="noreferrer">Hbase</a> <a class="header-anchor" href="#hbase" aria-label="Permalink to &quot;[Hbase](https://dunwu.github.io/bigdata-tutorial/hbase)&quot;">​</a></h2><p>一个构建在 HDFS（Hadoop 文件系统）之上的面向列的数据库管理系统</p><ul><li><strong>没有真正的索引</strong> - 行是顺序存储的，每行中的列也是，所以不存在索引膨胀的问题，而且插入性能和表的大小无关。</li><li><strong>不支持复杂的事务</strong> - 仅支持行级事务，即单行数据的读写都是原子性的；</li><li><strong>自动分区</strong> - 在表增长的时候，表会自动分裂区域（region），并分布到可用的节点上。</li><li><strong>线性扩展和对于新节点的自动处理</strong> - 增加一个节点，把它指向现有集群并进行 region server。区域自动重新进行平衡，负载均匀分布。</li><li><strong>容错</strong> - 支持 RegionServers 之间的自动故障转移</li><li><strong>批处理</strong> - MapReduce 集成功能使 HBase 可用用全并行的分布式作业根据数据位置来处理它们。</li></ul><h2 id="hive" tabindex="-1"><a href="https://dunwu.github.io/bigdata-tutorial/hive" target="_blank" rel="noreferrer">Hive</a> <a class="header-anchor" href="#hive" aria-label="Permalink to &quot;[Hive](https://dunwu.github.io/bigdata-tutorial/hive)&quot;">​</a></h2><p>一个构建在 Hadoop 之上的数据仓库，它可以将结构化的数据文件映射成表，并提供类 SQL 查询功能，用于查询的 SQL 语句会被转化为 MapReduce 作业，然后提交到 Hadoop 上运行。</p><p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200224193019.png#from=url&amp;id=e7d9t&amp;originHeight=483&amp;originWidth=682&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h2 id="mapreduce" tabindex="-1"><a href="https://dunwu.github.io/bigdata-tutorial/mapreduce" target="_blank" rel="noreferrer">MapReduce</a> <a class="header-anchor" href="#mapreduce" aria-label="Permalink to &quot;[MapReduce](https://dunwu.github.io/bigdata-tutorial/mapreduce)&quot;">​</a></h2><p>Hadoop MapReduce 是一个分布式计算框架，用于编写批处理应用程序</p><p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200601162305.png#from=url&amp;id=opORN&amp;originHeight=672&amp;originWidth=1416&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><h2 id="yarn" tabindex="-1"><a href="https://dunwu.github.io/bigdata-tutorial/yarn" target="_blank" rel="noreferrer">Yarn</a> <a class="header-anchor" href="#yarn" aria-label="Permalink to &quot;[Yarn](https://dunwu.github.io/bigdata-tutorial/yarn)&quot;">​</a></h2><p>YARN(Yet Another Resource Negotiator，另一种资源管理器)是一个分布式通用资源管理系统。</p><p>设计目标：聚焦资源管理、通用（适用各种计算框架）、高可用、高扩展</p><p>系统架构</p><ul><li>主从结构（master/slave）</li><li>将 JobTracker 的资源管理、任务调度功能分离</li><li>三种角色： <ul><li>ResourceManager（Master） - 集群资源的统一管理和分配</li><li>NodeManager（Slave） - 管理节点资源，以及容器的生命周期</li><li>ApplicationMaster（新角色） - 管理应用程序实例，包括任务调度和资源申请</li></ul></li></ul><h2 id="spark" tabindex="-1">Spark <a class="header-anchor" href="#spark" aria-label="Permalink to &quot;Spark&quot;">​</a></h2><p>相对于 MapReduce 的批处理计算，Spark 可以带来上百倍的性能提升，因此它成为继 MapReduce 之后，最为广泛使用的分布式计算框架</p><h2 id="storm" tabindex="-1">Storm <a class="header-anchor" href="#storm" aria-label="Permalink to &quot;Storm&quot;">​</a></h2><p>一个开源的分布式实时计算框架，可以以简单、可靠的方式进行大数据流的处理</p><h2 id="flink" tabindex="-1"><a href="https://dunwu.github.io/bigdata-tutorial/tree/master/docs/flink" target="_blank" rel="noreferrer">Flink</a> <a class="header-anchor" href="#flink" aria-label="Permalink to &quot;[Flink](https://dunwu.github.io/bigdata-tutorial/tree/master/docs/flink)&quot;">​</a></h2><p>分布式处理引擎，用于在无边界和有边界数据流上进行有状态的计算</p><p><a href="https://lucene.apache.org/" target="_blank" rel="noreferrer"><strong>Lucene</strong></a> <br> 高性能、可伸缩的、开源的信息检索库 <br> 提供了完整的查询引擎和索引引擎 <br> 构建索引、索引更新与删除、条件查询、结果排序、高亮、中文分词器、索引优化、分布式扩展</p><h2 id="elasticsearch" tabindex="-1"><a href="https://github.com/elastic/elasticsearch" target="_blank" rel="noreferrer">Elasticsearch</a> <a class="header-anchor" href="#elasticsearch" aria-label="Permalink to &quot;[Elasticsearch](https://github.com/elastic/elasticsearch)&quot;">​</a></h2><blockquote><p>一个基于 Lucene 的搜索和数据分析工具，它提供了一个分布式服务</p></blockquote><p>倒排索引（Inverted Index），也称反向索引，将文档中的词作为关键字，建立词与文档的映射关系，通过对倒排索引的检索，可以根据词快速获取包含这个词的文档列表</p><p>索引（Index） <br> 具有某些类似特征的文档集合</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">创建索引</span></span>
<span class="line"><span style="color:#ABB2BF;">PUT &lt;index&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">&quot;settings&quot;</span><span style="color:#ABB2BF;">: {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">&quot;number_of_shards&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">&quot;number_of_replicas&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">&quot;mapping.ignore_malformed&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">false</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">修改副本</span></span>
<span class="line"><span style="color:#ABB2BF;">PUT &lt;index&gt;/_settings</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">&quot;number_of_replicas&quot;</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">删除索引</span></span>
<span class="line"><span style="color:#ABB2BF;">DELETE &lt;index&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">查看索引</span></span>
<span class="line"><span style="color:#ABB2BF;">GET &lt;index&gt;/_settings</span></span>
<span class="line"><span style="color:#ABB2BF;">GET _all/_settings</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">打开/关闭索引</span></span>
<span class="line"><span style="color:#ABB2BF;">POST &lt;index&gt;/_close?ignore_unavailable=</span><span style="color:#D19A66;">true</span></span>
<span class="line"><span style="color:#ABB2BF;">POST &lt;index&gt;/_open</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>文档（Document） <br> 可以编制索引的基本信息单元，以JSON表示</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">#create document. 自动生成 _id</span></span>
<span class="line"><span style="color:#61AFEF;">POST</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">inde</span><span style="color:#ABB2BF;">x&gt;</span><span style="color:#98C379;">/_doc</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">	  </span><span style="color:#61AFEF;">&quot;user&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;Mac&quot;,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">&quot;post_date&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;2022-06-15T14:12:12&quot;,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">&quot;message&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;trying out Kibana&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#create document. 指定Id。如果id已经存在，报错</span></span>
<span class="line"><span style="color:#61AFEF;">PUT</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">inde</span><span style="color:#ABB2BF;">x&gt;</span><span style="color:#98C379;">/_doc/1?op_type=create</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">&quot;user&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;Jack&quot;,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">&quot;post_date&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;2022-06-15T14:12:12&quot;,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">&quot;message&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;trying out Elasticsearch&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#create document. 指定 ID 如果已经存在，就报错</span></span>
<span class="line"><span style="color:#61AFEF;">PUT</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">inde</span><span style="color:#ABB2BF;">x&gt;</span><span style="color:#98C379;">/_create/1</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">&quot;user&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;Jack&quot;,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">&quot;post_date&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;2019-05-15T14:12:12&quot;,</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">&quot;message&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;trying out Elasticsearch&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#Get the document by ID</span></span>
<span class="line"><span style="color:#61AFEF;">GET</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">inde</span><span style="color:#ABB2BF;">x&gt;</span><span style="color:#98C379;">/_doc/1</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#Update 指定 ID  (先删除，再写入)</span></span>
<span class="line"><span style="color:#61AFEF;">PUT</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">inde</span><span style="color:#ABB2BF;">x&gt;</span><span style="color:#98C379;">/_doc/1</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">&quot;user&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;Mike&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">#在原文档上增加字段</span></span>
<span class="line"><span style="color:#61AFEF;">POST</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">inde</span><span style="color:#ABB2BF;">x&gt;</span><span style="color:#98C379;">/_update/1/</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">&quot;doc&quot;</span><span style="color:#56B6C2;">:</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">&quot;post_date&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;2019-05-15T14:12:12&quot;,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">&quot;message&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;trying out Elasticsearch&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 删除文档</span></span>
<span class="line"><span style="color:#61AFEF;">DELETE</span><span style="color:#ABB2BF;"> &lt;</span><span style="color:#98C379;">inde</span><span style="color:#ABB2BF;">x&gt;</span><span style="color:#98C379;">/_doc/1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p>高级查询</p><p>GET 索引名/_search 或 POST 索引名/_search</p><ul><li><p>查询所有：GET 索引名/_doc/_search?q=*</p></li><li><p>指定返回文档的字段：<code>{&quot;_source&quot;: [field1, field2]}</code></p></li><li><p>返回查询到的文档的版本号：<code>{&quot;version&quot;: true}</code></p></li><li><p>设置最小评分：<code>{&quot;min_score&quot;: 0.6}</code></p></li><li><p>分页查询：<code>{&quot;from&quot;: 0, &quot;size&quot;: 10}</code></p><ul><li>from 指定返回结果的开始位置，默认 0</li><li>size 指定一次返回结果所包含的最大文档数量，默认 10</li></ul></li><li><p>返回结果</p><ul><li>took：耗时</li><li>_shards.total：分片总数</li><li>hits.total：符合查询条件的文档数</li><li>hits.max_score：最大匹配度</li><li>hits.hits：查询到的结果</li><li>hits.hits._score：匹配度</li></ul></li></ul><p>批处理</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">批量执行</span></span>
<span class="line"><span style="color:#ABB2BF;">POST _bulk</span></span>
<span class="line"><span style="color:#ABB2BF;">{ </span><span style="color:#E06C75;">&quot;index&quot;</span><span style="color:#ABB2BF;"> : { </span><span style="color:#E06C75;">&quot;_index&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;test&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;_id&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;1&quot;</span><span style="color:#ABB2BF;"> } }</span></span>
<span class="line"><span style="color:#ABB2BF;">{ </span><span style="color:#E06C75;">&quot;field1&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;value1&quot;</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">{ </span><span style="color:#E06C75;">&quot;delete&quot;</span><span style="color:#ABB2BF;"> : { </span><span style="color:#E06C75;">&quot;_index&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;test&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;_id&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;2&quot;</span><span style="color:#ABB2BF;"> } }</span></span>
<span class="line"><span style="color:#ABB2BF;">{ </span><span style="color:#E06C75;">&quot;create&quot;</span><span style="color:#ABB2BF;"> : { </span><span style="color:#E06C75;">&quot;_index&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;test2&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;_id&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;3&quot;</span><span style="color:#ABB2BF;"> } }</span></span>
<span class="line"><span style="color:#ABB2BF;">{ </span><span style="color:#E06C75;">&quot;field1&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;value3&quot;</span><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">{ </span><span style="color:#E06C75;">&quot;update&quot;</span><span style="color:#ABB2BF;"> : {</span><span style="color:#E06C75;">&quot;_id&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;1&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">&quot;_index&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;test&quot;</span><span style="color:#ABB2BF;">} }</span></span>
<span class="line"><span style="color:#ABB2BF;">{ </span><span style="color:#E06C75;">&quot;doc&quot;</span><span style="color:#ABB2BF;"> : {</span><span style="color:#E06C75;">&quot;field2&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;value2&quot;</span><span style="color:#ABB2BF;">} }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">批量读取</span></span>
<span class="line"><span style="color:#ABB2BF;">GET /_mget</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">&quot;docs&quot;</span><span style="color:#ABB2BF;"> : [</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">&quot;_index&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;test&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">&quot;_id&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;1&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">&quot;_source&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#D19A66;">false</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">&quot;_index&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;test&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">&quot;_id&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;2&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">&quot;_source&quot;</span><span style="color:#ABB2BF;"> : [</span><span style="color:#98C379;">&quot;field3&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;field4&quot;</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">        },</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">&quot;_index&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;test&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">&quot;_id&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;3&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">&quot;_source&quot;</span><span style="color:#ABB2BF;"> : {</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E06C75;">&quot;include&quot;</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&quot;user&quot;</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E06C75;">&quot;exclude&quot;</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&quot;user.location&quot;</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    ]</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">批量查询</span></span>
<span class="line"><span style="color:#ABB2BF;">POST &lt;index&gt;/_msearch</span></span>
<span class="line"><span style="color:#ABB2BF;">{}</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">&quot;query&quot;</span><span style="color:#ABB2BF;"> : {</span><span style="color:#E06C75;">&quot;match_all&quot;</span><span style="color:#ABB2BF;"> : {}},</span><span style="color:#E06C75;">&quot;size&quot;</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">&quot;index&quot;</span><span style="color:#ABB2BF;"> : </span><span style="color:#98C379;">&quot;kibana_sample_data_flights&quot;</span><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">&quot;query&quot;</span><span style="color:#ABB2BF;"> : {</span><span style="color:#E06C75;">&quot;match_all&quot;</span><span style="color:#ABB2BF;"> : {}},</span><span style="color:#E06C75;">&quot;size&quot;</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p>查询语义</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">Beautiful Mind 等效于 Beautiful OR Mind</span></span>
<span class="line"><span style="color:#98C379;">&quot;Beautiful Mind&quot;</span><span style="color:#ABB2BF;"> 等效于 Beautiful AND Mind</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;"># Term 查询</span></span>
<span class="line"><span style="color:#ABB2BF;">GET /movies/_search?q=title:Beautiful Mind</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#E06C75;">&quot;profile&quot;</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&quot;true&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;"># 使用引号，Phrase 查询</span></span>
<span class="line"><span style="color:#ABB2BF;">GET /movies/_search?q=title:</span><span style="color:#98C379;">&quot;Beautiful Mind&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#E06C75;">&quot;profile&quot;</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&quot;true&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;"># 布尔操作符  AND、OR、NOT 或者 &amp;&amp;、||、! 必须大写</span></span>
<span class="line"><span style="color:#ABB2BF;">GET /movies/_search?q=title:(Beautiful NOT Mind)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#E06C75;">&quot;profile&quot;</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&quot;true&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;"># 范围查询</span></span>
<span class="line"><span style="color:#ABB2BF;">[] 表示闭区间</span></span>
<span class="line"><span style="color:#ABB2BF;">{} 表示开区间</span></span>
<span class="line"><span style="color:#ABB2BF;">GET /movies/_search?q=title:beautiful AND year:[</span><span style="color:#FFFFFF;">*</span><span style="color:#ABB2BF;"> </span><span style="color:#FFFFFF;">TO</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">2018</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#E06C75;">&quot;profile&quot;</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&quot;true&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">GET /movies/_search?q=year:(&gt;</span><span style="color:#D19A66;">2010</span><span style="color:#ABB2BF;"> &amp;&amp; &lt;=</span><span style="color:#D19A66;">2018</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#E06C75;">&quot;profile&quot;</span><span style="color:#ABB2BF;">:</span><span style="color:#98C379;">&quot;true&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>通配符查询</p><ul><li><code>?</code> 代表 1 个字符</li><li><code>*</code> 代表 0 或多个字符</li></ul><h2 id="apache-zookeeper" tabindex="-1"><a href="https://zookeeper.apache.org/" target="_blank" rel="noreferrer">Apache ZooKeeper</a> <a class="header-anchor" href="#apache-zookeeper" aria-label="Permalink to &quot;[Apache ZooKeeper](https://zookeeper.apache.org/)&quot;">​</a></h2><blockquote><p>为分布式应用提供了高效且可靠的分布式协调服务，提供了诸如统一命名服务、配置管理和分布式锁等分布式的基础服务。</p></blockquote><ul><li><strong>顺序一致性</strong>：从一个客户端发起的事务请求，最终都会严格按照其发起顺序被应用到 Zookeeper 中；</li><li><strong>原子性</strong>：所有事务请求的处理结果在整个集群中所有机器上都是一致的；</li><li><strong>单一视图</strong>：所有客户端看到的服务端数据模型都是一致的；</li><li><strong>可靠性</strong>：一旦服务端成功应用了一个事务，则其引起的改变会一直保留，直到被另外一个事务所更改；</li><li><strong>实时性</strong>：一旦一个事务被成功应用后，Zookeeper 可以保证客户端立即可以读取到这个事务变更后的最新状态的数据。</li></ul><h2 id="apache-dubbo" tabindex="-1"><a href="https://dubbo.apache.org/zh-cn/" target="_blank" rel="noreferrer">Apache Dubbo</a> <a class="header-anchor" href="#apache-dubbo" aria-label="Permalink to &quot;[Apache Dubbo](https://dubbo.apache.org/zh-cn/)&quot;">​</a></h2><blockquote><p>一款微服务框架，为大规模微服务实践提供高性能 RPC 通信、流量治理、可观测性等解决方案</p></blockquote><ul><li>面向接口的远程方法调用</li><li>智能容错和负载均衡</li><li>服务自动注册和发现</li></ul>`,61),o=[e];function t(r,c,i,B,u,b){return n(),a("div",null,o)}const A=s(p,[["render",t]]);export{F as __pageData,A as default};
