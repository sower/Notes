import{_ as l,c as p,b as s,a as n,d as a,o as e}from"./app.6a0e111d.js";const m=JSON.parse('{"title":"Java Framework","description":"","frontmatter":{"title":"Java Framework","created_at":"2022-02-01T05:44:34.000Z","updated_at":"2023-01-15T13:29:09.000Z","word_count":9011},"headers":[{"level":2,"title":"Maven","slug":"maven","link":"#maven","children":[]},{"level":2,"title":"Utility","slug":"utility","link":"#utility","children":[{"level":3,"title":"Lombok","slug":"lombok","link":"#lombok","children":[]},{"level":3,"title":"Apache Commons","slug":"apache-commons","link":"#apache-commons","children":[]},{"level":3,"title":"guava","slug":"guava","link":"#guava","children":[]},{"level":3,"title":"hutool","slug":"hutool","link":"#hutool","children":[]}]},{"level":2,"title":"Log","slug":"log","link":"#log","children":[]},{"level":2,"title":"Test","slug":"test","link":"#test","children":[{"level":3,"title":"JUnit","slug":"junit","link":"#junit","children":[]},{"level":3,"title":"mockito","slug":"mockito","link":"#mockito","children":[]}]},{"level":2,"title":"HTTP Clients","slug":"http-clients","link":"#http-clients","children":[]},{"level":2,"title":"JSON","slug":"json","link":"#json","children":[{"level":3,"title":"Jacson","slug":"jacson","link":"#jacson","children":[]},{"level":3,"title":"Fastjson","slug":"fastjson","link":"#fastjson","children":[]},{"level":3,"title":"Gson","slug":"gson","link":"#gson","children":[]}]},{"level":2,"title":"Tomcat","slug":"tomcat","link":"#tomcat","children":[]},{"level":2,"title":"Resource","slug":"resource","link":"#resource","children":[]},{"level":2,"title":"—— IntelliJ IDEA ——","slug":"——-intellij-idea-——","link":"#——-intellij-idea-——","children":[{"level":3,"title":"Shortcuts","slug":"shortcuts","link":"#shortcuts","children":[]},{"level":3,"title":"plugin","slug":"plugin","link":"#plugin","children":[]}]}],"relativePath":"CS/Java Framework.md"}'),o={name:"CS/Java Framework.md"},t=n(`<h2 id="maven" tabindex="-1"><a href="https://maven.apache.org/" target="_blank" rel="noreferrer">Maven</a> <a class="header-anchor" href="#maven" aria-hidden="true">#</a></h2><p>管理和构建工具 <br> 约定优于配置（Convention Over Configuration）</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">a-maven-project</span></span>
<span class="line"><span style="color:#ABB2BF;">├── </span><span style="color:#98C379;">pom.xml</span><span style="color:#ABB2BF;">  </span><span style="color:#98C379;">核心配置文件</span></span>
<span class="line"><span style="color:#ABB2BF;">├── </span><span style="color:#98C379;">src</span></span>
<span class="line"><span style="color:#ABB2BF;">│   </span><span style="color:#98C379;">├──</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">main</span></span>
<span class="line"><span style="color:#ABB2BF;">│   </span><span style="color:#98C379;">│</span><span style="color:#ABB2BF;">   </span><span style="color:#98C379;">├──</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">java</span><span style="color:#ABB2BF;">  </span><span style="color:#98C379;">源代码</span></span>
<span class="line"><span style="color:#ABB2BF;">│   </span><span style="color:#98C379;">│</span><span style="color:#ABB2BF;">   </span><span style="color:#98C379;">└──</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">resources</span><span style="color:#ABB2BF;">  </span><span style="color:#98C379;">资源文件</span></span>
<span class="line"><span style="color:#ABB2BF;">│   </span><span style="color:#98C379;">└──</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">test</span></span>
<span class="line"><span style="color:#ABB2BF;">│       </span><span style="color:#98C379;">├──</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">java</span><span style="color:#ABB2BF;">  </span><span style="color:#98C379;">测试代码</span></span>
<span class="line"><span style="color:#ABB2BF;">│       </span><span style="color:#98C379;">└──</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">resources</span></span>
<span class="line"><span style="color:#ABB2BF;">└── </span><span style="color:#98C379;">target</span><span style="color:#ABB2BF;">  </span><span style="color:#98C379;">打包输出文件</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>POM（Project Object Model，项目对象模型）是 Maven 的基本组件，它是以 xml 文件的形式存放在项目的根目录下</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">project</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">xmlns</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#D19A66;">xmlns:xsi</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#D19A66;">xsi:schemaLocation</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;http://maven.apache.org/POM/4.0.0</span></span>
<span class="line"><span style="color:#98C379;">                      http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">modelVersion</span><span style="color:#ABB2BF;">&gt;4.0.0&lt;/</span><span style="color:#E06C75;">modelVersion</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- The Basics --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;com.example&lt;/</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;helloMaven&lt;/</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">packaging</span><span style="color:#ABB2BF;">&gt;jar&lt;/</span><span style="color:#E06C75;">packaging</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;1.0-SNAPSHOT&lt;/</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">&gt;helloMaven&lt;/</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">&gt;http://maven.apache.org&lt;/</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!--从父模块中继承  --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">parent</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;net.father&lt;/</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;Root&lt;/</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;1.0&lt;/</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">relativePath</span><span style="color:#ABB2BF;">&gt;../Root&lt;/</span><span style="color:#E06C75;">relativePath</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">parent</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">properties</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 定义一些 maven 变量 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">project.build.sourceEncoding</span><span style="color:#ABB2BF;">&gt;UTF-8&lt;/</span><span style="color:#E06C75;">project.build.sourceEncoding</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">maven.compiler.source</span><span style="color:#ABB2BF;">&gt;1.8&lt;/</span><span style="color:#E06C75;">maven.compiler.source</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">maven.compiler.target</span><span style="color:#ABB2BF;">&gt;1.8&lt;/</span><span style="color:#E06C75;">maven.compiler.target</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">junit.version</span><span style="color:#ABB2BF;">&gt;4.9&lt;/</span><span style="color:#E06C75;">junit.version</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">properties</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!--添加插件管理--&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">build</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">pluginManagement</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">          ...</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;/</span><span style="color:#E06C75;">pluginManagement</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 声明使用 maven-source-plugin 插件 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">plugins</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">&lt;!--添加site 插件--&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;</span><span style="color:#E06C75;">plugin</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">                &lt;</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;org.apache.maven.plugins&lt;/</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">                &lt;</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;maven-site-plugin&lt;/</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">                &lt;</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;3.7.1&lt;/</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;/</span><span style="color:#E06C75;">plugin</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;/</span><span style="color:#E06C75;">plugins</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">build</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!--dependencyManagement 标签用于控制子模块的依赖版本等信息 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 该标签只用来控制版本，不能将依赖引入 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">dependencyManagement</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">dependencies</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">                &lt;</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;log4j&lt;/</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">                &lt;</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;log4j&lt;/</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#7F848E;font-style:italic;">&lt;!--引用的properties标签中定义的属性 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">                &lt;</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;1.2.17&lt;/</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;/</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">     &lt;/</span><span style="color:#E06C75;">dependencyManagement</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!--声明依赖--&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">dependencies</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;junit&lt;/</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;junit&lt;/</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;\${junit.version}&lt;/</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;</span><span style="color:#E06C75;">scope</span><span style="color:#ABB2BF;">&gt;test&lt;/</span><span style="color:#E06C75;">scope</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;/</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;cn.book&lt;/</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;book&lt;/</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;</span><span style="color:#E06C75;">scope</span><span style="color:#ABB2BF;">&gt;system&lt;/</span><span style="color:#E06C75;">scope</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;1.0-SNAPSHOT&lt;/</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;</span><span style="color:#E06C75;">systemPath</span><span style="color:#ABB2BF;">&gt;D:\\maven\\book\\target\\book-1.0-SNAPSHOT.jar&lt;/</span><span style="color:#E06C75;">systemPath</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;/</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">dependencies</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!--添加需要聚合的模块--&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">modules</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">module</span><span style="color:#ABB2BF;">&gt;../App-Core-lib&lt;/</span><span style="color:#E06C75;">module</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">module</span><span style="color:#ABB2BF;">&gt;../App-Data-lib&lt;/</span><span style="color:#E06C75;">module</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">module</span><span style="color:#ABB2BF;">&gt;../App-UI-WAR&lt;/</span><span style="color:#E06C75;">module</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">modules</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- More Project Information --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">description</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">description</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">inceptionYear</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">inceptionYear</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">licenses</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">licenses</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">organization</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">organization</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">developers</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">developers</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">contributors</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">contributors</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- Environment Settings --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">issueManagement</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">issueManagement</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">ciManagement</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">ciManagement</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">mailingLists</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">mailingLists</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">scm</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">scm</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">prerequisites</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">prerequisites</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">repositories</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">repositories</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">pluginRepositories</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">pluginRepositories</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">distributionManagement</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">distributionManagement</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">profiles</span><span style="color:#ABB2BF;">&gt;...&lt;/</span><span style="color:#E06C75;">profiles</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">project</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br></div></div><p>唯一ID <br> 对于某个依赖，Maven只需要3个变量即可唯一确定某个jar包：</p><ul><li>groupId：组织的名称，类似Java的包名</li><li>artifactId：该jar包自身的名称，类似Java的类名</li><li>version：该jar包的版本</li></ul><p>依赖关系</p><table><thead><tr><th>scope</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>compile</td><td>编译时需要用到该jar包（默认）</td><td>commons-logging</td></tr><tr><td>test</td><td>编译Test时需要用到该jar包</td><td>junit</td></tr><tr><td>runtime</td><td>编译时不需要，但运行时需要用到</td><td>mysql</td></tr><tr><td>provided</td><td>编译时需要用到，但运行时由JDK或某个服务器提供</td><td>servlet-api</td></tr></tbody></table><p>可选依赖（Optional Dependencies）：控制当前依赖是否向下传递成为间接依赖</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;net.abc&lt;/</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;X&lt;/</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;1.0-SNAPSHOT&lt;/</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">&lt;!--设置可选依赖  --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">optional</span><span style="color:#ABB2BF;">&gt;true&lt;/</span><span style="color:#E06C75;">optional</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>排除依赖（Dependency Exclusions）：控制当前项目是否使用其直接依赖传递下来的间接依赖</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;net.biancheng.www&lt;/</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;B&lt;/</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;1.0-SNAPSHOT&lt;/</span><span style="color:#E06C75;">version</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">exclusions</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 设置排除 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 排除依赖必须基于直接依赖中的间接依赖设置为可以依赖为 false --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 设置当前依赖中是否使用间接依赖 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">exclusion</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">&lt;!--设置具体排除--&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;net.sth&lt;/</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;uu&lt;/</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">exclusion</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">exclusions</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>全局配置文件 (settings.xml)</p><ul><li>全局配置 - <code>\${maven.home}/conf/settings.xml</code></li><li>用户配置 - <code>\${user.home}/.m2/settings.xml</code></li></ul><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">settings</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">xmlns</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;http://maven.apache.org/SETTINGS/1.0.0&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#D19A66;">xmlns:xsi</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#D19A66;">xsi:schemaLocation</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;http://maven.apache.org/SETTINGS/1.0.0</span></span>
<span class="line"><span style="color:#98C379;">                          https://maven.apache.org/xsd/settings-1.0.0.xsd&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">localRepository</span><span style="color:#ABB2BF;">&gt;D:\\Code\\repository&lt;/</span><span style="color:#E06C75;">localRepository</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">interactiveMode</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">usePluginRegistry</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">offline</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">pluginGroups</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">servers</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">mirrors</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">mirror</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">&gt;aliyun&lt;/</span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">&gt;aliyun&lt;/</span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">mirrorOf</span><span style="color:#ABB2BF;">&gt;central&lt;/</span><span style="color:#E06C75;">mirrorOf</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 国内推荐阿里云的Maven镜像 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/</span><span style="color:#E06C75;">url</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">mirror</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">mirrors</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">proxies</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 根据环境参数来调整构建配置的列表 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">profiles</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">activeProfiles</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">settings</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>搜索第三方组件 <a href="https://search.maven.org/" target="_blank" rel="noreferrer">search.maven.org</a> <br> 生命周期（default为例）phase：</p><ul><li>validate</li><li>initialize</li><li>generate-sources</li><li>process-sources</li><li>generate-resources</li><li>process-resources</li><li>compile</li><li>process-classes</li><li>generate-test-sources</li><li>process-test-sources</li><li>generate-test-resources</li><li>process-test-resources</li><li>test-compile</li><li>process-test-classes</li><li>test</li><li>prepare-package</li><li>package</li><li>pre-integration-test</li><li>integration-test</li><li>post-integration-test</li><li>verify</li><li>install</li><li>deploy</li></ul><p>CLI</p><ul><li>mvn clean：清理所有生成的class和jar；</li><li>mvn clean compile：先清理，再执行到compile；</li><li>mvn clean test：先清理，再执行到test</li><li>mvn clean package：先清理，再执行到package。</li></ul><p><strong>Reference</strong></p><ul><li><a href="https://maven.apache.org/pom.html" target="_blank" rel="noreferrer">POM Reference</a><ul><li>POM（Project Object Model，项目对象模型）是 Maven 的基本组件，它是以 xml 文件的形式存放在项目的根目录下</li></ul></li><li><a href="https://maven.apache.org/settings.html" target="_blank" rel="noreferrer">Settings Reference</a></li><li><a href="https://maven.apache.org/run.html" target="_blank" rel="noreferrer">Run</a></li><li><a href="https://maven.apache.org/configure.html" target="_blank" rel="noreferrer">Configure</a></li><li><a href="https://maven.apache.org/ide.html" target="_blank" rel="noreferrer">IDE Integration</a></li></ul><p>plugin <br> moudel manager</p><p><strong>Maven Wrapper</strong> <br> 给一个项目提供一个独立的，指定版本的Maven给它使用</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># install mvnw  在pom.xml所在的目录</span></span>
<span class="line"><span style="color:#ABB2BF;">mvn </span><span style="color:#D19A66;">-N</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">io.takari:maven:0.7.6:wrapper</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># 指定使用的Maven版本3.6.3</span></span>
<span class="line"><span style="color:#ABB2BF;">mvn </span><span style="color:#D19A66;">-N</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">io.takari:maven:0.7.6:wrapper</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">-Dmaven=3.6.3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;"># use</span></span>
<span class="line"><span style="color:#ABB2BF;">mvnw </span><span style="color:#98C379;">clean</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">package</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>项目结构</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">my-project</span></span>
<span class="line"><span style="color:#ABB2BF;">├── </span><span style="color:#98C379;">.mvn</span></span>
<span class="line"><span style="color:#ABB2BF;">│   </span><span style="color:#98C379;">└──</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">wrapper</span></span>
<span class="line"><span style="color:#ABB2BF;">│       </span><span style="color:#98C379;">├──</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">MavenWrapperDownloader.java</span></span>
<span class="line"><span style="color:#ABB2BF;">│       </span><span style="color:#98C379;">├──</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">maven-wrapper.jar</span></span>
<span class="line"><span style="color:#ABB2BF;">│       </span><span style="color:#98C379;">└──</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">maven-wrapper.properties</span></span>
<span class="line"><span style="color:#ABB2BF;">├── </span><span style="color:#98C379;">mvnw</span></span>
<span class="line"><span style="color:#ABB2BF;">├── </span><span style="color:#98C379;">mvnw.cmd</span></span>
<span class="line"><span style="color:#ABB2BF;">├── </span><span style="color:#98C379;">pom.xml</span></span>
<span class="line"><span style="color:#ABB2BF;">└── </span><span style="color:#98C379;">src</span></span>
<span class="line"><span style="color:#ABB2BF;">    ├── </span><span style="color:#98C379;">main</span></span>
<span class="line"><span style="color:#ABB2BF;">    │   </span><span style="color:#98C379;">├──</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">java</span></span>
<span class="line"><span style="color:#ABB2BF;">    │   </span><span style="color:#98C379;">└──</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">resources</span></span>
<span class="line"><span style="color:#ABB2BF;">    └── </span><span style="color:#98C379;">test</span></span>
<span class="line"><span style="color:#ABB2BF;">        ├── </span><span style="color:#98C379;">java</span></span>
<span class="line"><span style="color:#ABB2BF;">        └── </span><span style="color:#98C379;">resources</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="utility" tabindex="-1">Utility <a class="header-anchor" href="#utility" aria-hidden="true">#</a></h2><h3 id="lombok" tabindex="-1"><a href="https://projectlombok.org/features/all" target="_blank" rel="noreferrer">Lombok</a> <a class="header-anchor" href="#lombok" aria-hidden="true">#</a></h3><ul><li><code>[@Getter/@Setter](https://projectlombok.org/features/GetterSetter)</code> 注解在类或字段，注解在类时为所有字段生成setter方法，注解在字段上时只为该字段生成setter方法</li><li><code>@ToString</code> 注解在类，添加toString方法。</li><li><code>@EqualsAndHashCode</code> 注解在类，生成hashCode和equals方法。</li><li><code>@NoArgsConstructor</code> 注解在类，生成无参的构造方法。</li><li><code>@RequiredArgsConstructor</code> 注解在类，为类中需要特殊处理的字段生成构造方法，比如final和被<code>@NonNull</code>注解的字段。</li><li><code>@AllArgsConstructor</code> 注解在类，生成包含类中所有字段的构造方法。</li><li><code>@Data</code> 注解在类，生成setter/getter、equals、canEqual、hashCode、toString方法，如为final属性，则不会为该属性生成setter方法。</li><li><a href="https://projectlombok.org/features/Builder" target="_blank" rel="noreferrer">@Builder</a></li><li><a href="https://projectlombok.org/features/NonNull" target="_blank" rel="noreferrer">@NonNull</a></li><li><a href="https://projectlombok.org/features/Cleanup" target="_blank" rel="noreferrer">@Cleanup</a> Automatic resource management: Call your close() methods safely with no hassle.</li><li><a href="https://projectlombok.org/features/Synchronized" target="_blank" rel="noreferrer">@Synchronized</a></li><li><a href="https://projectlombok.org/features/SneakyThrows" target="_blank" rel="noreferrer">@SneakyThrows</a></li><li><code>@Slf4j</code> 注解在类，生成log变量，严格意义来说是常量</li></ul><h3 id="apache-commons" tabindex="-1"><a href="https://commons.apache.org/" target="_blank" rel="noreferrer">Apache Commons</a> <a class="header-anchor" href="#apache-commons" aria-hidden="true">#</a></h3><h4 id="commons-lang" tabindex="-1"><a href="https://github.com/apache/commons-lang" target="_blank" rel="noreferrer">commons-lang</a> <a class="header-anchor" href="#commons-lang" aria-hidden="true">#</a></h4><p><a href="https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html" target="_blank" rel="noreferrer">StringUtils</a></p><ul><li><strong>IsEmpty/IsBlank</strong> - checks if a String contains text</li><li><strong>Trim/Strip</strong> - removes leading and trailing whitespace</li><li><strong>Equals/Compare</strong> - compares two strings in a null-safe manner</li><li><strong>startsWith</strong> - check if a String starts with a prefix in a null-safe manner</li><li><strong>endsWith</strong> - check if a String ends with a suffix in a null-safe manner</li><li><strong>IndexOf/LastIndexOf/Contains</strong> - null-safe index-of checks</li><li><strong>IndexOfAny/LastIndexOfAny/IndexOfAnyBut/LastIndexOfAnyBut</strong> - index-of any of a set of Strings</li><li><strong>ContainsOnly/ContainsNone/ContainsAny</strong> - checks if String contains only/none/any of these characters</li><li><strong>Substring/Left/Right/Mid</strong> - null-safe substring extractions</li><li><strong>SubstringBefore/SubstringAfter/SubstringBetween</strong> - substring extraction relative to other strings</li><li><strong>Split/Join</strong> - splits a String into an array of substrings and vice versa</li><li><strong>Remove/Delete</strong> - removes part of a String</li><li><strong>Replace/Overlay</strong> - Searches a String and replaces one String with another</li><li><strong>Chomp/Chop</strong> - removes the last part of a String</li><li><strong>AppendIfMissing</strong> - appends a suffix to the end of the String if not present</li><li><strong>PrependIfMissing</strong> - prepends a prefix to the start of the String if not present</li><li><strong>LeftPad/RightPad/Center/Repeat</strong> - pads a String</li><li><strong>UpperCase/LowerCase/SwapCase/Capitalize/Uncapitalize</strong> - changes the case of a String</li><li><strong>CountMatches</strong> - counts the number of occurrences of one String in another</li><li><strong>IsAlpha/IsNumeric/IsWhitespace/IsAsciiPrintable</strong> - checks the characters in a String</li><li><strong>DefaultString</strong> - protects against a null input String</li><li><strong>Rotate</strong> - rotate (circular shift) a String</li><li><strong>Reverse/ReverseDelimited</strong> - reverses a String</li><li><strong>Abbreviate</strong> - abbreviates a string using ellipses or another given String</li><li><strong>Difference</strong> - compares Strings and reports on their differences</li><li><strong>LevenshteinDistance</strong> - the number of changes needed to change one String into another</li></ul><p><a href="https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/ArrayUtils.html" target="_blank" rel="noreferrer">ArrayUtils</a> <br> 全局静态常量：EMPTY_*_ARRAY（根据 * 处的类型，返回对应的长度为 0 的空数组）</p><ul><li>String toString(Object array, String stringIfNull)：如果为空，返回 stringIfNull</li><li>String[] toStringArray(Object[] array, String valueForNullElements)：将 Object 数组转换成 String 数组，元素中的 null 值使用 valueForNullElements</li><li>int hashCode(Object array)：使用 HashCodeBuilder 返回数组的 hashcode（相同个数、相同顺序的数组 hashCode 也相同）</li><li>boolean isEquals(Object array1, Object array2)：用 EqualsBuilder 返回两个数组比较的结果，相当于 Arrays.deepEquals(Object[] a1, Object[] a2)</li><li>Map&lt;Object, Object&gt; toMap(Object[] array)：作为参数的数组有两个选择：一是成员为 Map.Entry，然后通过遍历该数组，把 Map.Entry 拆分并分别放入新生成 Map 的 Key 和 Value 中；二是成员为长度大于等于 2 的数组，位置 0 的元素作为 key，位置 1 的元素作为 value</li><li>T[] toArray(T... items)</li><li>int[] toPrimitive(Integer[] array)：将包装类型数组转为基本类型数组</li><li>Integer[] toObject(int[] array)：将基本类型数组转为包装类型数组</li><li>xxx[] clone(xxx[] array)：如果不为空，则使用参数自己的 clone 方法处理</li><li>Object[] subarray(Object[] array, int startIndexInclusive, int endIndexExclusive)：数组拷贝</li><li>void reverse(Object[] array, int startIndexInclusive, int endIndexExclusive)：数组元素反转（从数组前后两个坐标 i, j 开始，交换数据，并向中间移动，当 i&gt;j 时停止）</li><li>int indexOf(Object[] array, Object objectToFind, int startIndex)：查找数组元素位置，return -1 if not found or null array input</li><li>boolean contains(Object[] array, Object objectToFind)：查找元素是否存在数组中</li><li>boolean isEmpty(Object[] array)：判断是否为空，length=0 或 null 都属于空</li><li>Object[] addAll(Object[] array1, Object... array2)：并集操作，合并数组</li></ul><p><a href="https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/time/DateUtils.html" target="_blank" rel="noreferrer">DateUtils</a></p><ol><li>全局静态常量：MILLIS_PER_SECOND、MILLIS_PER_SECOND、MILLIS_PER_MINUTE、MILLIS_PER_HOUR、MILLIS_PER_DAY</li><li>日期比较 <br> boolean isSameDay(Date date1, Date date2) <br> boolean isSameDay(Calendar cal1, Calendar cal2)：比较日期是否相同，忽略 time（通过比较 Calendar.ERA、YEAR、DAY_OF_YEAR 三个属性判断给定日期是否相同）</li><li>时间比较 <br> boolean isSameInstant(Date date1, Date date2) <br> boolean isSameInstant(Calendar cal1, Calendar cal2)：比较时间是否相同（通过 Date 类中的 getTime() 方法）</li><li>add 族 <br> Date addYears(Date date, int amount)：在给定日期 date 的基础上添加 amount 年，返回新的对象 <br> Date addMonths(Date date, int amount)：添加月 <br> Date addWeeks(Date date, int amount)：添加周 <br> Date addDays(Date date, int amount)：添加日 <br> Date addHours(Date date, int amount)：添加小时 <br> Date addMinutes(Date date, int amount)：添加分钟 <br> Date addSeconds(Date date, int amount)：添加秒 <br> Date addMilliseconds(Date date, int amount)：添加毫秒</li><li>set 族 <br> Date setYears(Date date, int amount)：为 date 设置新的年份信息，并返回一个新的对象 <br> Date setMonths(Date date, int amount)：设置月份 <br> Date setDays(Date date, int amount)：设置日期 <br> Date setHours(Date date, int amount)：设置小时 <br> Date setMinutes(Date date, int amount)：设置分钟 <br> Date setSeconds(Date date, int amount)：设置秒 <br> Date setMilliseconds(Date date, int amount)：设置毫秒</li><li>round 族、truncate 族、ceil 族：日期取整（日期精度调节，如调节至秒/分等）</li></ol><p>Date round(Date date, int field)：相当于数学中的四舍五入法取整 <br> Date truncate(Date date, int field)：相当于去余法取整 <br> Date ceiling(Date date, int field)：相当于向上取整</p><ul><li><a href="https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/tuple/Pair.html" target="_blank" rel="noreferrer">Pair</a></li><li><a href="https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/BooleanUtils.html" target="_blank" rel="noreferrer">BooleanUtils</a></li><li><a href="https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/CharUtils.html" target="_blank" rel="noreferrer">CharUtils</a></li><li><a href="https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/math/NumberUtils.html" target="_blank" rel="noreferrer">NumberUtils</a></li><li><a href="https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/RegExUtils.html" target="_blank" rel="noreferrer">RegExUtils</a></li><li><a href="https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/RandomStringUtils.html" target="_blank" rel="noreferrer">RandomStringUtils</a></li><li><a href="https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/builder/StandardToStringStyle.html" target="_blank" rel="noreferrer">StandardToStringStyle</a></li><li><a href="https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/SerializationUtils.html" target="_blank" rel="noreferrer">SerializationUtils</a></li><li><a href="https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/SystemUtils.html" target="_blank" rel="noreferrer">SystemUtils</a></li><li><a href="https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/ThreadUtils.html" target="_blank" rel="noreferrer">ThreadUtils</a></li><li><a href="https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/ClassUtils.html" target="_blank" rel="noreferrer">ClassUtils</a></li><li><a href="https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/reflect/FieldUtils.html" target="_blank" rel="noreferrer">FieldUtils</a></li><li><a href="https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/reflect/MethodUtils.html" target="_blank" rel="noreferrer">MethodUtils</a></li></ul><h4 id="commons-io" tabindex="-1">commons-io <a class="header-anchor" href="#commons-io" aria-hidden="true">#</a></h4><p><a href="https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FilenameUtils.html" target="_blank" rel="noreferrer">FilenameUtils</a></p><ul><li>concat(String basePath, String fullFilenameToAdd) 合并目录和文件名为文件全路径</li><li>getBaseName(String filename) 去除目录和后缀后的文件名</li><li>getExtension(String filename) 获取文件的后缀</li><li>getFullPath(String filename) 获取文件的目录</li><li>getName(String filename) 获取文件名</li><li>getPath(String filename) 去除盘符后的路径</li><li>getPrefix(String filename) 盘符</li><li>indexOfExtension(String filename) 获取最后一个.的位置</li><li>indexOfLastSeparator(String filename) 获取最后一个/的位置</li><li>normalize(String filename) 获取当前系统格式化路径</li><li>removeExtension(String filename) 移除文件的扩展名</li><li>separatorsToSystem(String path) 转换分隔符为当前系统分隔符</li><li>separatorsToUnix(String path) 转换分隔符为linux系统分隔符</li><li>separatorsToWindows(String path) 转换分隔符为windows系统分隔符</li><li>equals(String filename1, String filename2) 判断文件路径是否相同，非格式化</li><li>equalsNormalized(String filename1, String filename2) 判断文件路径是否相同，格式化</li><li>directoryContains(String canonicalParent, String canonicalChild) 判断目录下是否包含指定文件或目录</li><li>isExtension(String filename, String extension) 判断文件扩展名是否包含在指定集合(数组、字符串)中</li><li>wildcardMatch(String filename, String wildcardMatcher) 判断文件扩展名是否和指定规则匹配</li></ul><p><a href="https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FileUtils.html" target="_blank" rel="noreferrer">FileUtils</a></p><ul><li>writing to a file</li><li>reading from a file</li><li>make a directory including parent directories</li><li>copying files and directories</li><li>deleting files and directories</li><li>converting to and from a URL</li><li>listing files and directories by filter and extension</li><li>comparing file content</li><li>file last changed date</li><li>calculating a checksum</li></ul><p><a href="https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/IOUtils.html" target="_blank" rel="noreferrer">IOUtils</a></p><ul><li>toXxx/read - these methods read data from a stream</li><li>write - these methods write data to a stream</li><li>copy - these methods copy all the data from one stream to another</li><li>contentEquals - these methods compare the content of two streams</li></ul><h4 id="compress" tabindex="-1"><a href="http://commons.apache.org/proper/commons-compress/" target="_blank" rel="noreferrer">Compress</a> <a class="header-anchor" href="#compress" aria-hidden="true">#</a></h4><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Slf4j</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">ZipUtils</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">   * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#7F848E;font-style:italic;"> </span><span style="color:#E06C75;font-style:italic;">srcPath</span><span style="color:#7F848E;font-style:italic;">    待压缩的文件或目录</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">   * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#7F848E;font-style:italic;"> </span><span style="color:#E06C75;font-style:italic;">targetFile</span><span style="color:#7F848E;font-style:italic;"> 压缩后的文件</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">   */</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> zip</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">srcPath</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">targetFile</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Exception</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">File</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">zipFile</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">FileUtils</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getFile</span><span style="color:#ABB2BF;">(targetFile);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">File</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">srcDir</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">FileUtils</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getFile</span><span style="color:#ABB2BF;">(srcPath);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">ZipArchiveOutputStream</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">stream</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ZipArchiveOutputStream</span><span style="color:#ABB2BF;">(zipFile)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">zipRecursive</span><span style="color:#ABB2BF;">(stream, srcDir, </span><span style="color:#E5C07B;">StringUtils</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">EMPTY</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">stream</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">finish</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#7F848E;font-style:italic;">// 递归压缩目录下的文件和目录</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> zipRecursive</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">ZipArchiveOutputStream</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">zipStream</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">File</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">srcFile</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">basePath</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#61AFEF;">      </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">IOException</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">currentFile</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> basePath </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">srcFile</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getName</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">srcFile</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isDirectory</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">File</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;">files</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">srcFile</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">listFiles</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">ArrayUtils</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isNotEmpty</span><span style="color:#ABB2BF;">(files)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">File</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">file</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> files) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">zipRecursive</span><span style="color:#ABB2BF;">(zipStream, file, currentFile </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">File</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">separator</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 空目录 或 文件直接放入</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">ZipArchiveEntry</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">entry</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ZipArchiveEntry</span><span style="color:#ABB2BF;">(srcFile, currentFile);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">zipStream</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">putArchiveEntry</span><span style="color:#ABB2BF;">(entry);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">srcFile</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isFile</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">FileUtils</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">copyFile</span><span style="color:#ABB2BF;">(srcFile, zipStream);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">zipStream</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">closeArchiveEntry</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">   * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#7F848E;font-style:italic;"> </span><span style="color:#E06C75;font-style:italic;">srcFile</span><span style="color:#7F848E;font-style:italic;">    待解压文件</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">   * </span><span style="color:#C678DD;font-style:italic;">@param</span><span style="color:#7F848E;font-style:italic;"> </span><span style="color:#E06C75;font-style:italic;">targetPath</span><span style="color:#7F848E;font-style:italic;"> 存放位置</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">   */</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> unZip</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">srcFile</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">targetPath</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Exception</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">InputStream</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">fileInputStream</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">FileInputStream</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">        srcFile); </span><span style="color:#E5C07B;">ZipArchiveInputStream</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">archiveInputStream</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ZipArchiveInputStream</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">        fileInputStream)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">ZipArchiveEntry</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">entry</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;"> ((entry </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">archiveInputStream</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getNextZipEntry</span><span style="color:#ABB2BF;">()) </span><span style="color:#56B6C2;">!=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">archiveInputStream</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">canReadEntryData</span><span style="color:#ABB2BF;">(entry)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">warn</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;{} skip&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">entry</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getName</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">continue</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">File</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">file</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">FileUtils</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getFile</span><span style="color:#ABB2BF;">(targetPath, </span><span style="color:#E5C07B;">entry</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getName</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">entry</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isDirectory</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Create directory {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">file</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getCanonicalPath</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">file</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isDirectory</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">file</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">mkdirs</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">IOException</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;failed to create directory &quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> file);</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">FileUtils</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">copyToFile</span><span style="color:#ABB2BF;">(archiveInputStream, file);</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">file</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setLastModified</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">entry</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getLastModifiedDate</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">getTime</span><span style="color:#ABB2BF;">())) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">warn</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;set {} file properties failed.&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">file</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getName</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br></div></div><h3 id="guava" tabindex="-1"><a href="https://github.com/google/guava" target="_blank" rel="noreferrer">guava</a> <a class="header-anchor" href="#guava" aria-hidden="true">#</a></h3><p>Collections</p><ul><li><a href="https://github.com/google/guava/wiki/ImmutableCollectionsExplained" target="_blank" rel="noreferrer">Immutable collections</a></li><li><a href="https://github.com/google/guava/wiki/NewCollectionTypesExplained" target="_blank" rel="noreferrer">New collection types</a><ul><li><a href="https://github.com/google/guava/wiki/NewCollectionTypesExplained#multiset" target="_blank" rel="noreferrer">Multiset</a></li><li><a href="https://github.com/google/guava/wiki/NewCollectionTypesExplained#multimap" target="_blank" rel="noreferrer">Multimap</a></li><li><a href="https://github.com/google/guava/wiki/NewCollectionTypesExplained#bimap" target="_blank" rel="noreferrer">BiMap</a></li><li><a href="https://github.com/google/guava/wiki/NewCollectionTypesExplained#table" target="_blank" rel="noreferrer">Table</a></li><li><a href="https://github.com/google/guava/wiki/NewCollectionTypesExplained#classtoinstancemap" target="_blank" rel="noreferrer">ClassToInstanceMap</a></li><li><a href="https://github.com/google/guava/wiki/NewCollectionTypesExplained#rangeset" target="_blank" rel="noreferrer">RangeSet</a></li><li><a href="https://github.com/google/guava/wiki/NewCollectionTypesExplained#rangemap" target="_blank" rel="noreferrer">RangeMap</a></li></ul></li><li><a href="https://github.com/google/guava/wiki/CollectionUtilitiesExplained" target="_blank" rel="noreferrer">Utility Classes</a><ul><li><a href="https://github.com/google/guava/wiki/CollectionUtilitiesExplained#iterables" target="_blank" rel="noreferrer">Iterables</a></li><li><a href="https://github.com/google/guava/wiki/CollectionUtilitiesExplained#lists" target="_blank" rel="noreferrer">Lists</a></li><li><a href="https://github.com/google/guava/wiki/CollectionUtilitiesExplained#sets" target="_blank" rel="noreferrer">Sets</a></li><li><a href="https://github.com/google/guava/wiki/CollectionUtilitiesExplained#maps" target="_blank" rel="noreferrer">Maps</a></li><li><a href="https://github.com/google/guava/wiki/CollectionUtilitiesExplained#multisets" target="_blank" rel="noreferrer">Multisets</a></li><li><a href="https://github.com/google/guava/wiki/CollectionUtilitiesExplained#multimaps" target="_blank" rel="noreferrer">Multimaps</a></li><li><a href="https://github.com/google/guava/wiki/CollectionUtilitiesExplained#tables" target="_blank" rel="noreferrer">Tables</a></li></ul></li></ul><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Integer</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;"> countUp </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Ints</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">asList</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Integer</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;"> countDown </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Lists</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reverse</span><span style="color:#ABB2BF;">(theList);</span><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// {5, 4, 3, 2, 1}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Integer</span><span style="color:#ABB2BF;">&gt;&gt;</span><span style="color:#E06C75;"> parts </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Lists</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">partition</span><span style="color:#ABB2BF;">(countUp, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">);</span><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// {{1, 2}, {3, 4}, {5}}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">Set</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;"> fruits </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">ImmutableSet</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">of</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;apple&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;orange&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;banana&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;"> copyList </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">ImmutableList</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">copyOf</span><span style="color:#ABB2BF;">(fruits);</span></span>
<span class="line"><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;"> buildList </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> ImmutableList</span><span style="color:#ABB2BF;">.</span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">String</span><span style="color:#56B6C2;">&gt;</span><span style="color:#61AFEF;">builder</span><span style="color:#E06C75;">()</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addAll</span><span style="color:#ABB2BF;">(fruits).</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;peach&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><a href="https://github.com/google/guava/wiki/GraphsExplained" target="_blank" rel="noreferrer">Graphs</a></li><li><a href="https://github.com/google/guava/wiki/CachesExplained" target="_blank" rel="noreferrer">Caches</a></li></ul><p>默认使用LRU淘汰算法</p><p>基于容量的回收（size-based eviction）</p><ul><li>maximumSize(long)</li><li>weigher(Weigher) 指定一个权重函数</li><li>maximumWeight(long) 指定最大总重</li></ul><p>定时回收（Timed Eviction）</p><ul><li>expireAfterAccess(long, TimeUnit)：缓存项在给定时间内没有被读/写访问，则回收</li><li>expireAfterWrite(long, TimeUnit)：缓存项在给定时间内没有被写访问（创建或覆盖），则回收</li></ul><p>基于引用的回收（Reference-based Eviction）</p><ul><li>CacheBuilder.weakKeys()：使用弱引用存储键。</li><li>CacheBuilder.weakValues()：使用弱引用存储值</li><li>CacheBuilder.softValues()：使用软引用存储值</li></ul><p>显式清除</p><ul><li>个别清除：Cache.invalidate(key)</li><li>批量清除：Cache.invalidateAll(keys)</li><li>清除所有缓存项：Cache.invalidateAll()</li></ul><p>统计</p><ul><li>recordStats() 开启Guava Cache的统计功能。</li><li>Cache.stats() 返回CacheStats对象 <ul><li>hitRate()：缓存命中率；</li><li>averageLoadPenalty()：加载新值的平均时间，单位为纳秒；</li><li>evictionCount()：缓存项被回收的总数，不包括显式清除。</li></ul></li></ul><p>移除监听器：缓存项被移除时的回调</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 通过CacheBuilder构建一个缓存实例</span></span>
<span class="line"><span style="color:#E5C07B;">Cache</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;"> cache </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">CacheBuilder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">newBuilder</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#E06C75;">        		</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">initialCapacity</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;">   </span><span style="color:#7F848E;font-style:italic;">// 设置初始容量为10</span></span>
<span class="line"><span style="color:#E06C75;">                </span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">maximumSize</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 设置缓存的最大容量</span></span>
<span class="line"><span style="color:#E06C75;">                </span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">expireAfterWrite</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">TimeUnit</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">MINUTES</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 设置缓存在写入一分钟后失效</span></span>
<span class="line"><span style="color:#E06C75;">                </span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">concurrencyLevel</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">)</span><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 设置并发级别为10</span></span>
<span class="line"><span style="color:#E06C75;">                </span><span style="color:#7F848E;font-style:italic;">// 设置并发级别为cpu核心数</span></span>
<span class="line"><span style="color:#E06C75;">                </span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">concurrencyLevel</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Runtime</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getRuntime</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">availableProcessors</span><span style="color:#ABB2BF;">())</span><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#E06C75;">                </span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">recordStats</span><span style="color:#ABB2BF;">()</span><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 开启缓存统计</span></span>
<span class="line"><span style="color:#E06C75;">                </span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 放入/覆盖一个缓存</span></span>
<span class="line"><span style="color:#E5C07B;">cache</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">put</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;key&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;value&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 获取缓存，如果不存在返回null</span></span>
<span class="line"><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> value </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">cache</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getIfPresent</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;key&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// LoadingCache，能够通过CacheLoader自发的加载缓存</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 定时刷新缓存</span></span>
<span class="line"><span style="color:#E5C07B;">LoadingCache</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;"> loadingCache </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">CacheBuilder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">newBuilder</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#7F848E;font-style:italic;">// 设置缓存在写入10分钟后，通过CacheLoader的load方法进行刷新</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">refreshAfterWrite</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">10</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">TimeUnit</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">SECONDS</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">CacheLoader</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;() {</span></span>
<span class="line"><span style="color:#ABB2BF;">            @</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">String</span><span style="color:#61AFEF;"> load</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Exception</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#7F848E;font-style:italic;">// 缓存加载逻辑</span></span>
<span class="line"><span style="color:#ABB2BF;">                ...</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><ul><li><p><a href="https://github.com/google/guava/wiki/StringsExplained" target="_blank" rel="noreferrer">Strings</a></p><ul><li><a href="https://github.com/google/guava/wiki/StringsExplained#joiner" target="_blank" rel="noreferrer">Joiner</a></li><li><a href="https://github.com/google/guava/wiki/StringsExplained#splitter" target="_blank" rel="noreferrer">Splitter</a></li><li><a href="https://github.com/google/guava/wiki/StringsExplained#charmatcher" target="_blank" rel="noreferrer">CharMatcher</a></li><li><a href="https://github.com/google/guava/wiki/StringsExplained#charsets" target="_blank" rel="noreferrer">Charsets</a></li><li><a href="https://github.com/google/guava/wiki/StringsExplained#caseformat" target="_blank" rel="noreferrer">CaseFormat</a></li></ul></li><li><p><a href="https://github.com/google/guava/wiki/PrimitivesExplained" target="_blank" rel="noreferrer">Primitives</a></p><ul><li><a href="https://github.com/google/guava/wiki/PrimitivesExplained#primitive-array-utilities" target="_blank" rel="noreferrer">Primitive arrays</a></li><li><a href="https://github.com/google/guava/wiki/PrimitivesExplained#general-utility-methods" target="_blank" rel="noreferrer">General utilities</a></li><li><a href="https://github.com/google/guava/wiki/PrimitivesExplained#byte-conversion-methods" target="_blank" rel="noreferrer">Byte conversion</a></li><li><a href="https://github.com/google/guava/wiki/PrimitivesExplained#unsigned-support" target="_blank" rel="noreferrer">Unsigned support</a></li></ul></li><li><p><a href="https://github.com/google/guava/wiki/RangesExplained" target="_blank" rel="noreferrer">Ranges</a></p></li><li><p><a href="https://github.com/google/guava/wiki/IOExplained" target="_blank" rel="noreferrer">I/O</a></p><ul><li><a href="https://github.com/google/guava/wiki/ClosingResourcesExplained" target="_blank" rel="noreferrer">Closing Resources</a></li></ul></li><li><p><a href="https://github.com/google/guava/wiki/HashingExplained" target="_blank" rel="noreferrer">Hashing</a></p><ul><li><a href="https://github.com/google/guava/wiki/HashingExplained#bloomfilter" target="_blank" rel="noreferrer">BloomFilter</a></li></ul></li><li><p><a href="https://github.com/google/guava/wiki/EventBusExplained" target="_blank" rel="noreferrer">EventBus</a></p></li><li><p><a href="https://github.com/google/guava/wiki/MathExplained" target="_blank" rel="noreferrer">Math</a></p><ul><li><a href="https://github.com/google/guava/wiki/MathExplained#Math-on_Integral-Types" target="_blank" rel="noreferrer">Integral</a><ul><li><a href="https://github.com/google/guava/wiki/MathExplained#checked-arithmetic" target="_blank" rel="noreferrer">Overflow Checking</a></li></ul></li><li><a href="https://github.com/google/guava/wiki/MathExplained#Floating-point-arithmetic.md" target="_blank" rel="noreferrer">Floating Point</a></li></ul></li><li><p><a href="https://github.com/google/guava/wiki/ReflectionExplained" target="_blank" rel="noreferrer">Reflection</a></p><ul><li><a href="https://github.com/google/guava/wiki/ReflectionExplained#typetoken" target="_blank" rel="noreferrer">TypeToken</a></li><li><a href="https://github.com/google/guava/wiki/ReflectionExplained#invokable" target="_blank" rel="noreferrer">Invokable</a></li><li><a href="https://github.com/google/guava/wiki/ReflectionExplained#dynamic-proxies" target="_blank" rel="noreferrer">Dynamic Proxies</a></li><li><a href="https://github.com/google/guava/wiki/ReflectionExplained#classpath" target="_blank" rel="noreferrer">ClassPath</a></li></ul></li></ul><p><strong>RateLimiter</strong> <br> 令牌桶算法</p><ul><li>RateLimiter.create(double permitsPerSecond) 根据指定的稳定吞吐率创建RateLimiter，吞吐率指每秒多少许可数（QPS，每秒多少查询）</li><li>RateLimiter.create(double permitsPerSecond, long warmupPeriod, TimeUnit unit) 根据指定的稳定吞吐率和预热期来创建RateLimiter，在这段预热时间内，RateLimiter每秒分配的许可数会平稳地增长直到预热期结束时达到其最大速率。（只要存在足够请求数来使其饱和）</li><li>getRate() 配置中的稳定速率，该速率单位是每秒多少许可数</li><li>setRate(double permitsPerSecond) 更新RateLimite的稳定速率</li><li>acquire() 从RateLimiter获取一个许可，该方法会被阻塞直到获取到请求</li><li>acquire(int permits) 从RateLimiter获取指定许可数，该方法会被阻塞直到获取到请求</li><li>tryAcquire() 获取许可，如果该许可可以在无延迟下的情况下立即获取得到的话</li><li>tryAcquire(int permits)</li><li>tryAcquire(long timeout, TimeUnit unit)</li><li>tryAcquire(int permits, long timeout, TimeUnit unit) 获取指定许可数如果该许可数可以在不超过timeout的时间内获取得到的话，或者如果无法在timeout 过期之前获取得到许可数的话，立即返回false （无需等待）</li></ul><p><a href="https://github.com/rholder/guava-retrying" target="_blank" rel="noreferrer">guava-retrying</a></p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">Retryer</span><span style="color:#56B6C2;">&lt;</span><span style="color:#ABB2BF;">Boolean</span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;"> retryer </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> RetryerBuilder.</span><span style="color:#56B6C2;">&lt;</span><span style="color:#ABB2BF;">Boolean</span><span style="color:#56B6C2;">&gt;</span><span style="color:#61AFEF;">newBuilder</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">retryIfExceptionOfType</span><span style="color:#ABB2BF;">(IOException.</span><span style="color:#C678DD;font-style:italic;">class</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">retryIfRuntimeException</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">withWaitStrategy</span><span style="color:#ABB2BF;">(WaitStrategies.</span><span style="color:#61AFEF;">exponentialWait</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, TimeUnit.</span><span style="color:#D19A66;">MINUTES</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">withStopStrategy</span><span style="color:#ABB2BF;">(StopStrategies.</span><span style="color:#61AFEF;">neverStop</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">()</span><span style="color:#FFFFFF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="hutool" tabindex="-1"><a href="https://github.com/dromara/hutool" target="_blank" rel="noreferrer">hutool</a> <a class="header-anchor" href="#hutool" aria-hidden="true">#</a></h3><br><h2 id="log" tabindex="-1">Log <a class="header-anchor" href="#log" aria-hidden="true">#</a></h2><p>日志框架</p><ul><li><a href="https://github.com/apache/logging-log4j2" target="_blank" rel="noreferrer">logging-log4j2</a></li><li><a href="https://github.com/qos-ch/logback" target="_blank" rel="noreferrer">logback</a></li></ul><p>日志门面：对不同日志框架提供的一个 API 封装，可以在部署的时候不修改任何配置即可接入一种日志实现方案</p><ul><li><a href="https://github.com/qos-ch/slf4j" target="_blank" rel="noreferrer">slf4j</a></li></ul><p><a href="https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/MDC.html#:~:text=A%20Mapped%20Diagnostic%20Context%2C%20or%20MDC%20in%20short%2C,MDC%20is%20managed%20on%20a%20per%20thread%20basis." target="_blank" rel="noreferrer">MDC</a> ( Mapped Diagnostic Contexts )：一个线程安全的存放诊断日志的容器，对分布式应用系统的审计和调试</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">MDC</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#7F848E;font-style:italic;">// 将上下文的值作为 MDC 的 key 放到线程上下的 map 中</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> put</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#7F848E;font-style:italic;">// 通过 key 获取上下文标识</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">String</span><span style="color:#61AFEF;"> get</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#7F848E;font-style:italic;">// 通过 key 移除上下文标识</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> remove</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#7F848E;font-style:italic;">// 清除 MDC 中所有的 entry</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> clear</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>Spring Boot + Slf4j + Logback</strong></p><blockquote><p>Spring Boot 默认使用 logback 作为日志组件</p></blockquote><p>logback.xml 配置</p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;?</span><span style="color:#E06C75;">xml</span><span style="color:#D19A66;"> version</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;1.0&quot;</span><span style="color:#D19A66;"> encoding</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;UTF-8&quot;</span><span style="color:#ABB2BF;"> ?&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- logback中一共有5种有效级别，分别是TRACE、DEBUG、INFO、WARN、ERROR，优先级依次从低到高 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">configuration</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">scan</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;true&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">scanPeriod</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;60 seconds&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">debug</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;false&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">property</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;DIR_NAME&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">value</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;spring-boot-log-logback&quot;</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">&lt;!-- APPENDER BEGIN --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">appender</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;STDOUT&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">encoder</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">pattern</span><span style="color:#ABB2BF;">&gt;%d{HH:mm:ss.SSS} [%thread] [%-5p] %c{36}.%M - %m%n&lt;/</span><span style="color:#E06C75;">pattern</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">encoder</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">appender</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">appender</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ALL&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 根据时间来制定滚动策略 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">rollingPolicy</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">fileNamePattern</span><span style="color:#ABB2BF;">&gt;\${user.dir}/logs/\${DIR_NAME}/all.%d{yyyy-MM-dd}.log&lt;/</span><span style="color:#E06C75;">fileNamePattern</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">maxHistory</span><span style="color:#ABB2BF;">&gt;30&lt;/</span><span style="color:#E06C75;">maxHistory</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">rollingPolicy</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 根据文件大小来制定滚动策略 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">triggeringPolicy</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">maxFileSize</span><span style="color:#ABB2BF;">&gt;30MB&lt;/</span><span style="color:#E06C75;">maxFileSize</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">triggeringPolicy</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">encoder</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">pattern</span><span style="color:#ABB2BF;">&gt;%d{HH:mm:ss.SSS} [%thread] [%-5p] %c{36}.%M - %m%n&lt;/</span><span style="color:#E06C75;">pattern</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">encoder</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">appender</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">appender</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;SPRING&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 根据时间来制定滚动策略 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">rollingPolicy</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">fileNamePattern</span><span style="color:#ABB2BF;">&gt;\${user.dir}/logs/\${DIR_NAME}/spring.%d{yyyy-MM-dd}.log</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;/</span><span style="color:#E06C75;">fileNamePattern</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">maxHistory</span><span style="color:#ABB2BF;">&gt;30&lt;/</span><span style="color:#E06C75;">maxHistory</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">rollingPolicy</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 根据文件大小来制定滚动策略 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">triggeringPolicy</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">class</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">maxFileSize</span><span style="color:#ABB2BF;">&gt;10MB&lt;/</span><span style="color:#E06C75;">maxFileSize</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">triggeringPolicy</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">encoder</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">pattern</span><span style="color:#ABB2BF;">&gt;%d{HH:mm:ss.SSS} [%thread] [%-5p] %c{36}.%M - %m%n&lt;/</span><span style="color:#E06C75;">pattern</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">encoder</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">appender</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">&lt;!-- APPENDER END --&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">&lt;!-- LOGGER BEGIN --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">&lt;!-- 本项目的日志记录，分级打印 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">logger</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;io.github.dunwu&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">level</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;DEBUG&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">additivity</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;false&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">appender-ref</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">ref</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ALL&quot;</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">appender-ref</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">ref</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;STDOUT&quot;</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">logger</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">springProfile</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;staging&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">logger</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;io.github.dunwu&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">level</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;TRACE&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">additivity</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;false&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">appender-ref</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">ref</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;ALL&quot;</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">appender-ref</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">ref</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;STDOUT&quot;</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">logger</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">springProfile</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">&lt;!-- SPRING框架日志 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">logger</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;org.springframework&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">level</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;TRACE&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">additivity</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;false&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">appender-ref</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">ref</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;SPRING&quot;</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">logger</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">root</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">level</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;WARN&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">appender-ref</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">ref</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;STDOUT&quot;</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">root</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;">&lt;!-- LOGGER END --&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">configuration</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br></div></div><p><strong>Spring Boot + Slf4j + Log4j2</strong></p><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;org.springframework.boot&lt;/</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;spring-boot-starter-web&lt;/</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">exclusions</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E06C75;">exclusion</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;org.springframework.boot&lt;/</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">            &lt;</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;spring-boot-starter-logging&lt;/</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;/</span><span style="color:#E06C75;">exclusion</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">exclusions</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;org.springframework.boot&lt;/</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;spring-boot-starter-log4j2&lt;/</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">&lt;!-- 识别yaml格式依赖 --&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;com.fasterxml.jackson.dataformat&lt;/</span><span style="color:#E06C75;">groupId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;jackson-dataformat-yaml&lt;/</span><span style="color:#E06C75;">artifactId</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">dependency</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">application.yml</span></span>
<span class="line"><span style="color:#ABB2BF;">logging:</span></span>
<span class="line"><span style="color:#ABB2BF;">  config: classpath:log4j2.yml</span></span>
<span class="line"><span style="color:#ABB2BF;">	root: info</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">Configuration</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">status</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">warn</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;"># 用于控制log4j2日志框架本身的日志级别</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">monitorInterval</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">30</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;"># 每隔多少秒重新读取配置文件，可以不重启应用的情况下修改配置</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">Properties</span><span style="color:#ABB2BF;">: </span><span style="color:#7F848E;font-style:italic;"># 定义全局变量</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">Property</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">log.level.console</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">info</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">log.path</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">/app/logs</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">project.name</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Demo</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">log.pattern</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;%d{yyyy-MM-dd HH:mm:ss.SSS} -%5p \${PID:-} [%15.15t] %-30.30C{1.} : %m%n&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">Appenders</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">Console</span><span style="color:#ABB2BF;">:  </span><span style="color:#7F848E;font-style:italic;"># 输出到控制台</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">CONSOLE</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">target</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">SYSTEM_OUT</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">PatternLayout</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">pattern</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;%d{yyyy-MM-dd HH:mm:ss,SSS}:%5p %t (%F:%L) - %m%n&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">RollingFile</span><span style="color:#ABB2BF;">: </span><span style="color:#7F848E;font-style:italic;"># 打印到文件</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">ROLLING_FILE</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;"># fileName  指定当前日志文件的位置和文件名称</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">fileName</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">\${log.path}/\${project.name}.log</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;"># filePattern  指定当发生Rolling时，文件的转移和重命名规则</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">filePattern</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;\${log.path}/$\${date:yyyy-MM}/\${project.name}-%d{yyyy-MM-dd}-%i.log.gz&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">PatternLayout</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">pattern</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">\${log.pattern}</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">Filters</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">ThresholdFilter</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            - </span><span style="color:#E06C75;">level</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">\${sys:log.level.console}</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#E06C75;">onMatch</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">ACCEPT</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#E06C75;">onMismatch</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">DENY</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">Policies</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">TimeBasedTriggeringPolicy</span><span style="color:#ABB2BF;">:  </span><span style="color:#7F848E;font-style:italic;"># 按天分类</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">modulate</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">true</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">interval</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">SizedTriggeringPolicy</span><span style="color:#ABB2BF;">:  </span><span style="color:#7F848E;font-style:italic;"># zip when up to 50MB</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">size</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;50 MB&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">DefaultRolloverStrategy</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">max</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">     </span><span style="color:#7F848E;font-style:italic;"># 文件最多100个</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">Delete</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">basePath</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;\${log.path}&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">maxDepth</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;2&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">IfLastModified</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#E06C75;">age</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;14d&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">Loggers</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">#日志器分根日志器Root和自定义日志器，当根据日志名字获取不到指定的日志器时就使用Root作为默认的日志器</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">Root</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">level</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">info</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">AppenderRef</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">        - </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">CONSOLE</span></span>
<span class="line"><span style="color:#ABB2BF;">        - </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">ROLLING_FILE</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><p>使用 Slf4j API</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">WebLogAspect</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Logger</span><span style="color:#E06C75;"> log </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Logger</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getLogger</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getClass</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> doAfterReturning</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">ret</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Throwable</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 处理完请求，返回内容</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;RESPONSE : {}&quot;</span><span style="color:#ABB2BF;">, ret);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="test" tabindex="-1">Test <a class="header-anchor" href="#test" aria-hidden="true">#</a></h2><h3 id="junit" tabindex="-1"><a href="https://junit.org/junit5/" target="_blank" rel="noreferrer">JUnit</a> <a class="header-anchor" href="#junit" aria-hidden="true">#</a></h3><p>Fixture</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// main</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Calculator</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">long</span><span style="color:#E06C75;"> n </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">long</span><span style="color:#61AFEF;"> add</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">long</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">x</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        n </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> n </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> x;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> n;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">long</span><span style="color:#61AFEF;"> sub</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">long</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">x</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        n </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> n </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;"> x;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> n;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// test</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">CalculatorTest</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#E5C07B;">Calculator</span><span style="color:#E06C75;"> calculator</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">static</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Database</span><span style="color:#E06C75;"> db</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">BeforeAll</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> initDatabase</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        db </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">createDb</span><span style="color:#ABB2BF;">(...);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">AfterAll</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> dropDatabase</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        ...</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">BeforeEach</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> setUp</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">calculator</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Calculator</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">AfterEach</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> tearDown</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">calculator</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Test</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> testAdd</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">assertEquals</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">calculator</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">assertEquals</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">150</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">calculator</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">assertEquals</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">130</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">calculator</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">20</span><span style="color:#ABB2BF;">) ,</span></span>
<span class="line"><span style="color:#ABB2BF;">                     </span><span style="color:#98C379;">&quot;The optional assertion message is now the last parameter.&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Test</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> testSub</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">assertAll</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;sub method&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">            () </span><span style="color:#C678DD;">-&gt;</span><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">assertEquals</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">calculator</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">sub</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#ABB2BF;">            () </span><span style="color:#C678DD;">-&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">assertEquals</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">150</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">calculator</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">sub</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">50</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        );</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><p>异常测试</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// main</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Factorial</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">long</span><span style="color:#61AFEF;"> fact</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">long</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">n</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (n </span><span style="color:#56B6C2;">&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">IllegalArgumentException</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Negative&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">long</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">r</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">long</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">; i </span><span style="color:#56B6C2;">&lt;=</span><span style="color:#ABB2BF;"> n; i++) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            r </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> r </span><span style="color:#56B6C2;">*</span><span style="color:#ABB2BF;"> i;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> r;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Test</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">testNegative</span><span style="color:#E06C75;">() {</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#61AFEF;">assertThrows</span><span style="color:#E06C75;">(</span><span style="color:#E5C07B;">IllegalArgumentException</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">Executable</span><span style="color:#E06C75;">() {</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> execute</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Throwable</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">Factorial</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">fact</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#E06C75;">    })</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// or</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Test</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">testNegative</span><span style="color:#E06C75;">() {</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#E5C07B;">Throwable</span><span style="color:#E06C75;"> exception </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">assertThrows</span><span style="color:#E06C75;">(</span><span style="color:#E5C07B;">IllegalArgumentException</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> () </span><span style="color:#C678DD;">-&gt;</span><span style="color:#E06C75;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#E5C07B;">Factorial</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">fact</span><span style="color:#ABB2BF;">(</span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;">    })</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#61AFEF;">assertEquals</span><span style="color:#E06C75;">(</span><span style="color:#98C379;">&quot;Negative&quot;</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">exception</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getMessage</span><span style="color:#ABB2BF;">()</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>超时</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Test</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">timeoutNotExceeded</span><span style="color:#E06C75;">() {</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#7F848E;font-style:italic;">// The following assertion succeeds.</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#61AFEF;">assertTimeout</span><span style="color:#E06C75;">(</span><span style="color:#61AFEF;">ofMinutes</span><span style="color:#E06C75;">(</span><span style="color:#D19A66;">2</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> () </span><span style="color:#C678DD;">-&gt;</span><span style="color:#E06C75;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#7F848E;font-style:italic;">// Perform task that takes less than 2 minutes.</span></span>
<span class="line"><span style="color:#E06C75;">    })</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Test</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">timeoutNotExceededWithResult</span><span style="color:#E06C75;">() {</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#7F848E;font-style:italic;">// The following assertion succeeds, and returns the supplied object.</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> actualResult </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">assertTimeout</span><span style="color:#E06C75;">(</span><span style="color:#61AFEF;">ofMinutes</span><span style="color:#E06C75;">(</span><span style="color:#D19A66;">2</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> () </span><span style="color:#C678DD;">-&gt;</span><span style="color:#E06C75;"> {</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&quot;a result&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    })</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#61AFEF;">assertEquals</span><span style="color:#E06C75;">(</span><span style="color:#98C379;">&quot;a result&quot;</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> actualResult)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>条件测试</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Disabled</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Test</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">testBug101</span><span style="color:#E06C75;">() {</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#7F848E;font-style:italic;">// 这个测试不会运行</span></span>
<span class="line"><span style="color:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Test</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">EnabledIfEnvironmentVariable</span><span style="color:#E06C75;">(</span><span style="color:#D19A66;">named</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&quot;DEBUG&quot;</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">matches</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&quot;true&quot;</span><span style="color:#E06C75;">)</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">testOnlyOnDebugMode</span><span style="color:#E06C75;">() {</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#7F848E;font-style:italic;">// TODO: this test is only run on DEBUG=true</span></span>
<span class="line"><span style="color:#E06C75;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>参数化测试</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 单参数</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">ParameterizedTest</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">ValueSource</span><span style="color:#E06C75;">(</span><span style="color:#D19A66;">ints</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> { </span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">100</span><span style="color:#E06C75;"> })</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">testAbsNegative</span><span style="color:#E06C75;">(</span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> x) {</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#61AFEF;">assertEquals</span><span style="color:#E06C75;">(</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">x</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Math</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">abs</span><span style="color:#ABB2BF;">(x)</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 多参数</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">ParameterizedTest</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">MethodSource</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">testCapitalize</span><span style="color:#E06C75;">(</span><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> input</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> result) {</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#61AFEF;">assertEquals</span><span style="color:#E06C75;">(result</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">StringUtils</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">capitalize</span><span style="color:#ABB2BF;">(input)</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">static</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">List</span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">Arguments</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">testCapitalize</span><span style="color:#E06C75;">() {</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">of</span><span style="color:#ABB2BF;">( </span><span style="color:#7F848E;font-style:italic;">// arguments:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">Arguments</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">arguments</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;abc&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Abc&quot;</span><span style="color:#ABB2BF;">), </span><span style="color:#7F848E;font-style:italic;">//</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">Arguments</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">arguments</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;APPLE&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Apple&quot;</span><span style="color:#ABB2BF;">), </span><span style="color:#7F848E;font-style:italic;">//</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">Arguments</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">arguments</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;gooD&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Good&quot;</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// csv</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">ParameterizedTest</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">CsvSource</span><span style="color:#E06C75;">({ </span><span style="color:#98C379;">&quot;abc, Abc&quot;</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&quot;APPLE, Apple&quot;</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&quot;gooD, Good&quot;</span><span style="color:#E06C75;"> })</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// @CsvFileSource(resources = { &quot;/test-capitalize.csv&quot; })</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">testCapitalize</span><span style="color:#E06C75;">(</span><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> input</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> result) {</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#61AFEF;">assertEquals</span><span style="color:#E06C75;">(result</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">StringUtils</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">capitalize</span><span style="color:#ABB2BF;">(input)</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="mockito" tabindex="-1"><a href="https://github.com/mockito/mockito" target="_blank" rel="noreferrer">mockito</a> <a class="header-anchor" href="#mockito" aria-hidden="true">#</a></h3><ul><li><a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#mock-java.lang.Class-" target="_blank" rel="noreferrer">mock()</a>/<a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mock.html" target="_blank" rel="noreferrer">@Mock</a>: create mock <ul><li>optionally specify how it should behave via <a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/stubbing/Answer.html" target="_blank" rel="noreferrer">Answer</a>/<a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/MockSettings.html" target="_blank" rel="noreferrer">MockSettings</a></li><li><a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#when-T-" target="_blank" rel="noreferrer">when()</a>/<a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/BDDMockito.html#given-T-" target="_blank" rel="noreferrer">given()</a> to specify how a mock should behave</li><li>If the provided answers don&#39;t fit your needs, write one yourself extending the <a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/stubbing/Answer.html" target="_blank" rel="noreferrer">Answer</a> interface</li></ul></li><li><a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#spy-T-" target="_blank" rel="noreferrer">spy()</a>/<a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Spy.html" target="_blank" rel="noreferrer">@Spy</a>: partial mocking, real methods are invoked but still can be verified and stubbed</li><li><a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/InjectMocks.html" target="_blank" rel="noreferrer">@InjectMocks</a>: automatically inject mocks/spies fields annotated with @Spy or @Mock</li><li><a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#verify-T-" target="_blank" rel="noreferrer">verify()</a>: to check methods were called with given arguments <ul><li>can use flexible argument matching, for example any expression via the <a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/ArgumentMatchers.html#any--" target="_blank" rel="noreferrer">any()</a></li><li>or capture what arguments were called using <a href="http://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Captor.html" target="_blank" rel="noreferrer">@Captor</a> instead</li></ul></li></ul><p>验证操作</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 使用Mock对象</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">mockOne</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;one&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 普通验证</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">verify</span><span style="color:#E06C75;">(mockOne)</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;one&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 验证某个交互是否从未被执行</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">verify</span><span style="color:#E06C75;">(mockOne</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">never</span><span style="color:#E06C75;">())</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;two&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 验证mock对象没有交互过</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">verifyZeroInteractions</span><span style="color:#E06C75;">(mockTwo</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> mockThree)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>执行顺序</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// A. 验证mock一个对象的函数执行顺序</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">List</span><span style="color:#E06C75;"> singleMock </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">mock</span><span style="color:#E06C75;">(</span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">//using a single mock</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">singleMock</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;was added first&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">singleMock</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;was added second&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 为该mock对象创建一个inOrder对象</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">InOrder</span><span style="color:#E06C75;"> inOrder </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">inOrder</span><span style="color:#E06C75;">(singleMock)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 确保add函数首先执行的是add(&quot;was added first&quot;),然后才是add(&quot;was added second&quot;)</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">inOrder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">verify</span><span style="color:#ABB2BF;">(singleMock).</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;was added first&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">inOrder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">verify</span><span style="color:#ABB2BF;">(singleMock).</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;was added second&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// B .验证多个mock对象的函数执行顺序</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">List</span><span style="color:#E06C75;"> firstMock </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">mock</span><span style="color:#E06C75;">(</span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">List</span><span style="color:#E06C75;"> secondMock </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">mock</span><span style="color:#E06C75;">(</span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">//using mocks</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">firstMock</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;was called first&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">secondMock</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;was called second&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 为这两个Mock对象创建inOrder对象</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">InOrder</span><span style="color:#E06C75;"> inOrder </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">inOrder</span><span style="color:#E06C75;">(firstMock</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> secondMock)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 验证它们的执行顺序</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">inOrder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">verify</span><span style="color:#ABB2BF;">(firstMock).</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;was called first&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">inOrder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">verify</span><span style="color:#ABB2BF;">(secondMock).</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;was called second&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><a href="https://github.com/powermock/powermock" target="_blank" rel="noreferrer">PowerMock</a></p><h2 id="http-clients" tabindex="-1"><a href="https://github.com/akullpp/awesome-java#http-clients" target="_blank" rel="noreferrer">HTTP Clients</a> <a class="header-anchor" href="#http-clients" aria-hidden="true">#</a></h2><ul><li><a href="https://github.com/OpenFeign/feign" target="_blank" rel="noreferrer">Feign</a> - HTTP client binder inspired by Retrofit, JAXRS-2.0, and WebSocket.</li><li><a href="https://square.github.io/retrofit/" target="_blank" rel="noreferrer">Retrofit</a> - Typesafe REST client</li><li><a href="https://github.com/spring-cloud/spring-cloud-openfeign" target="_blank" rel="noreferrer">spring-cloud-openfeign</a><ul><li>@EnableFeignClients</li><li>@FeignClient</li><li>@SpringQueryMap</li></ul></li></ul><p><a href="https://github.com/square/okhttp" target="_blank" rel="noreferrer"><strong>okhttp</strong></a></p><p><a href="https://square.github.io/okhttp/4.x/okhttp/okhttp3/-ok-http-client/" target="_blank" rel="noreferrer">OkHttpClient</a> <br> <a href="https://square.github.io/okhttp/4.x/okhttp/okhttp3/-cookie/" target="_blank" rel="noreferrer">Cookie</a> <br> <a href="https://square.github.io/okhttp/4.x/okhttp/okhttp3/-headers/" target="_blank" rel="noreferrer">Headers</a> <br> <a href="https://square.github.io/okhttp/4.x/okhttp/okhttp3/-http-url/" target="_blank" rel="noreferrer">HttpUrl</a> <br> <a href="https://square.github.io/okhttp/4.x/okhttp/okhttp3/-interceptor/" target="_blank" rel="noreferrer">Interceptor</a> <br> <a href="https://square.github.io/okhttp/4.x/okhttp/okhttp3/-media-type/" target="_blank" rel="noreferrer">MediaType</a> <br> <a href="https://square.github.io/okhttp/4.x/okhttp/okhttp3/-multipart-body/" target="_blank" rel="noreferrer">MultipartBody</a> <br> <a href="https://square.github.io/okhttp/4.x/okhttp/okhttp3/-request/" target="_blank" rel="noreferrer">Request</a> <br> <a href="https://square.github.io/okhttp/4.x/okhttp/okhttp3/-response/" target="_blank" rel="noreferrer">Response</a> <br> <a href="https://square.github.io/okhttp/4.x/okhttp/okhttp3/-web-socket/" target="_blank" rel="noreferrer">WebSocket</a></p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Slf4j</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Component</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">HttpsUtils</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#E5C07B;">OkHttpClient</span><span style="color:#E06C75;"> client</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Map</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;"> queryParams</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> url</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">static</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">MediaType</span><span style="color:#E06C75;"> JSON_MEDIA_TYPE </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">MediaType</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;application/json; charset=utf-8&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Builder</span><span style="color:#E06C75;"> request</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Map</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;"> headers</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">RequestBody</span><span style="color:#E06C75;"> body</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">final</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">boolean</span><span style="color:#E06C75;"> isReset </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Autowired</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> HttpsUtils</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">HttpsClientConfig</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">clientConfig</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">TrustManager</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;">trustManagers</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">buildTrustManagers</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    client </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">OkHttpClient</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">newBuilder</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">addInterceptor</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">BasicLoggingInterceptor</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//      .cache(cache) // configure cache</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//      .proxy(proxy) // configure proxy</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//      .certificatePinner(certificatePinner) // certificate pinning</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//      .addNetworkInterceptor(interceptor) // network level interceptor</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//      .authenticator(authenticator) // authenticator for requests (it supports similar use-cases as &quot;Authorization header&quot; earlier</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">callTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">clientConfig</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getCallTimeout</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">TimeUnit</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">SECONDS</span><span style="color:#ABB2BF;">) </span><span style="color:#7F848E;font-style:italic;">// default timeout for complete calls</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">readTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">clientConfig</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getReadTimeout</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">TimeUnit</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">SECONDS</span><span style="color:#ABB2BF;">) </span><span style="color:#7F848E;font-style:italic;">// default read timeout for new connections</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">writeTimeout</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">clientConfig</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getWriteTimeout</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">TimeUnit</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">SECONDS</span><span style="color:#ABB2BF;">) </span><span style="color:#7F848E;font-style:italic;">// default write timeout for new connections</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//      .dns(dns) // DNS service used to lookup IP addresses for hostnames</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//      .followRedirects(true) // follow requests redirects</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//      .followSslRedirects(true) // follow HTTP tp HTTPS redirects</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//      .connectionPool(connectionPool) // connection pool used to recycle HTTP and HTTPS connections</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//      .retryOnConnectionFailure(true) // retry or not when a connectivity problem is encountered</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//      .cookieJar(cookieJar) // cookie manager</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//      .dispatcher(dispatcher) // dispatcher used to set policy and execute asynchronous requests</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">sslSocketFactory</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">createSSLSocketFactory</span><span style="color:#ABB2BF;">(trustManagers),</span></span>
<span class="line"><span style="color:#ABB2BF;">            (X509TrustManager) trustManagers[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">hostnameVerifier</span><span style="color:#ABB2BF;">((hostName, session) </span><span style="color:#C678DD;">-&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">StringUtils</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isNotBlank</span><span style="color:#ABB2BF;">(hostName))</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//设置连接池  最大连接数量  , 持续存活的连接</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">connectionPool</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ConnectionPool</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">clientConfig</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getConnectionTimeout</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">clientConfig</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getKeepAliveTimeout</span><span style="color:#ABB2BF;">(), </span><span style="color:#E5C07B;">TimeUnit</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">MINUTES</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">HttpsUtils</span><span style="color:#61AFEF;"> headers</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Map</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#E06C75;font-style:italic;">headers</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">headers</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> headers;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">HttpsUtils</span><span style="color:#61AFEF;"> url</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">url</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">url</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> url;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">HttpsUtils</span><span style="color:#61AFEF;"> queryParams</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Map</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#E06C75;font-style:italic;">params</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">queryParams</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> params;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">HttpsUtils</span><span style="color:#61AFEF;"> body</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">RequestBody</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">body</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">body</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> body;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">HttpsUtils</span><span style="color:#61AFEF;"> jsonBody</span><span style="color:#ABB2BF;">(@</span><span style="color:#E5C07B;">NotNull</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">json</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">body</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">RequestBody</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">create</span><span style="color:#ABB2BF;">(json, JSON_MEDIA_TYPE));</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">HttpsUtils</span><span style="color:#61AFEF;"> jsonBody</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">obj</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (obj </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">jsonBody</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toJSONString</span><span style="color:#ABB2BF;">(obj));</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">HttpsUtils</span><span style="color:#61AFEF;"> formBody</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Map</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#E06C75;font-style:italic;">map</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">FormBody</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Builder</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">formBody</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> FormBody.</span><span style="color:#61AFEF;">Builder</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">StandardCharsets</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">UTF_8</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">(formBody</span><span style="color:#C678DD;">::</span><span style="color:#ABB2BF;">addEncoded);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">body</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">formBody</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">HttpsUtils</span><span style="color:#61AFEF;"> fileBody</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">RequestBody</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">fileBody</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">RequestBody</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">create</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">File</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;path/attachment.png&quot;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">MediaType</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;image/png&quot;</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">    body </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> MultipartBody.</span><span style="color:#61AFEF;">Builder</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">setType</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MultipartBody</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">FORM</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">addFormDataPart</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;file&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;head_img&quot;</span><span style="color:#ABB2BF;">, fileBody)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">addFormDataPart</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;key&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;val&quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> beforeRequest</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;build request&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 构建url</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">HttpUrl</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Builder</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">urlBuilder</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">HttpUrl</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(url).</span><span style="color:#61AFEF;">newBuilder</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">ObjectUtils</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isNotEmpty</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">queryParams</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">queryParams</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">forEach</span><span style="color:#ABB2BF;">((key, value) </span><span style="color:#C678DD;">-&gt;</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">StringUtils</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isNotBlank</span><span style="color:#ABB2BF;">(value)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">urlBuilder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addQueryParameter</span><span style="color:#ABB2BF;">(key, value);</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">      });</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">request</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> Request.</span><span style="color:#61AFEF;">Builder</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">url</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">urlBuilder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">ObjectUtils</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isNotEmpty</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">headers</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">request</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">headers</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Headers</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">of</span><span style="color:#ABB2BF;">(headers));</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> afterRequest</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;end request&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (isReset) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      headers </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      queryParams </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      body </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Reset request&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Response</span><span style="color:#61AFEF;"> sync</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">method</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">IOException</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">response</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">beforeRequest</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">request</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">method</span><span style="color:#ABB2BF;">(method, body);</span></span>
<span class="line"><span style="color:#ABB2BF;">      response </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">client</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">newCall</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">request</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">()).</span><span style="color:#61AFEF;">execute</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">finally</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">afterRequest</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> response;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Response</span><span style="color:#61AFEF;"> get</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">IOException</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">sync</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">HttpMethod</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">GET</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">name</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Response</span><span style="color:#61AFEF;"> post</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">IOException</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">sync</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">HttpMethod</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">POST</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">name</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Response</span><span style="color:#61AFEF;"> put</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">IOException</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">sync</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">HttpMethod</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">PUT</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">name</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Response</span><span style="color:#61AFEF;"> delete</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">IOException</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">sync</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">HttpMethod</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">DELETE</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">name</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">static</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">volatile</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Semaphore</span><span style="color:#E06C75;"> semaphore </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">   * 用于异步请求时，控制访问线程数，返回结果</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">   */</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Semaphore</span><span style="color:#61AFEF;"> getSemaphoreInstance</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">//只能1个线程同时访问</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">synchronized</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">HttpsUtils</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (semaphore </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        semaphore </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Semaphore</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> semaphore;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">String</span><span style="color:#61AFEF;"> async</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">StringBuffer</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">buffer</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">StringBuffer</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">client</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">newCall</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">request</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">()).</span><span style="color:#61AFEF;">enqueue</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Callback</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      @</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onFailure</span><span style="color:#ABB2BF;">(@</span><span style="color:#E5C07B;">NotNull</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Call</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">call</span><span style="color:#ABB2BF;">, @</span><span style="color:#E5C07B;">NotNull</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">IOException</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">buffer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">append</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;request failed: &quot;</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">append</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getMessage</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">printStackTrace</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      @</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onResponse</span><span style="color:#ABB2BF;">(@</span><span style="color:#E5C07B;">NotNull</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Call</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">call</span><span style="color:#ABB2BF;">, @</span><span style="color:#E5C07B;">NotNull</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">response</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">IOException</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">ResponseBody</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">response</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">body</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (body </span><span style="color:#56B6C2;">!=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">buffer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">append</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">body</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">string</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">getSemaphoreInstance</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">release</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">getSemaphoreInstance</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">release</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">buffer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  /**</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">   * 生成安全套接字工厂，用于https请求的证书跳过</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">   */</span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">SSLSocketFactory</span><span style="color:#61AFEF;"> createSSLSocketFactory</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">TrustManager</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">trustAllCerts</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">SSLSocketFactory</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">ssfFactory</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">SSLContext</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">sc</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">SSLContext</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getInstance</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;TLS&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">sc</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">init</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, trustAllCerts, </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">SecureRandom</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">      ssfFactory </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">sc</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getSocketFactory</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Exception</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Create SSLSocketFactory error&quot;</span><span style="color:#ABB2BF;">, e);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> ssfFactory;</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">TrustManager</span><span style="color:#61AFEF;">[] buildTrustManagers</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">TrustManager</span><span style="color:#ABB2BF;">[]{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">X509TrustManager</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">          @</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> checkClientTrusted</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">X509Certificate</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">chain</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">authType</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">          @</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> checkServerTrusted</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">X509Certificate</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">chain</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">authType</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">          @</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">X509Certificate</span><span style="color:#61AFEF;">[] getAcceptedIssuers</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">X509Certificate</span><span style="color:#ABB2BF;">[]{};</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    };</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">static</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">BasicLoggingInterceptor</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">implements</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Interceptor</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">NotNull</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Response</span><span style="color:#61AFEF;"> intercept</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Interceptor</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Chain</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">chain</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">IOException</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">Request</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">request</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">chain</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">request</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;===&gt; Sending {} request: {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">request</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">method</span><span style="color:#ABB2BF;">(), </span><span style="color:#E5C07B;">request</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">url</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;request headers: {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">request</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">headers</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">RequestBody</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">requestBody</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">request</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">body</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">Buffer</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">buffer</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Buffer</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (requestBody </span><span style="color:#56B6C2;">!=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">requestBody</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">writeTo</span><span style="color:#ABB2BF;">(buffer);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;request body: {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">buffer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">readUtf8</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">Response</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">response</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">chain</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">proceed</span><span style="color:#ABB2BF;">(request);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;&lt;=== Received response code is {} , response headers: {}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">response</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">code</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">response</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">headers</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">ResponseBody</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">responseBody</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">response</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">body</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (responseBody </span><span style="color:#56B6C2;">!=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">BufferedSource</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">source</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">responseBody</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">source</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">source</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">request</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Long</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">MAX_VALUE</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        buffer </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">source</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getBuffer</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">info</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;response body:{}&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">buffer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">clone</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">readUtf8</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> response;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">  </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> main</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">args</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">throws</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">IOException</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">LinkedHashMap</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#E06C75;">map</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">LinkedHashMap</span><span style="color:#ABB2BF;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">map</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">put</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;map&quot;</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&quot;映射&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">MyHttp</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">myHttp</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">MyHttp</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">header</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;h1&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;ad&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">sync</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">myHttp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">url</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;https://httpbin.org/post&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">queryParam</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;123&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">jsonBody</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;[你好, abc]&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//        .formBody(map)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">sync</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">myHttp</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">url</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;https://httpbin.org/get&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        .</span><span style="color:#61AFEF;">queryParams</span><span style="color:#ABB2BF;">(map).</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">sync</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br></div></div><h2 id="json" tabindex="-1"><a href="https://github.com/akullpp/awesome-java#json" target="_blank" rel="noreferrer">JSON</a> <a class="header-anchor" href="#json" aria-hidden="true">#</a></h2><h3 id="jacson" tabindex="-1"><a href="https://github.com/FasterXML/jackson" target="_blank" rel="noreferrer">Jacson</a> <a class="header-anchor" href="#jacson" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E5C07B;">ObjectMapper</span><span style="color:#E06C75;"> mapper </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">ObjectMapper</span><span style="color:#E06C75;">()</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 序列化</span></span>
<span class="line"><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> jsonString </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">mapper</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">writeValueAsString</span><span style="color:#ABB2BF;">(object);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 反序列化</span></span>
<span class="line"><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;"> bean </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">mapper</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">readValue</span><span style="color:#ABB2BF;">(jsonString, </span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;"> list </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">mapper</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">readValue</span><span style="color:#ABB2BF;">(jsonArray, </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">TypeReference</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">&gt;&gt;(){});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 转换树模型</span></span>
<span class="line"><span style="color:#E5C07B;">JsonNode</span><span style="color:#E06C75;"> jsonTree </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">objectMapper</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">valueToTree</span><span style="color:#ABB2BF;">(object);</span></span>
<span class="line"><span style="color:#E5C07B;">JsonNode</span><span style="color:#E06C75;"> jsonNode </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">mapper</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">readTree</span><span style="color:#ABB2BF;">(jsonString);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;"> object </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">mapper</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">treeToValue</span><span style="color:#ABB2BF;">(jsonNode);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>ObjectNode -&gt; JsonNode</p><p><a href="https://github.com/FasterXML/jackson-annotations/wiki/Jackson-Annotations" target="_blank" rel="noreferrer"><strong>Jackson Annotations</strong></a> <br> Property Naming</p><ul><li><code>@JsonProperty</code>: 属性使用的注解，用来表示外部属性名字，就是使用别名序列化</li><li><code>@JsonNaming</code>：属性命名策略，如PropertyNamingStrategy.LowerCaseWithUnderscoresStrategy，将大写转换为小写并添加下划线</li></ul><p>Property Inclusion</p><ul><li><code>@JsonAutoDetect</code>: class annotation used for overriding property introspection definitions</li><li><code>@JsonIgnore</code>: 属性使用的注解，用于忽略指定属性</li><li><code>@JsonIgnoreProperties</code>: 实体类使用的注解，用于序列化的时候忽略指定的一系列属性，或者反序列化的时候忽略未知的属性(ignoreUnknown=true)。</li><li><code>@JsonIgnoreType</code>: 实体类使用的注解，表示该类被忽略。</li><li><code>@JsonInclude</code>: 实体类/属性使用的注解，用于忽略NULL的属性</li></ul><p>Deserialization and Serialization details</p><ul><li><code>@JsonFormat</code>：具有每种类型行为的一般注释；例如，可用于指定序列化日期/时间值时使用的格式。</li><li>反序列化</li><li>@JsonUnwrapped: 反序列化时解包，扁平化结果</li><li>@JsonView: property annotation used for defining View(s) in which property will be included for serialization, deserialization.</li></ul><p>反序列化细节</p><ul><li><code>@JacksonInject</code>: 注释表示属性应该通过“注入”而不是从数据 (JSON) 中获取其值。</li><li><code>@JsonAnySetter</code>: 用于将双参数方法定义为“任何设置器”的注释，用于反序列化未映射的 JSON 属性的值</li><li><code>@JsonCreator</code>: 用于指示在反序列化期间应使用构造函数或静态工厂方法创建值实例的注释。</li><li><code>@JsonSetter</code>：替代@JsonProperty，用于标记指定的方法是“setter-method”</li></ul><p>序列化细节</p><ul><li><code>@JsonAnyGetter</code>: 用于将 getter 定义为“任何 getter”的注释，它返回一个java.util.Map，其内容将被序列化为 JSON 对象的附加属性，以及该对象可能具有的常规属性。</li><li><code>@JsonGetter</code>：替代@JsonProperty，用于标记指定的方法是“getter-method”</li><li><code>@JsonPropertyOrder</code>: 用于指定属性序列化顺序的注释</li><li><code>@JsonRawValue</code>：可用于指定属性的值将按原样“完全”包含在序列化中，没有转义或修饰</li><li><code>@JsonValue</code>：指示 POJO 应该序列化是使用属性的值来完成的，通常是java.lang.String（如注释toString()方法）</li><li><code>@JsonRootName</code>: 类注释用于指示用于根值的“包装器”条目的名称，如果启用了根包装</li></ul><p>多态类型处理</p><ul><li>@JsonTypeInfo 用来开启多态类型处理</li><li>@JsonSubTypes 列出给定类的子类</li><li>@JsonTypeName 为多态子类指定类型标识符的值</li></ul><h3 id="fastjson" tabindex="-1"><a href="https://github.com/alibaba/fastjson" target="_blank" rel="noreferrer">Fastjson</a> <a class="header-anchor" href="#fastjson" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 序列化</span></span>
<span class="line"><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> jsonString </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toJSONString</span><span style="color:#ABB2BF;">(obj);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 反序列化</span></span>
<span class="line"><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;"> bean </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parseObject</span><span style="color:#ABB2BF;">(jsonString, </span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;">[] beans </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parseArray</span><span style="color:#ABB2BF;">(jsonStringArray, </span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">Map</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;"> map </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">JSON</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parseObject</span><span style="color:#ABB2BF;">(jsonString, </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">TypeReference</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Map</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;&gt;() { });</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>JSON 字符串反序列化API</p><ul><li><code>JSONObject parseObject(String text, Feature... features)</code></li><li><code>&lt;T&gt; T parseObject(String text, Class&lt;T&gt; clazz, Feature... features)</code></li><li><code>&lt;T&gt; T parseObject(String text, TypeReference&lt;T&gt; type, Feature... features)</code></li><li><code>JSONArray parseArray(String text)</code></li><li><code>&lt;T&gt; List&lt;T&gt; parseArray(String text, Class&lt;T&gt; clazz)</code></li></ul><p>注解 <code>@JSONField</code> <br> 配置在属性（setter、getter）和字段（必须是 public field）上</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 设置字段名</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">JSONField</span><span style="color:#E06C75;">(</span><span style="color:#D19A66;">name</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;ID&quot;</span><span style="color:#E06C75;">)</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">getId</span><span style="color:#E06C75;">() {</span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> id</span><span style="color:#ABB2BF;">;</span><span style="color:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 配置date序列化和反序列使用日期格式</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">JSONField</span><span style="color:#E06C75;">(</span><span style="color:#D19A66;">format</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span style="color:#E06C75;">)</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Date</span><span style="color:#E06C75;"> date</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 不序列化</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">JSONField</span><span style="color:#E06C75;">(</span><span style="color:#D19A66;">serialize</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">false</span><span style="color:#E06C75;">)</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 不反序列化</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">JSONField</span><span style="color:#E06C75;">(</span><span style="color:#D19A66;">deserialize</span><span style="color:#56B6C2;">=</span><span style="color:#D19A66;">false</span><span style="color:#E06C75;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 按ordinal排序</span></span>
<span class="line"><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">JSONField</span><span style="color:#E06C75;">(</span><span style="color:#D19A66;">ordinal</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">2</span><span style="color:#E06C75;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>SerializerFeature</strong></p><ul><li>QuoteFieldNames, //key使用引号</li><li>UseSingleQuotes, //使用单引号</li><li><strong>WriteMapNullValue</strong>, //输出Map的null值</li><li>WriteEnumUsingToString, //枚举属性输出toString的结果</li><li>WriteEnumUsingName, //枚举数据输出name</li><li>UseISO8601DateFormat, //使用日期格式</li><li>WriteNullListAsEmpty, //List为空则输出<code>[]</code></li><li>WriteNullStringAsEmpty, //String为空则输出<code>&quot;&quot;</code></li><li>WriteNullNumberAsZero, //Number类型为空则输出<code>0</code></li><li>WriteNullBooleanAsFalse, //Boolean类型为空则输出<code>false</code></li><li>SkipTransientField,</li><li>SortField, //排序字段</li><li>WriteTabAsSpecial,</li><li><strong>PrettyFormat</strong>, // 格式化JSON缩进</li><li>WriteClassName, // 输出类名</li><li>DisableCircularReferenceDetect, // 禁止循环引用</li><li>WriteSlashAsSpecial, // 对斜杠’/’进行转义</li><li>BrowserCompatible,</li><li>WriteDateUseDateFormat, // 全局修改日期格式,默认为false</li><li>NotWriteRootClassName,</li><li>DisableCheckSpecialChar,</li><li>BeanToArray,</li><li>WriteNonStringKeyAsString,</li><li>NotWriteDefaultValue,</li><li>BrowserSecure,</li><li>IgnoreNonFieldGetter,</li><li>WriteNonStringValueAsString,</li><li>IgnoreErrorGetter,</li><li>WriteBigDecimalAsPlain,</li><li><strong>MapSortField</strong></li></ul><p><a href="https://github.com/alibaba/fastjson/wiki/JSONPath" target="_blank" rel="noreferrer">JSONPath</a></p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">JSONPath</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span><span style="color:#E06C75;">          </span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">//  求值，静态方法</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Object</span><span style="color:#61AFEF;"> eval</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">rootObject</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">path</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">//  求值，静态方法，按需计算，性能更好</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Object</span><span style="color:#61AFEF;"> extract</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">json</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">path</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 计算Size，Map非空元素个数，对象非空元素个数，Collection的Size，数组的长度。无法求值返回-1</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">int</span><span style="color:#61AFEF;"> size</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">rootObject</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">path</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 是否包含，path中是否存在对象</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">boolean</span><span style="color:#61AFEF;"> contains</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">rootObject</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">path</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{ }</span></span>
<span class="line"><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 是否包含，path中是否存在指定值，如果是集合或者数组，在集合中查找value是否存在</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">boolean</span><span style="color:#61AFEF;"> containsValue</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">rootObject</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">path</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{ }</span></span>
<span class="line"><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 修改制定路径的值，如果修改成功，返回true，否则返回false</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">boolean</span><span style="color:#61AFEF;"> set</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">rootObject</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">path</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 在数组或者集合中添加元素</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">boolean</span><span style="color:#61AFEF;"> arrayAdd</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">rootObject</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">path</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">... </span><span style="color:#E06C75;font-style:italic;">values</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// 获取，Map的KeySet，对象非空属性的名称。数组、Collection等不支持类型返回null。</span></span>
<span class="line"><span style="color:#E06C75;"> </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Set</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#61AFEF;"> keySet</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">rootObject</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">path</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><table><thead><tr><th>JSONPATH</th><th>描述</th></tr></thead><tbody><tr><td>$</td><td>根对象，<a href="http://%E4%BE%8B%E5%A6%82$.name" target="_blank" rel="noreferrer">例如$.name</a></td></tr><tr><td>[num]</td><td>数组访问，其中num是数字，可以是负数。</td></tr><tr><td>[num0,num1,num2...]</td><td>数组多个元素访问，其中num是数字，可以是负数，返回数组中的多个元素。例如$[0,3,-2,5]</td></tr><tr><td>[start:end]</td><td>数组范围访问，其中start和end是开始小表和结束下标，可以是负数，返回数组中的多个元素。例如$[0:5]</td></tr><tr><td>[start:end :step]</td><td>数组范围访问，其中start和end是开始小表和结束下标，可以是负数；step是步长，返回数组中的多个元素。例如$[0:5:2]</td></tr><tr><td>[?(key)]</td><td>对象属性非空过滤，例如$.departs[?(name)]</td></tr><tr><td>[key &gt; 123]</td><td>数值类型对象属性比较过滤，例如$.departs[id &gt;= 123]，比较操作符支持=,!=,&gt;,&gt;=,&lt;,&lt;=</td></tr><tr><td>[key = &#39;123&#39;]</td><td>字符串类型对象属性比较过滤，例如$.departs[name = &#39;123&#39;]，比较操作符支持=,!=,&gt;,&gt;=,&lt;,&lt;=</td></tr><tr><td>[key like &#39;aa%&#39;]</td><td>字符串类型like过滤， <br> 例如$.departs[name like &#39;sz*&#39;]，通配符只支持% <br> 支持not like</td></tr><tr><td>[key rlike &#39;regexpr&#39;]</td><td>字符串类型正则匹配过滤， <br> 例如departs[name rlike &#39;aa(.)*&#39;]， <br> 正则语法为jdk的正则语法，支持not rlike</td></tr><tr><td>[key in (&#39;v0&#39;, &#39;v1&#39;)]</td><td>IN过滤, 支持字符串和数值类型 <br> 例如: <br> $.departs[name in (&#39;wenshao&#39;,&#39;Yako&#39;)] <br> $.departs[id not in (101,102)]</td></tr><tr><td>[key between 234 and 456]</td><td>BETWEEN过滤, 支持数值类型，支持not between <br> 例如: <br> $.departs[id between 101 and 201] <br> $.departs[id not between 101 and 201]</td></tr><tr><td>length() 或者 size()</td><td>数组长度。例如$.values.size() <br> 支持类型java.util.Map和java.util.Collection和数组</td></tr><tr><td>keySet()</td><td>获取Map的keySet或者对象的非空属性名称。例如$.val.keySet() <br> 支持类型：Map和普通对象 <br> 不支持：Collection和数组（返回null）</td></tr><tr><td>.</td><td>属性访问，<a href="http://%E4%BE%8B%E5%A6%82$.name" target="_blank" rel="noreferrer">例如$.name</a></td></tr><tr><td>..</td><td>deepScan属性访问，例如$..name</td></tr><tr><td>*</td><td>对象的所有属性，例如$.leader.*</td></tr><tr><td>[&#39;key&#39;]</td><td>属性访问。例如$[&#39;name&#39;]</td></tr><tr><td>[&#39;key0&#39;,&#39;key1&#39;]</td><td>多个属性访问。例如$[&#39;id&#39;,&#39;name&#39;]</td></tr></tbody></table><h3 id="gson" tabindex="-1"><a href="https://github.com/google/gson" target="_blank" rel="noreferrer">Gson</a> <a class="header-anchor" href="#gson" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E5C07B;">Gson</span><span style="color:#E06C75;"> gson </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">Gson</span><span style="color:#E06C75;">()</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 序列化</span></span>
<span class="line"><span style="color:#E5C07B;">gson</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toJson</span><span style="color:#ABB2BF;">(object);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 反序列化</span></span>
<span class="line"><span style="color:#E5C07B;">Object</span><span style="color:#E06C75;"> bean </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">gson</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">fromJson</span><span style="color:#ABB2BF;">(jsonString, </span><span style="color:#E5C07B;">Object</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="tomcat" tabindex="-1"><a href="https://tomcat.apache.org/" target="_blank" rel="noreferrer">Tomcat</a> <a class="header-anchor" href="#tomcat" aria-hidden="true">#</a></h2><p>Tomcat 是由 Apache 开发的一个 Servlet 容器，实现了对 Servlet 和 JSP 的支持，并提供了作为 Web 服务器的一些特有功能，如 Tomcat 管理和控制平台、安全域管理和 Tomcat 阀等</p><p>目录</p><ul><li>/bin - Tomcat 脚本存放目录</li><li>/conf - Tomcat 配置文件目录</li><li>/logs - Tomcat 默认日志目录</li><li>/webapps - webapp 运行的目录</li></ul><p>tomcat9启动后控制台乱码：</p><ul><li>打开“/apache-tomcat-9.0.20/conf/logging.properties”文件</li><li>定位java.util.logging.ConsoleHandler.encoding，将UTF-8 改成 GBK</li></ul><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">修改默认端口8080</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">Connector</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">port</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;8080&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">protocol</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;HTTP/1.1&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">connectionTimeout</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;20000&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">redirectPort</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;8543&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="resource" tabindex="-1">Resource <a class="header-anchor" href="#resource" aria-hidden="true">#</a></h2><ul><li><a href="https://github.com/akullpp/awesome-java" target="_blank" rel="noreferrer">awesome-java</a></li><li><a href="https://github.com/deephacks/awesome-jvm" target="_blank" rel="noreferrer">awesome-jvm</a></li><li><a href="https://github.com/Vedenin/useful-java-links" target="_blank" rel="noreferrer">useful-java-links</a></li><li><a href="https://github.com/mfornos/awesome-microservices" target="_blank" rel="noreferrer">awesome-microservices</a></li><li><a href="https://github.com/marmelab/awesome-rest" target="_blank" rel="noreferrer">awesome-rest</a></li></ul><p><a href="https://dunwu.github.io/java-tutorial/tool/monitor/monitor-summary.html" target="_blank" rel="noreferrer">监控工具</a></p><ul><li><a href="https://dunwu.github.io/java-tutorial/tool/monitor/skywalking.html" target="_blank" rel="noreferrer">SkyWalking</a></li><li><a href="https://dunwu.github.io/java-tutorial/tool/monitor/arthas.html" target="_blank" rel="noreferrer">Arthas</a></li></ul><p><a href="https://wiki.openjdk.java.net/display/OpenJFX/Main" target="_blank" rel="noreferrer">JavaFX</a></p><p>Cache</p><ul><li><a href="https://github.com/ben-manes/caffeine" target="_blank" rel="noreferrer">Caffeine</a> - High-performance, near-optimal caching library.</li><li><a href="http://www.ehcache.org/" target="_blank" rel="noreferrer">Ehcache</a> - Distributed general-purpose cache.</li></ul><h2 id="——-intellij-idea-——" tabindex="-1"><strong>—— <strong><a href="https://www.423down.com/10850.html" target="_blank" rel="noreferrer">IntelliJ IDEA</a></strong> ——</strong> <a class="header-anchor" href="#——-intellij-idea-——" aria-hidden="true">#</a></h2><h3 id="shortcuts" tabindex="-1"><a href="https://www.jetbrains.com/help/idea/reference-keymap-win-default.html" target="_blank" rel="noreferrer">Shortcuts</a> <a class="header-anchor" href="#shortcuts" aria-hidden="true">#</a></h3><p><strong>Live Templates</strong></p><blockquote><p>File | Settings | Editor | Live Templates</p></blockquote><p>fori for循环 <br> sout System.out <br> .var 生成变量</p><p>insert 插入/改写模式</p><p><strong>IntelliJ IDEA&#39;s top keyboard shortcuts</strong></p><table><thead><tr><th><a href="https://www.jetbrains.com/help/idea/searching-everywhere.html" target="_blank" rel="noreferrer">Search Everywhere</a></th><th>Double Shift</th></tr></thead><tbody><tr><td><a href="https://www.jetbrains.com/help/idea/searching-everywhere.html#search_actions" target="_blank" rel="noreferrer">Find Action...</a></td><td>Ctrl+Shift+A</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/project-tool-window.html" target="_blank" rel="noreferrer">Show Project window</a></td><td>Alt+1</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/compiling-applications.html" target="_blank" rel="noreferrer">Rebuild</a></td><td>Ctrl+Shift+F9</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/intention-actions.html#apply-intention-actions" target="_blank" rel="noreferrer">Show Intention Actions</a></td><td>Alt+Enter</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/navigating-through-the-source-code.html#recent_files" target="_blank" rel="noreferrer">Recent Files</a></td><td>Ctrl+E</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/find-highlight-usages.html#find-usages" target="_blank" rel="noreferrer">Find Usages</a></td><td>Alt+F7</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/navigating-through-the-source-code.html#navigate_in_project_view" target="_blank" rel="noreferrer">Select In...</a></td><td>Alt+F1</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/configure-project-settings.html" target="_blank" rel="noreferrer">Settings...</a></td><td>Ctrl+Alt+S</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/generating-code.html" target="_blank" rel="noreferrer">Generate...</a></td><td>Alt+Insert</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/running-applications.html" target="_blank" rel="noreferrer">Run Anything</a></td><td>Double Ctrl</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/starting-the-debugger-session.html" target="_blank" rel="noreferrer">Debug...</a></td><td>Alt+Shift+F9</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/using-breakpoints.html" target="_blank" rel="noreferrer">View Breakpoints...</a></td><td>Ctrl+Shift+F8</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/attaching-to-local-process.html" target="_blank" rel="noreferrer">Attach to Process...</a></td><td>Ctrl+Alt+F5</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/version-control-integration.html" target="_blank" rel="noreferrer">VCS Operations Popup...</a></td><td>Alt+\`</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/refactoring-source-code.html" target="_blank" rel="noreferrer">Refactor This...</a></td><td>Ctrl+Alt+Shift+T</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/reformat-and-rearrange-code.html" target="_blank" rel="noreferrer">Reformat Code</a></td><td>Ctrl+Alt+L</td></tr></tbody></table><p><strong>Basic editing</strong></p><table><thead><tr><th>Paste as Plain Text</th><th>Ctrl+Alt+Shift+V</th></tr></thead><tbody><tr><td>Paste from History...</td><td>Ctrl+Shift+V</td></tr><tr><td>Duplicate Line or Selection</td><td>Ctrl+D</td></tr><tr><td>Copy Paths</td><td>Ctrl+Shift+C</td></tr><tr><td>Copy Reference</td><td>Ctrl+Alt+Shift+C</td></tr><tr><td>Save All</td><td>Ctrl+S</td></tr><tr><td>Undo</td><td>Ctrl+Z</td></tr><tr><td>Redo</td><td>Ctrl+Shift+Z</td></tr><tr><td>Start New Line</td><td>Shift+Enter</td></tr><tr><td>Start New Line Before Current</td><td>Ctrl+Alt+Enter</td></tr><tr><td>Delete Line</td><td>Ctrl+Y</td></tr><tr><td>Toggle Case</td><td>Ctrl+Shift+U</td></tr><tr><td>Scratch File</td><td>Ctrl+Alt+Shift+Insert</td></tr><tr><td>Open Source in New Window</td><td>Shift+F4</td></tr></tbody></table><p><strong>Caret navigation</strong></p><table><thead><tr><th><br></th><th><br></th></tr></thead><tbody><tr><td>Move Caret to Previous Word</td><td>Ctrl+Left</td></tr><tr><td>Move Caret to Next Word</td><td>Ctrl+Right</td></tr><tr><td>Move Caret to Line Start</td><td>Home</td></tr><tr><td>Move Caret to Line End</td><td>End</td></tr><tr><td>Move Caret to Matching Brace</td><td>Ctrl+Shift+M</td></tr><tr><td>Move Caret to Code Block Start</td><td>Ctrl+[</td></tr><tr><td>Move Caret to Code Block End</td><td>Ctrl+]</td></tr><tr><td>Next Method</td><td>Alt+Down</td></tr><tr><td>Previous Method</td><td>Alt+Up</td></tr><tr><td>Move Caret to Page Top</td><td>Ctrl+Page Up</td></tr><tr><td>Move Caret to Page Bottom</td><td>Ctrl+Page Down</td></tr><tr><td>Page Up</td><td>Page Up</td></tr><tr><td>Page Down</td><td>Page Down</td></tr><tr><td>Move Caret to Text Start</td><td>Ctrl+Home</td></tr><tr><td>Move Caret to Text End</td><td>Ctrl+End</td></tr></tbody></table><p><strong>Select text</strong></p><table><thead><tr><th><br></th><th><br></th></tr></thead><tbody><tr><td>Select All</td><td>Ctrl+A</td></tr><tr><td>Left with Selection</td><td>Shift+Left</td></tr><tr><td>Right with Selection</td><td>Shift+Right</td></tr><tr><td>Move Caret to Previous Word with Selection</td><td>Ctrl+Shift+Left</td></tr><tr><td>Move Caret to Next Word with Selection</td><td>Ctrl+Shift+Right</td></tr><tr><td>Move Caret to Line Start with Selection</td><td>Shift+Home</td></tr><tr><td>Move Caret to Line End with Selection</td><td>Shift+End</td></tr><tr><td>Up with Selection</td><td>Shift+Up</td></tr><tr><td>Down with Selection</td><td>Shift+Down</td></tr><tr><td>Move Caret to Code Block Start with Selection</td><td>Ctrl+Shift+[</td></tr><tr><td>Move Caret to Code Block End with Selection</td><td>Ctrl+Shift+]</td></tr><tr><td>Move Caret to Page Top with Selection</td><td>Ctrl+Shift+Page Up</td></tr><tr><td>Move Caret to Page Bottom with Selection</td><td>Ctrl+Shift+Page Down</td></tr><tr><td>Page Up with Selection</td><td>Shift+Page Up</td></tr><tr><td>Page Down with Selection</td><td>Shift+Page Down</td></tr><tr><td>Move Caret to Text Start with Selection</td><td>Ctrl+Shift+Home</td></tr><tr><td>Move Caret to Text End with Selection</td><td>Ctrl+Shift+End</td></tr><tr><td>Extend Selection</td><td>Ctrl+W</td></tr><tr><td>Shrink Selection</td><td>Ctrl+Shift+W</td></tr></tbody></table><p><strong>Multiple carets and selection ranges</strong></p><table><thead><tr><th><br></th><th><br></th></tr></thead><tbody><tr><td><a href="https://www.jetbrains.com/help/idea/multicursor.html#add-carets-at-selected-locations" target="_blank" rel="noreferrer">Add/Remove Caret</a></td><td>Alt+Shift+Click</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/multicursor.html#column_selection" target="_blank" rel="noreferrer">Toggle Column Selection Mode</a></td><td>Alt+Shift+Insert</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/multicursor.html#add-carets-above-or-below-the-current-caret" target="_blank" rel="noreferrer">Clone Caret Above</a></td><td>Double Ctrl + Up</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/multicursor.html#add-carets-above-or-below-the-current-caret" target="_blank" rel="noreferrer">Clone Caret Below</a></td><td>Double Ctrl + Down</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/multicursor.html#add-carets-to-the-end-of-each-line-in-the-selected-region" target="_blank" rel="noreferrer">Add Caret to Each Line in Selection</a></td><td>Alt+Shift+G</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/multicursor.html#multiple_words" target="_blank" rel="noreferrer">Add Selection for Next Occurrence</a></td><td>Alt+J</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/multicursor.html#multiple_words" target="_blank" rel="noreferrer">Select All Occurrences</a></td><td>Ctrl+Alt+Shift+J</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/multicursor.html#multiple_words" target="_blank" rel="noreferrer">Deselect Last Occurrence</a></td><td>Alt+Shift+J</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/multicursor.html#use-mouse-to-select-rectangular-fragments-of-text-in-normal-selection-mode" target="_blank" rel="noreferrer">Create Rectangular Selection</a></td><td>Alt+Shift+Middle-Click</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/multicursor.html#use-mouse-to-select-rectangular-fragments-of-text-in-normal-selection-mode" target="_blank" rel="noreferrer">Drag to Create Rectangular Selection</a></td><td>Alt+Click</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/multicursor.html#use-mouse-to-select-rectangular-fragments-of-text-in-normal-selection-mode" target="_blank" rel="noreferrer">Drag to Create Multiple Rectangular Selections</a></td><td>Ctrl+Alt+Shift+Click</td></tr></tbody></table><p><strong>Coding assistance</strong></p><table><thead><tr><th><br></th><th><br></th></tr></thead><tbody><tr><td><a href="https://www.jetbrains.com/help/idea/intention-actions.html#apply-intention-actions" target="_blank" rel="noreferrer">Show Intention Actions</a></td><td>Alt+Enter</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/auto-completing-code.html#basic_completion" target="_blank" rel="noreferrer">Basic Completion</a></td><td>Ctrl+Space</td></tr><tr><td>Type-Matching Completion</td><td>Ctrl+Shift+Space</td></tr><tr><td>Second Basic Completion</td><td>Ctrl+Alt+Space</td></tr><tr><td>Complete Current Statement</td><td>Ctrl+Shift+Enter</td></tr><tr><td>Reformat Code</td><td>Ctrl+Alt+L</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/viewing-reference-information.html#view-parameter-info" target="_blank" rel="noreferrer">Parameter Info</a></td><td>Ctrl+P</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/viewing-reference-information.html#inline-quick-documentation" target="_blank" rel="noreferrer">Quick Documentation</a></td><td>Ctrl+Q</td></tr><tr><td>Move Statement Up</td><td>Ctrl+Shift+Up</td></tr><tr><td>Move Statement Down</td><td>Ctrl+Shift+Down</td></tr><tr><td>Move Element Left</td><td>Ctrl+Alt+Shift+Left</td></tr><tr><td>Move Statement Right</td><td>Ctrl+Alt+Shift+Right</td></tr><tr><td>Move Line Up</td><td>Alt+Shift+Up</td></tr><tr><td>Move Line Down</td><td>Alt+Shift+Down</td></tr><tr><td>Comment with Line Comment</td><td>Ctrl+/</td></tr><tr><td>Comment with Block Comment</td><td>Ctrl+Shift+/</td></tr><tr><td>Generate...</td><td>Alt+Insert</td></tr></tbody></table><p><strong>Context navigation</strong></p><table><thead><tr><th><br></th><th><br></th></tr></thead><tbody><tr><td>Next Method</td><td>Alt+Down</td></tr><tr><td>Previous Method</td><td>Alt+Up</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/navigating-through-the-source-code.html#find_line" target="_blank" rel="noreferrer">Go to Line/Column...</a></td><td>Ctrl+G</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/using-code-editor.html#ws_editor_switch_between_tabs" target="_blank" rel="noreferrer">Switcher</a></td><td>Ctrl+Tab</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/navigating-through-the-source-code.html#navigate_in_project_view" target="_blank" rel="noreferrer">Select In...</a></td><td>Alt+F1</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/navigating-through-the-source-code.html#recent_files" target="_blank" rel="noreferrer">Recent Files</a></td><td>Ctrl+E</td></tr><tr><td>Last Edit Location</td><td>Ctrl+Shift+Backspace</td></tr><tr><td>Back</td><td>Ctrl+Alt+Left</td></tr><tr><td>Forward</td><td>Ctrl+Alt+Right</td></tr><tr><td>Select Next Tab</td><td>Alt+Right</td></tr><tr><td>Select Previous Tab</td><td>Alt+Left</td></tr><tr><td>Toggle Anonymous Bookmark</td><td>F11</td></tr><tr><td>Toggle Bookmark with Digit</td><td>Ctrl+Shift+[digit]</td></tr><tr><td>Toggle Bookmark with Mnemonic</td><td>Ctrl+F11</td></tr><tr><td>Show All Bookmarks</td><td>Shift+F11</td></tr><tr><td>Go to Bookmark with Digit</td><td>Ctrl+[digit]</td></tr><tr><td>Show Mnemonic Bookmarks</td><td>N/A</td></tr><tr><td>Go to Next Bookmark</td><td>N/A</td></tr><tr><td>Go to Previous Bookmark</td><td>N/A</td></tr><tr><td>Show Bookmarks window</td><td>N/A</td></tr><tr><td>Show Structure window</td><td>Alt+7</td></tr><tr><td>Show Find window</td><td>Alt+3</td></tr><tr><td>Next Occurrence</td><td>Ctrl+Alt+Down</td></tr><tr><td>Previous Occurrence</td><td>Ctrl+Alt+Up</td></tr></tbody></table><p><strong>Find everything</strong></p><table><thead><tr><th><br></th><th><br></th></tr></thead><tbody><tr><td>Search Everywhere</td><td>Double Shift</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/finding-and-replacing-text-in-file.html#find_in_file" target="_blank" rel="noreferrer">Find...</a></td><td>Ctrl+F</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/finding-and-replacing-text-in-file.html#find_in_file" target="_blank" rel="noreferrer">Find Next / Move to Next Occurrence</a></td><td>F3</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/finding-and-replacing-text-in-file.html#find_in_file" target="_blank" rel="noreferrer">Find Previous / Move to Previous Occurrence</a></td><td>Shift+F3</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/finding-and-replacing-text-in-file.html#replace_search_string" target="_blank" rel="noreferrer">Replace...</a></td><td>Ctrl+R</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/finding-and-replacing-text-in-project.html#find_in_project" target="_blank" rel="noreferrer">Find in Files...</a></td><td>Ctrl+Shift+F</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/finding-and-replacing-text-in-project.html#replace_search_string_in_project" target="_blank" rel="noreferrer">Replace in Files...</a></td><td>Ctrl+Shift+R</td></tr><tr><td>Next Occurrence of the Word at Caret</td><td>Ctrl+F3</td></tr><tr><td>Go to File...</td><td>Ctrl+Shift+N</td></tr><tr><td>File Structure</td><td>Ctrl+F12</td></tr><tr><td>Go to Symbol...</td><td>Ctrl+Alt+Shift+N</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/searching-everywhere.html#search_actions" target="_blank" rel="noreferrer">Find Action...</a></td><td>Ctrl+Shift+A</td></tr></tbody></table><p><strong>Navigate from symbols</strong></p><table><thead><tr><th><br></th><th><br></th></tr></thead><tbody><tr><td><a href="https://www.jetbrains.com/help/idea/find-highlight-usages.html#find-usages" target="_blank" rel="noreferrer">Find Usages</a></td><td>Alt+F7</td></tr><tr><td>Go to Declaration or Usages</td><td>Ctrl+B</td></tr><tr><td>Go to Type Declaration</td><td>Ctrl+Shift+B</td></tr><tr><td>Show Usages</td><td>Ctrl+Alt+F7</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/navigating-through-the-source-code.html#go_to_implementation" target="_blank" rel="noreferrer">Go to Super Method</a></td><td>Ctrl+U</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/navigating-through-the-source-code.html#go_to_implementation" target="_blank" rel="noreferrer">Go to Implementation(s)</a></td><td>Ctrl+Alt+B</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/find-highlight-usages.html#usages_in_file" target="_blank" rel="noreferrer">Highlight Usages in File</a></td><td>Ctrl+Shift+F7</td></tr></tbody></table><p><strong>Code analysis</strong></p><table><thead><tr><th><br></th><th><br></th></tr></thead><tbody><tr><td><a href="https://www.jetbrains.com/help/idea/intention-actions.html#apply-intention-actions" target="_blank" rel="noreferrer">Show Intention Actions</a></td><td>Alt+Enter</td></tr><tr><td>Error Description</td><td>Ctrl+F1</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/navigating-through-the-source-code.html#navigate-errors-warnings" target="_blank" rel="noreferrer">Next Highlighted Error</a></td><td>F2</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/navigating-through-the-source-code.html#navigate-errors-warnings" target="_blank" rel="noreferrer">Previous Highlighted Error</a></td><td>Shift+F2</td></tr><tr><td><a href="https://www.jetbrains.com/help/idea/running-inspections.html#run-inspections-manually" target="_blank" rel="noreferrer">Run Inspection by Name...</a></td><td>Ctrl+Alt+Shift+I</td></tr><tr><td>Show Problems window</td><td>Alt+6</td></tr></tbody></table><p><strong>Run and debug</strong></p><table><thead><tr><th><br></th><th><br></th></tr></thead><tbody><tr><td>Run Anything</td><td>Double Ctrl</td></tr><tr><td>Run context configuration</td><td>Shift+F10</td></tr><tr><td>Run...</td><td>Alt+Shift+F10</td></tr><tr><td>Debug context configuration</td><td>Shift+F9</td></tr><tr><td>Debug...</td><td>Alt+Shift+F9</td></tr><tr><td>Attach to Process...</td><td>Ctrl+Alt+F5</td></tr><tr><td>Stop</td><td>Ctrl+F2</td></tr><tr><td>Resume Program</td><td>F9</td></tr><tr><td>Stop Background Processes...</td><td>Ctrl+Shift+F2</td></tr><tr><td>Step Over</td><td>F8</td></tr><tr><td>Force Step Over</td><td>Alt+Shift+F8</td></tr><tr><td>Step Into</td><td>F7</td></tr><tr><td>Smart Step Into</td><td>Shift+F7</td></tr><tr><td>Force Step Into</td><td>Alt+Shift+F7</td></tr><tr><td>Step Out</td><td>Shift+F8</td></tr><tr><td>Run To Cursor</td><td>Alt+F9</td></tr><tr><td>Force Run To Cursor</td><td>Ctrl+Alt+F9</td></tr><tr><td>Show Execution Point</td><td>Alt+F10</td></tr><tr><td>Evaluate Expression...</td><td>Alt+F8</td></tr><tr><td>Quick Evaluate Expression</td><td>Ctrl+Alt+F8</td></tr><tr><td>Toggle Line Breakpoint</td><td>Ctrl+F8</td></tr><tr><td>Toggle Temporary Line Breakpoint</td><td>Ctrl+Alt+Shift+F8</td></tr><tr><td>View Breakpoints...</td><td>Ctrl+Shift+F8</td></tr><tr><td>Edit Breakpoint</td><td>Ctrl+Shift+F8</td></tr><tr><td>Show Run window</td><td>Alt+4</td></tr><tr><td>Show Debug window</td><td>Alt+5</td></tr><tr><td>Show Services window</td><td>Alt+8</td></tr></tbody></table><p><strong>Refactorings</strong></p><table><thead><tr><th><br></th><th><br></th></tr></thead><tbody><tr><td>Refactor This...</td><td>Ctrl+Alt+Shift+T</td></tr><tr><td>Rename...</td><td>Shift+F6</td></tr><tr><td>Change Signature...</td><td>Ctrl+F6</td></tr><tr><td>Inline...</td><td>Ctrl+Alt+N</td></tr><tr><td>Move...</td><td>F6</td></tr><tr><td>Extract Method...</td><td>Ctrl+Alt+M</td></tr><tr><td>Introduce Field...</td><td>Ctrl+Alt+F</td></tr><tr><td>Introduce Parameter...</td><td>Ctrl+Alt+P</td></tr><tr><td>Introduce Variable...</td><td>Ctrl+Alt+V</td></tr><tr><td>Safe Delete...</td><td>Alt+Delete</td></tr></tbody></table><p><strong>Global VCS actions</strong></p><table><thead><tr><th><br></th><th><br></th></tr></thead><tbody><tr><td>VCS Operations Popup...</td><td>Alt+\`</td></tr><tr><td>Commit...</td><td>Ctrl+K</td></tr><tr><td>Update Project</td><td>Ctrl+T</td></tr><tr><td>Rollback</td><td>Ctrl+Alt+Z</td></tr><tr><td>Push...</td><td>Ctrl+Shift+K</td></tr><tr><td>Next Change</td><td>Ctrl+Alt+Shift+Down</td></tr><tr><td>Previous Change</td><td>Ctrl+Alt+Shift+Up</td></tr><tr><td>Show Version Control window</td><td>Alt+9</td></tr><tr><td>Show Commit window</td><td>Alt+0</td></tr></tbody></table><p><strong>Tool windows</strong></p><table><thead><tr><th><br></th><th><br></th></tr></thead><tbody><tr><td>Hide Active Tool Window</td><td>Shift+Escape</td></tr><tr><td>Hide All Tool Windows</td><td>Ctrl+Shift+F12</td></tr><tr><td>Jump to Last Tool Window</td><td>F12</td></tr><tr><td>Stretch to Left</td><td>Ctrl+Alt+Shift+Left</td></tr><tr><td>Stretch to Right</td><td>Ctrl+Alt+Shift+Right</td></tr><tr><td>Stretch to Top</td><td>Ctrl+Alt+Shift+Up</td></tr><tr><td>Stretch to Bottom</td><td>Ctrl+Alt+Shift+Down</td></tr><tr><td>Show Project window</td><td>Alt+1</td></tr><tr><td>Show Bookmarks window</td><td>N/A</td></tr><tr><td>Show Find window</td><td>Alt+3</td></tr><tr><td>Show Run window</td><td>Alt+4</td></tr><tr><td>Show Debug window</td><td>Alt+5</td></tr><tr><td>Show Problems window</td><td>Alt+6</td></tr><tr><td>Show Structure window</td><td>Alt+7</td></tr><tr><td>Show Services window</td><td>Alt+8</td></tr><tr><td>Show Version Control window</td><td>Alt+9</td></tr><tr><td>Show Commit window</td><td>Alt+0</td></tr><tr><td>Show Terminal window</td><td>Alt+F12</td></tr></tbody></table><br>`,192),r=a("br",null,null,-1),c=a("br",null,null,-1),B=n('<p>忽略大小写字母 <br> Settings -&gt; Editor -&gt; General -&gt; Code Completion <br> 关闭 Match case</p><p>多行显示Tab <br> Editor Tabs <br> 勾选 Show tabs in one row</p><p>编码字符集 <br> Settings -&gt; Editor -&gt; General -&gt; File Encodings</p><p>Google style <br> <a href="https://github.com/google/styleguide/blob/gh-pages/intellij-java-google-style.xml" target="_blank" rel="noreferrer">intellij-java-google-style.xml</a> <br> Settings -&gt; Editor -&gt; General -&gt; Code Style | Java</p><h3 id="plugin" tabindex="-1">plugin <a class="header-anchor" href="#plugin" aria-hidden="true">#</a></h3><ul><li><p>Maven Helper 依赖分析</p></li><li><p>Tabnine 基于 AI 的代码提示</p></li><li><p>Rainbow Brackets 彩虹括号</p></li><li><p>One Dark theme</p></li><li><p>String Manipulation</p></li><li><p>GsonFormat JSON转类对象</p></li><li><p>RestfulToolkit RESTful服务开发</p></li><li><p>Key Promoter X 快捷键</p></li><li><p>Statistic 项目信息统计</p></li><li><p>Translation 翻译插件</p></li></ul>',6);function i(y,F,A,b,u,d){return e(),p("div",null,[t,s(" ### Settings 方法分隔符 "),r,s(" Settings -> Editor -> General -> Appearance "),c,s(" 勾选 show method separators "),B])}const E=l(o,[["render",i]]);export{m as __pageData,E as default};
