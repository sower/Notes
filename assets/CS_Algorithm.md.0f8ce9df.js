import{_ as s,c as n,o as a,V as l}from"./chunks/framework.46d50e86.js";const p="/Notes/assets/1643807394531-dbec8260-037a-459c-937f-638417699f41.aded73a0.png",o="/Notes/assets/1643807394663-978d9288-3c10-4a30-8642-c36c9ca8683a.287f9a70.gif",e="/Notes/assets/1644504649978-b54c7bdc-cfc6-4fcb-81c2-e5ed2764327c.07a9e042.svg",r="/Notes/assets/1643807394855-be89c04c-bea6-45c0-b07b-6801829d58ad.78edb4c2.gif",c="/Notes/assets/1644505533664-74a3e6c7-28ca-4e16-9d22-a4613dbea59b.1952a9b9.svg",t="/Notes/assets/1643807395001-d83be8d6-9200-4ca2-b5f7-2cd5c4685ec3.7f63988c.gif",B="/Notes/assets/1643807395215-6e3c7451-30e3-43fa-b25a-4518d08e31ac.7613b4a8.gif",y="/Notes/assets/1643807395330-f0018de8-860f-4132-9684-eb8f8aa18612.e1c33863.gif",i="/Notes/assets/1644506543233-bad09d1c-9cc8-4aca-9ffc-48c7c2c7cf54.7c49c5ad.png",F="/Notes/assets/1643807395438-a27df89c-fe30-479d-8441-6c8b91455e97.101a451a.gif",A="/Notes/assets/1644413733217-ff4a738d-1aff-48ad-9688-9f2b985e21d9.eb7f72d8.svg",D="/Notes/assets/1644538136079-8c1fa270-af84-4e08-a026-7175a3f03d25.54362e37.gif",b="/Notes/assets/1651979498161-7d56e1c3-b58f-4eec-8c7c-9084b5b36627.79cdf87c.png",N=JSON.parse('{"title":"Algorithm","description":"","frontmatter":{"title":"Algorithm","created_at":"2022-02-10T14:00:47.000Z","updated_at":"2022-05-08T08:34:17.000Z","word_count":8398},"headers":[],"relativePath":"CS/Algorithm.md","filePath":"CS/Algorithm.md"}'),C={name:"CS/Algorithm.md"},m=l('<p>算法：一个有穷的指令集，这些指令为解决某一特定任务规定了一个运算序列</p><p>特性：</p><ul><li>输入 有0个或多个输入</li><li>输出 有一个或多个输出(处理结果)</li><li>确定性 每步定义都是确切、无歧义的</li><li>有穷性 算法应在执行有穷步后结束</li><li>有效性 每一条运算应足够基本</li></ul><h2 id="算法的复杂度" tabindex="-1">算法的复杂度 <a class="header-anchor" href="#算法的复杂度" aria-label="Permalink to &quot;算法的复杂度&quot;">​</a></h2><p><a href="http://bigocheatsheet.com/" target="_blank" rel="noreferrer">Big O Cheat Sheet</a></p><p><strong>时间复杂度</strong></p><ul><li>用来衡量算法随着问题规模增大，算法执行时间增长的快慢；</li><li>大 O 表示法 T(n)=O(f(n)) f(n)，一般考虑最坏情况下的时间复杂度</li></ul><p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20220320160627.png#from=url&amp;id=zEvwm&amp;originHeight=271&amp;originWidth=843&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p><strong>空间复杂度</strong></p><ul><li>用来衡量算法随着问题规模增大，算法所需空间的快慢；</li><li>问题规模的函数 S(n)=O(g(n))</li></ul><h2 id="sort" tabindex="-1">Sort <a class="header-anchor" href="#sort" aria-label="Permalink to &quot;Sort&quot;">​</a></h2><p>排序算法（Sorting algorithm）：一种能将一串资料依照特定排序方式进行排列的一种算法 <br> 稳定性：相等的元素经过排序之后相对顺序是否发生了改变。</p><p><img src="'+p+'" alt=""></p><h3 id="冒泡排序" tabindex="-1">冒泡排序 <a class="header-anchor" href="#冒泡排序" aria-label="Permalink to &quot;冒泡排序&quot;">​</a></h3><p>Bubble sort：每次检查相邻两个元素，如果前面的元素与后面的元素满足给定的排序条件，就将相邻两个元素交换。当没有相邻的元素需要交换时，排序就完成了。</p><p><img src="'+o+`" alt=""> <br> 向上冒泡</p><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Bubble</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">n</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> flag, i </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">do</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">        flag </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> j </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">; j </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> n </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> i; </span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">j)</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[j] </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[j </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#61AFEF;">swap</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[j], </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[j </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]), flag </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">i;</span></span>
<span class="line"><span style="color:#ABB2BF;">    } </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;"> (i </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> n </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> flag);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>双向冒泡</p><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Bubble</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">n</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> low </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, high </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> n, i;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;"> (low </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> high)</span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (i </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">low; i </span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> high; </span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">i)</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[i] </span><span style="color:#C678DD;">&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[i </span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#61AFEF;">swap</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[i], </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[i </span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (i </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">--</span><span style="color:#ABB2BF;">high; i </span><span style="color:#C678DD;">&gt;</span><span style="color:#ABB2BF;"> low; </span><span style="color:#C678DD;">--</span><span style="color:#ABB2BF;">i)</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[i] </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[i </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">])</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#61AFEF;">swap</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[i], </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[i </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]);</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="选择排序" tabindex="-1">选择排序 <a class="header-anchor" href="#选择排序" aria-label="Permalink to &quot;选择排序&quot;">​</a></h3><p>Selection sort：首先在未排序序列中找到最小（大）元素，存放到排序序列的起始位置，然后，再从剩余未排序元素中继续寻找最小（大）元素，放到已排序序列的末尾。以此类推，直到所有元素均排序完毕。</p><p><img src="`+e+`" alt=""></p><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">selection_sort</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">len</span><span style="color:#ABB2BF;">) </span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> i,j,temp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (i </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> ; i </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> len </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> ; i</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">) </span></span>
<span class="line"><span style="color:#ABB2BF;">    {</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> min </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> i;</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (j </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> i </span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">; j </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> len; j</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">)</span><span style="color:#7F848E;font-style:italic;">     //走访未排序的元素</span></span>
<span class="line"><span style="color:#ABB2BF;">		{</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[j] </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[min])</span><span style="color:#7F848E;font-style:italic;">    //找到目前最小值</span></span>
<span class="line"><span style="color:#ABB2BF;">			{</span></span>
<span class="line"><span style="color:#ABB2BF;">				min </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> j;</span><span style="color:#7F848E;font-style:italic;">    //记录最小值</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;">(min </span><span style="color:#C678DD;">!=</span><span style="color:#ABB2BF;"> i)</span></span>
<span class="line"><span style="color:#ABB2BF;">		{</span></span>
<span class="line"><span style="color:#ABB2BF;">		  temp</span><span style="color:#C678DD;">=</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[min];</span><span style="color:#7F848E;font-style:italic;">  //做交换</span></span>
<span class="line"><span style="color:#ABB2BF;">		  </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[min]</span><span style="color:#C678DD;">=</span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[i];</span></span>
<span class="line"><span style="color:#ABB2BF;">		  </span><span style="color:#E06C75;">a</span><span style="color:#ABB2BF;">[i]</span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;">temp;</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="插入排序" tabindex="-1">插入排序 <a class="header-anchor" href="#插入排序" aria-label="Permalink to &quot;插入排序&quot;">​</a></h3><p>Insert sort：将待排列元素划分为“已排序”和“未排序”两部分，每次从“未排序的”元素中选择一个插入到“已排序的”元素中的正确位置。 <br> <img src="`+r+`" alt=""></p><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">InsertionSort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">A</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">N</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 插入排序 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> P, i;</span></span>
<span class="line"><span style="color:#ABB2BF;">     ElementType Tmp;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> ( P</span><span style="color:#C678DD;">=</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">; P</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">N; P</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;"> ) {</span></span>
<span class="line"><span style="color:#ABB2BF;">         Tmp </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[P];</span><span style="color:#7F848E;font-style:italic;"> /* 取出未排序序列中的第一个元素*/</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> ( i</span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;">P; i</span><span style="color:#C678DD;">&gt;</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[i</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]</span><span style="color:#C678DD;">&gt;</span><span style="color:#ABB2BF;">Tmp; i</span><span style="color:#C678DD;">--</span><span style="color:#ABB2BF;"> )</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[i] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[i</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span><span style="color:#7F848E;font-style:italic;"> /*依次与已排序序列中元素比较并右移*/</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[i] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> Tmp;</span><span style="color:#7F848E;font-style:italic;"> /* 放进合适的位置 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="计数排序" tabindex="-1">计数排序 <a class="header-anchor" href="#计数排序" aria-label="Permalink to &quot;计数排序&quot;">​</a></h3><p>**Counting sort：**使用一个额外的数组<code>C</code>，其中第<code>i</code>个元素是待排序数组<code>A</code>中值等于<code>i</code>的元素的个数。然后根据数组<code>C</code>来将<code>A</code>中的元素排到正确的位置。 <br> <img src="`+c+`" alt=""></p><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">counting_sort</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">*</span><span style="color:#E06C75;font-style:italic;">ini_arr</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">*</span><span style="color:#E06C75;font-style:italic;">sorted_arr</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">n</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">count_arr </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">) </span><span style="color:#61AFEF;">malloc</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">sizeof</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> i, j, k;</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (k </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; k </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">; k</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E06C75;">count_arr</span><span style="color:#ABB2BF;">[k] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (i </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; i </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> n; i</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E06C75;">count_arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">ini_arr</span><span style="color:#ABB2BF;">[i]]</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (k </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">; k </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">100</span><span style="color:#ABB2BF;">; k</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E06C75;">count_arr</span><span style="color:#ABB2BF;">[k] </span><span style="color:#C678DD;">+=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">count_arr</span><span style="color:#ABB2BF;">[k </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (j </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> n; j </span><span style="color:#C678DD;">&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; j</span><span style="color:#C678DD;">--</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E06C75;">sorted_arr</span><span style="color:#ABB2BF;">[</span><span style="color:#C678DD;">--</span><span style="color:#E06C75;">count_arr</span><span style="color:#ABB2BF;">[</span><span style="color:#E06C75;">ini_arr</span><span style="color:#ABB2BF;">[j </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]]] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">ini_arr</span><span style="color:#ABB2BF;">[j </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">free</span><span style="color:#ABB2BF;">(count_arr);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="希尔排序" tabindex="-1">希尔排序 <a class="header-anchor" href="#希尔排序" aria-label="Permalink to &quot;希尔排序&quot;">​</a></h3><p>Shellsort：也称递减增量排序算法，是插入排序的一种更高效的改进版本</p><p>步骤</p><ol><li>将待排序序列分为若干子序列（每个子序列的元素在原始数组中间距相同）；</li><li>对这些子序列进行插入排序；</li><li>减小每个子序列中元素之间的间距，重复上述过程直至间距减少为 1。</li></ol><p><img src="`+t+`" alt=""></p><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">ShellSort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">A</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">N</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 希尔排序 - 用Sedgewick增量序列 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> Si, D, P, i;</span></span>
<span class="line"><span style="color:#ABB2BF;">     ElementType Tmp;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">     /* 这里只列出一小部分增量 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> Sedgewick</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> {</span><span style="color:#D19A66;">929</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">505</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">209</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">109</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">41</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">19</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">5</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> ( Si</span><span style="color:#C678DD;">=</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; </span><span style="color:#E06C75;">Sedgewick</span><span style="color:#ABB2BF;">[Si]</span><span style="color:#C678DD;">&gt;=</span><span style="color:#ABB2BF;">N; Si</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;"> ) </span></span>
<span class="line"><span style="color:#ABB2BF;">         ;</span><span style="color:#7F848E;font-style:italic;"> /* 初始的增量Sedgewick[Si]不能超过待排序列长度 */</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> ( D</span><span style="color:#C678DD;">=</span><span style="color:#E06C75;">Sedgewick</span><span style="color:#ABB2BF;">[Si]; D</span><span style="color:#C678DD;">&gt;</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; D</span><span style="color:#C678DD;">=</span><span style="color:#E06C75;">Sedgewick</span><span style="color:#ABB2BF;">[</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">Si] )</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> ( P</span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;">D; P</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">N; P</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;"> ) {</span><span style="color:#7F848E;font-style:italic;"> /* 插入排序*/</span></span>
<span class="line"><span style="color:#ABB2BF;">             Tmp </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[P];</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> ( i</span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;">P; i</span><span style="color:#C678DD;">&gt;=</span><span style="color:#ABB2BF;">D </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[i</span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;">D]</span><span style="color:#C678DD;">&gt;</span><span style="color:#ABB2BF;">Tmp; i</span><span style="color:#C678DD;">-=</span><span style="color:#ABB2BF;">D )</span></span>
<span class="line"><span style="color:#ABB2BF;">                 </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[i] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[i</span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;">D];</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[i] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> Tmp;</span></span>
<span class="line"><span style="color:#ABB2BF;">         }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="堆排序" tabindex="-1">堆排序 <a class="header-anchor" href="#堆排序" aria-label="Permalink to &quot;堆排序&quot;">​</a></h3><p>Heapsort：利用 <a href="https://oi-wiki.org/ds/binary-heap/" target="_blank" rel="noreferrer">二叉堆</a> 这种数据结构所设计的一种排序算法</p><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Swap</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> ElementType </span><span style="color:#C678DD;">*</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> ElementType </span><span style="color:#C678DD;">*</span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">     ElementType t </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">a; </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">a </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">b; </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">b </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> t;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">PercDown</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">A</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">p</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">N</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 改编代码4.24的PercDown( MaxHeap H, int p )    */</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">  /* 将N个元素的数组中以A[p]为根的子堆调整为最大堆 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> Parent, Child;</span></span>
<span class="line"><span style="color:#ABB2BF;">    ElementType X;</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">    X </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[p];</span><span style="color:#7F848E;font-style:italic;"> /* 取出根结点存放的值 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;">( Parent</span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;">p; (Parent</span><span style="color:#C678DD;">*</span><span style="color:#D19A66;">2</span><span style="color:#C678DD;">+</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">N; Parent</span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;">Child ) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        Child </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> Parent </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;">( (Child</span><span style="color:#C678DD;">!=</span><span style="color:#ABB2BF;">N</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Child]</span><span style="color:#C678DD;">&lt;</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Child</span><span style="color:#C678DD;">+</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]) )</span></span>
<span class="line"><span style="color:#ABB2BF;">            Child</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;">  /* Child指向左右子结点的较大者 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;">( X </span><span style="color:#C678DD;">&gt;=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Child] ) </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> /* 找到了合适位置 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">else</span><span style="color:#7F848E;font-style:italic;">  /* 下滤X */</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Parent] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Child];</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Parent] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> X;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">HeapSort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">A</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">N</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">) </span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 堆排序 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> i;</span></span>
<span class="line"><span style="color:#ABB2BF;">       </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> ( i</span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;">N</span><span style="color:#C678DD;">/</span><span style="color:#D19A66;">2</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">&gt;=</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">--</span><span style="color:#ABB2BF;"> )</span><span style="color:#7F848E;font-style:italic;">/* 建立最大堆 */</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#61AFEF;">PercDown</span><span style="color:#ABB2BF;">( A, i, N );</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> ( i</span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;">N</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">&gt;</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">--</span><span style="color:#ABB2BF;"> ) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">         /* 删除最大堆顶 */</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#61AFEF;">Swap</span><span style="color:#ABB2BF;">( </span><span style="color:#C678DD;">&amp;</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">], </span><span style="color:#C678DD;">&amp;</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[i] );</span><span style="color:#7F848E;font-style:italic;"> /* 见代码7.1 */</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#61AFEF;">PercDown</span><span style="color:#ABB2BF;">( A, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, i );</span></span>
<span class="line"><span style="color:#ABB2BF;">     }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h3 id="归并排序" tabindex="-1">归并排序 <a class="header-anchor" href="#归并排序" aria-label="Permalink to &quot;归并排序&quot;">​</a></h3><p>Merge sort：将两个已经排序的序列合并成一个序列</p><p>步骤</p><ul><li>把长度为n的输入序列分成两个长度为n/2的子序列；</li><li>对这两个子序列分别采用归并排序；</li><li>将两个排序好的子序列合并成一个最终的排序序列。</li></ul><p><img src="`+B+`" alt=""> <br> <strong>递归 Recursion</strong></p><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/* L = 左边起始位置, R = 右边起始位置, RightEnd = 右边终点位置*/</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Merge</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">A</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">TmpA</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">L</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">R</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">RightEnd</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 将有序的A[L]~A[R-1]和A[R]~A[RightEnd]归并成一个有序序列 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> LeftEnd, NumElements, Tmp;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> i;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span></span>
<span class="line"><span style="color:#ABB2BF;">     LeftEnd </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> R </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> /* 左边终点位置 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     Tmp </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> L;</span><span style="color:#7F848E;font-style:italic;">         /* 有序序列的起始位置 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     NumElements </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> RightEnd </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> L </span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;">( L </span><span style="color:#C678DD;">&lt;=</span><span style="color:#ABB2BF;"> LeftEnd </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> R </span><span style="color:#C678DD;">&lt;=</span><span style="color:#ABB2BF;"> RightEnd ) {</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[L] </span><span style="color:#C678DD;">&lt;=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[R] )</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#E06C75;">TmpA</span><span style="color:#ABB2BF;">[Tmp</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[L</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">];</span><span style="color:#7F848E;font-style:italic;"> /* 将左边元素复制到TmpA */</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#C678DD;">else</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#E06C75;">TmpA</span><span style="color:#ABB2BF;">[Tmp</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[R</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">];</span><span style="color:#7F848E;font-style:italic;"> /* 将右边元素复制到TmpA */</span></span>
<span class="line"><span style="color:#ABB2BF;">     }</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;">( L </span><span style="color:#C678DD;">&lt;=</span><span style="color:#ABB2BF;"> LeftEnd )</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#E06C75;">TmpA</span><span style="color:#ABB2BF;">[Tmp</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[L</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">];</span><span style="color:#7F848E;font-style:italic;"> /* 直接复制左边剩下的 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;">( R </span><span style="color:#C678DD;">&lt;=</span><span style="color:#ABB2BF;"> RightEnd )</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#E06C75;">TmpA</span><span style="color:#ABB2BF;">[Tmp</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[R</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">];</span><span style="color:#7F848E;font-style:italic;"> /* 直接复制右边剩下的 */</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;">( i </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; i </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> NumElements; i</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">, RightEnd </span><span style="color:#C678DD;">--</span><span style="color:#ABB2BF;"> )</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[RightEnd] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">TmpA</span><span style="color:#ABB2BF;">[RightEnd];</span><span style="color:#7F848E;font-style:italic;"> /* 将有序的TmpA[]复制回A[] */</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Msort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">A</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">TmpA</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">L</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">RightEnd</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 核心递归排序函数 */</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> Center;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( L </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> RightEnd ) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          Center </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> (L</span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;">RightEnd) </span><span style="color:#C678DD;">/</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">Msort</span><span style="color:#ABB2BF;">( A, TmpA, L, Center );</span><span style="color:#7F848E;font-style:italic;">              /* 递归解决左边 */</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">Msort</span><span style="color:#ABB2BF;">( A, TmpA, Center</span><span style="color:#C678DD;">+</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, RightEnd );</span><span style="color:#7F848E;font-style:italic;">     /* 递归解决右边 */</span><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">Merge</span><span style="color:#ABB2BF;">( A, TmpA, L, Center</span><span style="color:#C678DD;">+</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, RightEnd );</span><span style="color:#7F848E;font-style:italic;">  /* 合并两段有序序列 */</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">     }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">MergeSort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">A</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">N</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 归并排序 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     ElementType </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">TmpA;</span></span>
<span class="line"><span style="color:#ABB2BF;">     TmpA </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> (ElementType </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;">malloc</span><span style="color:#ABB2BF;">(N</span><span style="color:#C678DD;">*sizeof</span><span style="color:#ABB2BF;">(ElementType));</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( TmpA </span><span style="color:#C678DD;">!=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">NULL</span><span style="color:#ABB2BF;"> ) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">Msort</span><span style="color:#ABB2BF;">( A, TmpA, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, N</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> );</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">free</span><span style="color:#ABB2BF;">( TmpA );</span></span>
<span class="line"><span style="color:#ABB2BF;">     }</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">printf</span><span style="color:#ABB2BF;">( </span><span style="color:#98C379;">&quot;空间不足&quot;</span><span style="color:#ABB2BF;"> );</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><p><strong>迭代 Iteration</strong></p><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/* 这里Merge函数在递归版本中给出 */</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* length = 当前有序子列的长度*/</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Merge_pass</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">A</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">TmpA</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">N</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">length</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 两两归并相邻有序子列 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> i, j;</span></span>
<span class="line"><span style="color:#ABB2BF;">       </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> ( i</span><span style="color:#C678DD;">=</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; i </span><span style="color:#C678DD;">&lt;=</span><span style="color:#ABB2BF;"> N</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">2</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">length; i </span><span style="color:#C678DD;">+=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">2</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">length )</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#61AFEF;">Merge</span><span style="color:#ABB2BF;">( A, TmpA, i, i</span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;">length, i</span><span style="color:#C678DD;">+</span><span style="color:#D19A66;">2</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">length</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> );</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( i</span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;">length </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> N )</span><span style="color:#7F848E;font-style:italic;"> /* 归并最后2个子列*/</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#61AFEF;">Merge</span><span style="color:#ABB2BF;">( A, TmpA, i, i</span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;">length, N</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">else</span><span style="color:#7F848E;font-style:italic;"> /* 最后只剩1个子列*/</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> ( j </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> i; j </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> N; j</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;"> ) </span><span style="color:#E06C75;">TmpA</span><span style="color:#ABB2BF;">[j] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[j];</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Merge_Sort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">A</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">N</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{ </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> length; </span></span>
<span class="line"><span style="color:#ABB2BF;">     ElementType </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">TmpA;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span></span>
<span class="line"><span style="color:#ABB2BF;">     length </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> /* 初始化子序列长度*/</span></span>
<span class="line"><span style="color:#ABB2BF;">     TmpA </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">malloc</span><span style="color:#ABB2BF;">( N </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">sizeof</span><span style="color:#ABB2BF;">( ElementType ) );</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( TmpA </span><span style="color:#C678DD;">!=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">NULL</span><span style="color:#ABB2BF;"> ) {</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;">( length </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> N ) {</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#61AFEF;">Merge_pass</span><span style="color:#ABB2BF;">( A, TmpA, N, length );</span></span>
<span class="line"><span style="color:#ABB2BF;">              length </span><span style="color:#C678DD;">*=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#61AFEF;">Merge_pass</span><span style="color:#ABB2BF;">( TmpA, A, N, length );</span></span>
<span class="line"><span style="color:#ABB2BF;">              length </span><span style="color:#C678DD;">*=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">free</span><span style="color:#ABB2BF;">( TmpA );</span></span>
<span class="line"><span style="color:#ABB2BF;">     }</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">printf</span><span style="color:#ABB2BF;">( </span><span style="color:#98C379;">&quot;空间不足&quot;</span><span style="color:#ABB2BF;"> );</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="快速排序" tabindex="-1">快速排序 <a class="header-anchor" href="#快速排序" aria-label="Permalink to &quot;快速排序&quot;">​</a></h3><p>Quicksort：又称分区交换排序（partition-exchange sort），简称快排，是一种被广泛运用的排序算法 <br> 使用分治法把一个序列分为较小和较大的2个子序列，然后递归地排序两个子序列</p><p>步骤</p><ul><li>挑选基准值：从数列中挑出一个元素，称为“基准”（pivot）</li><li>分区（partition）：重新排序数列，所有元素比基准值小的摆放在基准前面，所有元素比基准值大的摆在基准的后面（相同的数可以到任一边）。在这个分区退出之后，该基准就处于数列的中间位置。</li><li>递归排序子序列：递归地将小于基准值元素的子序列和大于基准值元素的子序列排序。</li></ul><p><img src="`+y+`" alt=""></p><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">ElementType </span><span style="color:#61AFEF;">Median3</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">A</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">Left</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">Right</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{ </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> Center </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> (Left</span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;">Right) </span><span style="color:#C678DD;">/</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Left] </span><span style="color:#C678DD;">&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Center] )</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">Swap</span><span style="color:#ABB2BF;">( </span><span style="color:#C678DD;">&amp;</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Left], </span><span style="color:#C678DD;">&amp;</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Center] );</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Left] </span><span style="color:#C678DD;">&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Right] )</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">Swap</span><span style="color:#ABB2BF;">( </span><span style="color:#C678DD;">&amp;</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Left], </span><span style="color:#C678DD;">&amp;</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Right] );</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Center] </span><span style="color:#C678DD;">&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Right] )</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">Swap</span><span style="color:#ABB2BF;">( </span><span style="color:#C678DD;">&amp;</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Center], </span><span style="color:#C678DD;">&amp;</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Right] );</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    /* 此时A[Left] &lt;= A[Center] &lt;= A[Right] */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">Swap</span><span style="color:#ABB2BF;">( </span><span style="color:#C678DD;">&amp;</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Center], </span><span style="color:#C678DD;">&amp;</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Right</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">] );</span><span style="color:#7F848E;font-style:italic;"> /* 将基准Pivot藏到右边*/</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    /* 只需要考虑A[Left+1] … A[Right-2] */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Right</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span><span style="color:#7F848E;font-style:italic;">  /* 返回基准Pivot */</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Qsort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">A</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">Left</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">Right</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 核心递归函数 */</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> Pivot, Cutoff, Low, High;</span></span>
<span class="line"><span style="color:#ABB2BF;">       </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( Cutoff </span><span style="color:#C678DD;">&lt;=</span><span style="color:#ABB2BF;"> Right</span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;">Left ) {</span><span style="color:#7F848E;font-style:italic;"> /* 如果序列元素充分多，进入快排 */</span></span>
<span class="line"><span style="color:#ABB2BF;">          Pivot </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Median3</span><span style="color:#ABB2BF;">( A, Left, Right );</span><span style="color:#7F848E;font-style:italic;"> /* 选基准 */</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">          Low </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> Left; High </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> Right</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;"> (</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">) {</span><span style="color:#7F848E;font-style:italic;"> /*将序列中比基准小的移到基准左边，大的移到右边*/</span></span>
<span class="line"><span style="color:#ABB2BF;">               </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;"> ( </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">Low] </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> Pivot ) ;</span></span>
<span class="line"><span style="color:#ABB2BF;">               </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;"> ( </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[</span><span style="color:#C678DD;">--</span><span style="color:#ABB2BF;">High] </span><span style="color:#C678DD;">&gt;</span><span style="color:#ABB2BF;"> Pivot ) ;</span></span>
<span class="line"><span style="color:#ABB2BF;">               </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( Low </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> High ) </span><span style="color:#61AFEF;">Swap</span><span style="color:#ABB2BF;">( </span><span style="color:#C678DD;">&amp;</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Low], </span><span style="color:#C678DD;">&amp;</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[High] );</span></span>
<span class="line"><span style="color:#ABB2BF;">               </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">          }</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">Swap</span><span style="color:#ABB2BF;">( </span><span style="color:#C678DD;">&amp;</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Low], </span><span style="color:#C678DD;">&amp;</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[Right</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">] );</span><span style="color:#7F848E;font-style:italic;">   /* 将基准换到正确的位置 */</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">Qsort</span><span style="color:#ABB2BF;">( A, Left, Low</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> );</span><span style="color:#7F848E;font-style:italic;">    /* 递归解决左边 */</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#61AFEF;">Qsort</span><span style="color:#ABB2BF;">( A, Low</span><span style="color:#C678DD;">+</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, Right );</span><span style="color:#7F848E;font-style:italic;">   /* 递归解决右边 */</span><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#ABB2BF;">     }</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">InsertionSort</span><span style="color:#ABB2BF;">( A</span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;">Left, Right</span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;">Left</span><span style="color:#C678DD;">+</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> );</span><span style="color:#7F848E;font-style:italic;"> /* 元素太少，用简单排序 */</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">QuickSort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">A</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">N</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 统一接口 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#61AFEF;">Qsort</span><span style="color:#ABB2BF;">( A, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, N</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;"> );</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p><strong>库函数</strong></p><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;stdlib.h&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/*---------------简单整数排序--------------------*/</span></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">compare</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">const</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">void</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">*</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">const</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">void</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">*</span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 比较两整数。非降序排列 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int*</span><span style="color:#ABB2BF;">)a </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int*</span><span style="color:#ABB2BF;">)b);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* 调用接口 */</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;">qsort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> N</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">sizeof</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;">),</span><span style="color:#E06C75;"> compare</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/*---------------简单整数排序--------------------*/</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/*--------------- 一般情况下，对结构体Node中的某键值key排序 ---------------*/</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> Node {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> key1, key2;</span></span>
<span class="line"><span style="color:#ABB2BF;">} </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[MAXN];</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">compare2keys</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">const</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">void</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">*</span><span style="color:#E06C75;font-style:italic;">a</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">const</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">void</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">*</span><span style="color:#E06C75;font-style:italic;">b</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 比较两种键值：按key1非升序排列；如果key1相等，则按key2非降序排列 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> k;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( ((</span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> Node</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">)a)-&gt;</span><span style="color:#E06C75;">key1</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> ((</span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> Node</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">)b)-&gt;</span><span style="color:#E06C75;">key1</span><span style="color:#ABB2BF;"> )</span></span>
<span class="line"><span style="color:#ABB2BF;">        k </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( ((</span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> Node</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">)a)-&gt;</span><span style="color:#E06C75;">key1</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&gt;</span><span style="color:#ABB2BF;"> ((</span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> Node</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">)b)-&gt;</span><span style="color:#E06C75;">key1</span><span style="color:#ABB2BF;"> )</span></span>
<span class="line"><span style="color:#ABB2BF;">        k </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span><span style="color:#7F848E;font-style:italic;"> /* 如果key1相等 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( ((</span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> Node</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">)a)-&gt;</span><span style="color:#E06C75;">key2</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> ((</span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> Node</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">)b)-&gt;</span><span style="color:#E06C75;">key2</span><span style="color:#ABB2BF;"> )</span></span>
<span class="line"><span style="color:#ABB2BF;">            k </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">else</span></span>
<span class="line"><span style="color:#ABB2BF;">            k </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> k;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* 调用接口 */</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#61AFEF;">qsort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> N</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">sizeof</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">struct</span><span style="color:#E06C75;"> Node</span><span style="color:#ABB2BF;">),</span><span style="color:#E06C75;"> compare2keys</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/*--------------- 一般情况下，对结构体Node中的某键值key排序 ---------------*/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="桶排序" tabindex="-1">桶排序 <a class="header-anchor" href="#桶排序" aria-label="Permalink to &quot;桶排序&quot;">​</a></h3><p>Bucket sort：将数组分到有限数量的桶里，每个桶再个别排序 <br> <img src="`+i+'" alt=""></p><h3 id="基数排序" tabindex="-1">基数排序 <a class="header-anchor" href="#基数排序" aria-label="Permalink to &quot;基数排序&quot;">​</a></h3><p>Radix sort：一种非比较型整数排序算法，其原理是将整数按位数切割成不同的数字，然后按每个位数分别比较。 <br> <img src="'+F+`" alt="">** <br> Least Significant Digit first</p><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/* 假设元素最多有MaxDigit个关键字，基数全是同样的Radix */</span></span>
<span class="line"><span style="color:#C678DD;">#define</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">MaxDigit</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">4</span></span>
<span class="line"><span style="color:#C678DD;">#define</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Radix</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">10</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* 桶元素结点 */</span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> Node </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">PtrToNode;</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> Node {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> key;</span></span>
<span class="line"><span style="color:#ABB2BF;">    PtrToNode next;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* 桶头结点 */</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> HeadNode {</span></span>
<span class="line"><span style="color:#ABB2BF;">    PtrToNode head, tail;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> HeadNode </span><span style="color:#E06C75;">Bucket</span><span style="color:#ABB2BF;">[Radix];</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">GetDigit</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">X</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">D</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 默认次位D=1, 主位D&lt;=MaxDigit */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> d, i;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (i</span><span style="color:#C678DD;">=</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">&lt;=</span><span style="color:#ABB2BF;">D; i</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        d </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> X </span><span style="color:#C678DD;">%</span><span style="color:#ABB2BF;"> Radix;</span></span>
<span class="line"><span style="color:#ABB2BF;">        X </span><span style="color:#C678DD;">/=</span><span style="color:#ABB2BF;"> Radix;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> d;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">LSDRadixSort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">A</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">N</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 基数排序 - 次位优先 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> D, Di, i;</span></span>
<span class="line"><span style="color:#ABB2BF;">     Bucket B;</span></span>
<span class="line"><span style="color:#ABB2BF;">     PtrToNode tmp, p, List </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">NULL</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#ABB2BF;">      </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (i</span><span style="color:#C678DD;">=</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">Radix; i</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">)</span><span style="color:#7F848E;font-style:italic;"> /* 初始化每个桶为空链表 */</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[i].</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[i].</span><span style="color:#E06C75;">tail</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">NULL</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (i</span><span style="color:#C678DD;">=</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">N; i</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">) {</span><span style="color:#7F848E;font-style:italic;"> /* 将原始序列逆序存入初始链表List */</span></span>
<span class="line"><span style="color:#ABB2BF;">         tmp </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> (PtrToNode)</span><span style="color:#61AFEF;">malloc</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">sizeof</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> Node));</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#E5C07B;">tmp</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[i];</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#E5C07B;">tmp</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> List;</span></span>
<span class="line"><span style="color:#ABB2BF;">         List </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> tmp;</span></span>
<span class="line"><span style="color:#ABB2BF;">     }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">     /* 下面开始排序 */</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (D</span><span style="color:#C678DD;">=</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">; D</span><span style="color:#C678DD;">&lt;=</span><span style="color:#ABB2BF;">MaxDigit; D</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">) {</span><span style="color:#7F848E;font-style:italic;"> /* 对数据的每一位循环处理 */</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">         /* 下面是分配的过程 */</span></span>
<span class="line"><span style="color:#ABB2BF;">         p </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> List;</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;"> (p) {</span></span>
<span class="line"><span style="color:#ABB2BF;">             Di </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">GetDigit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">p</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">, D);</span><span style="color:#7F848E;font-style:italic;"> /* 获得当前元素的当前位数字 */</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">             /* 从List中摘除 */</span></span>
<span class="line"><span style="color:#ABB2BF;">             tmp </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> p; p </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">p</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">             /* 插入B[Di]号桶尾 */</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#E5C07B;">tmp</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">NULL</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[Di].</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">NULL</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                 </span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[Di].</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[Di].</span><span style="color:#E06C75;">tail</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> tmp;</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">                 </span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[Di].</span><span style="color:#E5C07B;">tail</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> tmp;</span></span>
<span class="line"><span style="color:#ABB2BF;">                 </span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[Di].</span><span style="color:#E06C75;">tail</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> tmp;</span></span>
<span class="line"><span style="color:#ABB2BF;">             }</span></span>
<span class="line"><span style="color:#ABB2BF;">         }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">         /* 下面是收集的过程 */</span></span>
<span class="line"><span style="color:#ABB2BF;">         List </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">NULL</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (Di</span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;">Radix</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">; Di</span><span style="color:#C678DD;">&gt;=</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; Di</span><span style="color:#C678DD;">--</span><span style="color:#ABB2BF;">) {</span><span style="color:#7F848E;font-style:italic;"> /* 将每个桶的元素顺序收集入List */</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[Di].</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">) {</span><span style="color:#7F848E;font-style:italic;"> /* 如果桶不为空 */</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                 /* 整桶插入List表头 */</span></span>
<span class="line"><span style="color:#ABB2BF;">                 </span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[Di].</span><span style="color:#E5C07B;">tail</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> List;</span></span>
<span class="line"><span style="color:#ABB2BF;">                 List </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[Di].</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">                 </span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[Di].</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[Di].</span><span style="color:#E06C75;">tail</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">NULL</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> /* 清空桶 */</span></span>
<span class="line"><span style="color:#ABB2BF;">             }</span></span>
<span class="line"><span style="color:#ABB2BF;">         }</span></span>
<span class="line"><span style="color:#ABB2BF;">     }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">     /* 将List倒入A[]并释放空间 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (i</span><span style="color:#C678DD;">=</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">N; i</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        tmp </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> List;</span></span>
<span class="line"><span style="color:#ABB2BF;">        List </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[i] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">tmp</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">free</span><span style="color:#ABB2BF;">(tmp);</span></span>
<span class="line"><span style="color:#ABB2BF;">     } </span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br></div></div><p><strong>主位优先 (MSD)</strong> <br> Most Significant Digit first</p><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">/* 假设元素最多有MaxDigit个关键字，基数全是同样的Radix */</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">#define</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">MaxDigit</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">4</span></span>
<span class="line"><span style="color:#C678DD;">#define</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Radix</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">10</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* 桶元素结点 */</span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> Node </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">PtrToNode;</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> Node{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> key;</span></span>
<span class="line"><span style="color:#ABB2BF;">    PtrToNode next;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* 桶头结点 */</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> HeadNode {</span></span>
<span class="line"><span style="color:#ABB2BF;">    PtrToNode head, tail;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> HeadNode </span><span style="color:#E06C75;">Bucket</span><span style="color:#ABB2BF;">[Radix];</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">GetDigit</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">X</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">D</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 默认次位D=1, 主位D&lt;=MaxDigit */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> d, i;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (i</span><span style="color:#C678DD;">=</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">&lt;=</span><span style="color:#ABB2BF;">D; i</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        d </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> X</span><span style="color:#C678DD;">%</span><span style="color:#ABB2BF;">Radix;</span></span>
<span class="line"><span style="color:#ABB2BF;">        X </span><span style="color:#C678DD;">/=</span><span style="color:#ABB2BF;"> Radix;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> d;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">MSD</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">A</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">L</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">R</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">D</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 核心递归函数: 对A[L]...A[R]的第D位数进行排序 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> Di, i, j;</span></span>
<span class="line"><span style="color:#ABB2BF;">     Bucket B;</span></span>
<span class="line"><span style="color:#ABB2BF;">     PtrToNode tmp, p, List </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">NULL</span><span style="color:#ABB2BF;">; </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (D</span><span style="color:#C678DD;">==</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> /* 递归终止条件 */</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (i</span><span style="color:#C678DD;">=</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">Radix; i</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">)</span><span style="color:#7F848E;font-style:italic;"> /* 初始化每个桶为空链表 */</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[i].</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[i].</span><span style="color:#E06C75;">tail</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">NULL</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (i</span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;">L; i</span><span style="color:#C678DD;">&lt;=</span><span style="color:#ABB2BF;">R; i</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">) {</span><span style="color:#7F848E;font-style:italic;"> /* 将原始序列逆序存入初始链表List */</span></span>
<span class="line"><span style="color:#ABB2BF;">         tmp </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> (PtrToNode)</span><span style="color:#61AFEF;">malloc</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">sizeof</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> Node));</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#E5C07B;">tmp</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[i];</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#E5C07B;">tmp</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> List;</span></span>
<span class="line"><span style="color:#ABB2BF;">         List </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> tmp;</span></span>
<span class="line"><span style="color:#ABB2BF;">     }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">     /* 下面是分配的过程 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     p </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> List;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;"> (p) {</span></span>
<span class="line"><span style="color:#ABB2BF;">         Di </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">GetDigit</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">p</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">, D);</span><span style="color:#7F848E;font-style:italic;"> /* 获得当前元素的当前位数字 */</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">         /* 从List中摘除 */</span></span>
<span class="line"><span style="color:#ABB2BF;">         tmp </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> p; p </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">p</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">         /* 插入B[Di]号桶 */</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[Di].</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">NULL</span><span style="color:#ABB2BF;">) </span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[Di].</span><span style="color:#E06C75;">tail</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> tmp;</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#E5C07B;">tmp</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[Di].</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[Di].</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> tmp;</span></span>
<span class="line"><span style="color:#ABB2BF;">     }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">     /* 下面是收集的过程 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     i </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> j </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> L;</span><span style="color:#7F848E;font-style:italic;"> /* i, j记录当前要处理的A[]的左右端下标 */</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> (Di</span><span style="color:#C678DD;">=</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; Di</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">Radix; Di</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">) {</span><span style="color:#7F848E;font-style:italic;"> /* 对于每个桶 */</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[Di].</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">) {</span><span style="color:#7F848E;font-style:italic;"> /* 将非空的桶整桶倒入A[], 递归排序 */</span></span>
<span class="line"><span style="color:#ABB2BF;">             p </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">B</span><span style="color:#ABB2BF;">[Di].</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;"> (p) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                 tmp </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> p;</span></span>
<span class="line"><span style="color:#ABB2BF;">                 p </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">p</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">                 </span><span style="color:#E06C75;">A</span><span style="color:#ABB2BF;">[j</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">tmp</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">                 </span><span style="color:#61AFEF;">free</span><span style="color:#ABB2BF;">(tmp);</span></span>
<span class="line"><span style="color:#ABB2BF;">             }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">             /* 递归对该桶数据排序, 位数减1 */</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#61AFEF;">MSD</span><span style="color:#ABB2BF;">(A, i, j</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, D</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">             i </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> j;</span><span style="color:#7F848E;font-style:italic;"> /* 为下一个桶对应的A[]左端 */</span></span>
<span class="line"><span style="color:#ABB2BF;">         } </span></span>
<span class="line"><span style="color:#ABB2BF;">     } </span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">MSDRadixSort</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">A</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">N</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 统一接口 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">MSD</span><span style="color:#ABB2BF;">(A, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, N</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, MaxDigit); </span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br></div></div><h2 id="search" tabindex="-1">Search <a class="header-anchor" href="#search" aria-label="Permalink to &quot;Search&quot;">​</a></h2><p>搜索：对状态空间进行枚举，通过穷尽所有的可能来找到最优解，或者统计合法解的个数。 <br> 优化方：减小状态空间，更改搜索顺序，剪枝等。</p><p>迭代加深搜索：一种 <strong>每次限制搜索深度的</strong> 深度优先搜索 <br> 双向同时搜索：从状态图上的起点和终点同时开始进行 <a href="https://oi-wiki.org/search/bfs/" target="_blank" rel="noreferrer">广搜</a> 或 <a href="https://oi-wiki.org/search/dfs/" target="_blank" rel="noreferrer">深搜</a>。如果发现搜索的两端相遇了，那么可以认为是获得了可行解。 <br> 启发式搜索（heuristic search）：对取和不取都做分析，从中选取更优解或删去无效解。 <br> 启发式函数：基于已有的信息对搜索的每一个分支选择都做估价，进而选择分支。</p><h3 id="二分查找" tabindex="-1">二分查找 <a class="header-anchor" href="#二分查找" aria-label="Permalink to &quot;二分查找&quot;">​</a></h3><p>binary search：也称折半搜索（half-interval search），用来在一个有序数组中查找某一元素的算法。 <br> 搜索过程：从数组的中间元素开始，如果中间元素正好是要查找的元素，则搜索过程结束；如果某一特定元素大于或者小于中间元素，则在数组大于或小于中间元素的那一半中查找，而且跟开始一样从中间元素开始比较。如果在某一步骤数组为空，则代表找不到。</p><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 递归</span></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">binary_search</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">const</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">start</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">end</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">khey</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (start </span><span style="color:#C678DD;">&gt;</span><span style="color:#ABB2BF;"> end)</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> mid </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> start </span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;"> (end </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> start) </span><span style="color:#C678DD;">/</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;">    //直接平均可能会溢位</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[mid] </span><span style="color:#C678DD;">&gt;</span><span style="color:#ABB2BF;"> khey)</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">binary_search</span><span style="color:#ABB2BF;">(arr, start, mid </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, khey);</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[mid] </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> khey)</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">binary_search</span><span style="color:#ABB2BF;">(arr, mid </span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, end, khey);</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">else</span></span>
<span class="line"><span style="color:#ABB2BF;">	    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> mid;</span><span style="color:#7F848E;font-style:italic;">        //最后检测相等是因为多数搜寻状况不是大于要不就小于</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 迭代</span></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">binary_search</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">const</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">arr</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">start</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">end</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> ret </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;">       // 未搜索到数据返回-1下标</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> mid;</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;"> (start </span><span style="color:#C678DD;">&lt;=</span><span style="color:#ABB2BF;"> end) {</span></span>
<span class="line"><span style="color:#ABB2BF;">		mid </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> start </span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;"> (end </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> start) </span><span style="color:#C678DD;">/</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> //直接平均可能会溢位，所以用此算法</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[mid] </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> key)</span></span>
<span class="line"><span style="color:#ABB2BF;">			start </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> mid </span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">arr</span><span style="color:#ABB2BF;">[mid] </span><span style="color:#C678DD;">&gt;</span><span style="color:#ABB2BF;"> key)</span></span>
<span class="line"><span style="color:#ABB2BF;">			end </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> mid </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span><span style="color:#7F848E;font-style:italic;">            // 最后检测相等是因为多数搜寻状况不是大于要不就小于</span></span>
<span class="line"><span style="color:#ABB2BF;">			ret </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> mid;  </span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> ret;</span><span style="color:#7F848E;font-style:italic;">     // 单一出口</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="hash" tabindex="-1">Hash <a class="header-anchor" href="#hash" aria-label="Permalink to &quot;Hash&quot;">​</a></h3><p>散列表（Hash table，哈希表），是根据键（Key）而直接访问在内存储存位置的数据结构 <br> <img src="`+A+`" alt=""></p><p>装载因子（load factor）= 填入表中的元素个数 / 哈希表的长度 <br> <strong>冲突</strong>：不同的关键字会映射到同一个散列地址上</p><h4 id="散列函数" tabindex="-1">散列函数 <a class="header-anchor" href="#散列函数" aria-label="Permalink to &quot;散列函数&quot;">​</a></h4><p>数字关键词</p><ul><li>直接定址法 取关键词的某个线性函数值为散列地址，即：h(key) = a * key + b （a、b为常数)</li><li>除留余数法 散列函数为：h(key) = key mod p （p 一般取素数)</li><li>数字分析法 分析数字关键字在各位上的变化情况，取比较随机的位作为散列地址</li><li>折叠法 把关键词分割成位数相同的几个部分，然后叠加</li><li>平方取中法 将关键词平方，取中间几位</li></ul><h4 id="处理冲突" tabindex="-1">处理冲突 <a class="header-anchor" href="#处理冲突" aria-label="Permalink to &quot;处理冲突&quot;">​</a></h4><h5 id="开放地址法-open-addressing" tabindex="-1">开放地址法（Open addressing） <a class="header-anchor" href="#开放地址法-open-addressing" aria-label="Permalink to &quot;开放地址法（Open addressing）&quot;">​</a></h5><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">#define</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">MAXTABLESIZE</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">100000</span><span style="color:#7F848E;font-style:italic;"> /* 允许开辟的最大散列表长度 */</span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> ElementType;</span><span style="color:#7F848E;font-style:italic;">    /* 关键词类型用整型 */</span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> Index;</span><span style="color:#7F848E;font-style:italic;">          /* 散列地址类型 */</span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> Index Position;</span><span style="color:#7F848E;font-style:italic;">     /* 数据所在位置与散列地址是同一类型 */</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/* 散列单元状态类型，分别对应：有合法元素、空单元、有已删除元素 */</span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">enum</span><span style="color:#ABB2BF;"> { Legitimate, Empty, Deleted } EntryType;</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> HashEntry Cell;</span><span style="color:#7F848E;font-style:italic;"> /* 散列表单元类型 */</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> HashEntry{</span></span>
<span class="line"><span style="color:#ABB2BF;">    ElementType Data;</span><span style="color:#7F848E;font-style:italic;"> /* 存放元素 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    EntryType Info;</span><span style="color:#7F848E;font-style:italic;">   /* 单元状态 */</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> TblNode </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">HashTable;</span><span style="color:#7F848E;font-style:italic;"> /* 散列表类型 */</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> TblNode {</span><span style="color:#7F848E;font-style:italic;">   /* 散列表结点定义 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> TableSize;</span><span style="color:#7F848E;font-style:italic;"> /* 表的最大长度 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    Cell </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">Cells;</span><span style="color:#7F848E;font-style:italic;">   /* 存放散列单元数据的数组 */</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">NextPrime</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">N</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span><span style="color:#7F848E;font-style:italic;"> /* 返回大于N且不超过MAXTABLESIZE的最小素数 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> i, p </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> (N</span><span style="color:#C678DD;">%</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> N</span><span style="color:#C678DD;">+</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> N</span><span style="color:#C678DD;">+</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> /*从大于N的下一个奇数开始 */</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;">( p </span><span style="color:#C678DD;">&lt;=</span><span style="color:#ABB2BF;"> MAXTABLESIZE ) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;">( i</span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;">sqrt</span><span style="color:#ABB2BF;">(p); i</span><span style="color:#C678DD;">&gt;</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">--</span><span style="color:#ABB2BF;"> )</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( </span><span style="color:#56B6C2;">!</span><span style="color:#ABB2BF;">(p</span><span style="color:#C678DD;">%</span><span style="color:#ABB2BF;">i) ) </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> /* p不是素数 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( i</span><span style="color:#C678DD;">==</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;"> ) </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> /* for正常结束，说明p是素数 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;">  p </span><span style="color:#C678DD;">+=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> /* 否则试探下一个奇数 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> p;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">HashTable </span><span style="color:#61AFEF;">CreateTable</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">TableSize</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    HashTable H;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> i;</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">    H </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> (HashTable)</span><span style="color:#61AFEF;">malloc</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">sizeof</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> TblNode));</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    /* 保证散列表最大长度是素数 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">TableSize</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">NextPrime</span><span style="color:#ABB2BF;">(TableSize);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    /* 声明单元数组 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Cells</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> (Cell </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;">malloc</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">TableSize</span><span style="color:#C678DD;">*sizeof</span><span style="color:#ABB2BF;">(Cell));</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    /* 初始化单元状态为“空单元” */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;">( i</span><span style="color:#C678DD;">=</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">&lt;</span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">TableSize</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;"> )</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Cells</span><span style="color:#ABB2BF;">[i].</span><span style="color:#E06C75;">Info</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> Empty;</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> H;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h5 id="平方探测法-quadratic-probing" tabindex="-1">平方探测法（Quadratic Probing） <a class="header-anchor" href="#平方探测法-quadratic-probing" aria-label="Permalink to &quot;平方探测法（Quadratic Probing）&quot;">​</a></h5><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">Position </span><span style="color:#61AFEF;">Find</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> HashTable </span><span style="color:#E06C75;font-style:italic;">H</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">Key</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    Position CurrentPos, NewPos;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> CNum </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> /* 记录冲突次数 */</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">    NewPos </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> CurrentPos </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Hash</span><span style="color:#ABB2BF;">( Key, </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">TableSize</span><span style="color:#ABB2BF;"> );</span><span style="color:#7F848E;font-style:italic;"> /* 初始散列位置 */</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    /* 当该位置的单元非空，并且不是要找的元素时，发生冲突 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;">( </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Cells</span><span style="color:#ABB2BF;">[NewPos].</span><span style="color:#E06C75;">Info</span><span style="color:#C678DD;">!=</span><span style="color:#ABB2BF;">Empty </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Cells</span><span style="color:#ABB2BF;">[NewPos].</span><span style="color:#E06C75;">Data</span><span style="color:#C678DD;">!=</span><span style="color:#ABB2BF;">Key ) {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">                                           /* 字符串类型的关键词需要 strcmp 函数!! */</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        /* 统计1次冲突，并判断奇偶次 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;">( </span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">CNum</span><span style="color:#C678DD;">%</span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;"> ){</span><span style="color:#7F848E;font-style:italic;"> /* 奇数次冲突 */</span></span>
<span class="line"><span style="color:#ABB2BF;">            NewPos </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> CurrentPos </span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;"> (CNum</span><span style="color:#C678DD;">+</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">(CNum</span><span style="color:#C678DD;">+</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span><span style="color:#C678DD;">/</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> /* 增量为+[(CNum+1)/2]^2 */</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( NewPos </span><span style="color:#C678DD;">&gt;=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">TableSize</span><span style="color:#ABB2BF;"> )</span></span>
<span class="line"><span style="color:#ABB2BF;">                NewPos </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> NewPos </span><span style="color:#C678DD;">%</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">TableSize</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> /* 调整为合法地址 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span><span style="color:#7F848E;font-style:italic;"> /* 偶数次冲突 */</span></span>
<span class="line"><span style="color:#ABB2BF;">            NewPos </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> CurrentPos </span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;"> CNum</span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">CNum</span><span style="color:#C678DD;">/</span><span style="color:#D19A66;">4</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> /* 增量为-(CNum/2)^2 */</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;">( NewPos </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> )</span></span>
<span class="line"><span style="color:#ABB2BF;">                NewPos </span><span style="color:#C678DD;">+=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">TableSize</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> /* 调整为合法地址 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> NewPos;</span><span style="color:#7F848E;font-style:italic;"> /* 此时NewPos或者是Key的位置，或者是一个空单元的位置（表示找不到）*/</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">bool</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Insert</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> HashTable </span><span style="color:#E06C75;font-style:italic;">H</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">Key</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    Position Pos </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Find</span><span style="color:#ABB2BF;">( H, Key );</span><span style="color:#7F848E;font-style:italic;"> /* 先检查Key是否已经存在 */</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;">( </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Cells</span><span style="color:#ABB2BF;">[Pos].</span><span style="color:#E06C75;">Info</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">!=</span><span style="color:#ABB2BF;"> Legitimate ) {</span><span style="color:#7F848E;font-style:italic;"> /* 如果这个单元没有被占，说明Key可以插入在此 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Cells</span><span style="color:#ABB2BF;">[Pos].</span><span style="color:#E06C75;">Info</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> Legitimate;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Cells</span><span style="color:#ABB2BF;">[Pos].</span><span style="color:#E06C75;">Data</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> Key;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        /*字符串类型的关键词需要 strcpy 函数!! */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">printf</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;键值已存在&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h5 id="分离链接法" tabindex="-1">分离链接法 <a class="header-anchor" href="#分离链接法" aria-label="Permalink to &quot;分离链接法&quot;">​</a></h5><p>将相应位置上冲突的所有关键词存储在同一个单链表中</p><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">#define</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">KEYLENGTH</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">15</span><span style="color:#7F848E;font-style:italic;">                   /* 关键词字符串的最大长度 */</span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">char</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">ElementType</span><span style="color:#ABB2BF;">[KEYLENGTH</span><span style="color:#C678DD;">+</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span><span style="color:#7F848E;font-style:italic;"> /* 关键词类型用字符串 */</span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> Index;</span><span style="color:#7F848E;font-style:italic;">                     /* 散列地址类型 */</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/******** 以下是单链表的定义 ********/</span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> LNode </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">PtrToLNode;</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> LNode {</span></span>
<span class="line"><span style="color:#ABB2BF;">    ElementType Data;</span></span>
<span class="line"><span style="color:#ABB2BF;">    PtrToLNode Next;</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> PtrToLNode Position;</span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> PtrToLNode List;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">/******** 以上是单链表的定义 ********/</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> TblNode </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">HashTable;</span><span style="color:#7F848E;font-style:italic;"> /* 散列表类型 */</span></span>
<span class="line"><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> TblNode {</span><span style="color:#7F848E;font-style:italic;">   /* 散列表结点定义 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> TableSize;</span><span style="color:#7F848E;font-style:italic;"> /* 表的最大长度 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    List Heads;</span><span style="color:#7F848E;font-style:italic;">    /* 指向链表头结点的数组 */</span></span>
<span class="line"><span style="color:#ABB2BF;">};</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">HashTable </span><span style="color:#61AFEF;">CreateTable</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">TableSize</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    HashTable H;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> i;</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">    H </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> (HashTable)</span><span style="color:#61AFEF;">malloc</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">sizeof</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> TblNode));</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    /* 保证散列表最大长度是素数，具体见代码5.3 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">TableSize</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">NextPrime</span><span style="color:#ABB2BF;">(TableSize);</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    /* 以下分配链表头结点数组 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Heads</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> (List)</span><span style="color:#61AFEF;">malloc</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">TableSize</span><span style="color:#C678DD;">*sizeof</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> LNode));</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    /* 初始化表头结点 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;">( i</span><span style="color:#C678DD;">=</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">&lt;</span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">TableSize</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;"> ) {</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Heads</span><span style="color:#ABB2BF;">[i].</span><span style="color:#E06C75;">Data</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;</span><span style="color:#56B6C2;">\\0</span><span style="color:#98C379;">&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Heads</span><span style="color:#ABB2BF;">[i].</span><span style="color:#E06C75;">Next</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">NULL</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> H;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">Position </span><span style="color:#61AFEF;">Find</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> HashTable </span><span style="color:#E06C75;font-style:italic;">H</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">Key</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    Position P;</span></span>
<span class="line"><span style="color:#ABB2BF;">    Index Pos;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span></span>
<span class="line"><span style="color:#ABB2BF;">    Pos </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Hash</span><span style="color:#ABB2BF;">( Key, </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">TableSize</span><span style="color:#ABB2BF;"> );</span><span style="color:#7F848E;font-style:italic;"> /* 初始散列位置 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    P </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Heads</span><span style="color:#ABB2BF;">[Pos].</span><span style="color:#E06C75;">Next</span><span style="color:#ABB2BF;">;</span><span style="color:#7F848E;font-style:italic;"> /* 从该链表的第1个结点开始 */</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    /* 当未到表尾，并且Key未找到时 */</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;">( P </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">strcmp</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">P</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Data</span><span style="color:#ABB2BF;">, Key) )</span></span>
<span class="line"><span style="color:#ABB2BF;">        P </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">P</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> P;</span><span style="color:#7F848E;font-style:italic;"> /* 此时P或者指向找到的结点，或者为NULL */</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">bool</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Insert</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> HashTable </span><span style="color:#E06C75;font-style:italic;">H</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> ElementType </span><span style="color:#E06C75;font-style:italic;">Key</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    Position P, NewCell;</span></span>
<span class="line"><span style="color:#ABB2BF;">    Index Pos;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span></span>
<span class="line"><span style="color:#ABB2BF;">    P </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Find</span><span style="color:#ABB2BF;">( H, Key );</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( </span><span style="color:#56B6C2;">!</span><span style="color:#ABB2BF;">P ) {</span><span style="color:#7F848E;font-style:italic;"> /* 关键词未找到，可以插入 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        NewCell </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> (Position)</span><span style="color:#61AFEF;">malloc</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">sizeof</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">struct</span><span style="color:#ABB2BF;"> LNode));</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">strcpy</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">NewCell</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Data</span><span style="color:#ABB2BF;">, Key);</span></span>
<span class="line"><span style="color:#ABB2BF;">        Pos </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Hash</span><span style="color:#ABB2BF;">( Key, </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">TableSize</span><span style="color:#ABB2BF;"> );</span><span style="color:#7F848E;font-style:italic;"> /* 初始散列位置 */</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">        /* 将NewCell插入为H-&gt;Heads[Pos]链表的第1个结点 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">NewCell</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Next</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Heads</span><span style="color:#ABB2BF;">[Pos].</span><span style="color:#E06C75;">Next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Heads</span><span style="color:#ABB2BF;">[Pos].</span><span style="color:#E06C75;">Next</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> NewCell; </span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span><span style="color:#7F848E;font-style:italic;"> /* 关键词已存在 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">printf</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;键值已存在&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">DestroyTable</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> HashTable </span><span style="color:#E06C75;font-style:italic;">H</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> i;</span></span>
<span class="line"><span style="color:#ABB2BF;">    Position P, Tmp;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">    /* 释放每个链表的结点 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;">( i</span><span style="color:#C678DD;">=</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">&lt;</span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">TableSize</span><span style="color:#ABB2BF;">; i</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;"> ) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        P </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Heads</span><span style="color:#ABB2BF;">[i].</span><span style="color:#E06C75;">Next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;">( P ) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            Tmp </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">P</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Next</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">free</span><span style="color:#ABB2BF;">( P );</span></span>
<span class="line"><span style="color:#ABB2BF;">            P </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> Tmp;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">free</span><span style="color:#ABB2BF;">( </span><span style="color:#E5C07B;">H</span><span style="color:#ABB2BF;">-&gt;</span><span style="color:#E06C75;">Heads</span><span style="color:#ABB2BF;"> );</span><span style="color:#7F848E;font-style:italic;"> /* 释放头结点数组 */</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">free</span><span style="color:#ABB2BF;">( H );</span><span style="color:#7F848E;font-style:italic;">        /* 释放散列表结点 */</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br></div></div><h3 id="kmp" tabindex="-1">KMP <a class="header-anchor" href="#kmp" aria-label="Permalink to &quot;KMP&quot;">​</a></h3><p>Knuth-Morris-Pratt 字符串查找算法：可在一个字符串S内查找一个词W的出现位置。一个词在不匹配时本身就包含足够的信息来确定下一个匹配可能的开始位置，此算法利用这一特性以避免重新检查先前配对的字符。 <br> <img src="`+D+`" alt=""></p><div class="language-c line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;stdio.h&gt;</span></span>
<span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;string.h&gt;</span><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">#include</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&lt;stdlib.h&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">typedef</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> Position;</span></span>
<span class="line"><span style="color:#C678DD;">#define</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">NotFound</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">BuildMatch</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">char</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">*</span><span style="color:#E06C75;font-style:italic;">pattern</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">*</span><span style="color:#E06C75;font-style:italic;">match</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    Position i, j;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> m </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">strlen</span><span style="color:#ABB2BF;">(pattern);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">match</span><span style="color:#ABB2BF;">[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">for</span><span style="color:#ABB2BF;"> ( j</span><span style="color:#C678DD;">=</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">; j</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">m; j</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;"> ) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        i </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">match</span><span style="color:#ABB2BF;">[j</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;"> ( (i</span><span style="color:#C678DD;">&gt;=</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">pattern</span><span style="color:#ABB2BF;">[i</span><span style="color:#C678DD;">+</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]</span><span style="color:#C678DD;">!=</span><span style="color:#E06C75;">pattern</span><span style="color:#ABB2BF;">[j]) )</span></span>
<span class="line"><span style="color:#ABB2BF;">            i </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">match</span><span style="color:#ABB2BF;">[i];</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( </span><span style="color:#E06C75;">pattern</span><span style="color:#ABB2BF;">[i</span><span style="color:#C678DD;">+</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]</span><span style="color:#C678DD;">==</span><span style="color:#E06C75;">pattern</span><span style="color:#ABB2BF;">[j] )</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#E06C75;">match</span><span style="color:#ABB2BF;">[j] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> i</span><span style="color:#C678DD;">+</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">match</span><span style="color:#ABB2BF;">[j] </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#ABB2BF;">Position </span><span style="color:#61AFEF;">KMP</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">char</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">*</span><span style="color:#E06C75;font-style:italic;">string</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">char</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">*</span><span style="color:#E06C75;font-style:italic;">pattern</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> n </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">strlen</span><span style="color:#ABB2BF;">(string);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> m </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">strlen</span><span style="color:#ABB2BF;">(pattern);</span></span>
<span class="line"><span style="color:#ABB2BF;">    Position s, p, </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">match;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( n </span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;"> m ) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> NotFound;</span></span>
<span class="line"><span style="color:#ABB2BF;">    match </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> (Position </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;">malloc</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">sizeof</span><span style="color:#ABB2BF;">(Position) </span><span style="color:#C678DD;">*</span><span style="color:#ABB2BF;"> m);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">BuildMatch</span><span style="color:#ABB2BF;">(pattern, match);</span></span>
<span class="line"><span style="color:#ABB2BF;">    s </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> p </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;"> ( s</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">n </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> p</span><span style="color:#C678DD;">&lt;</span><span style="color:#ABB2BF;">m ) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ( </span><span style="color:#E06C75;">string</span><span style="color:#ABB2BF;">[s]</span><span style="color:#C678DD;">==</span><span style="color:#E06C75;">pattern</span><span style="color:#ABB2BF;">[p] ) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            s</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">; p</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (p</span><span style="color:#C678DD;">&gt;</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">) p </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">match</span><span style="color:#ABB2BF;">[p</span><span style="color:#C678DD;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]</span><span style="color:#C678DD;">+</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> s</span><span style="color:#C678DD;">++</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> ( p</span><span style="color:#C678DD;">==</span><span style="color:#ABB2BF;">m )</span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> (s</span><span style="color:#C678DD;">-</span><span style="color:#ABB2BF;">m) </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> NotFound;</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">main</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">char</span><span style="color:#ABB2BF;"> string</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;This is a simple example.&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">char</span><span style="color:#ABB2BF;"> pattern</span><span style="color:#C678DD;">[]</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;simple&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    Position p </span><span style="color:#C678DD;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">KMP</span><span style="color:#ABB2BF;">(string, pattern);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (p</span><span style="color:#C678DD;">==</span><span style="color:#ABB2BF;">NotFound) </span><span style="color:#61AFEF;">printf</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Not Found.</span><span style="color:#56B6C2;">\\n</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">printf</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;</span><span style="color:#D19A66;">%s</span><span style="color:#56B6C2;">\\n</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;">, string</span><span style="color:#C678DD;">+</span><span style="color:#ABB2BF;">p);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;  </span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h2 id="miscellaneous" tabindex="-1">Miscellaneous <a class="header-anchor" href="#miscellaneous" aria-label="Permalink to &quot;Miscellaneous&quot;">​</a></h2><h3 id="位运算" tabindex="-1"><a href="https://github.com/trekhleb/javascript-algorithms/blob/master/src/algorithms/math/bits" target="_blank" rel="noreferrer">位运算</a> <a class="header-anchor" href="#位运算" aria-label="Permalink to &quot;[位运算](https://github.com/trekhleb/javascript-algorithms/blob/master/src/algorithms/math/bits)&quot;">​</a></h3><p><a href="https://graphics.stanford.edu/~seander/bithacks.html" target="_blank" rel="noreferrer">Bit Twiddling Hacks</a></p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">利用或操作 </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> 和空格将英文字符转换为小写</span></span>
<span class="line"><span style="color:#E06C75;">(</span><span style="color:#98C379;">&#39;a&#39;</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&#39; &#39;</span><span style="color:#E06C75;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&#39;a&#39;</span></span>
<span class="line"><span style="color:#E06C75;">(</span><span style="color:#98C379;">&#39;A&#39;</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">|</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&#39; &#39;</span><span style="color:#E06C75;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&#39;a&#39;</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">利用与操作 </span><span style="color:#56B6C2;">&amp;</span><span style="color:#E06C75;"> 和下划线将英文字符转换为大写</span></span>
<span class="line"><span style="color:#E06C75;">(</span><span style="color:#98C379;">&#39;b&#39;</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">&amp;</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&#39;_&#39;</span><span style="color:#E06C75;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&#39;B&#39;</span></span>
<span class="line"><span style="color:#E06C75;">(</span><span style="color:#98C379;">&#39;B&#39;</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">&amp;</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&#39;_&#39;</span><span style="color:#E06C75;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&#39;B&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">利用异或操作 </span><span style="color:#56B6C2;">^</span><span style="color:#E06C75;"> 和空格进行英文字符大小写互换</span></span>
<span class="line"><span style="color:#E06C75;">(</span><span style="color:#98C379;">&#39;d&#39;</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">^</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&#39; &#39;</span><span style="color:#E06C75;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&#39;D&#39;</span></span>
<span class="line"><span style="color:#E06C75;">(</span><span style="color:#98C379;">&#39;D&#39;</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">^</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&#39; &#39;</span><span style="color:#E06C75;">) </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&#39;d&#39;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">判断两个数是否异号</span></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> x </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> y </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> z </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">boolean</span><span style="color:#E06C75;"> f </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> ((x </span><span style="color:#56B6C2;">^</span><span style="color:#E06C75;"> y) </span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">0</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">;</span><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// true</span></span>
<span class="line"><span style="color:#C678DD;">boolean</span><span style="color:#E06C75;"> f </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> ((z </span><span style="color:#56B6C2;">^</span><span style="color:#E06C75;"> y) </span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">0</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">;</span><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">// false</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">不用临时变量交换两个数</span></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> a </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> b </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">a </span><span style="color:#56B6C2;">^=</span><span style="color:#E06C75;"> b</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">b </span><span style="color:#56B6C2;">^=</span><span style="color:#E06C75;"> a</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">a </span><span style="color:#56B6C2;">^=</span><span style="color:#E06C75;"> b</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// a = 2, b = 1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>消除数字 n 的二进制表示中的最后一个 1 <br> <code>n &amp;= (n-1)</code> <br> <img src="`+b+`" alt=""></p><h3 id="lru-least-recently-used" tabindex="-1">LRU（Least Recently Used） <a class="header-anchor" href="#lru-least-recently-used" aria-label="Permalink to &quot;LRU（Least Recently Used）&quot;">​</a></h3><p>根据数据的历史访问记录来进行淘汰数据，其核心思想是“如果数据最近被访问过，那么将来被访问的几率也更高”。</p><p>时间复杂度：put 和 get 都是 <code>O(1)</code> <br> 实现：哈希表 + 双向链表</p><ul><li>双向链表：按照被使用的顺序存储了这些键值对，靠近头部的键值对是最近使用的，而靠近尾部的键值对是最久未使用的。</li><li>哈希表（HashMap）：通过缓存数据的键映射到其在双向链表中的位置。</li></ul><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">LRUCache</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> cap</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#E5C07B;">LinkedHashMap</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Integer</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Integer</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;"> cache </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">LinkedHashMap</span><span style="color:#ABB2BF;">&lt;&gt;</span><span style="color:#E06C75;">()</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> LRUCache</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">capacity</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{ </span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">cap</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> capacity;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">int</span><span style="color:#61AFEF;"> get</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">cache</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">containsKey</span><span style="color:#ABB2BF;">(key)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 将 key 变为最近使用</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">makeRecently</span><span style="color:#ABB2BF;">(key);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">cache</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(key);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> put</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">cache</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">containsKey</span><span style="color:#ABB2BF;">(key)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 修改 key 的值</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">cache</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">put</span><span style="color:#ABB2BF;">(key, val);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 将 key 变为最近使用</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">makeRecently</span><span style="color:#ABB2BF;">(key);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">cache</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">size</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">&gt;=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">cap</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 链表头部就是最久未使用的 key</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">oldestKey</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">cache</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">keySet</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">iterator</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">next</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">cache</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">remove</span><span style="color:#ABB2BF;">(oldestKey);</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 将新的 key 添加链表尾部</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">cache</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">put</span><span style="color:#ABB2BF;">(key, val);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> makeRecently</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">cache</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(key);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 删除 key，重新插入到队尾</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">cache</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">remove</span><span style="color:#ABB2BF;">(key);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">cache</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">put</span><span style="color:#ABB2BF;">(key, val);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="lfu-least-frequently-used" tabindex="-1">LFU（Least Frequently Used） <a class="header-anchor" href="#lfu-least-frequently-used" aria-label="Permalink to &quot;LFU（Least Frequently Used）&quot;">​</a></h3><p>根据数据的历史访问频率来淘汰数据，其核心思想是“如果数据过去被访问多次，那么将来被访问的频率也更高”。</p><p>时间复杂度：put 和 get 都是 <code>O(1)</code></p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">LFUCache</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#7F848E;font-style:italic;">// key 到 val 的映射，我们后文称为 KV 表</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#E5C07B;">HashMap</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Integer</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Integer</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;"> keyToVal</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#7F848E;font-style:italic;">// key 到 freq 的映射，我们后文称为 KF 表</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#E5C07B;">HashMap</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Integer</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Integer</span><span style="color:#ABB2BF;">&gt;</span><span style="color:#E06C75;"> keyToFreq</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#7F848E;font-style:italic;">// freq 到 key 列表的映射，我们后文称为 FK 表</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#E5C07B;">HashMap</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Integer</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">LinkedHashSet</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Integer</span><span style="color:#ABB2BF;">&gt;&gt;</span><span style="color:#E06C75;"> freqToKeys</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#7F848E;font-style:italic;">// 记录最小的频次</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> minFreq</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#7F848E;font-style:italic;">// 记录 LFU 缓存的最大容量</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> cap</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> LFUCache</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">capacity</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        keyToVal </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">HashMap</span><span style="color:#ABB2BF;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#ABB2BF;">        keyToFreq </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">HashMap</span><span style="color:#ABB2BF;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#ABB2BF;">        freqToKeys </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">HashMap</span><span style="color:#ABB2BF;">&lt;&gt;();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">cap</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> capacity;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">minFreq</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">int</span><span style="color:#61AFEF;"> get</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">keyToVal</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">containsKey</span><span style="color:#ABB2BF;">(key)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">-</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 增加 key 对应的 freq</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">increaseFreq</span><span style="color:#ABB2BF;">(key);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">keyToVal</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(key);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> put</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">val</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">cap</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&lt;=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">/* 若 key 已存在，修改对应的 val 即可 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">keyToVal</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">containsKey</span><span style="color:#ABB2BF;">(key)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">keyToVal</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">put</span><span style="color:#ABB2BF;">(key, val);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// key 对应的 freq 加一</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">increaseFreq</span><span style="color:#ABB2BF;">(key);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">/* key 不存在，需要插入 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">/* 容量已满的话需要淘汰一个 freq 最小的 key */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">cap</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&lt;=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">keyToVal</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">size</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">removeMinFreqKey</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">/* 插入 key 和 val，对应的 freq 为 1 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 插入 KV 表</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">keyToVal</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">put</span><span style="color:#ABB2BF;">(key, val);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 插入 KF 表</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">keyToFreq</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">put</span><span style="color:#ABB2BF;">(key, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 插入 FK 表</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">freqToKeys</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">putIfAbsent</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">LinkedHashSet</span><span style="color:#ABB2BF;">&lt;&gt;());</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">freqToKeys</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(key);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 插入新 key 后最小的 freq 肯定是 1</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">minFreq</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> removeMinFreqKey</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// freq 最小的 key 列表</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">LinkedHashSet</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Integer</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#E06C75;">keyList</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">freqToKeys</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">minFreq</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 其中最先被插入的那个 key 就是该被淘汰的 key</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">deletedKey</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">keyList</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">iterator</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">next</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">/* 更新 FK 表 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">keyList</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">remove</span><span style="color:#ABB2BF;">(deletedKey);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">keyList</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isEmpty</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">freqToKeys</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">remove</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">minFreq</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 问：这里需要更新 minFreq 的值吗？</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">/* 更新 KV 表 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">keyToVal</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">remove</span><span style="color:#ABB2BF;">(deletedKey);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">/* 更新 KF 表 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">keyToFreq</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">remove</span><span style="color:#ABB2BF;">(deletedKey);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> increaseFreq</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">key</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">freq</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">keyToFreq</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(key);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">/* 更新 KF 表 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">keyToFreq</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">put</span><span style="color:#ABB2BF;">(key, freq </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">/* 更新 FK 表 */</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 将 key 从 freq 对应的列表中删除</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">freqToKeys</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(freq).</span><span style="color:#61AFEF;">remove</span><span style="color:#ABB2BF;">(key);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 将 key 加入 freq + 1 对应的列表中</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">freqToKeys</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">putIfAbsent</span><span style="color:#ABB2BF;">(freq </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">LinkedHashSet</span><span style="color:#ABB2BF;">&lt;&gt;());</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">freqToKeys</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(freq </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(key);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 如果 freq 对应的列表空了，移除这个 freq</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">freqToKeys</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(freq).</span><span style="color:#61AFEF;">isEmpty</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">freqToKeys</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">remove</span><span style="color:#ABB2BF;">(freq);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 如果这个 freq 恰好是 minFreq，更新 minFreq</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (freq </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">minFreq</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">minFreq</span><span style="color:#ABB2BF;">++;</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br></div></div><h2 id="思想" tabindex="-1">思想 <a class="header-anchor" href="#思想" aria-label="Permalink to &quot;思想&quot;">​</a></h2><p><strong>常用实现方法</strong></p><ul><li>枚举（Enumerate） 基于已有知识来猜测答案的一种问题求解策略。</li><li>枚举的思想是不断地猜测，从可能的集合中一一尝试，然后再判断题目的条件是否成立。</li><li>递归（Recursion）：重复将问题分解为同类的子问题而解决问题的方法。</li><li><strong>迭代</strong>（iteration）：重复<a href="https://wiwiki.kfd.me/wiki/%E5%8F%8D%E9%A6%88" target="_blank" rel="noreferrer">反馈</a>过程的活动，其目的通常是为了接近并到达所需的目标或结果。</li><li>分治（Divide and Conquer）：分而治之，把一个复杂的问题分成两个或更多的相同或相似的子问题，直到最后子问题可以简单的直接求解，原问题的解即子问题的解的合并。</li></ul><p>顺序计算、并行计算和分布式计算：顺序计算就是把形式化算法用编程语言进行单线程序列化后执行。 <br> 确定性算法和非确定性算法 <br> 精确求解和近似求解</p><p><strong>常用设计方式</strong></p><ul><li>完全遍历法和不完全遍历法：在问题的解是有限离散解空间，且可以验证正确性和最优性时，最简单的算法就是把解空间的所有元素完全遍历一遍，逐个检测元素是否是我们要的解。当解空间特别庞大时，可以利用不完全遍历方法——例如各种搜索法和规划法——来减少计算量。</li><li>线性规划（Linear Programming，简称LP）特指目标函数和约束条件皆为线性的最优化问题。</li><li>简并法：把一个问题通过逻辑或数学推理，简化成与之等价或者近似的、相对简单的模型，进而求解的方法。</li></ul><h3 id="动态规划-dynamic-programming" tabindex="-1">动态规划 Dynamic programming <a class="header-anchor" href="#动态规划-dynamic-programming" aria-label="Permalink to &quot;动态规划 Dynamic programming&quot;">​</a></h3><p>问题的最优解如果可以由子问题的最优解推导得到，则可以先求解子问题的最优解，再构造原问题的最优解 <br> 全局最优解，可回退</p><p><strong>状态转移方程</strong></p><p>特性</p><ul><li>最优子结构：问题的最优解所包含的子问题的解也是最优的，子问题间必须互相独立</li><li>无后效性：即子问题的解一旦确定，就不再改变，不受在这之后、包含它的更大的问题的求解决策影响。</li><li>重叠子问题：指在用递归算法自顶向下对问题进行求解时，每次产生的子问题并不总是新问题，有些子问题会被重复计算多次。对每一个子问题只计算一次，然后将其计算结果保存在一个表格中，当再次需要计算已经计算过的子问题时，只是在表格中简单地查看一下结果，从而获得较高的效率。</li></ul><h3 id="贪心算法-greedy-algorithm" tabindex="-1">贪心算法 Greedy algorithm <a class="header-anchor" href="#贪心算法-greedy-algorithm" aria-label="Permalink to &quot;贪心算法 Greedy algorithm&quot;">​</a></h3><p>在对问题求解时，总是做出在当前看来是最好的选择 <br> 局部最优解，不可回退 <br> 基本步骤</p><ol><li>创建数学模型来描述问题。</li><li>把求解的问题分成若干个<strong>子问题</strong>。</li><li>对每一子问题求解，得到子问题的局部最优解。</li><li>把子问题的解局部最优解合成原来解问题的一个解。</li></ol><h3 id="分治法-divide-and-conquer" tabindex="-1">分治法 Divide and conquer <a class="header-anchor" href="#分治法-divide-and-conquer" aria-label="Permalink to &quot;分治法 Divide and conquer&quot;">​</a></h3><p>把问题分解成若干个（相同或相似）子问题，直到最后子问题可以简单的直接求解，原问题的解即子问题的解的合并。 <br> 循环递归</p><ul><li>分解：将原问题分解为若干个规模较小，相对独立，与原问题形式相同的子问题。</li><li>解决：若子问题规模较小且易于解决时，则直接解。否则，递归地解决各子问题。</li><li>合并：将各子问题的解合并为原问题的解。</li></ul><h3 id="回溯法-backtracking" tabindex="-1">回溯法 Backtracking <a class="header-anchor" href="#回溯法-backtracking" aria-label="Permalink to &quot;回溯法 Backtracking&quot;">​</a></h3><p>一种暴力搜索，采用<a href="https://zh.wikipedia.org/wiki/%E8%AF%95%E9%94%99" target="_blank" rel="noreferrer">试错</a>的思想，它尝试分步的去解决一个问题</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">def </span><span style="color:#61AFEF;">backtrack</span><span style="color:#E06C75;">(</span><span style="color:#ABB2BF;">...</span><span style="color:#E06C75;">)</span><span style="color:#C678DD;">:</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">for</span><span style="color:#E06C75;"> select in select_list</span><span style="color:#C678DD;">:</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#C678DD;">do</span><span style="color:#E06C75;"> select</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#61AFEF;">backtrack</span><span style="color:#E06C75;">(</span><span style="color:#ABB2BF;">...</span><span style="color:#E06C75;">)</span></span>
<span class="line"><span style="color:#E06C75;">        undo select</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="指针法" tabindex="-1">指针法 <a class="header-anchor" href="#指针法" aria-label="Permalink to &quot;指针法&quot;">​</a></h3><p>滑动窗口</p><p><strong>左右指针（<strong>对撞指针</strong>）</strong></p><ul><li>二分查找</li><li>反转数组</li><li>回文串判断</li></ul><p><strong>快慢指针</strong></p><ul><li><p>循环列表</p></li><li><p>有序数组/链表中去重</p></li><li><p>单链表的倒数第 k 个节点</p></li></ul><blockquote><p>先让一个指针 p1 指向链表的头节点 head，然后走 k 步（链表长度设为n，则 p1只要再走 n - k 步，就能走到链表末尾的空指针了），再用一个指针 p2 指向链表头节点 head； 让 p1 和 p2 同时向前走，p1 走到链表末尾的空指针时前进了 n - k 步，p2 也从 head 开始前进了 n - k 步，停留在第 n - k + 1 个节点上，即恰好停链表的倒数第 k 个节点上</p></blockquote><ul><li>单链表的中点</li></ul><blockquote><p>让两个指针 slow 和 fast 分别指向链表头结点 head。 每当慢指针 slow 前进一步，快指针 fast 就前进两步，这样，当 fast 走到链表末尾时，slow 就指向了链表中点</p></blockquote><ul><li>判断链表是否包含环</li></ul><blockquote><p>每当慢指针 slow 前进一步，快指针 fast 就前进两步。 如果 fast 最终遇到空指针，说明链表中没有环；如果 fast 最终和 slow 相遇，那肯定是 fast 超过了 slow 一圈，说明链表中含有环。</p></blockquote>`,129),u=[m];function E(d,f,h,g,k,T){return a(),n("div",null,u)}const P=s(C,[["render",E]]);export{N as __pageData,P as default};
