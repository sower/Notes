import{_ as t,c as e,o as s,a}from"./app.c729a732.js";const n="/Notes/assets/1650705004461-112acb8c-2c3d-47aa-93d5-1bb9f326c1a6.67d68432.svg",f=JSON.parse('{"title":"Kubernetes","description":"","frontmatter":{"title":"Kubernetes","created_at":"2022-04-13T13:53:11.000Z","updated_at":"2022-10-23T15:34:18.000Z","word_count":2396},"headers":[{"level":2,"title":"kubernetes","slug":"kubernetes","link":"#kubernetes","children":[]},{"level":2,"title":"Pod","slug":"pod","link":"#pod","children":[]},{"level":2,"title":"工作负载","slug":"工作负载","link":"#工作负载","children":[{"level":3,"title":"Deployments","slug":"deployments","link":"#deployments","children":[]},{"level":3,"title":"ReplicaSet","slug":"replicaset","link":"#replicaset","children":[]},{"level":3,"title":"StatefulSets","slug":"statefulsets","link":"#statefulsets","children":[]},{"level":3,"title":"DaemonSet","slug":"daemonset","link":"#daemonset","children":[]},{"level":3,"title":"Jobs","slug":"jobs","link":"#jobs","children":[]}]},{"level":2,"title":"Service","slug":"service","link":"#service","children":[{"level":3,"title":"Ingress","slug":"ingress","link":"#ingress","children":[]}]},{"level":2,"title":"存储","slug":"存储","link":"#存储","children":[]},{"level":2,"title":"配置","slug":"配置","link":"#配置","children":[{"level":3,"title":"ConfigMap","slug":"configmap","link":"#configmap","children":[]},{"level":3,"title":"Secret","slug":"secret","link":"#secret","children":[]}]},{"level":2,"title":"CLI","slug":"cli","link":"#cli","children":[{"level":3,"title":"kubectl","slug":"kubectl","link":"#kubectl","children":[]},{"level":3,"title":"kubeadm","slug":"kubeadm","link":"#kubeadm","children":[]}]},{"level":2,"title":"组件","slug":"组件","link":"#组件","children":[{"level":3,"title":"kubelet","slug":"kubelet","link":"#kubelet","children":[]},{"level":3,"title":"kube-apiserver","slug":"kube-apiserver","link":"#kube-apiserver","children":[]}]}],"relativePath":"CS/Kubernetes.md"}'),r={name:"CS/Kubernetes.md"},l=a('<h2 id="kubernetes" tabindex="-1"><a href="https://github.com/kubernetes/kubernetes" target="_blank" rel="noreferrer">kubernetes</a> <a class="header-anchor" href="#kubernetes" aria-hidden="true">#</a></h2><p><br> Kubernetes 是一个可移植的、可扩展的开源平台，用于管理容器化的工作负载和服务，可促进声明式配置和自动化。</p><h2 id="pod" tabindex="-1">Pod <a class="header-anchor" href="#pod" aria-hidden="true">#</a></h2><p>一组紧密关联的容器集合，它们共享 IPC 和 Network namespace，是 Kubernetes 调度的基本单位</p><p><img src="'+n+`" alt=""></p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">apiVersion</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">batch/v1</span></span>
<span class="line"><span style="color:#E06C75;">kind</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Job</span></span>
<span class="line"><span style="color:#E06C75;">metadata</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">hello</span></span>
<span class="line"><span style="color:#E06C75;">spec</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;"># 这里是 Pod 模版</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">spec</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">containers</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">hello</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">image</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">busybox</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">command</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&#39;sh&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;-c&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&#39;echo &quot;Hello, Kubernetes!&quot; &amp;&amp; sleep 3600&#39;</span><span style="color:#ABB2BF;">]</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">restartPolicy</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">OnFailure</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;"># 以上为 Pod 模版</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>Node <br> 节点是一个虚拟机或物理机器，每个节点包含运行 Pods 所需的服务</p><h2 id="工作负载" tabindex="-1"><a href="https://kubernetes.io/zh/docs/concepts/workloads/" target="_blank" rel="noreferrer">工作负载</a> <a class="header-anchor" href="#工作负载" aria-hidden="true">#</a></h2><h3 id="deployments" tabindex="-1"><a href="https://kubernetes.io/zh/docs/concepts/workloads/controllers/deployment/" target="_blank" rel="noreferrer">Deployments</a> <a class="header-anchor" href="#deployments" aria-hidden="true">#</a></h3><p>为 <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/" target="_blank" rel="noreferrer">Pod</a> 和 <a href="https://kubernetes.io/zh/docs/concepts/workloads/controllers/replicaset/" target="_blank" rel="noreferrer">ReplicaSet</a> 提供声明式的更新能力</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;"># 创建了一个 ReplicaSet，负责启动三个 nginx</span></span>
<span class="line"><span style="color:#E06C75;">apiVersion</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">apps/v1</span></span>
<span class="line"><span style="color:#E06C75;">kind</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Deployment</span></span>
<span class="line"><span style="color:#E06C75;">metadata</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">nginx-deployment</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">labels</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">nginx</span></span>
<span class="line"><span style="color:#E06C75;">spec</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">replicas</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">3</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">selector</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">matchLabels</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">nginx</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">template</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">metadata</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">labels</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">nginx</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">spec</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">containers</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">nginx</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">image</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">nginx:1.14.2</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">ports</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">        - </span><span style="color:#E06C75;">containerPort</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">80</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="replicaset" tabindex="-1"><a href="https://kubernetes.io/zh/docs/concepts/workloads/controllers/replicaset/" target="_blank" rel="noreferrer">ReplicaSet</a> <a class="header-anchor" href="#replicaset" aria-hidden="true">#</a></h3><p>维护一组在任何时候都处于运行状态的 Pod 副本的稳定集合</p><h3 id="statefulsets" tabindex="-1"><a href="https://kubernetes.io/zh/docs/concepts/workloads/controllers/statefulset/" target="_blank" rel="noreferrer">StatefulSets</a> <a class="header-anchor" href="#statefulsets" aria-hidden="true">#</a></h3><p>管理某 <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/" target="_blank" rel="noreferrer">Pod</a> 集合的部署和扩缩， 并为这些 Pod 提供持久存储和持久标识符</p><h3 id="daemonset" tabindex="-1"><a href="https://kubernetes.io/zh/docs/concepts/workloads/controllers/daemonset/" target="_blank" rel="noreferrer">DaemonSet</a> <a class="header-anchor" href="#daemonset" aria-hidden="true">#</a></h3><h3 id="jobs" tabindex="-1"><a href="https://kubernetes.io/zh/docs/concepts/workloads/controllers/job/" target="_blank" rel="noreferrer">Jobs</a> <a class="header-anchor" href="#jobs" aria-hidden="true">#</a></h3><h2 id="service" tabindex="-1">Service <a class="header-anchor" href="#service" aria-hidden="true">#</a></h2><p>将运行在一组 <a href="https://kubernetes.io/docs/concepts/workloads/pods/pod-overview/" target="_blank" rel="noreferrer">Pods</a> 上的应用程序公开为网络服务的抽象方法</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">apiVersion</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">v1</span></span>
<span class="line"><span style="color:#E06C75;">kind</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Service</span></span>
<span class="line"><span style="color:#E06C75;">metadata</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">my-service</span></span>
<span class="line"><span style="color:#E06C75;">spec</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">selector</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">app</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">MyApp</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">ports</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    - </span><span style="color:#E06C75;">protocol</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">TCP</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">port</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">80</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">targetPort</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">9376</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="ingress" tabindex="-1"><a href="https://kubernetes.io/zh/docs/concepts/services-networking/ingress/" target="_blank" rel="noreferrer">Ingress</a> <a class="header-anchor" href="#ingress" aria-hidden="true">#</a></h3><p>对集群中服务的外部访问进行管理的 API 对象</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">apiVersion</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">networking.k8s.io/v1</span></span>
<span class="line"><span style="color:#E06C75;">kind</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Ingress</span></span>
<span class="line"><span style="color:#E06C75;">metadata</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">minimal-ingress</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">annotations</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">nginx.ingress.kubernetes.io/rewrite-target</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">/</span></span>
<span class="line"><span style="color:#E06C75;">spec</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">rules</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  - </span><span style="color:#E06C75;">http</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">paths</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">/testpath</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">pathType</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Prefix</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">backend</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">service</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">test</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">port</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#E06C75;">number</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">80</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="存储" tabindex="-1"><a href="https://kubernetes.io/zh/docs/concepts/storage/" target="_blank" rel="noreferrer">存储</a> <a class="header-anchor" href="#存储" aria-hidden="true">#</a></h2><p><a href="https://kubernetes.io/zh/docs/concepts/storage/volumes/" target="_blank" rel="noreferrer">卷</a> <br> <a href="https://kubernetes.io/zh/docs/concepts/storage/persistent-volumes/" target="_blank" rel="noreferrer">持久卷</a> <br> <a href="https://kubernetes.io/zh/docs/concepts/storage/projected-volumes/" target="_blank" rel="noreferrer">投射卷</a> <br> <a href="https://kubernetes.io/zh/docs/concepts/storage/ephemeral-volumes/" target="_blank" rel="noreferrer">临时卷</a> <br> <a href="https://kubernetes.io/zh/docs/concepts/storage/storage-classes/" target="_blank" rel="noreferrer">存储类</a></p><h2 id="配置" tabindex="-1"><a href="https://kubernetes.io/zh/docs/concepts/configuration/" target="_blank" rel="noreferrer">配置</a> <a class="header-anchor" href="#配置" aria-hidden="true">#</a></h2><h3 id="configmap" tabindex="-1"><a href="https://kubernetes.io/zh/docs/concepts/configuration/configmap/" target="_blank" rel="noreferrer">ConfigMap</a> <a class="header-anchor" href="#configmap" aria-hidden="true">#</a></h3><p>将环境配置信息和 <a href="https://kubernetes.io/zh/docs/reference/glossary/?all=true#term-image" target="_blank" rel="noreferrer">容器镜像</a> 解耦，便于应用配置的修改</p><div class="language-yaml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">apiVersion</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">v1</span></span>
<span class="line"><span style="color:#E06C75;">kind</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">ConfigMap</span></span>
<span class="line"><span style="color:#E06C75;">metadata</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">game-demo</span></span>
<span class="line"><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;"># 类属性键；每一个键都映射到一个简单的值</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">player_initial_lives</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;3&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">ui_properties_file_name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;user-interface.properties&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#7F848E;font-style:italic;"># 类文件键</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">game.properties</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">|</span></span>
<span class="line"><span style="color:#98C379;">    enemy.types=aliens,monsters</span></span>
<span class="line"><span style="color:#98C379;">    player.maximum-lives=5    </span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">user-interface.properties</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">|</span></span>
<span class="line"><span style="color:#98C379;">    color.good=purple</span></span>
<span class="line"><span style="color:#98C379;">    color.bad=yellow</span></span>
<span class="line"><span style="color:#98C379;">    allow.textmode=true    </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="secret" tabindex="-1"><a href="https://kubernetes.io/zh/docs/concepts/configuration/secret/" target="_blank" rel="noreferrer">Secret</a> <a class="header-anchor" href="#secret" aria-hidden="true">#</a></h3><p>类似于 <a href="https://kubernetes.io/zh/docs/tasks/configure-pod-container/configure-pod-configmap/" target="_blank" rel="noreferrer">ConfigMap</a> 但专门用于保存机密数据</p><h2 id="cli" tabindex="-1">CLI <a class="header-anchor" href="#cli" aria-hidden="true">#</a></h2><h3 id="kubectl" tabindex="-1"><a href="https://kubernetes.io/zh/docs/reference/kubectl/" target="_blank" rel="noreferrer">kubectl</a> <a class="header-anchor" href="#kubectl" aria-hidden="true">#</a></h3><p>用于运行命令和管理 Kubernetes 集群。</p><ul><li><a href="https://kubernetes.io/zh/docs/reference/kubectl/jsonpath/" target="_blank" rel="noreferrer">JSONPath</a> - 通过 kubectl 使用 <a href="https://goessner.net/articles/JsonPath/" target="_blank" rel="noreferrer">JSONPath 表达式</a> 的语法指南。</li></ul><p><code>kubectl [command] [TYPE] [NAME] [flags]</code></p><p>command</p><table><thead><tr><th>操作</th><th>语法</th><th>描述</th></tr></thead><tbody><tr><td>alpha</td><td>kubectl alpha SUBCOMMAND [flags]</td><td>列出与 alpha 特性对应的可用命令，这些特性在 Kubernetes 集群中默认情况下是不启用的。</td></tr><tr><td>annotate</td><td>kubectl annotate (-f FILENAME | TYPE NAME | TYPE/NAME) KEY_1=VAL_1 ... KEY_N=VAL_N [--overwrite] [--all] [--resource-version=version] [flags]</td><td>添加或更新一个或多个资源的注解。</td></tr><tr><td>api-resources</td><td>kubectl api-resources [flags]</td><td>列出可用的 API 资源。</td></tr><tr><td>api-versions</td><td>kubectl api-versions [flags]</td><td>列出可用的 API 版本。</td></tr><tr><td>apply</td><td>kubectl apply -f FILENAME [flags]</td><td>从文件或 stdin 对资源应用配置更改。</td></tr><tr><td>attach</td><td>kubectl attach POD -c CONTAINER [-i] [-t] [flags]</td><td>附加到正在运行的容器，查看输出流或与容器（stdin）交互。</td></tr><tr><td>auth</td><td>kubectl auth [flags] [options]</td><td>检查授权。</td></tr><tr><td>autoscale</td><td>kubectl autoscale (-f FILENAME | TYPE NAME | TYPE/NAME) [--min=MINPODS] --max=MAXPODS [--cpu-percent=CPU] [flags]</td><td>自动伸缩由副本控制器管理的一组 pod。</td></tr><tr><td>certificate</td><td>kubectl certificate SUBCOMMAND [options]</td><td>修改证书资源。</td></tr><tr><td>cluster-info</td><td>kubectl cluster-info [flags]</td><td>显示有关集群中主服务器和服务的端口信息。</td></tr><tr><td>completion</td><td>kubectl completion SHELL [options]</td><td>为指定的 shell （bash 或 zsh）输出 shell 补齐代码。</td></tr><tr><td>config</td><td>kubectl config SUBCOMMAND [flags]</td><td>修改 kubeconfig 文件。有关详细信息，请参阅各个子命令。</td></tr><tr><td>convert</td><td>kubectl convert -f FILENAME [options]</td><td>在不同的 API 版本之间转换配置文件。配置文件可以是 YAML 或 JSON 格式。</td></tr><tr><td>cordon</td><td>kubectl cordon NODE [options]</td><td>将节点标记为不可调度。</td></tr><tr><td>cp</td><td><code>kubectl cp &lt;file-spec-src&gt; &lt;file-spec-dest&gt; [options]</code></td><td>在容器之间复制文件和目录。</td></tr><tr><td>create</td><td>kubectl create -f FILENAME [flags]</td><td>从文件或 stdin 创建一个或多个资源。</td></tr><tr><td>delete</td><td>kubectl delete (-f FILENAME | TYPE [NAME | /NAME | -l label | --all]) [flags]</td><td>从文件、标准输入或指定标签选择器、名称、资源选择器或资源中删除资源。</td></tr><tr><td>describe</td><td>kubectl describe (-f FILENAME | TYPE [NAME_PREFIX | /NAME | -l label]) [flags]</td><td>显示一个或多个资源的详细状态。</td></tr><tr><td>diff</td><td>kubectl diff -f FILENAME [flags]</td><td>将 live 配置和文件或标准输入做对比 (<strong>BETA</strong>)</td></tr><tr><td>drain</td><td>kubectl drain NODE [options]</td><td>腾空节点以准备维护。</td></tr><tr><td>edit</td><td>kubectl edit (-f FILENAME | TYPE NAME | TYPE/NAME) [flags]</td><td>使用默认编辑器编辑和更新服务器上一个或多个资源的定义。</td></tr><tr><td>exec</td><td>kubectl exec POD [-c CONTAINER] [-i] [-t] [flags] [-- COMMAND [args...]]</td><td>对 pod 中的容器执行命令。</td></tr><tr><td>explain</td><td>kubectl explain [--recursive=false] [flags]</td><td>获取多种资源的文档。例如 pod, node, service 等。</td></tr><tr><td>expose</td><td>kubectl expose (-f FILENAME | TYPE NAME | TYPE/NAME) [--port=port] [--protocol=TCP|UDP] [--target-port=number-or-name] [--name=name] [--external-ip=external-ip-of-service] [--type=type] [flags]</td><td>将副本控制器、服务或 pod 作为新的 Kubernetes 服务暴露。</td></tr><tr><td>get</td><td>kubectl get (-f FILENAME | TYPE [NAME | /NAME | -l label]) [--watch] [--sort-by=FIELD] [[-o | --output]=OUTPUT_FORMAT] [flags]</td><td>列出一个或多个资源。</td></tr><tr><td>kustomize</td><td>kubectl kustomize <code>&lt;dir&gt;</code> [flags] [options]</td><td>列出从 kustomization.yaml 文件中的指令生成的一组 API 资源。参数必须是包含文件的目录的路径，或者是 git 存储库 URL，其路径后缀相对于存储库根目录指定了相同的路径。</td></tr><tr><td>label</td><td>kubectl label (-f FILENAME | TYPE NAME | TYPE/NAME) KEY_1=VAL_1 ... KEY_N=VAL_N [--overwrite] [--all] [--resource-version=version] [flags]</td><td>添加或更新一个或多个资源的标签。</td></tr><tr><td>logs</td><td>kubectl logs POD [-c CONTAINER] [--follow] [flags]</td><td>在 pod 中打印容器的日志。</td></tr><tr><td>options</td><td>kubectl options</td><td>全局命令行选项列表，适用于所有命令。</td></tr><tr><td>patch</td><td>kubectl patch (-f FILENAME | TYPE NAME | TYPE/NAME) --patch PATCH [flags]</td><td>使用策略合并 patch 程序更新资源的一个或多个字段。</td></tr><tr><td>plugin</td><td>kubectl plugin [flags] [options]</td><td>提供用于与插件交互的实用程序。</td></tr><tr><td>port-forward</td><td>kubectl port-forward POD [LOCAL_PORT:]REMOTE_PORT [...[LOCAL_PORT_N:]REMOTE_PORT_N] [flags]</td><td>将一个或多个本地端口转发到一个 pod。</td></tr><tr><td>proxy</td><td>kubectl proxy [--port=PORT] [--www=static-dir] [--www-prefix=prefix] [--api-prefix=prefix] [flags]</td><td>运行 Kubernetes API 服务器的代理。</td></tr><tr><td>replace</td><td>kubectl replace -f FILENAME</td><td>从文件或标准输入中替换资源。</td></tr><tr><td>rollout</td><td>kubectl rollout SUBCOMMAND [options]</td><td>管理资源的部署。有效的资源类型包括：Deployments, DaemonSets 和 StatefulSets。</td></tr><tr><td>run</td><td>kubectl run NAME --image=image [--env=&quot;key=value&quot;] [--port=port] [--dry-run=server | client | none] [--overrides=inline-json] [flags]</td><td>在集群上运行指定的镜像。</td></tr><tr><td>scale</td><td>kubectl scale (-f FILENAME | TYPE NAME | TYPE/NAME) --replicas=COUNT [--resource-version=version] [--current-replicas=count] [flags]</td><td>更新指定副本控制器的大小。</td></tr><tr><td>set</td><td>kubectl set SUBCOMMAND [options]</td><td>配置应用程序资源。</td></tr><tr><td>taint</td><td>kubectl taint NODE NAME KEY_1=VAL_1:TAINT_EFFECT_1 ... KEY_N=VAL_N:TAINT_EFFECT_N [options]</td><td>更新一个或多个节点上的污点。</td></tr><tr><td>top</td><td>kubectl top [flags] [options]</td><td>显示资源（CPU/内存/存储）的使用情况。</td></tr><tr><td>uncordon</td><td>kubectl uncordon NODE [options]</td><td>将节点标记为可调度。</td></tr><tr><td>version</td><td>kubectl version [--client] [flags]</td><td>显示运行在客户端和服务器上的 Kubernetes 版本。</td></tr><tr><td>wait</td><td>kubectl wait ([-f FILENAME] | resource.group/resource.name | resource.group [(-l label | --all)]) [--for=delete|--for condition=available] [options]</td><td>实验性：等待一种或多种资源的特定条件。</td></tr></tbody></table><p>type</p><table><thead><tr><th>资源名</th><th>缩写名</th><th>API 分组</th><th>按命名空间</th><th>资源类型</th></tr></thead><tbody><tr><td>bindings</td><td></td><td></td><td>true</td><td>Binding</td></tr><tr><td>componentstatuses</td><td>cs</td><td></td><td>false</td><td>ComponentStatus</td></tr><tr><td>configmaps</td><td>cm</td><td></td><td>true</td><td>ConfigMap</td></tr><tr><td>endpoints</td><td>ep</td><td></td><td>true</td><td>Endpoints</td></tr><tr><td>events</td><td>ev</td><td></td><td>true</td><td>Event</td></tr><tr><td>limitranges</td><td>limits</td><td></td><td>true</td><td>LimitRange</td></tr><tr><td>namespaces</td><td>ns</td><td></td><td>false</td><td>Namespace</td></tr><tr><td>nodes</td><td>no</td><td></td><td>false</td><td>Node</td></tr><tr><td>persistentvolumeclaims</td><td>pvc</td><td></td><td>true</td><td>PersistentVolumeClaim</td></tr><tr><td>persistentvolumes</td><td>pv</td><td></td><td>false</td><td>PersistentVolume</td></tr><tr><td>pods</td><td>po</td><td></td><td>true</td><td>Pod</td></tr><tr><td>podtemplates</td><td></td><td></td><td>true</td><td>PodTemplate</td></tr><tr><td>replicationcontrollers</td><td>rc</td><td></td><td>true</td><td>ReplicationController</td></tr><tr><td>resourcequotas</td><td>quota</td><td></td><td>true</td><td>ResourceQuota</td></tr><tr><td>secrets</td><td></td><td></td><td>true</td><td>Secret</td></tr><tr><td>serviceaccounts</td><td>sa</td><td></td><td>true</td><td>ServiceAccount</td></tr><tr><td>services</td><td>svc</td><td></td><td>true</td><td>Service</td></tr><tr><td>mutatingwebhookconfigurations</td><td></td><td><a href="http://admissionregistration.k8s.io" target="_blank" rel="noreferrer">admissionregistration.k8s.io</a></td><td>false</td><td>MutatingWebhookConfiguration</td></tr><tr><td>validatingwebhookconfigurations</td><td></td><td><a href="http://admissionregistration.k8s.io" target="_blank" rel="noreferrer">admissionregistration.k8s.io</a></td><td>false</td><td>ValidatingWebhookConfiguration</td></tr><tr><td>customresourcedefinitions</td><td>crd,crds</td><td><a href="http://apiextensions.k8s.io" target="_blank" rel="noreferrer">apiextensions.k8s.io</a></td><td>false</td><td>CustomResourceDefinition</td></tr><tr><td>apiservices</td><td></td><td><a href="http://apiregistration.k8s.io" target="_blank" rel="noreferrer">apiregistration.k8s.io</a></td><td>false</td><td>APIService</td></tr><tr><td>controllerrevisions</td><td></td><td>apps</td><td>true</td><td>ControllerRevision</td></tr><tr><td>daemonsets</td><td>ds</td><td>apps</td><td>true</td><td>DaemonSet</td></tr><tr><td>deployments</td><td>deploy</td><td>apps</td><td>true</td><td>Deployment</td></tr><tr><td>replicasets</td><td>rs</td><td>apps</td><td>true</td><td>ReplicaSet</td></tr><tr><td>statefulsets</td><td>sts</td><td>apps</td><td>true</td><td>StatefulSet</td></tr><tr><td>tokenreviews</td><td></td><td><a href="http://authentication.k8s.io" target="_blank" rel="noreferrer">authentication.k8s.io</a></td><td>false</td><td>TokenReview</td></tr><tr><td>localsubjectaccessreviews</td><td></td><td><a href="http://authorization.k8s.io" target="_blank" rel="noreferrer">authorization.k8s.io</a></td><td>true</td><td>LocalSubjectAccessReview</td></tr><tr><td>selfsubjectaccessreviews</td><td></td><td><a href="http://authorization.k8s.io" target="_blank" rel="noreferrer">authorization.k8s.io</a></td><td>false</td><td>SelfSubjectAccessReview</td></tr><tr><td>selfsubjectrulesreviews</td><td></td><td><a href="http://authorization.k8s.io" target="_blank" rel="noreferrer">authorization.k8s.io</a></td><td>false</td><td>SelfSubjectRulesReview</td></tr><tr><td>subjectaccessreviews</td><td></td><td><a href="http://authorization.k8s.io" target="_blank" rel="noreferrer">authorization.k8s.io</a></td><td>false</td><td>SubjectAccessReview</td></tr><tr><td>horizontalpodautoscalers</td><td>hpa</td><td>autoscaling</td><td>true</td><td>HorizontalPodAutoscaler</td></tr><tr><td>cronjobs</td><td>cj</td><td>batch</td><td>true</td><td>CronJob</td></tr><tr><td>jobs</td><td></td><td>batch</td><td>true</td><td>Job</td></tr><tr><td>certificatesigningrequests</td><td>csr</td><td><a href="http://certificates.k8s.io" target="_blank" rel="noreferrer">certificates.k8s.io</a></td><td>false</td><td>CertificateSigningRequest</td></tr><tr><td>leases</td><td></td><td><a href="http://coordination.k8s.io" target="_blank" rel="noreferrer">coordination.k8s.io</a></td><td>true</td><td>Lease</td></tr><tr><td>endpointslices</td><td></td><td><a href="http://discovery.k8s.io" target="_blank" rel="noreferrer">discovery.k8s.io</a></td><td>true</td><td>EndpointSlice</td></tr><tr><td>events</td><td>ev</td><td><a href="http://events.k8s.io" target="_blank" rel="noreferrer">events.k8s.io</a></td><td>true</td><td>Event</td></tr><tr><td>ingresses</td><td>ing</td><td>extensions</td><td>true</td><td>Ingress</td></tr><tr><td>flowschemas</td><td></td><td><a href="http://flowcontrol.apiserver.k8s.io" target="_blank" rel="noreferrer">flowcontrol.apiserver.k8s.io</a></td><td>false</td><td>FlowSchema</td></tr><tr><td>prioritylevelconfigurations</td><td></td><td><a href="http://flowcontrol.apiserver.k8s.io" target="_blank" rel="noreferrer">flowcontrol.apiserver.k8s.io</a></td><td>false</td><td>PriorityLevelConfiguration</td></tr><tr><td>ingressclasses</td><td></td><td><a href="http://networking.k8s.io" target="_blank" rel="noreferrer">networking.k8s.io</a></td><td>false</td><td>IngressClass</td></tr><tr><td>ingresses</td><td>ing</td><td><a href="http://networking.k8s.io" target="_blank" rel="noreferrer">networking.k8s.io</a></td><td>true</td><td>Ingress</td></tr><tr><td>networkpolicies</td><td>netpol</td><td><a href="http://networking.k8s.io" target="_blank" rel="noreferrer">networking.k8s.io</a></td><td>true</td><td>NetworkPolicy</td></tr><tr><td>runtimeclasses</td><td></td><td><a href="http://node.k8s.io" target="_blank" rel="noreferrer">node.k8s.io</a></td><td>false</td><td>RuntimeClass</td></tr><tr><td>poddisruptionbudgets</td><td>pdb</td><td>policy</td><td>true</td><td>PodDisruptionBudget</td></tr><tr><td>podsecuritypolicies</td><td>psp</td><td>policy</td><td>false</td><td>PodSecurityPolicy</td></tr><tr><td>clusterrolebindings</td><td></td><td><a href="http://rbac.authorization.k8s.io" target="_blank" rel="noreferrer">rbac.authorization.k8s.io</a></td><td>false</td><td>ClusterRoleBinding</td></tr><tr><td>clusterroles</td><td></td><td><a href="http://rbac.authorization.k8s.io" target="_blank" rel="noreferrer">rbac.authorization.k8s.io</a></td><td>false</td><td>ClusterRole</td></tr><tr><td>rolebindings</td><td></td><td><a href="http://rbac.authorization.k8s.io" target="_blank" rel="noreferrer">rbac.authorization.k8s.io</a></td><td>true</td><td>RoleBinding</td></tr><tr><td>roles</td><td></td><td><a href="http://rbac.authorization.k8s.io" target="_blank" rel="noreferrer">rbac.authorization.k8s.io</a></td><td>true</td><td>Role</td></tr><tr><td>priorityclasses</td><td>pc</td><td><a href="http://scheduling.k8s.io" target="_blank" rel="noreferrer">scheduling.k8s.io</a></td><td>false</td><td>PriorityClass</td></tr><tr><td>csidrivers</td><td></td><td><a href="http://storage.k8s.io" target="_blank" rel="noreferrer">storage.k8s.io</a></td><td>false</td><td>CSIDriver</td></tr><tr><td>csinodes</td><td></td><td><a href="http://storage.k8s.io" target="_blank" rel="noreferrer">storage.k8s.io</a></td><td>false</td><td>CSINode</td></tr><tr><td>storageclasses</td><td>sc</td><td><a href="http://storage.k8s.io" target="_blank" rel="noreferrer">storage.k8s.io</a></td><td>false</td><td>StorageClass</td></tr><tr><td>volumeattachments</td><td></td><td><a href="http://storage.k8s.io" target="_blank" rel="noreferrer">storage.k8s.io</a></td><td>false</td><td>VolumeAttachment</td></tr></tbody></table><h3 id="kubeadm" tabindex="-1"><a href="https://kubernetes.io/zh/docs/reference/setup-tools/kubeadm/" target="_blank" rel="noreferrer">kubeadm</a> <a class="header-anchor" href="#kubeadm" aria-hidden="true">#</a></h3><p>配置安全的 Kubernetes 集群</p><h2 id="组件" tabindex="-1">组件 <a class="header-anchor" href="#组件" aria-hidden="true">#</a></h2><h3 id="kubelet" tabindex="-1"><a href="https://kubernetes.io/zh/docs/reference/command-line-tools-reference/kubelet/" target="_blank" rel="noreferrer">kubelet</a> <a class="header-anchor" href="#kubelet" aria-hidden="true">#</a></h3><p>在每个节点上运行的主代理。kubelet 接收一组 PodSpecs 并确保其所描述的容器健康地运行。</p><h3 id="kube-apiserver" tabindex="-1"><a href="https://kubernetes.io/zh/docs/reference/command-line-tools-reference/kube-apiserver/" target="_blank" rel="noreferrer">kube-apiserver</a> <a class="header-anchor" href="#kube-apiserver" aria-hidden="true">#</a></h3><p>用于验证和配置 API 对象（如 Pod、服务或副本控制器等）的数据。</p><ul><li><a href="https://kubernetes.io/zh/docs/reference/command-line-tools-reference/kube-controller-manager/" target="_blank" rel="noreferrer">kube-controller-manager</a></li></ul><p>一个守护进程，其中包含 Kubernetes 所附带的核心控制回路。</p><ul><li><p><a href="https://kubernetes.io/zh/docs/reference/command-line-tools-reference/kube-proxy/" target="_blank" rel="noreferrer">kube-proxy</a> - 可进行简单的 TCP/UDP 流转发或针对一组后端执行轮流 TCP/UDP 转发。</p></li><li><p><a href="https://kubernetes.io/zh/docs/reference/command-line-tools-reference/kube-scheduler/" target="_blank" rel="noreferrer">kube-scheduler</a> - 一个调度程序，用于管理可用性、性能和容量。</p><ul><li><a href="https://kubernetes.io/zh/docs/reference/scheduling/policies" target="_blank" rel="noreferrer">调度策略</a></li><li><a href="https://kubernetes.io/zh/docs/reference/scheduling/config#profiles" target="_blank" rel="noreferrer">调度配置</a></li></ul></li></ul><p><a href="https://kubernetes.io/zh/docs/reference/kubectl/" target="_blank" rel="noreferrer"><br></a></p><p>云原生（Cloud Native） <br> 云原生技术有利于各组织在公有云、私有云和混合云等新型动态环境中，构建和运行可弹性扩展的应用。云原生的代表技术包括容器、服务网格、微服务、不可变基础设施和声明式 API。</p><p>设计理念</p><ul><li>面向分布式设计（Distribution）：容器、微服务、API 驱动的开发；</li><li>面向配置设计（Configuration）：一个镜像，多个环境配置；</li><li>面向韧性设计（Resistancy）：故障容忍和自愈；</li><li>面向弹性设计（Elasticity）：弹性扩展和对环境变化（负载）做出响应；</li><li>面向交付设计（Delivery）：自动拉起，缩短交付时间；</li><li>面向性能设计（Performance）：响应式，并发和资源高效利用；</li><li>面向自动化设计（Automation）：自动化的 DevOps；</li><li>面向诊断性设计（Diagnosability）：集群级别的日志、metric 和追踪；</li><li>面向安全性设计（Security）：安全端点、API Gateway、端到端加密；</li></ul><p>Resource</p><ul><li><p><a href="https://github.com/ramitsurana/awesome-kubernetes" target="_blank" rel="noreferrer">awesome-kubernetes</a></p></li><li><p><a href="https://github.com/eip-work/kuboard-press" target="_blank" rel="noreferrer">kuboard-press</a></p></li><li><p><a href="https://github.com/bregman-arie/devops-exercises" target="_blank" rel="noreferrer">devops-exercises</a></p></li><li><p><a href="https://github.com/rootsongjc/kubernetes-handbook" target="_blank" rel="noreferrer">kubernetes-handbook</a></p></li><li><p><a href="https://github.com/GoogleCloudPlatform/microservices-demo" target="_blank" rel="noreferrer">microservices-demo</a></p><br></li></ul>`,56),o=[l];function p(d,c,i,u,b,h){return s(),e("div",null,o)}const y=t(r,[["render",p]]);export{f as __pageData,y as default};
