<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL | Ylem's Notes</title>
    <meta name="description" content="My vitepress style site">
    <link rel="stylesheet" href="/Notes/assets/style.d4fecc28.css">
    <link rel="modulepreload" href="/Notes/assets/app.81a94463.js">
    <link rel="modulepreload" href="/Notes/assets/CS_MySQL.md.4398eaf7.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-c6a644e1><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-c6a644e1 data-v-a50780ff><div class="VPNavBar has-sidebar" data-v-a50780ff data-v-6f1d18b5><div class="container" data-v-6f1d18b5><div class="VPNavBarTitle has-sidebar" data-v-6f1d18b5 data-v-d5925166><a class="title" href="/Notes/" data-v-d5925166><!--[--><!--]--><!----><!--[-->Ylem&#39;s Notes<!--]--><!--[--><!--]--></a></div><div class="content" data-v-6f1d18b5><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6f1d18b5 data-v-f83db6ba><span id="main-nav-aria-label" class="visually-hidden" data-v-f83db6ba>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Notes/Contents.html" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->Contents<!--]--><!----></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="https://ravigation.netlify.app" target="_blank" rel="noreferrer" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->Ravi<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f83db6ba data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6ffb57d3><span class="text" data-v-6ffb57d3><!----> 1.0.0 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-6ffb57d3><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><div class="items" data-v-1c5d0cfc><!--[--><!--[--><div class="VPMenuLink" data-v-1c5d0cfc data-v-e8e0fb1d><a class="VPLink link" href="https://github.com/sower/Notes/commits" target="_blank" rel="noreferrer" data-v-e8e0fb1d data-v-3c355974><!--[-->Changelog<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-3c355974><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6f1d18b5 data-v-a3e7452b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-a3e7452b data-v-31fdf26f data-v-eba7420e><span class="check" data-v-eba7420e><span class="icon" data-v-eba7420e><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-31fdf26f><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-31fdf26f><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6f1d18b5 data-v-738bef5a data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/sower/Notes" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6f1d18b5 data-v-e4361c82 data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6ffb57d3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6ffb57d3><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><!----><!--[--><!--[--><!----><div class="group" data-v-e4361c82><div class="item appearance" data-v-e4361c82><p class="label" data-v-e4361c82>Appearance</p><div class="appearance-action" data-v-e4361c82><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-e4361c82 data-v-31fdf26f data-v-eba7420e><span class="check" data-v-eba7420e><span class="icon" data-v-eba7420e><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-31fdf26f><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-31fdf26f><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-e4361c82><div class="item social-links" data-v-e4361c82><div class="VPSocialLinks social-links-list" data-v-e4361c82 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/sower/Notes" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6f1d18b5 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-c6a644e1 data-v-b6162a8b><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-b6162a8b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-b6162a8b><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-b6162a8b>Menu</span></button><a class="top-link" href="#" data-v-b6162a8b> Return to top </a></div><aside class="VPSidebar" data-v-c6a644e1 data-v-0f9e7c6e><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-0f9e7c6e><span class="visually-hidden" id="sidebar-aria-label" data-v-0f9e7c6e> Sidebar Navigation </span><!--[--><div class="group" data-v-0f9e7c6e><section class="VPSidebarGroup collapsible" data-v-0f9e7c6e data-v-6e45c352><div class="title" role="button" data-v-6e45c352><h2 class="title-text" data-v-6e45c352>CS</h2><div class="action" data-v-6e45c352><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-6e45c352><!--[--><!--[--><a class="VPLink link link" href="/Notes/CS/HTML.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>HTML</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/CSS.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>CSS</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/JavaScript.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>JavaScript</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Web%20API.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Web API</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Node.js.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Node.js</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Vue.js.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Vue.js</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Vue%20Ecosystem.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Vue Ecosystem</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2%E6%A0%BC%E5%BC%8F.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>数据交换格式</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/%E7%BD%91%E7%BB%9C%EF%BC%88Network%EF%BC%89.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>网络（Network）</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Python.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Python</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Pythonic.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Pythonic</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Python%20Lib.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Python Lib</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/PyPI.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>PyPI</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Py%20Web.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Py Web</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Java.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Java</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Java%20Advance.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Java Advance</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Java%20API.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Java API</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Spring.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Spring</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Java%20Framework.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Java Framework</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Design%20Patterns.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Design Patterns</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Operating%20System.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Operating System</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Windows.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Windows</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Microsoft.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Microsoft</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/PowerShell.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>PowerShell</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Batch.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Batch</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/%E5%96%84%E5%81%87%E4%BA%8E%E9%94%AE.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>善假于键</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/%E6%B3%A8%E5%86%8C%E8%A1%A8%EF%BC%88Registry%EF%BC%89.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>注册表（Registry）</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Linux.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Linux</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Command.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Command</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Bash.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Bash</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Docker.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Docker</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Kubernetes.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Kubernetes</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Git.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Git</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Github.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Github</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Android.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Android</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Android%20SDK.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Android SDK</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/SSH.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>SSH</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/C.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>C</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/C++.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>C++</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Data%20Structure%20&amp;%20Algorithm.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Data Structure & Algorithm</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Data%20structure.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Data structure</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/Algorithm.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Algorithm</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/SQL.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>SQL</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link active" href="/Notes/CS/MySQL.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>MySQL</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/CS/NoSQL.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>NoSQL</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-0f9e7c6e><section class="VPSidebarGroup collapsible" data-v-0f9e7c6e data-v-6e45c352><div class="title" role="button" data-v-6e45c352><h2 class="title-text" data-v-6e45c352>Software</h2><div class="action" data-v-6e45c352><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-6e45c352><!--[--><!--[--><a class="VPLink link link" href="/Notes/Software/Application.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Application</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/Software/API%20Collections.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>API Collections</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/Software/Chrome.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Chrome</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/Software/Micro%20Office.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Micro Office</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/Software/FFmpeg.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>FFmpeg</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><div class="group" data-v-0f9e7c6e><section class="VPSidebarGroup collapsible" data-v-0f9e7c6e data-v-6e45c352><div class="title" role="button" data-v-6e45c352><h2 class="title-text" data-v-6e45c352>Universal</h2><div class="action" data-v-6e45c352><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-6e45c352><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-6e45c352><!--[--><!--[--><a class="VPLink link link" href="/Notes/Universal/UML.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>UML</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/Universal/Markdown.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Markdown</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/Universal/Regular%20expression.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Regular expression</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/Universal/%E7%BC%96%E7%A0%81%20&amp;%20%E5%8A%A0%E5%AF%86.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>编码 & 加密</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/Universal/Terminology.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Terminology</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/Universal/QA.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>QA</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/Universal/Software.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Software</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/Universal/Programming%20paradigm.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Programming paradigm</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/Notes/Universal/Security.html" style="padding-left:0px;" data-v-36b976d1 data-v-3c355974><!--[--><span class="link-text" data-v-36b976d1>Security</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-c6a644e1 data-v-d981fe29><div class="VPDoc has-sidebar has-aside" data-v-d981fe29 data-v-cfb513e0><div class="container" data-v-cfb513e0><div class="aside" data-v-cfb513e0><div class="aside-curtain" data-v-cfb513e0></div><div class="aside-container" data-v-cfb513e0><div class="aside-content" data-v-cfb513e0><div class="VPDocAside" data-v-cfb513e0 data-v-afc4c1a1><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-afc4c1a1 data-v-2865c0b0><div class="content" data-v-2865c0b0><div class="outline-marker" data-v-2865c0b0></div><div class="outline-title" data-v-2865c0b0>TOC</div><nav aria-labelledby="doc-outline-aria-label" data-v-2865c0b0><span class="visually-hidden" id="doc-outline-aria-label" data-v-2865c0b0> Table of Contents for current page </span><ul class="root" data-v-2865c0b0 data-v-1188541a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-afc4c1a1></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-cfb513e0><div class="content-container" data-v-cfb513e0><!--[--><!--]--><main class="main" data-v-cfb513e0><div style="position:relative;" class="vp-doc _Notes_CS_MySQL" data-v-cfb513e0><div><h1 id="mysql" tabindex="-1">MySQL <a class="header-anchor" href="#mysql" aria-hidden="true">#</a></h1><h2 id="——mysql——" tabindex="-1">——MySQL—— <a class="header-anchor" href="#——mysql——" aria-hidden="true">#</a></h2><p><a href="https://dev.mysql.com/" target="_blank" rel="noreferrer">MySQL</a>是一个关系型数据库管理系统，由瑞典MySQL AB 公司开发，属于 Oracle 旗下产品。</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#676E95;">--安装数据库</span></span>
<span class="line"><span style="color:#A6ACCD;">mysqld </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">install</span></span>
<span class="line"><span style="color:#676E95;">--删除数据库</span></span>
<span class="line"><span style="color:#A6ACCD;">mysqld </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">remove</span></span>
<span class="line"><span style="color:#676E95;">--初始化数据库</span></span>
<span class="line"><span style="color:#A6ACCD;">mysqld </span><span style="color:#676E95;">--initialize-insecure [--user=mysq]    --默认用户名root，密码为空</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">/* windows启动或关闭MySQL服务器 */</span></span>
<span class="line"><span style="color:#A6ACCD;">(net | sc) </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F78C6C;">start</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">stop</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> mysql  </span><span style="color:#676E95;">-- 以管理员身份</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">/* 连接服务器 */</span></span>
<span class="line"><span style="color:#A6ACCD;">mysql [-h hostname | hostlP -p port] </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">u username </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p [DatabaseName -e &quot;SQL语句&quot;]</span></span>
<span class="line"><span style="color:#676E95;">/* 断开服务器 */</span></span>
<span class="line"><span style="color:#A6ACCD;">EXIT | QUIT</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>配置文件my.ini 在 MySql 安装的根目录下，也可能在隐藏文件夹“ProgramData”</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">[client]</span></span>
<span class="line"><span style="color:#A6ACCD;"># 设置mysql客户端默认字符集</span></span>
<span class="line"><span style="color:#C792EA;">default</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">character</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> utf8</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">[mysqld]</span></span>
<span class="line"><span style="color:#A6ACCD;"># 设置3306端口</span></span>
<span class="line"><span style="color:#A6ACCD;">port </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3306</span></span>
<span class="line"><span style="color:#A6ACCD;"># 设置mysql的安装目录</span></span>
<span class="line"><span style="color:#A6ACCD;">basedir</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">D:\\mysql</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">19</span></span>
<span class="line"><span style="color:#A6ACCD;"># 设置 mysql数据库的数据的存放目录，MySQL </span><span style="color:#F78C6C;">8</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> 不需要以下配置，系统自己生成即可，否则有可能报错</span></span>
<span class="line"><span style="color:#A6ACCD;"># datadir</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">E:\\</span><span style="color:#F78C6C;">data</span></span>
<span class="line"><span style="color:#A6ACCD;"># 允许最大连接数</span></span>
<span class="line"><span style="color:#A6ACCD;">max_connections </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span></span>
<span class="line"><span style="color:#A6ACCD;"># 服务端使用的字符集默认为8bit编码的latin1字符集</span></span>
<span class="line"><span style="color:#F78C6C;">character</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">set</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">server</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> utf8</span></span>
<span class="line"><span style="color:#A6ACCD;"># 创建新表时将使用的默认存储引擎</span></span>
<span class="line"><span style="color:#C792EA;">default</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">storage</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">engine</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">INNODB</span></span>
<span class="line"><span style="color:#A6ACCD;">#导出数据地址</span></span>
<span class="line"><span style="color:#A6ACCD;">secure_file_priv </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>MySQL Client的可执行程序是mysql，MySQL Server的可执行程序是mysqld。 <br> ┌──────────────┐ SQL ┌──────────────┐ <br> │ MySQL Client │───&gt; │ MySQL Server │ <br> └──────────────┘ TCP └──────────────┘ <br> 在MySQL Client中输入的SQL语句通过TCP连接发送到MySQL Server。 <br> 默认端口号是3306，即如果发送到本机MySQL Server，地址就是127.0.0.1:3306。</p><p>系统库：information_schema、mysql、performance_schema和sys是 <br> <a href="https://dev.mysql.com/doc/" target="_blank" rel="noreferrer"><br></a></p><h2 id="基本操作" tabindex="-1">基本操作 <a class="header-anchor" href="#基本操作" aria-hidden="true">#</a></h2><p>HELP 查询内容（可包含通配符“％”和“_”，效果与 LIKE 相同）</p><p><strong>增删改查——CRUD：Create、Retrieve、Update、Delete</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#676E95;">-- 显示当前时间、用户名、数据库版本、数据库</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">now</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">, user</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">version</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">DATABASE</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">/* 数据库 */</span></span>
<span class="line"><span style="color:#A6ACCD;">SHOW DATABASES   </span><span style="color:#676E95;">--列出所有数据库</span></span>
<span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATABASE</span><span style="color:#A6ACCD;"> [IF NOT EXISTS] </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F78C6C;">database_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> [DEFAULT (CHARSET) | (CHARACTER SET) utf8mb4]    </span><span style="color:#676E95;">--创建数据库</span></span>
<span class="line"><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATABASE</span><span style="color:#A6ACCD;">  [IF EXISTS]  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F78C6C;">database_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--删除数据库</span></span>
<span class="line"><span style="color:#F78C6C;">USE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F78C6C;">database_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--切换当前数据库</span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATABASE</span><span style="color:#A6ACCD;"> [数据库名] { [ DEFAULT ] </span><span style="color:#F78C6C;">CHARACTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">字符集名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> |[ DEFAULT ] </span><span style="color:#C792EA;">COLLATE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">校对规则名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">}    </span><span style="color:#676E95;">--修改数据库</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">/* 数据表 */</span></span>
<span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> [TEMPORARY] </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">-- 临时表只在当前连接可见，关闭连接时，Mysql会自动删除</span></span>
<span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">table_name (column_name column_type)</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--创建表</span></span>
<span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">table_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">LIKE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">exist_table_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">--创建相同模式表</span></span>
<span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">table_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> [AS] </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">exist_table_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;">-- 创建相同表结构和数据</span></span>
<span class="line"><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> [IF EXISTS] 表名1 [ ,表名2, 表名3 ...]    </span><span style="color:#676E95;">--删除表</span></span>
<span class="line"><span style="color:#676E95;">-- 查看所有表</span></span>
<span class="line"><span style="color:#A6ACCD;">    SHOW TABLES [FROM 表名]</span></span>
<span class="line"><span style="color:#A6ACCD;">    SHOW TABLES [LIKE &#39;pattern&#39;]</span></span>
<span class="line"><span style="color:#676E95;">-- 查看表结构</span></span>
<span class="line"><span style="color:#A6ACCD;">    SHOW </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> 表名 （信息更详细）</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">DESC</span><span style="color:#A6ACCD;"> 表名 </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> DESCRIBE 表名 </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> EXPLAIN 表名 </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> SHOW COLUMNS </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> 表名 [LIKE &#39;PATTERN&#39;]</span></span>
<span class="line"><span style="color:#A6ACCD;">    SHOW </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">STATUS</span><span style="color:#A6ACCD;"> [FROM db_name] [LIKE &#39;pattern&#39;]</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">/* 系统 */</span></span>
<span class="line"><span style="color:#A6ACCD;">SHOW PROCESSLIST </span><span style="color:#676E95;">-- 显示哪些线程正在运行</span></span>
<span class="line"><span style="color:#A6ACCD;">SHOW </span><span style="color:#F78C6C;">STATUS</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">-- 服务器状态</span></span>
<span class="line"><span style="color:#A6ACCD;">SHOW VARIABLES  </span><span style="color:#676E95;">-- 服务器配置变量</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> [=AS] alias   </span><span style="color:#676E95;">-- 为表或字段设置别名</span></span>
<span class="line"><span style="color:#A6ACCD;">DELIMITER ：修改结束命令字符</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> @@prifileing</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;  </span><span style="color:#676E95;">--打开分析工具</span></span>
<span class="line"><span style="color:#A6ACCD;">show profiles </span><span style="color:#676E95;">--分析性能</span></span>
<span class="line"><span style="color:#A6ACCD;">show </span><span style="color:#F78C6C;">profile</span><span style="color:#A6ACCD;"> for query id;  </span><span style="color:#676E95;">--查看详情</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h3 id="creat" tabindex="-1">CREAT <a class="header-anchor" href="#creat" aria-hidden="true">#</a></h3><p>CREATE [TEMPORARY] TABLE [IF NOT EXISTS] [库名.]表名 ( 表的结构定义 )[表选项][分区选项];</p><p>字段名 数据类型 [NOT NULL | NULL] [DEFAULT default_value] [AUTO_INCREMENT] [UNIQUE | PRIMARY KEY] [COMMENT &#39;string&#39;]</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> section</span></span>
<span class="line"><span style="color:#A6ACCD;">	(course_id		</span><span style="color:#F78C6C;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NOT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> AUTO_INCREMENT, </span></span>
<span class="line"><span style="color:#A6ACCD;">	 semester		</span><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">)   </span><span style="color:#C792EA;">check</span><span style="color:#A6ACCD;"> (semester </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Fall</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Winter</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Spring</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Summer</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)), </span></span>
<span class="line"><span style="color:#A6ACCD;">	 building		</span><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">15</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">	 room_number		</span><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">	 time_slot_id		</span><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">	 </span><span style="color:#F78C6C;">primary</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">key</span><span style="color:#A6ACCD;"> (course_id, semester),</span></span>
<span class="line"><span style="color:#A6ACCD;">	 </span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;"> (course_id) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> course(course_id)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">on delete cascade</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	 </span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;"> (building, room_number) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> classroom(building, room_number)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">on delete</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">null</span></span>
<span class="line"><span style="color:#A6ACCD;">	)[ENGINE=InnoDB DEFAULT CHARSET=utf8];</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>若不想字段为 NULL 可以设置字段的属性为 NOT NULL，在操作数据库时如果输入该字段的数据为NULL，就会报错。</li><li>AUTO_INCREMENT：定义列为自增的属性，一般用于主键，数值会自动加1。</li><li>PRIMARY KEY：用于定义列为主键。 您可以使用多列来定义主键，列间以逗号分隔。</li><li>ENGINE 设置存储引擎，CHARSET 设置编码。</li><li>MySQL中 utf8mb4 字符集是真正的UTF-8编码，而 utf8 字符集是非标准的</li></ul><h3 id="select" tabindex="-1">SELECT <a class="header-anchor" href="#select" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> {[=ALL | DISTINCT] </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">column_name [,···, function(column_name)]</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">[   FROM &lt;table_name[,···]</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    [WHERE Clause]</span></span>
<span class="line"><span style="color:#A6ACCD;">    [</span><span style="color:#F78C6C;">GROUP BY</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">column_name</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    [HAVING &lt;P(Function(X))&gt;]</span></span>
<span class="line"><span style="color:#A6ACCD;">    [ORDER BY field1 [=ASC | DESC] [,field2...] [=ASC | DESC]]</span></span>
<span class="line"><span style="color:#A6ACCD;">    [LIMIT &lt;M&gt; [OFFSET &lt;N&gt;] ]    ]   </span><span style="color:#676E95;">--分页查询</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>表之间使用逗号(,)分割，并使用WHERE语句来设定查询条件，可嵌套</li><li>你可以使用星号（*）来代替其他字段，SELECT语句会返回表的所有字段数据</li><li>使用 ASC 或 DESC 关键字来设置查询结果是按升序或降序排列。 默认升序排列。</li><li>LIMIT设定为pageSize，OFFSET = pageSize * (pageIndex - 1)，N越大，效率越低。</li></ul><p>having &amp; where</p><ul><li>where 在开始时执行检测数据，对原数据进行过滤； having 对筛选出的结果再次进行过滤。</li><li>having 字段必须是查询出来的，where 字段必须是数据表存在的。</li><li>where 不可以使用字段的别名，having 可以。因为执行WHERE代码时，可能尚未确定列值。</li><li>where 不可以使用聚合函数。一般需用聚合函数才会用 having</li><li>SQL标准要求HAVING必须引用GROUP BY子句中的列或用于合计函数中的列。</li></ul><p>case when ... then ... else ... end</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">case</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> math</span><span style="color:#89DDFF;">&gt;</span><span style="color:#F78C6C;">90</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">A</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">when</span><span style="color:#A6ACCD;"> math</span><span style="color:#89DDFF;">&lt;=</span><span style="color:#F78C6C;">90</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> math</span><span style="color:#89DDFF;">&gt;</span><span style="color:#F78C6C;">60</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">then</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">B</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#F78C6C;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">C</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">end</span><span style="color:#A6ACCD;">) degree</span></span>
<span class="line"><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> score;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="insert-into" tabindex="-1">INSERT INTO <a class="header-anchor" href="#insert-into" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">INSERT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INTO</span><span style="color:#A6ACCD;"> table_name ( field1, field2,...fieldN )</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">VALUES</span><span style="color:#A6ACCD;">  ( value1, value2,...valueN ) [,···];</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#676E95;">-- REPLACE 等同于 INSERT </span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">INSERT</span><span style="color:#A6ACCD;"> [INTO] 表名 </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> 字段名</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">值[, 字段名=值, ...]    </span></span>
<span class="line"><span style="color:#F78C6C;">INSERT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INTO</span><span style="color:#A6ACCD;"> table_name [(filed)] SELECT_statement;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="delete" tabindex="-1">DELETE <a class="header-anchor" href="#delete" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">DELETE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> table_name [WHERE Clause] [ORDER BY ...] [LIMIT row_count]</span></span>
<span class="line"><span style="color:#F78C6C;">DELETE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">表1，表2 ...</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">using</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">表1 </span><span style="color:#F78C6C;">join</span><span style="color:#A6ACCD;"> 表2  </span><span style="color:#F78C6C;">on</span><span style="color:#A6ACCD;"> ...</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">P</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">;    </span><span style="color:#676E95;">--多表删除</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">TRUNCATE</span><span style="color:#A6ACCD;"> [TABLE] table_name </span><span style="color:#676E95;">--清空表数据</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>truncate 是删除表再创建，重置auto_increment的值，速度较快；delete 是逐条删除</li><li>truncate 不知道删除了几条，而delete知道。</li><li>DELETE 删除数据后，配合事件回滚可以找回数据；TRUNCATE 不支持事务的回滚，数据删除后无法找回。</li></ul><h3 id="update" tabindex="-1">UPDATE <a class="header-anchor" href="#update" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">UPDATE</span><span style="color:#A6ACCD;"> table_name </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> field1</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">new</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">value1 [，···]</span></span>
<span class="line"><span style="color:#A6ACCD;">[WHERE Clause]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="alter" tabindex="-1">ALTER <a class="header-anchor" href="#alter" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">table_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">  {</span><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">column_name</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        | </span><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">column_name </span><span style="color:#F78C6C;">type</span><span style="color:#A6ACCD;"> [not null  defalut value]</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        | </span><span style="color:#F78C6C;">MODIFY</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">column_name </span><span style="color:#F78C6C;">type</span><span style="color:#A6ACCD;"> [not null  defalut value]</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        | CHANGE </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">column_name new_name </span><span style="color:#F78C6C;">type</span><span style="color:#A6ACCD;"> [not null  defalut value]</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        | </span><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">column_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> { </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">默认值</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> }</span></span>
<span class="line"><span style="color:#A6ACCD;">                        | RENAME [TO] </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">new_name</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        | </span><span style="color:#F78C6C;">CHARACTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">字符集名</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        | </span><span style="color:#C792EA;">COLLATE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">校对规则名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span></span>
<span class="line"><span style="color:#F78C6C;">alter</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">add</span><span style="color:#A6ACCD;"> column </span><span style="color:#89DDFF;">&lt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">generated</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">always</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;"> (</span><span style="color:#82AAFF;">upper</span><span style="color:#A6ACCD;">(c1));</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#676E95;">-- RENAME可以交换两个表名</span></span>
<span class="line"><span style="color:#A6ACCD;">RENAME </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> 原表名 </span><span style="color:#F78C6C;">TO</span><span style="color:#A6ACCD;"> 新表名</span></span>
<span class="line"><span style="color:#A6ACCD;">RENAME </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> 原表名 </span><span style="color:#F78C6C;">TO</span><span style="color:#A6ACCD;"> 库名.表名    （可将表移动到另一个数据库）</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">/* 表维护 */</span></span>
<span class="line"><span style="color:#676E95;">-- 分析和存储表的关键字分布</span></span>
<span class="line"><span style="color:#A6ACCD;">ANALYZE [LOCAL | NO_WRITE_TO_BINLOG] </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> 表名 ...</span></span>
<span class="line"><span style="color:#676E95;">-- 检查表是否有错误</span></span>
<span class="line"><span style="color:#C792EA;">CHECK</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> tbl_name [, tbl_name] ... [option] ...</span></span>
<span class="line"><span style="color:#F78C6C;">option</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> {QUICK | </span><span style="color:#F78C6C;">FAST</span><span style="color:#A6ACCD;"> | MEDIUM | EXTENDED | CHANGED}</span></span>
<span class="line"><span style="color:#676E95;">-- 整理数据文件的碎片</span></span>
<span class="line"><span style="color:#A6ACCD;">OPTIMIZE [LOCAL | NO_WRITE_TO_BINLOG] </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> tbl_name [, tbl_name] ..</span></span>
<span class="line"><span style="color:#676E95;">-- 修复表</span></span>
<span class="line"><span style="color:#A6ACCD;">REPAIR [LOCAL | NO_WRITE_TO_BINLOG] </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> tbl_name [, tbl_name] ... [QUICK] [EXTENDED] [USE_FRM]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="join" tabindex="-1">JOIN <a class="header-anchor" href="#join" aria-hidden="true">#</a></h3><ul><li>交叉连接（CROSS JOIN）：返回连接表的笛卡尔积</li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">字段名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">表1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CROSS</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">JOIN</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">表2</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> [WHERE子句]</span></span>
<span class="line"><span style="color:#A6ACCD;"># 或</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">字段名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">表1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">表2</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> [WHERE子句]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>内连接 (INNER JOIN)</li><li>外连接 (OUTER JOIN)</li><li>左连接 (LEFT OUTER JOIN)</li><li>右连接 (RIGHT OUTER JOIN)</li><li>全连接 (FULL OUTER JOIN) | INNER JOIN | LEFT OUTER JOIN | RIGHT OUTER JOIN | FULL OUTER JOIN | | --- | --- | --- | --- | | 两张表都存在的记录 | 左表存在的记录 | 右表存在的记录 | 左右表都存在的记录 | | | | | |</li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">table_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">JOIN</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">table_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> [ JOIN  ···] [ON &lt;P&gt;]</span></span>
<span class="line"><span style="color:#89DDFF;"> </span><span style="color:#A6ACCD;"># </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">table_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">JOIN</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">table_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">using</span><span style="color:#A6ACCD;"> (column_name)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="like-regexp" tabindex="-1">LIKE &amp; REGEXP <a class="header-anchor" href="#like-regexp" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">[NOT] </span><span style="color:#F78C6C;">LIKE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">str%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> [ESCAPE &#39;_&#39;]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>百分号（%）：匹配任意子串</li><li>下划线（_）：匹配任意一个字符</li><li>关键字 ESCAPE定义转移字符</li><li>大小写敏感</li></ul><p>REGEXP</p><table><thead><tr><th>模式</th><th>描述</th></tr></thead><tbody><tr><td>^</td><td>匹配输入字符串的开始位置。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 &#39;\n&#39; 或 &#39;\r&#39; 之后的位置。</td></tr><tr><td>$</td><td>匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 &#39;\n&#39; 或 &#39;\r&#39; 之前的位置。</td></tr><tr><td>.</td><td>匹配除 &quot;\n&quot; 之外的任何单个字符。要匹配包括 &#39;\n&#39; 在内的任何字符，请使用象 &#39;[.\n]&#39; 的模式。</td></tr><tr><td>[...]</td><td>字符集合</td></tr><tr><td>[^...]</td><td>负值字符集合</td></tr><tr><td>p1|p2|p3</td><td>匹配 p1 或 p2 或 p3</td></tr><tr><td>*</td><td>匹配前面的子表达式零次或多次</td></tr><tr><td>+</td><td>匹配前面的子表达式一次或多次</td></tr><tr><td n=""></td><td>n 是一个非负整数。匹配确定的 n 次</td></tr><tr><td><code>{n,m}</code></td><td>m 和 n 均为非负整数，其中n &lt;= m。最少匹配 n 次且最多匹配 m 次。</td></tr></tbody></table><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> tb_students_info </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> REGEXP </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">e{2,}</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----+-------+------+------+--------+-----------+</span></span>
<span class="line"><span style="color:#A6ACCD;">| id | </span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">  | age  | sex  | height | course_id |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----+-------+------+------+--------+-----------+</span></span>
<span class="line"><span style="color:#A6ACCD;">|  </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> | Green |   </span><span style="color:#F78C6C;">23</span><span style="color:#A6ACCD;"> | 男   |    </span><span style="color:#F78C6C;">158</span><span style="color:#A6ACCD;"> |         </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> |</span></span>
<span class="line"><span style="color:#89DDFF;">+</span><span style="color:#676E95;">----+-------+------+------+--------+-----------+</span></span>
<span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">row</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> (</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">00</span><span style="color:#A6ACCD;"> sec)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="union" tabindex="-1">UNION <a class="header-anchor" href="#union" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">SELECT_statement</span></span>
<span class="line"><span style="color:#F78C6C;">UNION</span><span style="color:#A6ACCD;"> [=DISTINCT | ALL]</span></span>
<span class="line"><span style="color:#A6ACCD;">SELECT_statement;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>默认自动去重</li><li>无交集（intersect），差集（except）运算</li></ul><h3 id="some" tabindex="-1">SOME <a class="header-anchor" href="#some" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&gt;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> SOME [| ALL] </span></span>
<span class="line"><span style="color:#A6ACCD;">(SELECT_statement)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ANY 等同于 SMOE</p><h3 id="with" tabindex="-1">WITH <a class="header-anchor" href="#with" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">WITH</span><span style="color:#A6ACCD;"> max_budget (</span><span style="color:#F78C6C;">value</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">AS</span></span>
<span class="line"><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">max</span><span style="color:#A6ACCD;">(budget) </span></span>
<span class="line"><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> department) </span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> budget </span></span>
<span class="line"><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> department,max_budget </span></span>
<span class="line"><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> department.budget</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">max_budget.value</span></span>
<span class="line"><span style="color:#F78C6C;">WITH</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">RECURSIVE</span><span style="color:#A6ACCD;"> fib(a, b) </span><span style="color:#F78C6C;">as</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">--递归CTE</span></span>
<span class="line"><span style="color:#A6ACCD;"> ( </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#F78C6C;">union all</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> b, a</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">b </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> fib </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> b</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;"> )</span></span>
<span class="line"><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> fib;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><strong>定义临时关系</strong> <br> <strong>无限递归控制</strong></p><ul><li>max_execution_time</li><li>cte_max_recursion_depth</li></ul><h3 id="index" tabindex="-1">INDEX <a class="header-anchor" href="#index" aria-hidden="true">#</a></h3><p>一种特殊的数据库结构，由数据表中的一列或多列组合而成，用来快速查询数据表中有某一特定值的记录。</p><ul><li>普通索引（CREATE INDEX）</li><li>唯一索引，索引列的值必须唯一（CREATE UNIQUE INDEX）</li><li>多列索引（key的值由多个列组成）</li><li>主键索引（PRIMARY KEY），一个表只能有一个</li><li>全文索引（FULLTEXT INDEX），InnoDB不支持</li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> [UNIQUE] </span><span style="color:#F78C6C;">INDEX</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">index_name</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">table_name (column_name [&lt;长度&gt;] [ ASC | DESC] )</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">  [invisible]   </span><span style="color:#676E95;">--主键索引必须可见</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INDEX</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">index_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">table_name</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--查看索引</span></span>
<span class="line"><span style="color:#A6ACCD;">SHOW </span><span style="color:#F78C6C;">INDEX</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">index_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">table_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">[\G]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--更改索引</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INDEX</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&gt;</span><span style="color:#A6ACCD;"> VISIBLE </span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;">--降序索引</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&gt;</span><span style="color:#A6ACCD;"> (c1,</span><span style="color:#F78C6C;">INT</span><span style="color:#A6ACCD;">,c2 </span><span style="color:#F78C6C;">INT</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">INDEX</span><span style="color:#A6ACCD;"> idx(c1 </span><span style="color:#F78C6C;">ASC</span><span style="color:#A6ACCD;">,c2 </span><span style="color:#F78C6C;">DESC</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;"> </span><span style="color:#676E95;">--函数索引</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INDEX</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">fun_idx</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> table_name( (fun_name(column_name)) );</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>隐藏索引不会被优化器使用，但仍然需要进行维护。 <br> 优化器默认情况是不可见隐藏索引的，但是可以通过配置开关来使之可见</p><h3 id="explain" tabindex="-1">EXPLAIN <a class="header-anchor" href="#explain" aria-hidden="true">#</a></h3><p>模拟优化器执行SQL查询语句，分析你的查询语句或是表结构的性能瓶颈。</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">EXPLAIN Select_statement;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra <br> 表的读取顺序</p><ul><li>id相同，执行顺序由上至下；</li><li>id不同，如果是子查询，id的序号会递增，id值越大优先级越高，先被执行 ；</li></ul><p>select_type</p><ol><li>SIMPLE：简单的select查询，查询中不包含子查询和union</li><li>PRIMARY：查询中若包含任何复杂的子部分，最外层查询则被标记为</li><li>SUBQUERY：在select或where列表中包含了子查询</li><li>DERIVED：在from列表中包含的子查询被标记为derived，mysql会递归执行这些子查询，把结果放在临时表中</li><li>UNION：若第二个select出现在union之后，则被标记;</li><li>UNION RESULT：从union表获取结果的select</li></ol><p>table：当前执行的表</p><p>type</p><ol><li>NULL：不用访问表或者索引，直接就能得到结果；</li><li>system：表示表中只有一条记录；</li><li>const：表示表中有多条记录，但只从表中查询一条记录；</li><li>eq _ref：类似 ref，表示多表连接时，后面的表使用了 UNIQUE 或者 PRIMARY KEY；</li><li>ref：表示多表查询时，后面的表使用了普通索引；</li><li>range：表示查询语句中给出了查询范围，常见于 &lt;、&lt;=、&gt;、&gt;=、between 等操作符；</li><li>index：表示对表中的索引进行了完整的扫描，MySQL 遍历整个索引来查询匹配的行；</li><li>ALL：表示对表进行了完整的扫描，MySQL 遍历全表来找到匹配的行。</li></ol><p>possible_keys：表示查询中可以使用的索引； <br> key：表示实际查询中使用到的索引； <br> key_len：表示索引字段的长度； <br> ref：表示使用哪个列或常数与索引一起来查询记录； <br> rows：表示查询的行数； <br> Extra：表示查询过程的附件信息。</p><h3 id="游标（cursor）" tabindex="-1">游标（Cursor） <a class="header-anchor" href="#游标（cursor）" aria-hidden="true">#</a></h3><p>游标是一个存储在MySQL服务器上的数据库查询，是查询语句所检索出来的结果集</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#676E95;">-- 声明</span></span>
<span class="line"><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> cursor_name </span><span style="color:#F78C6C;">CURSOR</span><span style="color:#A6ACCD;"> FOR SELECT_statement;</span></span>
<span class="line"><span style="color:#676E95;">-- 打开</span></span>
<span class="line"><span style="color:#F78C6C;">OPEN</span><span style="color:#A6ACCD;"> cursor_name;</span></span>
<span class="line"><span style="color:#676E95;">-- 取出数据</span></span>
<span class="line"><span style="color:#F78C6C;">FETCH</span><span style="color:#A6ACCD;"> cursor_name </span><span style="color:#F78C6C;">INTO</span><span style="color:#A6ACCD;"> variables list;</span></span>
<span class="line"><span style="color:#676E95;">-- 关闭</span></span>
<span class="line"><span style="color:#F78C6C;">CLOSE</span><span style="color:#A6ACCD;"> cursor_name;</span></span>
<span class="line"><span style="color:#676E95;">-- 当游标找不到任何行时</span></span>
<span class="line"><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CONTINUE</span><span style="color:#A6ACCD;"> HANDLER FOR </span><span style="color:#F78C6C;">NOT</span><span style="color:#A6ACCD;"> FOUND </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> finished </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>示例</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;"> DELIMITER $$</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CREATE</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">PROCEDURE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">test</span><span style="color:#89DDFF;">`</span><span style="color:#A6ACCD;">.</span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">procedure_student2</span><span style="color:#89DDFF;">`</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">BEGIN</span></span>
<span class="line"><span style="color:#89DDFF;">     </span><span style="color:#676E95;">-- declare some variable，必须在声明游标和句柄之前，而声明句柄必须在声明游标之后。</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> val DOUBLE </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> tempRes </span><span style="color:#F78C6C;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> res </span><span style="color:#F78C6C;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">100</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;"> ;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">-- declare a cursor</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> cursor_avgScore </span><span style="color:#F78C6C;">CURSOR</span></span>
<span class="line"><span style="color:#A6ACCD;">    FOR</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> (mathScore</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">englishScore)</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> student_avgScore </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> student2;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">-- declare a continue handler ,use finish while loop </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CONTINUE</span><span style="color:#A6ACCD;"> HANDLER FOR SQLSTATE </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">02000</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> val</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">.;  </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">-- open cursor</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">OPEN</span><span style="color:#A6ACCD;"> cursor_avgScore ;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">FETCH</span><span style="color:#A6ACCD;"> cursor_avgScore </span><span style="color:#F78C6C;">INTO</span><span style="color:#A6ACCD;"> val;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">-- fetch cursor</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">WHILE</span><span style="color:#A6ACCD;"> val</span><span style="color:#89DDFF;">!=-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> DO</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> tempRes</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">CONCAT</span><span style="color:#A6ACCD;">(val,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> res</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">CONCAT</span><span style="color:#A6ACCD;">(res,tempRes);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">FETCH</span><span style="color:#A6ACCD;"> cursor_avgScore </span><span style="color:#F78C6C;">INTO</span><span style="color:#A6ACCD;"> val;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">WHILE</span><span style="color:#A6ACCD;">;                  </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">-- close cursor</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">CLOSE</span><span style="color:#A6ACCD;"> cursor_avgScore ;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">-- 显示结果</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> res;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;">$$</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">DELIMITER ;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="约束（constraints）" tabindex="-1">约束（Constraints） <a class="header-anchor" href="#约束（constraints）" aria-hidden="true">#</a></h2><p>用于规定表中的数据规则 <br> 如果存在违反约束的数据行为，行为会被约束终止。 <br> 可在创建表时规定（CREATE TABLE 语句），或者在表创建之后规定（ALTER TABLE 语句）</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">#示例</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> section</span></span>
<span class="line"><span style="color:#A6ACCD;">	(course_id		</span><span style="color:#F78C6C;">int</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NOT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;"> AUTO_INCREMENT, </span></span>
<span class="line"><span style="color:#A6ACCD;">	 semester		</span><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">)   </span><span style="color:#C792EA;">check</span><span style="color:#A6ACCD;"> (semester </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Fall</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Winter</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Spring</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Summer</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)), </span></span>
<span class="line"><span style="color:#A6ACCD;">	 building		</span><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">15</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">	 room_number		</span><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">	 time_slot_id		</span><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">),</span></span>
<span class="line"><span style="color:#A6ACCD;">	 </span><span style="color:#F78C6C;">primary</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">key</span><span style="color:#A6ACCD;"> (course_id, semester),</span></span>
<span class="line"><span style="color:#A6ACCD;">	 </span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;"> (course_id) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> course(course_id)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">on delete cascade</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	 </span><span style="color:#C792EA;">foreign key</span><span style="color:#A6ACCD;"> (building, room_number) </span><span style="color:#C792EA;">references</span><span style="color:#A6ACCD;"> classroom(building, room_number)</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">on delete</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">null</span></span>
<span class="line"><span style="color:#A6ACCD;">	);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>主键（PRIMARY KEY）</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#676E95;">-- 设置单字段主键</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">字段名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据类型</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">PRIMARY</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">KEY</span><span style="color:#A6ACCD;"> [默认值]</span></span>
<span class="line"><span style="color:#A6ACCD;">[CONSTRAINT &lt;约束名&gt;] </span><span style="color:#F78C6C;">PRIMARY</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">KEY</span><span style="color:#A6ACCD;"> [字段名]</span></span>
<span class="line"><span style="color:#676E95;">-- 添加</span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据表名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">PRIMARY</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">KEY</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">字段名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#676E95;">-- 删除</span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据表名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">PRIMARY</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">KEY</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>auto_increment 自动增长约束</strong></p><ul><li>自动增长必须为索引（主键或unique）</li><li>默认为1开始自动增长。通过表属性 auto_increment = x设置，或 alter table tbl auto_increment = x;</li><li>删除重置：ALTER TABLE &lt;数据表名&gt; MODIFY &lt;字段名&gt; int;</li></ul><p><strong>外键约束（Foreign Key）</strong> <br> 用于限制主表与从表数据完整性，保持数据一致性 <br> 存在外键的表，称之为从表（子表），外键指向的表，称之为主表（父表）。</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#676E95;">-- 创建</span></span>
<span class="line"><span style="color:#A6ACCD;">[CONSTRAINT &lt;外键名&gt;] </span><span style="color:#C792EA;">FOREIGN KEY</span><span style="color:#A6ACCD;"> 字段名 [，字段名2，…]</span></span>
<span class="line"><span style="color:#C792EA;">REFERENCES</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">主表名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> 主键列1 [，主键列2，…] [主表记录删除 | 更新时的动作]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- 添加</span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据表名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">CONSTRAINT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">外键名</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#C792EA;">FOREIGN KEY</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">列名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">) </span><span style="color:#C792EA;">REFERENCES</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">主表名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">列名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#676E95;">-- 删除</span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">表名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">FOREIGN KEY</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">外键约束名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>若不指定主表记录更改或更新时的动作，主表的操作会被拒绝 <br> 如果指定了 on update 或 on delete，可以选择：</p><ul><li>cascade：级联操作。主表数据被更新（主键值更新），从表也被更新（外键值更新）</li><li>set null：主表数据被更新（主键值更新），从表的外键被设置为null。主表记录被删除，从表相关记录外键被设置成null。</li><li>restrict：拒绝父表删除和更新。</li></ul><p><strong>唯一约束（Unique Key）</strong>：所有记录中字段的值不能重复出现</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">字段名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据类型</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">UNIQUE</span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据表名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">CONSTRAINT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">唯一约束名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">UNIQUE</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">列名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">表名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INDEX</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">唯一约束名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>default 默认值属性</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">字段名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据类型</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">默认值</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- 添加</span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据表名</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">CHANGE COLUMN </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">字段名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据类型</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">默认值</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;">-- 删除</span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据表名</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">CHANGE COLUMN </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">字段名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">字段名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据类型</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">DEFAULT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> tab ( add_time </span><span style="color:#F78C6C;">timestamp</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">current_timestamp</span><span style="color:#A6ACCD;"> );</span><span style="color:#676E95;">-- 表示将当前时间的时间戳设为默认值。</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>非空约束（NOT NULL）</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">字段名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据类型</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NOT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据表名</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">CHANGE COLUMN </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">字段名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">字段名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据类型</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NOT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据表名</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">CHANGE COLUMN </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">字段名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">字段名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据类型</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">NULL</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>检查约束（CHECK）</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#C792EA;">CHECK</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">表达式</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据表名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ADD</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">CONSTRAINT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">检查约束名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">CHECK</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">检查约束</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">数据表名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">CONSTRAINT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">检查约束名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>comment 注释</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">table</span><span style="color:#A6ACCD;"> tab ( id </span><span style="color:#F78C6C;">int</span><span style="color:#A6ACCD;"> ) comment </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">注释内容</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="视图（views）" tabindex="-1">视图（Views） <a class="header-anchor" href="#视图（views）" aria-hidden="true">#</a></h2><p>基于 SQL 语句的结果集的可视化的表 <br> 一种虚拟存在的表，动态生成的（只存放了视图的定义）</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> [OR REPLACE] [ALGORITHM = {UNDEFINED | MERGE | TEMPTABLE}] VIEW view_name [(column_list)] </span></span>
<span class="line"><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> select_statement</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> VIEW </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">view_name</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">SHOW </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> VIEW view_name</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> VIEW view_name [(column_list)] </span><span style="color:#F78C6C;">AS</span><span style="color:#A6ACCD;"> select_statement</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>-- 视图作用 <br> 1. 简化业务逻辑 <br> 2. 对客户端隐藏真实的表结构</p><p>-- 视图算法 (ALGORITHM) <br> MERGE ：将视图的查询语句，与外部查询需要先合并再执行！ <br> TEMPTABLE：将视图执行完毕后，形成临时表，再做外层查询！ <br> UNDEFINED：未定义(默认)，MySQL自主去选择相应的算法。</p><p>所有视图的定义存储在 information_schema 数据库下的 views 表中，可以在这个表中查看所有视图的详细信息</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> information_schema.views;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="事务（transaction）" tabindex="-1">事务（Transaction） <a class="header-anchor" href="#事务（transaction）" aria-hidden="true">#</a></h2><p>一种机制、一个操作序列，包含了一组数据库操作命令</p><p><strong>ACID特性</strong></p><ul><li>Atomicity，原子性：将所有SQL作为原子工作单元执行，要么全部执行，要么全部不执行；</li><li>Consistency，一致性：事务完成后，所有数据的状态都是一致的，即A账户只要减去了100，B账户则必定加上了100；</li><li>Isolation，隔离性：如果有多个事务并发执行，每个事务作出的修改必须与其他事务隔离；</li><li>Durability，持久性：即事务完成后，对数据库数据的修改被持久化存储。</li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">BEGIN</span><span style="color:#A6ACCD;">； [|START TRANSACTION]</span></span>
<span class="line"><span style="color:#A6ACCD;">··· ；</span></span>
<span class="line"><span style="color:#F78C6C;">COMMIT</span><span style="color:#A6ACCD;"> [| ROLLBACK [WORK]]；</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--设置事务自动提交（开启和关闭）</span></span>
<span class="line"><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> autocommit </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">|</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">|</span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;">|</span><span style="color:#F78C6C;">OFF</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>-- 事务的原理 <br> 利用InnoDB的自动提交(autocommit)特性 <br> 普通的MySQL执行语句后，当前的数据提交操作均可被其他客户端可见。 <br> 而事务是暂时关闭“自动提交”机制，需要commit提交持久化数据操作。</p><p>-- 注意 <br> 1. 数据定义语言（DDL）语句不能被回滚，比如创建或取消数据库的语句，和创建、取消或更改表或存储的子程序的语句。 <br> 2. 事务不能被嵌套</p><p>-- 保存点 <br> SAVEPOINT 保存点名称 -- 设置一个事务保存点 <br> ROLLBACK TO SAVEPOINT 保存点名称 -- 回滚到保存点 <br> RELEASE SAVEPOINT 保存点名称 -- 删除保存点 <br> nowait，skip locked</p><p><strong>隔离级别</strong></p><ul><li>脏读 DIRTY READ： 查询同一记录，2 次结果不一样，读到还未 commit 的数据结果；</li><li>不可重复读 NON REPEATABLE READ： 查询同一记录，2 次结果不一样，读到的结果在另一事务 commit/rollback 之间；</li><li>幻读 PHANTOM READ：查询同一记录，2 次结果是一样，但是会出现 事务 A 新增的列，事务 B 读不到(SELECT)，但是却可以更新(UPDATE)，更新后才可以读到。 | ISOLATION LEVEL | DIRTY READ | NON REPEATABLE READ | PHANTOM READ | | --- | --- | --- | --- | | READ UNCOMMITTED | YES | YES | YES | | READ COMMITTED | - | YES | YES | | Repeatable Read | - | - | YES | | Serializable | - | - | - |</li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#676E95;">--查看当前事务隔离级别</span></span>
<span class="line"><span style="color:#A6ACCD;">show variables </span><span style="color:#F78C6C;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">%tx_isolation%</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">或 </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> @@tx_isolation;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--修改事务隔离级别</span></span>
<span class="line"><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> [=SESSION | GLOBAL] </span><span style="color:#F78C6C;">TRANSACTION</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ISOLATION</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">LEVEL</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">{</span><span style="color:#F78C6C;">READ</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">UNCOMMITTED</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">READ</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">COMMITTED</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">REPEATABLE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">READ</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">SERIALIZABLE</span><span style="color:#A6ACCD;">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="锁表" tabindex="-1">锁表 <a class="header-anchor" href="#锁表" aria-hidden="true">#</a></h2><p>用于防止其它客户端进行不正当地读取和写入</p><ul><li>行锁（Record Lock）：直接对索引项加锁。</li><li>间隙锁（Gap Lock）：锁加在索引项之间的间隙，也可以是第一条记录前的“间隙”或最后一条记录后的“间隙”。</li><li>Next-Key Lock：行锁与间隙锁组合起来用就叫做 Next-Key Lock。 前两种的组合，对记录及其前面的间隙加锁。</li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#676E95;">-- 锁定</span></span>
<span class="line"><span style="color:#A6ACCD;">    LOCK TABLES tbl_name [AS alias]</span></span>
<span class="line"><span style="color:#676E95;">-- 解锁</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">UNLOCK</span><span style="color:#A6ACCD;"> TABLES</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="触发器（trigger）" tabindex="-1">触发器（TRIGGER） <a class="header-anchor" href="#触发器（trigger）" aria-hidden="true">#</a></h2><p>触发程序是与表有关的命名数据库对象，当该表出现特定事件时，将激活该对象 <br> 监听：记录的增加、修改、删除。</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#676E95;">-- 创建触发器</span></span>
<span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> TRIGGER trigger_name trigger_time trigger_event </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> tbl_name FOR EACH </span><span style="color:#F78C6C;">ROW</span><span style="color:#A6ACCD;"> trigger_stmt</span></span>
<span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">触发器名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">BEFORE</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">AFTER</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F78C6C;">INSERT</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">UPDATE</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">DELETE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">表名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> FOR EACH </span><span style="color:#F78C6C;">Row</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">触发器主体</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- 删除</span></span>
<span class="line"><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> TRIGGER [schema_name.]trigger_name</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>所有触发器的信息都存在 information_schema 数据库的 triggers 表中</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> information_schema.triggers [WHERE trigger_name= &#39;触发器名&#39;];</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="事件（event）" tabindex="-1">事件（Event） <a class="header-anchor" href="#事件（event）" aria-hidden="true">#</a></h2><p>事件调度器（Event Scheduler）：用来执行<strong>定时</strong>任务的一组 SQL 集合</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#676E95;">--查看事件是否开启</span></span>
<span class="line"><span style="color:#A6ACCD;">SHOW VARIABLES </span><span style="color:#F78C6C;">LIKE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">event_scheduler</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">或 </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> @@event_scheduler;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--开启事件</span></span>
<span class="line"><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">GLOBAL</span><span style="color:#A6ACCD;"> event_scheduler </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> ;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">EVENT</span><span style="color:#A6ACCD;"> [IF NOT EXISTS] event_name</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> SCHEDULE schedule</span></span>
<span class="line"><span style="color:#A6ACCD;">    [ON COMPLETION [NOT] PRESERVE]</span></span>
<span class="line"><span style="color:#A6ACCD;">    [ENABLE | DISABLE | DISABLE ON SLAVE]</span></span>
<span class="line"><span style="color:#A6ACCD;">    [COMMENT &#39;comment&#39;]</span></span>
<span class="line"><span style="color:#A6ACCD;">    DO event_body;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">EVENT</span><span style="color:#A6ACCD;"> [IF EXISTS] event_name;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">EVENT</span><span style="color:#A6ACCD;"> event_name</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> SCHEDULE schedule</span></span>
<span class="line"><span style="color:#A6ACCD;">    [ON COMPLETION [NOT] PRESERVE]</span></span>
<span class="line"><span style="color:#A6ACCD;">    [ENABLE | DISABLE | DISABLE ON SLAVE]</span></span>
<span class="line"><span style="color:#A6ACCD;">    [COMMENT &#39;comment&#39;]</span></span>
<span class="line"><span style="color:#A6ACCD;">    DO event_body;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><table><thead><tr><th>ON SCHEDULE schedule</th><th>必选 用于定义执行的时间和时间间隔 schedule 表示触发点</th></tr></thead><tbody><tr><td>ON COMPLETION [NOT] PRESERVE</td><td>可选 用于定义事件是否循环执行，即是一次执行还是永久执行，默认为一次执行，即 NOT PRESERVE</td></tr><tr><td>ENABLE</td><td>DISABLE</td></tr><tr><td>COMMENT &#39;comment&#39;</td><td>可选，用于定义事件的注释</td></tr><tr><td>DO event_body</td><td>必选 用于指定事件启动时所要执行的代码，可以是任何有效的 SQL 语句、存储过程或者一个计划执行的事件。 如果包含多条语句，则可以使用 BEGIN..END 复合结构</td></tr></tbody></table><h2 id="数据类型" tabindex="-1">数据类型 <a class="header-anchor" href="#数据类型" aria-hidden="true">#</a></h2><h3 id="数值类型" tabindex="-1">数值类型 <a class="header-anchor" href="#数值类型" aria-hidden="true">#</a></h3><table><thead><tr><th>类型</th><th>大小</th><th>范围（有符号）</th><th>范围（无符号）</th></tr></thead><tbody><tr><td>TINYINT</td><td>1 字节</td><td>(-128，127)</td><td>(0，255)</td></tr><tr><td>SMALLINT</td><td>2 字节</td><td>(-32 768，32 767)</td><td>(0，65 535)</td></tr><tr><td>MEDIUMINT</td><td>3 字节</td><td>(-8 388 608，8 388 607)</td><td>(0，16 777 215)</td></tr><tr><td>INT或INTEGER</td><td>4 字节</td><td>(-2 147 483 648，2 147 483 647)</td><td>(0，4 294 967 295)</td></tr><tr><td>BIGINT</td><td>8 字节</td><td>(-9,223,372,036,854,775,808，9 223 372 036 854 775 807)</td><td>(0，18 446 744 073 709 551 615)</td></tr><tr><td>FLOAT</td><td>4 字节</td><td>(-3.402 823 466 E+38，-1.175 494 351 E-38)，0，(1.175 494 351 E-38，3.402 823 466 351 E+38)</td><td>0，(1.175 494 351 E-38，3.402 823 466 E+38)</td></tr><tr><td>DOUBLE</td><td>8 字节</td><td>(-1.797 693 134 862 315 7 E+308，-2.225 073 858 507 201 4 E-308)，0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td><td>0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308)</td></tr><tr><td>DECIMAL</td><td>对DECIMAL(M,D) ，如果M&gt;D，为M+2否则为D+2</td><td>依赖于M和D的值</td><td>依赖于M和D的值</td></tr></tbody></table><p><strong>INT[(M)] [UNSIGNED] [ZEROFILL]</strong></p><ul><li>M表示总位数</li><li>默认存在符号位，unsigned 属性修改</li><li>显示宽度，如果某个数不够定义字段时设置的位数，则前面以0补填，zerofill 属性修改 <br> 例：int(5) 插入一个数&#39;123&#39;，补填后为&#39;00123&#39;</li><li>MySQL没有布尔类型，通过整型0和1表示。常用tinyint(1)表示布尔型。</li></ul><p>** FLOAT[(M,D)] [UNSIGNED] [ZEROFILL]** <br> 定义浮点型时，需指定总位数和小数位数。 不同于整型，前后均会补填0. <br> M表示总位数，D表示小数位数。 <br> M和D的大小会决定浮点数的范围。不同于整型的固定范围。 <br> M既表示总位数（不包括小数点和正负号），也表示显示宽度（所有显示符号均包括）。 <br> 支持科学计数法表示。 <br> 浮点数表示近似值。</p><h3 id="日期和时间类型" tabindex="-1">日期和时间类型 <a class="header-anchor" href="#日期和时间类型" aria-hidden="true">#</a></h3><table><thead><tr><th>类型</th><th>大小(字节)</th><th>范围</th><th>格式</th><th>用途</th></tr></thead><tbody><tr><td>DATE</td><td>3</td><td>1000-01-01， 9999-12-31</td><td>YYYY-MM-DD</td><td>日期值</td></tr><tr><td>TIME</td><td>3</td><td>&#39;-838:59:59&#39;，&#39;838:59:59&#39;</td><td>HH:MM:SS</td><td>时间值或持续时间</td></tr><tr><td>YEAR</td><td>1</td><td>1901，2155</td><td>YYYY</td><td>年份值</td></tr><tr><td>DATETIME</td><td>8</td><td>1000-01-01 00:00:00 ， 9999-12-31 23:59:59</td><td>YYYY-MM-DD HH:MM:SS</td><td>混合日期和时间值</td></tr><tr><td>TIMESTAMP</td><td>4</td><td>1970-01-01 00:00:00 ， 2038-01-19 03:14:07</td><td>YYYYMMDD HHMMSS</td><td>混合日期和时间值，时间戳</td></tr></tbody></table><p>当指定不合法的MySQL不能表示的值时使用&quot;零&quot;值</p><h3 id="字符串类型" tabindex="-1">字符串类型 <a class="header-anchor" href="#字符串类型" aria-hidden="true">#</a></h3><table><thead><tr><th>类型</th><th>大小</th><th>用途</th></tr></thead><tbody><tr><td>CHAR</td><td>0-255字节</td><td>定长字符串</td></tr><tr><td>VARCHAR</td><td>0-65535 字节</td><td>变长字符串</td></tr><tr><td>TINYBLOB</td><td>0-255字节</td><td>不超过 255 个字符的二进制字符串</td></tr><tr><td>TINYTEXT</td><td>0-255字节</td><td>短文本字符串</td></tr><tr><td>BLOB</td><td>0-65 535字节</td><td>二进制形式的长文本数据</td></tr><tr><td>TEXT</td><td>0-65 535字节</td><td>长文本数据</td></tr><tr><td>MEDIUMBLOB</td><td>0-16 777 215字节</td><td>二进制形式的中等长度文本数据</td></tr><tr><td>MEDIUMTEXT</td><td>0-16 777 215字节</td><td>中等长度文本数据</td></tr><tr><td>LONGBLOB</td><td>0-4 294 967 295字节</td><td>二进制形式的极大文本数据</td></tr><tr><td>LONGTEXT</td><td>0-4 294 967 295字节</td><td>极大文本数据</td></tr></tbody></table><p>lob——Large OBject <br> text 类型在定义时，不可给default值</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">一条有效记录最大不能超过65535个字节。</span></span>
<span class="line"><span style="color:#A6ACCD;">        utf8 最大为21844个字符，gbk 最大为32766个字符，latin1 最大为65532个字符</span></span>
<span class="line"><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;"> 是变长的，需要利用存储空间保存 </span><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;"> 的长度，如果数据小于255个字节，则采用1个字节来保存长度，反之需2个字节来保存。</span></span>
<span class="line"><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;"> 的最大有效长度由最大行大小和使用的字符集确定。</span></span>
<span class="line"><span style="color:#A6ACCD;">    最大有效长度是65532字节，因为在varchar存字符串时，第1个字节是空的，不存在任何数据，2个字节来存放字符串的长度</span></span>
<span class="line"><span style="color:#A6ACCD;">若一个表定义为 </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;"> tb(c1 </span><span style="color:#F78C6C;">int</span><span style="color:#A6ACCD;">, c2 </span><span style="color:#F78C6C;">char</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">30</span><span style="color:#A6ACCD;">), c3 </span><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;">(N)) charset</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">utf8; 问N的最大值是多少？</span></span>
<span class="line"><span style="color:#A6ACCD;">答：(</span><span style="color:#F78C6C;">65535</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">*</span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">3</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>枚举</strong> <br> enum(val1, val2, val3...) <br> 在已知的值中进行单选。最大数量为65535 <br> 枚举值在保存时，以2byte的整型(smallint)保存。每个枚举值，按保存的位置顺序，从1开始逐一递增。 <br> 表现为字符串类型，存储却是整型。 <br> NULL值的索引是NULL。 <br> 空字符串错误值的索引值是0。</p><p><strong>集合（set）</strong> <br> set(val1, val2, val3...) <br> create table tab ( gender set(&#39;男&#39;, &#39;女&#39;, &#39;无&#39;) ); <br> 最多可以有64个不同的成员。以bigint存储，共8个字节。采取位运算的形式。 <br> 当创建表时，SET成员值的尾部空格将自动被删除。</p><h2 id="运算符" tabindex="-1">运算符 <a class="header-anchor" href="#运算符" aria-hidden="true">#</a></h2><h3 id="算术运算符" tabindex="-1">算术运算符 <a class="header-anchor" href="#算术运算符" aria-hidden="true">#</a></h3><table><thead><tr><th>运算符</th><th>作用</th></tr></thead><tbody><tr><td>+</td><td>加法</td></tr><tr><td>-</td><td>减法</td></tr><tr><td>*</td><td>乘法</td></tr><tr><td>/ 或 DIV</td><td>除法</td></tr><tr><td>% 或 MOD</td><td>取余</td></tr></tbody></table><h3 id="比较运算符" tabindex="-1">比较运算符 <a class="header-anchor" href="#比较运算符" aria-hidden="true">#</a></h3><table><thead><tr><th>符号</th><th>描述</th><th>备注</th></tr></thead><tbody><tr><td>=</td><td>等于</td><td></td></tr><tr><td>&lt;&gt;, !=</td><td>不等于</td><td></td></tr><tr><td>&gt;</td><td>大于</td><td></td></tr><tr><td>&lt;</td><td>小于</td><td></td></tr><tr><td>&lt;=</td><td>小于等于</td><td></td></tr><tr><td>&gt;=</td><td>大于等于</td><td></td></tr><tr><td>BETWEEN</td><td>在两值之间</td><td>&gt;=min&amp;&amp;&lt;=max</td></tr><tr><td>NOT BETWEEN</td><td>不在两值之间</td><td></td></tr><tr><td>IN</td><td>在集合中</td><td></td></tr><tr><td>NOT IN</td><td>不在集合中</td><td></td></tr><tr><td>&lt;=&gt;</td><td>严格比较两个NULL值是否相等</td><td>两个操作码均为NULL时，其所得值为1；而当一个操作码为NULL时，其所得值为0</td></tr><tr><td>LIKE</td><td>模糊匹配</td><td></td></tr><tr><td>REGEXP 或 RLIKE</td><td>正则式匹配</td><td></td></tr><tr><td>IS NULL</td><td>为空</td><td></td></tr><tr><td>IS NOT NULL</td><td>不为空</td><td></td></tr><tr><td>[NOT] EXISTS</td><td>[不]存在</td><td></td></tr></tbody></table><h3 id="逻辑运算符" tabindex="-1">逻辑运算符 <a class="header-anchor" href="#逻辑运算符" aria-hidden="true">#</a></h3><table><thead><tr><th>运算符号</th><th>作用</th></tr></thead><tbody><tr><td>NOT !</td><td>逻辑非</td></tr><tr><td>AND &amp;&amp;</td><td>逻辑与</td></tr><tr><td>OR ||</td><td>逻辑或</td></tr><tr><td>XOR</td><td>逻辑异或</td></tr></tbody></table><h3 id="位运算符" tabindex="-1">位运算符 <a class="header-anchor" href="#位运算符" aria-hidden="true">#</a></h3><table><thead><tr><th>运算符号</th><th>作用</th></tr></thead><tbody><tr><td>&amp;</td><td>按位与</td></tr><tr><td>|</td><td>按位或</td></tr><tr><td>^</td><td>按位异或</td></tr><tr><td>!</td><td>取反</td></tr><tr><td>&lt;&lt;</td><td>左移</td></tr><tr><td>&gt;&gt;</td><td>右移</td></tr></tbody></table><h2 id="内置函数" tabindex="-1">内置<a href="https://www.runoob.com/mysql/mysql-functions.html" target="_blank" rel="noreferrer">函数</a> <a class="header-anchor" href="#内置函数" aria-hidden="true">#</a></h2><h3 id="字符函数" tabindex="-1">字符函数 <a class="header-anchor" href="#字符函数" aria-hidden="true">#</a></h3><table><thead><tr><th>函数</th><th>描述</th></tr></thead><tbody><tr><td>ASCII(s)</td><td>返回字符串 s 的第一个字符的 ASCII 码。</td></tr><tr><td>CHAR_LENGTH(s)</td><td>返回字符串 s 的字符数</td></tr><tr><td>CHARACTER_LENGTH(s)</td><td>返回字符串 s 的字符数</td></tr><tr><td>CONCAT(s1,s2...sn)</td><td>字符串 s1,s2 等多个字符串合并为一个字符串</td></tr><tr><td>CONCAT_WS(x, s1,s2...sn)</td><td>以分隔符x连接多个字符串</td></tr><tr><td>FIELD(s,s1,s2...)</td><td>返回第一个字符串 s 在字符串列表(s1,s2...)中的位置</td></tr><tr><td>FIND_IN_SET(s1,s2)</td><td>返回在字符串s2中与s1匹配的字符串的位置</td></tr><tr><td>FORMAT(x,n)</td><td>将数字 x 进行格式化 &quot;#,###.##&quot;, 小数点后 n 位，四舍五入</td></tr><tr><td>INSERT(s1,x,len,s2)</td><td>字符串 s2 替换 s1 的 x 位置开始长度为 len 的字符串</td></tr><tr><td>LOCATE(s1,s)</td><td>从字符串 s 中获取 s1 的开始位置</td></tr><tr><td>LCASE(s)</td><td>将字符串 s 的所有字母变成小写字母</td></tr><tr><td>LEFT(s,n)</td><td>返回字符串 s 的前 n 个字符</td></tr><tr><td>LOWER(s)</td><td>将字符串 s 的所有字母变成小写字母</td></tr><tr><td>LPAD(s1,len,s2)</td><td>在字符串 s1 的开始处填充字符串 s2，使字符串长度达到 len</td></tr><tr><td>LTRIM(s)</td><td>去掉字符串 s 开始处的空格</td></tr><tr><td>MID(s,n,len)</td><td>从字符串 s 的 n 位置截取长度为 len 的子字符串，同 SUBSTRING(s,n,len)</td></tr><tr><td>POSITION(s1 IN s)</td><td>从字符串 s 中获取 s1 的开始位置</td></tr><tr><td>REPEAT(s,n)</td><td>将字符串 s 重复 n 次</td></tr><tr><td>REPLACE(s,s1,s2)</td><td>将字符串 s2 替代字符串 s 中的字符串 s1</td></tr><tr><td>REVERSE(s)</td><td>将字符串s的顺序反过来</td></tr><tr><td>RIGHT(s,n)</td><td>返回字符串 s 的后 n 个字符</td></tr><tr><td>RPAD(s1,len,s2)</td><td>在字符串 s1 的结尾处添加字符串 s2，使字符串的长度达到 len</td></tr><tr><td>RTRIM(s)</td><td>去掉字符串 s 结尾处的空格</td></tr><tr><td>SPACE(n)</td><td>返回 n 个空格</td></tr><tr><td>STRCMP(s1,s2)</td><td>比较字符串 s1 和 s2，如果 s1 与 s2 相等返回 0 ，如果 s1&gt;s2 返回 1，如果 s1&lt;s2 返回 -1</td></tr><tr><td>SUBSTR(s, start, length)</td><td>从字符串 s 的 start 位置截取长度为 length 的子字符串</td></tr><tr><td>SUBSTRING(s, start, length)</td><td>从字符串 s 的 start 位置截取长度为 length 的子字符串</td></tr><tr><td>SUBSTRING_INDEX(s, delimiter, n)</td><td>返回从字符串 s 的第 n个出现的分隔符 delimiter 后的子串 如果 n 是正数，返回第 n 个字符左边的字符串。</td></tr><tr><td>TRIM(s)</td><td>去掉字符串 s 开始和结尾处的空格</td></tr><tr><td>UCASE(s)</td><td>将字符串转换为大写</td></tr><tr><td>UPPER(s)</td><td>将字符串转换为大写</td></tr></tbody></table><h3 id="数字函数" tabindex="-1">数字函数 <a class="header-anchor" href="#数字函数" aria-hidden="true">#</a></h3><table><thead><tr><th>函数名</th><th>描述</th></tr></thead><tbody><tr><td>ABS(x)</td><td>返回 x 的绝对值</td></tr><tr><td>ACOS(x)</td><td>求 x 的反余弦值(参数是弧度)</td></tr><tr><td>ASIN(x)</td><td>求反正弦值(参数是弧度)</td></tr><tr><td>ATAN(x)</td><td>求反正切值(参数是弧度)</td></tr><tr><td>ATAN2(n, m)</td><td>求反正切值(参数是弧度)</td></tr><tr><td>AVG(expression)</td><td>返回一个表达式的平均值，expression 是一个字段</td></tr><tr><td>CEIL(x)</td><td>返回大于或等于 x 的最小整数</td></tr><tr><td>CEILING(x)</td><td>返回大于或等于 x 的最小整数</td></tr><tr><td>COS(x)</td><td>求余弦值(参数是弧度)</td></tr><tr><td>COT(x)</td><td>求余切值(参数是弧度)</td></tr><tr><td>COUNT(expression)</td><td>返回查询的记录总数，expression 是一个字段或 *</td></tr><tr><td>DEGREES(x)</td><td>将弧度转换为角度</td></tr><tr><td>EXP(x)</td><td>返回 e 的 x 次方</td></tr><tr><td>FLOOR(x)</td><td>返回小于或等于 x 的最大整数</td></tr><tr><td>GREATEST(expr1, expr2, expr3, ...)</td><td>返回列表中的最大值</td></tr><tr><td>LEAST(expr1, expr2, expr3, ...)</td><td>返回列表中的最小值</td></tr><tr><td><a href="https://www.runoob.com/mysql/func_mysql_ln.asp" target="_blank" rel="noreferrer">LN</a></td><td>返回数字的自然对数</td></tr><tr><td>LOG(x)</td><td>返回自然对数(以 e 为底的对数)</td></tr><tr><td>LOG10(x)</td><td>返回以 10 为底的对数</td></tr><tr><td>LOG2(x)</td><td>返回以 2 为底的对数</td></tr><tr><td>MAX(expression)</td><td>返回字段 expression 中的最大值</td></tr><tr><td>MIN(expression)</td><td>返回字段 expression 中的最小值</td></tr><tr><td>MOD(x,y)</td><td>返回 x 除以 y 以后的余数</td></tr><tr><td>PI()</td><td>返回圆周率(3.141593）</td></tr><tr><td>POW(x,y)</td><td>返回 x 的 y 次方</td></tr><tr><td>POWER(x,y)</td><td>返回 x 的 y 次方</td></tr><tr><td>RADIANS(x)</td><td>将角度转换为弧度</td></tr><tr><td>RAND()</td><td>返回 0 到 1 的随机数</td></tr><tr><td>ROUND(x)</td><td>返回离 x 最近的整数</td></tr><tr><td>SIGN(x)</td><td>返回 x 的符号，返回 -1、0 和 1</td></tr><tr><td>SIN(x)</td><td>求正弦值(参数是弧度)</td></tr><tr><td>SQRT(x)</td><td>返回x的平方根</td></tr><tr><td>SUM(expression)</td><td>返回指定字段的总和</td></tr><tr><td>TAN(x)</td><td>求正切值(参数是弧度)</td></tr><tr><td>TRUNCATE(x,y)</td><td>返回数值 x 保留到小数点后 y 位的值</td></tr></tbody></table><h3 id="日期函数" tabindex="-1">日期函数 <a class="header-anchor" href="#日期函数" aria-hidden="true">#</a></h3><table><thead><tr><th>函数名</th><th>描述</th></tr></thead><tbody><tr><td>ADDDATE(d,n)</td><td>计算起始日期 d 加上 n 天的日期</td></tr><tr><td>ADDTIME(t,n)</td><td>时间 t 加上 n 秒的时间</td></tr><tr><td>CURDATE()</td><td>返回当前日期</td></tr><tr><td>CURRENT_DATE()</td><td>返回当前日期</td></tr><tr><td>CURRENT_TIME</td><td>返回当前时间</td></tr><tr><td>CURRENT_TIMESTAMP()</td><td>返回当前日期和时间</td></tr><tr><td>CURTIME()</td><td>返回当前时间</td></tr><tr><td>DATE()</td><td>从日期或日期时间表达式中提取日期值</td></tr><tr><td>DATEDIFF(d1,d2)</td><td>计算日期 d1-&gt;d2 之间相隔的天数</td></tr><tr><td>DATE_ADD(d，INTERVAL expr type)</td><td>计算起始日期 d 加上一个时间段后的日期</td></tr><tr><td>DATE_FORMAT(d,f)</td><td>按表达式 f的要求显示日期 d</td></tr><tr><td>DATE_SUB(date,INTERVAL expr type)</td><td>函数从日期减去指定的时间间隔。</td></tr><tr><td>DAY(d)</td><td>返回日期值 d 的日期部分</td></tr><tr><td>DAYNAME(d)</td><td>返回日期 d 是星期几，如 Monday,Tuesday</td></tr><tr><td>DAYOFMONTH(d)</td><td>计算日期 d 是本月的第几天</td></tr><tr><td>DAYOFWEEK(d)</td><td>日期 d 今天是星期几，1 星期日，2 星期一，以此类推</td></tr><tr><td>DAYOFYEAR(d)</td><td>计算日期 d 是本年的第几天</td></tr><tr><td>EXTRACT(type FROM d)</td><td>从日期 d 中获取指定的值，type 指定返回的值。 type可取值为： MICROSECOND SECOND MINUTE HOUR DAY WEEK MONTH QUARTER YEAR SECOND_MICROSECOND MINUTE_MICROSECOND MINUTE_SECOND HOUR_MICROSECOND HOUR_SECOND HOUR_MINUTE DAY_MICROSECOND DAY_SECOND DAY_MINUTE DAY_HOUR YEAR_MONTH</td></tr><tr><td>FROM_DAYS(n)</td><td>计算从 0000 年 1 月 1 日开始 n 天后的日期</td></tr><tr><td>HOUR(t)</td><td>返回 t 中的小时值</td></tr><tr><td>LAST_DAY(d)</td><td>返回给给定日期的那一月份的最后一天</td></tr><tr><td>LOCALTIME()</td><td>返回当前日期和时间</td></tr><tr><td>LOCALTIMESTAMP()</td><td>返回当前日期和时间</td></tr><tr><td>MAKEDATE(year, day-of-year)</td><td>基于给定参数年份 year 和所在年中的天数序号 day-of-year 返回一个日期</td></tr><tr><td>MAKETIME(hour, minute, second)</td><td>组合时间，参数分别为小时、分钟、秒</td></tr><tr><td>MICROSECOND(date)</td><td>返回日期参数所对应的微秒数</td></tr><tr><td>MINUTE(t)</td><td>返回 t 中的分钟值</td></tr><tr><td>MONTHNAME(d)</td><td>返回日期当中的月份名称，如 November</td></tr><tr><td>MONTH(d)</td><td>返回日期d中的月份值，1 到 12</td></tr><tr><td>NOW()</td><td>返回当前日期和时间</td></tr><tr><td>PERIOD_ADD(period, number)</td><td>为 年-月 组合日期添加一个时段</td></tr><tr><td>PERIOD_DIFF(period1, period2)</td><td>返回两个时段之间的月份差值</td></tr><tr><td>QUARTER(d)</td><td>返回日期d是第几季节，返回 1 到 4</td></tr><tr><td>SECOND(t)</td><td>返回 t 中的秒钟值</td></tr><tr><td>SEC_TO_TIME(s)</td><td>将以秒为单位的时间 s 转换为时分秒的格式</td></tr><tr><td>STR_TO_DATE(string, format_mask)</td><td>将字符串转变为日期</td></tr><tr><td>SUBDATE(d,n)</td><td>日期 d 减去 n 天后的日期</td></tr><tr><td>SUBTIME(t,n)</td><td>时间 t 减去 n 秒的时间</td></tr><tr><td>SYSDATE()</td><td>返回当前日期和时间</td></tr><tr><td>TIME(expression)</td><td>提取传入表达式的时间部分</td></tr><tr><td>TIME_FORMAT(t,f)</td><td>按表达式 f 的要求显示时间 t</td></tr><tr><td>TIME_TO_SEC(t)</td><td>将时间 t 转换为秒</td></tr><tr><td>TIMEDIFF(time1, time2)</td><td>计算时间差值</td></tr><tr><td>TIMESTAMP(expression, interval)</td><td>单个参数时，函数返回日期或日期时间表达式；有2个参数时，将参数加和</td></tr><tr><td>TO_DAYS(d)</td><td>计算日期 d 距离 0000 年 1 月 1 日的天数</td></tr><tr><td>WEEK(d)</td><td>计算日期 d 是本年的第几个星期，范围是 0 到 53</td></tr><tr><td>WEEKDAY(d)</td><td>日期 d 是星期几，0 表示星期一，1 表示星期二</td></tr><tr><td>WEEKOFYEAR(d)</td><td>计算日期 d 是本年的第几个星期，范围是 0 到 53</td></tr><tr><td>YEAR(d)</td><td>返回年份</td></tr><tr><td>YEARWEEK(date, mode)</td><td>返回年份及第几周（0到53），mode 中 0 表示周天，1表示周一，以此类推</td></tr></tbody></table><h3 id="高级函数" tabindex="-1">高级函数 <a class="header-anchor" href="#高级函数" aria-hidden="true">#</a></h3><table><thead><tr><th>函数名</th><th>描述</th></tr></thead><tbody><tr><td>BIN(x)</td><td>返回 x 的二进制编码</td></tr><tr><td>BINARY(s)</td><td>将字符串 s 转换为二进制字符串</td></tr><tr><td>CAST(x AS type)</td><td>转换数据类型</td></tr><tr><td>COALESCE(expr1, expr2, ...., expr_n)</td><td>返回参数中的第一个非空表达式（从左向右）</td></tr><tr><td>CONNECTION_ID()</td><td>返回服务器的连接数</td></tr><tr><td>CONV(x,f1,f2)</td><td>返回 f1 进制数变成 f2 进制数</td></tr><tr><td>CONVERT(s USING cs)</td><td>函数将字符串 s 的字符集变成 cs</td></tr><tr><td>CURRENT_USER()</td><td>返回当前用户</td></tr><tr><td>DATABASE()</td><td>返回当前数据库名</td></tr><tr><td>IF(expr,v1,v2)</td><td>如果表达式 expr 成立，返回 v1；否则，返回 v2。</td></tr><tr><td>IFNULL(v1,v2)</td><td>如果 v1 的值不为 NULL，则返回 v1，否则返回 v2。</td></tr><tr><td>ISNULL(expression)</td><td>判断表达式是否为 NULL</td></tr><tr><td>LAST_INSERT_ID()</td><td>返回最近生成的 AUTO_INCREMENT 值</td></tr><tr><td>NULLIF(expr1, expr2)</td><td>比较两个字符串，如果字符串 expr1 与 expr2 相等 返回 NULL，否则返回 expr1</td></tr><tr><td>SESSION_USER()</td><td>返回当前用户</td></tr><tr><td>SYSTEM_USER()</td><td>返回当前用户</td></tr><tr><td>USER()</td><td>返回当前用户</td></tr><tr><td>VERSION()</td><td>返回数据库的版本号</td></tr></tbody></table><p>窗口函数</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">Windows_function(expression)</span></span>
<span class="line"><span style="color:#F78C6C;">OVER</span><span style="color:#A6ACCD;"> (</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">PARTITION</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">BY</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">ORDER BY</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    frame_clause </span><span style="color:#89DDFF;">&lt;&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="/Notes/assets/1643807412345-b887f2d6-a886-4663-9c19-ab144cc6e4b9.762cf244.png" alt=""></p><h2 id="备份还原" tabindex="-1">备份还原 <a class="header-anchor" href="#备份还原" aria-hidden="true">#</a></h2><h3 id="导入数据" tabindex="-1">导入数据 <a class="header-anchor" href="#导入数据" aria-hidden="true">#</a></h3><p>**MySQL **</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">mysql </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">u username </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">P [dbname] </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">filename</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">sql</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>Source</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">database</span><span style="color:#A6ACCD;"> abc;      # 创建数据库</span></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">use</span><span style="color:#A6ACCD;"> abc;                  # 使用已创建的数据库 </span></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> names utf8;           # 设置编码</span></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> source </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">home</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">abc</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">abc.sql  # 导入备份数据库</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>**LOAD DATA **</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">LOAD</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATA</span><span style="color:#A6ACCD;"> [LOCAL] INFILE 文件地址 </span><span style="color:#F78C6C;">INTO</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TABLE</span><span style="color:#A6ACCD;">  [replace|ignore] </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">table_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> [(colmun1, )] [控制格式]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">生成的数据默认的分隔符是制表符</span></span>
<span class="line"><span style="color:#A6ACCD;">local未指定，则数据文件必须在服务器上</span></span>
<span class="line"><span style="color:#82AAFF;">replace</span><span style="color:#A6ACCD;"> 和 ignore 关键词控制对现有的唯一键记录的重复的处理</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- 控制格式</span></span>
<span class="line"><span style="color:#A6ACCD;">fields  控制字段格式</span></span>
<span class="line"><span style="color:#A6ACCD;">默认：fields terminated </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\t</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> enclosed </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;"> escaped </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\\</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    terminated </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">-- 终止</span></span>
<span class="line"><span style="color:#A6ACCD;">    enclosed </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">char</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">      </span><span style="color:#676E95;">-- 包裹</span></span>
<span class="line"><span style="color:#A6ACCD;">    escaped </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">char</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">       </span><span style="color:#676E95;">-- 转义</span></span>
<span class="line"><span style="color:#A6ACCD;">lines   控制行格式</span></span>
<span class="line"><span style="color:#A6ACCD;">默认：lines terminated </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\n</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    terminated </span><span style="color:#F78C6C;">by</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;">-- 终止</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#676E95;">-- 示例：</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> a,b,a</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">b </span><span style="color:#F78C6C;">INTO</span><span style="color:#A6ACCD;"> OUTFILE </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/tmp/result.text</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    FIELDS TERMINATED </span><span style="color:#F78C6C;">BY</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> OPTIONALLY ENCLOSED </span><span style="color:#F78C6C;">BY</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    LINES TERMINATED </span><span style="color:#F78C6C;">BY</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\n</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> test_table;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><strong>mysqlimport</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">$ mysqlimport </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">u </span><span style="color:#F78C6C;">root</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p </span><span style="color:#676E95;">--local table dump.txt</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-d or --delete</td><td>新数据导入数据表中之前删除数据数据表中的所有信息</td></tr><tr><td>-f or --force</td><td>不管是否遇到错误，mysqlimport将强制继续插入数据</td></tr><tr><td>-i or --ignore</td><td>mysqlimport跳过或者忽略那些有相同唯一 关键字的行， 导入文件中的数据将被忽略。</td></tr><tr><td>-l or -lock-tables</td><td>数据被插入之前锁住表，这样就防止了， 你在更新数据库时，用户的查询和更新受到影响。</td></tr><tr><td>-r or -replace</td><td>这个选项与－i选项的作用相反；此选项将替代 表中有相同唯一关键字的记录。</td></tr><tr><td>--fields-enclosed- by= char</td><td>指定文本文件中数据的记录时以什么括起的， 很多情况下 数据以双引号括起。 默认的情况下数据是没有被字符括起的。</td></tr><tr><td>--fields-terminated- by=char</td><td>指定各个数据的值之间的分隔符，在句号分隔的文件中， 分隔符是句号。您可以用此选项指定数据之间的分隔符。 默认的分隔符是跳格符（Tab）</td></tr><tr><td>--lines-terminated- by=str</td><td>此选项指定文本文件中行与行之间数据的分隔字符串 或者字符。 默认的情况下mysqlimport以newline为行分隔符。 您可以选择用一个字符串来替代一个单个的字符： 一个新行或者一个回车。</td></tr></tbody></table><h3 id="导出数据" tabindex="-1">导出数据 <a class="header-anchor" href="#导出数据" aria-hidden="true">#</a></h3><p><strong>INTO OUTFILE</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">table_name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INTO</span><span style="color:#A6ACCD;"> OUTFILE  文件地址 [控制格式]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- 控制格式</span></span>
<span class="line"><span style="color:#A6ACCD;">[ FIELDS TERMINATED </span><span style="color:#F78C6C;">BY</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> ENCLOSED </span><span style="color:#F78C6C;">BY</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">LINES TERMINATED </span><span style="color:#F78C6C;">BY</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\r\n</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> ]</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>输出不能是一个已存在的文件，防止文件数据被篡改。</li></ul><p><strong>mysqldump</strong></p><ul><li>mysqldump -u username -p dbname [tbname ...] &gt; filename.sql</li><li>导出所有数据库：mysqldump -uroot -p --all-databases &gt;filename.sql</li><li>条件导出，导出db1表a1中id=1的数据：mysqldump -uroot -p --databases db1 --tables a1 --where=&#39;id=1&#39; &gt;filename.sql</li><li>只导出表结构不导出数据：mysqldump -uroot -p --no-data --databases db1 &gt;filename.sql</li></ul><h2 id="日志" tabindex="-1">日志 <a class="header-anchor" href="#日志" aria-hidden="true">#</a></h2><ul><li>二进制日志（Binary Log），变更日志（Update Log）：该日志文件会以二进制的形式记录数据库的各种操作，但不记录查询语句。</li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">[mysqld]</span></span>
<span class="line"><span style="color:#82AAFF;">log</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">bin</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">dir</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">[filename]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--查看二进制日志是否开启</span></span>
<span class="line"><span style="color:#A6ACCD;">SHOW VARIABLES </span><span style="color:#F78C6C;">LIKE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">log_bin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;">--查看二进制日志文件列表</span></span>
<span class="line"><span style="color:#A6ACCD;">SHOW </span><span style="color:#F78C6C;">binary</span><span style="color:#A6ACCD;"> logs;</span></span>
<span class="line"><span style="color:#676E95;">--查看当前正在写入的二进制日志文件</span></span>
<span class="line"><span style="color:#A6ACCD;">SHOW </span><span style="color:#F78C6C;">master</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">status</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#676E95;">--删除所有二进制日志</span></span>
<span class="line"><span style="color:#F78C6C;">RESET</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">MASTER</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--二进制日志还原数据库</span></span>
<span class="line"><span style="color:#A6ACCD;">mysqlbinlog </span><span style="color:#F78C6C;">filename</span><span style="color:#A6ACCD;">.</span><span style="color:#C792EA;">number</span><span style="color:#A6ACCD;"> | mysql </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">u </span><span style="color:#F78C6C;">root</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>错误日志（Error Log）：该日志文件会记录 MySQL 服务器的启动、关闭和运行错误等信息。</li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">[mysqld]</span></span>
<span class="line"><span style="color:#82AAFF;">log</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">error</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">dir</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">{</span><span style="color:#F78C6C;">filename</span><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">SHOW VARIABLES </span><span style="color:#F78C6C;">LIKE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">log_error</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">--开启新的错误日志</span></span>
<span class="line"><span style="color:#A6ACCD;">mysqladmin </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">uroot </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p flush</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">logs</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>通用查询日志（General Query Log）：记录 MySQL 服务器的启动和关闭信息、客户端的连接信息、更新、查询数据记录的 SQL 语句等。</li><li>慢查询日志：记录执行事件超过指定时间的操作，通过工具分析慢查询日志可以定位 MySQL 服务器性能瓶颈所在。</li></ul><h2 id="注释" tabindex="-1">注释 <a class="header-anchor" href="#注释" aria-hidden="true">#</a></h2><p><strong>单行注释：--，#</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">    # This </span><span style="color:#F78C6C;">is</span><span style="color:#A6ACCD;"> a comment</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> users; </span><span style="color:#676E95;">-- This is a comment</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>-- 后应有控制字符(空格，制表符，换行符等)。 <br> 标准SQL在第二个破折号后不需要空白， MySQL使用空白来避免某些SQL构造的问题，如：SELECT 10--1;</p><p><strong>多行注释：/_ _/</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#676E95;">/*</span></span>
<span class="line"><span style="color:#676E95;">    comment</span></span>
<span class="line"><span style="color:#676E95;">*/</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="变量" tabindex="-1">变量 <a class="header-anchor" href="#变量" aria-hidden="true">#</a></h2><ul><li>用户变量：以&quot;@&quot;开始，形式为&quot;@变量名&quot;，无需声明。</li><li>全局变量：定义有两种形式，set GLOBAL 变量名 或 set @@global.变量名，对所有客户端生效。具有super权限才可设置</li><li>会话变量：仅限于当前连接</li><li>局部变量：作用范围在begin到end语句块之间。在该语句块里设置的变量。</li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#676E95;">-- 声明</span></span>
<span class="line"><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> var_name [, var_name]... data_type [ DEFAULT value ]; </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- 声明&amp;赋值</span></span>
<span class="line"><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> var_name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> expr [, var_name=expr]  # </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> , :</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 均可</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> var_name :</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">value</span><span style="color:#A6ACCD;"> [| statement]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">col_name</span><span style="color:#A6ACCD;">[,...] </span><span style="color:#F78C6C;">INTO</span><span style="color:#A6ACCD;"> var_name[,...] table_expr [where...];</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>declare语句专门用于定义局部变量，初始化为null。 <br> set语句是设置不同类型的变量，包括会话变量和全局变量</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">show [session] variables;</span></span>
<span class="line"><span style="color:#A6ACCD;">show </span><span style="color:#F78C6C;">global</span><span style="color:#A6ACCD;"> variables</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="function-procedure" tabindex="-1">FUNCTION &amp; PROCEDURE <a class="header-anchor" href="#function-procedure" aria-hidden="true">#</a></h2><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">CREATE</span></span>
<span class="line"><span style="color:#A6ACCD;">    [DEFINER = user]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">PROCEDURE</span><span style="color:#A6ACCD;"> sp_name ([proc_parameter[,...]])</span></span>
<span class="line"><span style="color:#A6ACCD;">    [characteristic ...] routine_body</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">CREATE</span></span>
<span class="line"><span style="color:#A6ACCD;">    [DEFINER = user]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">FUNCTION</span><span style="color:#A6ACCD;"> sp_name ([func_parameter[,...]])</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">RETURNS</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">type</span></span>
<span class="line"><span style="color:#A6ACCD;">    [characteristic ...] routine_body</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">proc_parameter:</span></span>
<span class="line"><span style="color:#A6ACCD;">    [ IN | OUT | INOUT ] param_name </span><span style="color:#F78C6C;">type</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"># </span><span style="color:#F78C6C;">IN</span><span style="color:#A6ACCD;">：表示该参数的值必须在调用存储过程时指定</span></span>
<span class="line"><span style="color:#A6ACCD;"># </span><span style="color:#F78C6C;">OUT</span><span style="color:#A6ACCD;">：表示该参数的值可以被存储过程改变,并且可以返回</span></span>
<span class="line"><span style="color:#A6ACCD;"># INOUT：表示该参数的调用时指定,并且可以被改变和返回</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">func_parameter:</span></span>
<span class="line"><span style="color:#A6ACCD;">    param_name </span><span style="color:#F78C6C;">type</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">type</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    Any valid MySQL </span><span style="color:#F78C6C;">data</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">type</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">characteristic:</span></span>
<span class="line"><span style="color:#A6ACCD;">    COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">  | </span><span style="color:#F78C6C;">LANGUAGE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SQL</span></span>
<span class="line"><span style="color:#A6ACCD;">  | [NOT] DETERMINISTIC</span></span>
<span class="line"><span style="color:#A6ACCD;">  | { CONTAINS </span><span style="color:#F78C6C;">SQL</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">NO</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SQL</span><span style="color:#A6ACCD;"> | READS </span><span style="color:#F78C6C;">SQL</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATA</span><span style="color:#A6ACCD;"> | MODIFIES </span><span style="color:#F78C6C;">SQL</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATA</span><span style="color:#A6ACCD;"> }</span></span>
<span class="line"><span style="color:#A6ACCD;">  | </span><span style="color:#F78C6C;">SQL</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SECURITY</span><span style="color:#A6ACCD;"> { DEFINER | INVOKER }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">routine_body:</span></span>
<span class="line"><span style="color:#A6ACCD;">    Valid </span><span style="color:#F78C6C;">SQL</span><span style="color:#A6ACCD;"> routine </span><span style="color:#F78C6C;">statement</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#676E95;">-- 过程的使用</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">CALL</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">procedure_name</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- 删除</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FUNCTION</span><span style="color:#A6ACCD;"> [IF EXISTS] function_name;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- 查看</span></span>
<span class="line"><span style="color:#A6ACCD;">    SHOW </span><span style="color:#F78C6C;">FUNCTION</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">STATUS</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">LIKE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">partten</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    SHOW </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FUNCTION</span><span style="color:#A6ACCD;"> function_name;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- 修改</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FUNCTION</span><span style="color:#A6ACCD;"> func_name [characteristic ...]</span></span>
<span class="line"><span style="color:#A6ACCD;">characteristic:</span></span>
<span class="line"><span style="color:#A6ACCD;">    COMMENT </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">    | </span><span style="color:#F78C6C;">LANGUAGE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SQL</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">    | { CONTAINS </span><span style="color:#F78C6C;">SQL</span><span style="color:#A6ACCD;"> | </span><span style="color:#F78C6C;">NO</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SQL</span><span style="color:#A6ACCD;"> | READS </span><span style="color:#F78C6C;">SQL</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATA</span><span style="color:#A6ACCD;"> | MODIFIES </span><span style="color:#F78C6C;">SQL</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DATA</span><span style="color:#A6ACCD;"> }  </span></span>
<span class="line"><span style="color:#A6ACCD;">    | </span><span style="color:#F78C6C;">SQL</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SECURITY</span><span style="color:#A6ACCD;"> { DEFINER | INVOKER }</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><p>示例</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FUNCTION</span><span style="color:#A6ACCD;"> hello (s </span><span style="color:#F78C6C;">CHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">RETURNS</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">) DETERMINISTIC</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">RETURN</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CONCAT</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">,s,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">!</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> hello(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">world</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">delimiter </span><span style="color:#89DDFF;">//</span></span>
<span class="line"><span style="color:#A6ACCD;"># 函数</span></span>
<span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">function</span><span style="color:#A6ACCD;"> f1(</span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">),score </span><span style="color:#F78C6C;">int</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">returns</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">int</span><span style="color:#A6ACCD;"> deterministic</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">insert</span><span style="color:#A6ACCD;"> ut(</span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">,score) </span><span style="color:#F78C6C;">value</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">name</span><span style="color:#A6ACCD;">,score);</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">return</span><span style="color:#A6ACCD;"> last_insert_id</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">end</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">//</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;"> </span><span style="color:#A6ACCD;"># 过程</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">procedure</span><span style="color:#A6ACCD;"> p1(</span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;"> z </span><span style="color:#F78C6C;">int</span><span style="color:#A6ACCD;">,</span><span style="color:#F78C6C;">out</span><span style="color:#A6ACCD;"> n </span><span style="color:#F78C6C;">int</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">begin</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">delete</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> ut </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> z</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">id;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">select</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">count</span><span style="color:#A6ACCD;">(id) </span><span style="color:#F78C6C;">from</span><span style="color:#A6ACCD;"> ut </span><span style="color:#F78C6C;">into</span><span style="color:#A6ACCD;"> n;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">end</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ul><li>存储过程实现的功能要复杂一些；而函数的针对性更强</li><li>存储过程可以返回多个值；函数只能有一个返回值</li><li>存储过程一般独立的来执行；而函数可以作为其他SQL语句的组成部分来出现。</li></ul><h2 id="流程控制" tabindex="-1">流程控制 <a class="header-anchor" href="#流程控制" aria-hidden="true">#</a></h2><h3 id="if-then-else" tabindex="-1">IF-THEN-ELSE <a class="header-anchor" href="#if-then-else" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">IF</span><span style="color:#A6ACCD;"> expression </span><span style="color:#F78C6C;">THEN</span></span>
<span class="line"><span style="color:#A6ACCD;">   statements;</span></span>
<span class="line"><span style="color:#A6ACCD;">[[ELSEIF expression </span><span style="color:#F78C6C;">THEN</span></span>
<span class="line"><span style="color:#A6ACCD;">   statements;  ...]</span></span>
<span class="line"><span style="color:#F78C6C;">ELSE</span></span>
<span class="line"><span style="color:#A6ACCD;">   statements;]</span></span>
<span class="line"><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">IF</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>-- e.g.</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">DELIMITER $$</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">PROCEDURE</span><span style="color:#A6ACCD;"> GetCustomerLevel(</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;">  p_customerNumber </span><span style="color:#F78C6C;">int</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">11</span><span style="color:#A6ACCD;">), </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">out</span><span style="color:#A6ACCD;"> p_customerLevel  </span><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#F78C6C;">BEGIN</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> creditlim double;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> creditlimit </span><span style="color:#F78C6C;">INTO</span><span style="color:#A6ACCD;"> creditlim</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> customers</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> customerNumber </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p_customerNumber;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">IF</span><span style="color:#A6ACCD;"> creditlim </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">50000</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">THEN</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> p_customerLevel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">PLATINUM</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    ELSEIF (creditlim </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">50000</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">AND</span><span style="color:#A6ACCD;"> creditlim </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10000</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">THEN</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> p_customerLevel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GOLD</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    ELSEIF creditlim </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10000</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">THEN</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> p_customerLevel </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">SILVER</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">IF</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="case-when-else" tabindex="-1">CASE-WHEN-ELSE <a class="header-anchor" href="#case-when-else" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">CASE</span><span style="color:#A6ACCD;"> case_value</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">WHEN</span><span style="color:#A6ACCD;"> when_value </span><span style="color:#F78C6C;">THEN</span><span style="color:#A6ACCD;"> statement_list</span></span>
<span class="line"><span style="color:#A6ACCD;">    [WHEN when_value THEN statement_list] ... </span></span>
<span class="line"><span style="color:#A6ACCD;">    [ELSE statement_list]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CASE</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#F78C6C;">Or</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#F78C6C;">CASE</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">WHEN</span><span style="color:#A6ACCD;"> search_condition </span><span style="color:#F78C6C;">THEN</span><span style="color:#A6ACCD;"> statement_list</span></span>
<span class="line"><span style="color:#A6ACCD;">    [WHEN search_condition THEN statement_list] ...    </span></span>
<span class="line"><span style="color:#A6ACCD;">    [ELSE statement_list]</span></span>
<span class="line"><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CASE</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>-- e.g.</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">DELIMITER $$</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">PROCEDURE</span><span style="color:#A6ACCD;"> GetCustomerShipping(</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">in</span><span style="color:#A6ACCD;">  p_customerNumber </span><span style="color:#F78C6C;">int</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">11</span><span style="color:#A6ACCD;">), </span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">out</span><span style="color:#A6ACCD;"> p_shiping        </span><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#F78C6C;">BEGIN</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> customerCountry </span><span style="color:#F78C6C;">varchar</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> country </span><span style="color:#F78C6C;">INTO</span><span style="color:#A6ACCD;"> customerCountry</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> customers</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> customerNumber </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> p_customerNumber;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">CASE</span><span style="color:#A6ACCD;"> customerCountry</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">WHEN</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">USA</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">THEN</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> p_shiping </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">2-day Shipping</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">WHEN</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Canada</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">THEN</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> p_shiping </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">3-day Shipping</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ELSE</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> p_shiping </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">5-day Shipping</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CASE</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;">$$</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="while" tabindex="-1">WHILE <a class="header-anchor" href="#while" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">WHILE</span><span style="color:#A6ACCD;"> expression DO</span></span>
<span class="line"><span style="color:#A6ACCD;">   statements</span></span>
<span class="line"><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">WHILE</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>-- e.g.</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">DELIMITER $$</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">PROCEDURE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">IF</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">EXISTS</span><span style="color:#A6ACCD;"> test_mysql_while_loop$$</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">PROCEDURE</span><span style="color:#A6ACCD;"> test_mysql_while_loop</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">BEGIN</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> x  </span><span style="color:#F78C6C;">INT</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">str</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">255</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">str</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">WHILE</span><span style="color:#A6ACCD;"> x  </span><span style="color:#89DDFF;">&lt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;"> DO</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">str</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CONCAT</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">str</span><span style="color:#A6ACCD;">,x,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;">  x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> x </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">; </span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">WHILE</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">str</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;">$$</span></span>
<span class="line"><span style="color:#A6ACCD;">DELIMITER ;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="repeat" tabindex="-1">REPEAT <a class="header-anchor" href="#repeat" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">REPEAT</span></span>
<span class="line"><span style="color:#A6ACCD;"> statements;</span></span>
<span class="line"><span style="color:#A6ACCD;">UNTIL expression</span></span>
<span class="line"><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">REPEAT</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>e.g</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;">DELIMITER $$</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">PROCEDURE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">IF</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">EXISTS</span><span style="color:#A6ACCD;"> mysql_test_repeat_loop$$</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">PROCEDURE</span><span style="color:#A6ACCD;"> mysql_test_repeat_loop</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">BEGIN</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> x </span><span style="color:#F78C6C;">INT</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">str</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">255</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">str</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">REPEAT</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">str</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CONCAT</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">str</span><span style="color:#A6ACCD;">,x,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;">  x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> x </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">; </span></span>
<span class="line"><span style="color:#A6ACCD;">        UNTIL x  </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">REPEAT</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">str</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;">$$</span></span>
<span class="line"><span style="color:#A6ACCD;">DELIMITER ;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="loop" tabindex="-1">LOOP <a class="header-anchor" href="#loop" aria-hidden="true">#</a></h3><p><strong>LEAVE</strong>语句：立即退出循环，而无需等待检查条件。 <br> <strong>ITERATE</strong>语句：跳过剩下的整个代码并开始新的迭代。 <br> <strong>LOOP</strong>语句：反复执行一个代码块，可用循环标签</p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">PROCEDURE</span><span style="color:#A6ACCD;"> test_mysql_loop</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">BEGIN</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> x  </span><span style="color:#F78C6C;">INT</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">DECLARE</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">str</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">VARCHAR</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">255</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">str</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> loop_label:  </span><span style="color:#F78C6C;">LOOP</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">IF</span><span style="color:#A6ACCD;">  x </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">THEN</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;"> LEAVE  loop_label;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">IF</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;">  x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> x </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">IF</span><span style="color:#A6ACCD;"> (x mod </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">THEN</span></span>
<span class="line"><span style="color:#A6ACCD;">     ITERATE  loop_label;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">ELSE</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">str</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CONCAT</span><span style="color:#A6ACCD;">(</span><span style="color:#82AAFF;">str</span><span style="color:#A6ACCD;">,x,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">IF</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">LOOP</span><span style="color:#A6ACCD;">;    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">str</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#F78C6C;">END</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="存储引擎" tabindex="-1">存储引擎 <a class="header-anchor" href="#存储引擎" aria-hidden="true">#</a></h2><p>将数据以不同的技术存储在文件(内存)中 <br> 每一种存储引擎使用不同的存储机制、索引技巧、锁定水平,最终提供广泛且不同的功能。</p><ul><li>SHOW ENGINES -- 显示存储引擎的状态信息</li><li>SHOW ENGINE 引擎名 {LOGS|STATUS} -- 显示存储引擎的日志或状态信息</li><li>SET default_storage_engine = &lt; 存储引擎名 &gt;</li></ul><p>MySQL支持的存储引擎</p><ul><li>MyISAM</li><li>nnoDB</li><li>Memory</li><li>CSV</li><li>Archive</li></ul><p><img src="/Notes/assets/1643807412450-91d601c6-1248-4302-9987-335df6140a29.d02e7d0a.png" alt=""></p><h2 id="用户管理" tabindex="-1">用户管理 <a class="header-anchor" href="#用户管理" aria-hidden="true">#</a></h2><h3 id="mysql-user" tabindex="-1">mysql.user <a class="header-anchor" href="#mysql-user" aria-hidden="true">#</a></h3><p><strong>用户列</strong></p><table><thead><tr><th>字段名</th><th>字段类型</th><th>是否为空</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>Host</td><td>char(60)</td><td>NO</td><td>无</td><td>主机名</td></tr><tr><td>User</td><td>char(32)</td><td>NO</td><td>无</td><td>用户名</td></tr><tr><td>authentication_string</td><td>text</td><td>YES</td><td>无</td><td>密码</td></tr></tbody></table><p><strong>权限列</strong> <br> 字段类型 enum(&#39;N&#39;,&#39;Y&#39;)，默认值均 N</p><table><thead><tr><th>字段名</th><th>说明</th></tr></thead><tbody><tr><td>Select_priv</td><td>是否可以通过SELECT 命令查询数据</td></tr><tr><td>Insert_priv</td><td>是否可以通过 INSERT 命令插入数据</td></tr><tr><td>Update_priv</td><td>是否可以通过UPDATE 命令修改现有数据</td></tr><tr><td>Delete_priv</td><td>是否可以通过DELETE 命令删除现有数据</td></tr><tr><td>Create_priv</td><td>是否可以创建新的数据库和表</td></tr><tr><td>Drop_priv</td><td>是否可以删除现有数据库和表</td></tr><tr><td>Reload_priv</td><td>是否可以执行刷新和重新加载MySQL所用的各种内部缓存的特定命令，包括日志、权限、主机、查询和表</td></tr><tr><td>Shutdown_priv</td><td>是否可以关闭MySQL服务器。将此权限提供给root账户之外的任何用户时，都应当非常谨慎</td></tr><tr><td>Process_priv</td><td>是否可以通过SHOW PROCESSLIST命令查看其他用户的进程</td></tr><tr><td>File_priv</td><td>是否可以执行SELECT INTO OUTFILE和LOAD DATA INFILE命令</td></tr><tr><td>Grant_priv</td><td>是否可以将自己的权限再授予其他用户</td></tr><tr><td>References_priv</td><td>是否可以创建外键约束</td></tr><tr><td>Index_priv</td><td>是否可以对索引进行增删查</td></tr><tr><td>Alter_priv</td><td>是否可以重命名和修改表结构</td></tr><tr><td>Show_db_priv</td><td>是否可以查看服务器上所有数据库的名字，包括用户拥有足够访问权限的数据库</td></tr><tr><td>Super_priv</td><td>是否可以执行某些强大的管理功能，例如通过KILL命令删除用户进程；使用SET GLOBAL命令修改全局MySQL变量，执行关于复制和日志的各种命令。（超级权限）</td></tr><tr><td>Create_tmp_table_priv</td><td>是否可以创建临时表</td></tr><tr><td>Lock_tables_priv</td><td>是否可以使用LOCK TABLES命令阻止对表的访问/修改</td></tr><tr><td>Execute_priv</td><td>是否可以执行存储过程</td></tr><tr><td>Repl_slave_priv</td><td>是否可以读取用于维护复制数据库环境的二进制日志文件</td></tr><tr><td>Repl_client_priv</td><td>是否可以确定复制从服务器和主服务器的位置</td></tr><tr><td>Create_view_priv</td><td>是否可以创建视图</td></tr><tr><td>Show_view_priv</td><td>是否可以查看视图</td></tr><tr><td>Create_routine_priv</td><td>是否可以更改或放弃存储过程和函数</td></tr><tr><td>Alter_routine_priv</td><td>是否可以修改或删除存储函数及函数</td></tr><tr><td>Create_user_priv</td><td>是否可以执行CREATE USER命令，这个命令用于创建新的MySQL账户</td></tr><tr><td>Event_priv</td><td>是否可以创建、修改和删除事件</td></tr><tr><td>Trigger_priv</td><td>是否可以创建和删除触发器</td></tr><tr><td>Create_tablespace_priv</td><td>是否可以创建表空间</td></tr></tbody></table><p><strong>安全列</strong> <br> 用来判断用户是否能够登录成功</p><table><thead><tr><th>字段名</th><th>字段类型</th><th>是否为空</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>ssl_type</td><td>enum(&#39;&#39;,&#39;ANY&#39;,&#39;X509&#39;,&#39;SPECIFIED&#39;)</td><td>NO</td><td></td><td>支持ssl标准加密安全字段</td></tr><tr><td>ssl_cipher</td><td>blob</td><td>NO</td><td></td><td>支持ssl标准加密安全字段</td></tr><tr><td>x509_issuer</td><td>blob</td><td>NO</td><td></td><td>支持x509标准字段</td></tr><tr><td>x509_subject</td><td>blob</td><td>NO</td><td></td><td>支持x509标准字段</td></tr><tr><td>plugin</td><td>char(64)</td><td>NO</td><td>mysql_native_password</td><td>引入plugins以进行用户连接时的密码验证，plugin创建外部/代理用户</td></tr><tr><td>password_expired</td><td>enum(&#39;N&#39;,&#39;Y&#39;)</td><td>NO</td><td>N</td><td>密码是否过期 (N 未过期，y 已过期)</td></tr><tr><td>password_last_changed</td><td>timestamp</td><td>YES</td><td></td><td>记录密码最近修改的时间</td></tr><tr><td>password_lifetime</td><td>smallint(5) unsigned</td><td>YES</td><td></td><td>设置密码的有效时间，单位为天数</td></tr><tr><td>account_locked</td><td>enum(&#39;N&#39;,&#39;Y&#39;)</td><td>NO</td><td>N</td><td>用户是否被锁定（Y 锁定，N 未锁定）</td></tr></tbody></table><p><strong>资源控制列</strong> <br> 限制用户使用的资源 <br> 字段类型 int(11) unsigned 均不为空，默认值为0</p><table><thead><tr><th>字段名</th><th>说明</th></tr></thead><tbody><tr><td>max_questions</td><td>规定每小时允许执行查询的操作次数</td></tr><tr><td>max_updates</td><td>规定每小时允许执行更新的操作次数</td></tr><tr><td>max_connections</td><td>规定每小时允许执行的连接操作次数</td></tr><tr><td>max_user_connections</td><td>规定允许同时建立的连接次数</td></tr></tbody></table><h3 id="db" tabindex="-1">db <a class="header-anchor" href="#db" aria-hidden="true">#</a></h3><p>存储了用户对某个数据库的操作权限</p><table><thead><tr><th>字段名</th><th>字段类型</th><th>说明</th></tr></thead><tbody><tr><td>Host</td><td>char(60)</td><td>主机</td></tr><tr><td>Db</td><td>char(64)</td><td>数据库名</td></tr><tr><td>User</td><td>char(32)</td><td>用户名</td></tr><tr><td>Table_name</td><td>char(64)</td><td>表名</td></tr><tr><td>Grantor</td><td>char(93)</td><td>修改该记录的用户</td></tr><tr><td>Timestamp</td><td>timestamp</td><td>修改该记录的时间 默认值CURRENT_TIMESTAMP</td></tr><tr><td>Table_priv</td><td>set(&#39;Select&#39;,&#39;Insert&#39;,&#39;Update&#39;,&#39;Delete&#39;,&#39; Create&#39;,&#39;Drop&#39;,&#39;Grant&#39;,&#39;References&#39;, &#39;Index&#39;,&#39;Alter&#39;,&#39;Create View&#39;,&#39;Show view&#39;,&#39;Trigger&#39;)</td><td>表示对表的操作权限，包括 Select、Insert、Update、Delete、Create、Drop、Grant、References、Index 和 Alter 等</td></tr><tr><td>Column_priv</td><td>set(&#39;Select&#39;,&#39;Insert&#39;,&#39;Update&#39;,&#39;References&#39;)</td><td>表示对表中的列的操作权限，包括 Select、Insert、Update 和 References</td></tr></tbody></table><h3 id="创建用户" tabindex="-1">创建用户 <a class="header-anchor" href="#创建用户" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">CREATE</span><span style="color:#A6ACCD;"> USER </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">用户名</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> [ IDENTIFIED BY [ PASSWORD ] </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">password</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> ] [ ,用户 [ IDENTIFIED BY [ PASSWORD ] </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">password</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> ]]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">INSERT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">INTO</span><span style="color:#A6ACCD;"> mysql.user(Host, User,  authentication_string, ssl_cipher, x509_issuer, x509_subject) </span></span>
<span class="line"><span style="color:#F78C6C;">VALUES</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hostname</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#F78C6C;">PASSWORD</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">password</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">), </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">, </span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#676E95;">-- ssl_cipher、x509_issuer 和 x509_subject 这 3 个字段没有默认值</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>用户名： &#39;user_name&#39;@&#39;hostname&#39;，主机名默认为“%”，表示一组主机，即对所有主机开放权限</li><li>PASSWORD ：表示使用哈希值设置密码，如果密码是一个普通的字符串，则不需要使用</li><li>须拥有mysql数据库的全局CREATE USER权限，或拥有INSERT权限</li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#676E95;">-- 删除用户</span></span>
<span class="line"><span style="color:#F78C6C;">DROP</span><span style="color:#A6ACCD;"> USER 用户名;</span></span>
<span class="line"><span style="color:#F78C6C;">DELETE</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> mysql.user </span><span style="color:#F78C6C;">WHERE</span><span style="color:#A6ACCD;"> Host</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hostname</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">AND</span><span style="color:#A6ACCD;"> User</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- 重命名用户</span></span>
<span class="line"><span style="color:#A6ACCD;">RENAME USER old_user </span><span style="color:#F78C6C;">TO</span><span style="color:#A6ACCD;"> new_user</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="用户授权" tabindex="-1">用户授权 <a class="header-anchor" href="#用户授权" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">GRANT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">priv_type</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> [(column_list)] </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F78C6C;">database</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">table</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F78C6C;">TO</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> [IDENTIFIED BY [PASSWORD] </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">password</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">] [, user[IDENTIFIED BY [PASSWORD] </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">password</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]] ...</span></span>
<span class="line"><span style="color:#A6ACCD;">[WITH with_option [with_option]...]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- columns_list 参数表示权限作用于哪些列上，省略该参数时，表示作用于整个表；</span></span>
<span class="line"><span style="color:#676E95;">-- all privileges 表示所有权限</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>with_option 参数</p><ul><li>GRANT OPTION：被授权的用户可以将这些权限赋予给别的用户；</li><li>MAX_QUERIES_PER_HOUR count：设置每个小时可以允许执行 count 次查询；</li><li>MAX_UPDATES_PER_HOUR count：设置每个小时可以允许执行 count 次更新；</li><li>MAX_CONNECTIONS_PER_HOUR count：设置每小时可以建立 count 个连接;</li><li>MAX_USER_CONNECTIONS count：设置单个用户可以同时具有的 count 个连接。</li></ul><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#676E95;">--查看用户权限</span></span>
<span class="line"><span style="color:#F78C6C;">SELECT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> mysql.user;</span></span>
<span class="line"><span style="color:#A6ACCD;">SHOW GRANTS FOR </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hostname</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- 删除用户权限</span></span>
<span class="line"><span style="color:#F78C6C;">REVOKE</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">priv_type</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> [(column_list)]...  </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F78C6C;">database</span><span style="color:#A6ACCD;">.</span><span style="color:#F78C6C;">table</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">user [, user]...</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">REVOKE</span><span style="color:#A6ACCD;"> ALL PRIVILEGES, </span><span style="color:#F78C6C;">GRANT</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">OPTION</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">FROM</span><span style="color:#A6ACCD;"> 用户名   </span><span style="color:#676E95;">-- 撤销所有权限</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>权限列表</p><table><thead><tr><th>ALL [PRIVILEGES]</th><th>设置除GRANT OPTION之外的所有简单权限</th></tr></thead><tbody><tr><td>ALTER</td><td>允许使用ALTER TABLE</td></tr><tr><td>ALTER ROUTINE</td><td>更改或取消已存储的子程序</td></tr><tr><td>CREATE</td><td>允许使用CREATE TABLE</td></tr><tr><td>CREATE ROUTINE</td><td>创建已存储的子程序</td></tr><tr><td>CREATE TEMPORARY TABLES</td><td>允许使用CREATE TEMPORARY TABLE</td></tr><tr><td>CREATE USER</td><td>允许使用CREATE USER, DROP USER, RENAME USER和REVOKE ALL PRIVILEGES。</td></tr><tr><td>CREATE VIEW</td><td>允许使用CREATE VIEW</td></tr><tr><td>DELETE</td><td>允许使用DELETE</td></tr><tr><td>DROP</td><td>允许使用DROP TABLE</td></tr><tr><td>EXECUTE</td><td>允许用户运行已存储的子程序</td></tr><tr><td>FILE</td><td>允许使用SELECT...INTO OUTFILE和LOAD DATA INFILE</td></tr><tr><td>INDEX</td><td>允许使用CREATE INDEX和DROP INDEX</td></tr><tr><td>INSERT</td><td>允许使用INSERT</td></tr><tr><td>LOCK TABLES</td><td>允许对您拥有SELECT权限的表使用LOCK TABLES</td></tr><tr><td>PROCESS</td><td>允许使用SHOW FULL PROCESSLIST</td></tr><tr><td>REFERENCES</td><td>未被实施</td></tr><tr><td>RELOAD</td><td>允许使用FLUSH</td></tr><tr><td>REPLICATION CLIENT</td><td>允许用户询问从属服务器或主服务器的地址</td></tr><tr><td>REPLICATION SLAVE</td><td>用于复制型从属服务器（从主服务器中读取二进制日志事件）</td></tr><tr><td>SELECT</td><td>允许使用SELECT</td></tr><tr><td>SHOW DATABASES</td><td>显示所有数据库</td></tr><tr><td>SHOW VIEW</td><td>允许使用SHOW CREATE VIEW</td></tr><tr><td>SHUTDOWN</td><td>允许使用mysqladmin shutdown</td></tr><tr><td>SUPER</td><td>允许使用CHANGE MASTER, KILL, PURGE MASTER LOGS和SET GLOBAL语句，mysqladmin debug命令；允许您连接（一次），即使已达到max_connections。</td></tr><tr><td>UPDATE</td><td>允许使用UPDATE</td></tr><tr><td>USAGE</td><td>“无权限”的同义词</td></tr><tr><td>GRANT OPTION</td><td>允许授予权限</td></tr></tbody></table><h3 id="设置-修改密码" tabindex="-1">设置/修改密码 <a class="header-anchor" href="#设置-修改密码" aria-hidden="true">#</a></h3><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#A6ACCD;"># </span><span style="color:#F78C6C;">8</span><span style="color:#A6ACCD;">.0后无PASSWORD</span></span>
<span class="line"><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">PASSWORD</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">PASSWORD</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">密码</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)  </span><span style="color:#676E95;">-- 为当前用户设置密码</span></span>
<span class="line"><span style="color:#F78C6C;">SET</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">PASSWORD</span><span style="color:#A6ACCD;"> FOR 用户名 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">PASSWORD</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">密码</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#676E95;">-- 为指定用户设置密码</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">ALTER</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> IDENTIFIED </span><span style="color:#F78C6C;">BY</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">newpassword</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">GRANT</span><span style="color:#A6ACCD;"> USAGE </span><span style="color:#F78C6C;">ON</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">.</span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">TO</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">user</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">@’hostname’ IDENTIFIED </span><span style="color:#F78C6C;">BY</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">newpwd</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">-- 命令行方式</span></span>
<span class="line"><span style="color:#A6ACCD;">mysqladmin </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">u用户名 </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p旧密码 </span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;"> 新密码</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>root 密码重置</strong></p><div class="language-sql line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre><code><span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">. 停止MySQL服务</span></span>
<span class="line"><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">. 跳过权限验证登录MySQL </span></span>
<span class="line"><span style="color:#A6ACCD;">    [Linux] </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#F78C6C;">local</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mysql</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">bin</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">safe_mysqld </span><span style="color:#676E95;">--skip-grant-tables &amp;</span></span>
<span class="line"><span style="color:#A6ACCD;">    [Windows] mysqld </span><span style="color:#676E95;">--skip-grant-tables</span></span>
<span class="line"><span style="color:#A6ACCD;">    [8.0]  mysqld </span><span style="color:#676E95;">--console --skip-grant-tables --shared-memory </span></span>
<span class="line"><span style="color:#A6ACCD;">    再开一个终端，直接无密登录</span></span>
<span class="line"><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">. 修改root密码</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">update</span><span style="color:#A6ACCD;"> mysql.user </span><span style="color:#F78C6C;">set</span><span style="color:#A6ACCD;"> authentication_string</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">password</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">npw</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F78C6C;">where</span><span style="color:#A6ACCD;"> user</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">and</span><span style="color:#A6ACCD;"> Host </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">. 刷新权限</span></span>
<span class="line"><span style="color:#A6ACCD;">    FLUSH PRIVILEGES;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="常见错误代码" tabindex="-1">常见错误代码 <a class="header-anchor" href="#常见错误代码" aria-hidden="true">#</a></h2><p><strong>服务器</strong></p><table><thead><tr><th>错误代码</th><th>说  明</th></tr></thead><tbody><tr><td>1004</td><td>无法创建文件</td></tr><tr><td>1005</td><td>无法创建数据表、创建表失败</td></tr><tr><td>1006</td><td>无法创建数据库、创建数据库失败</td></tr><tr><td>1007</td><td>无法创建数据库，数据库己存在</td></tr><tr><td>1008</td><td>无法删除数据库，数据库不存在</td></tr><tr><td>1009</td><td>不能删除数据库文件导致删除数据库失败</td></tr><tr><td>1010</td><td>不能删除数据目录导致删除数据库失败</td></tr><tr><td>1011</td><td>删除数据库文件时出错</td></tr><tr><td>1012</td><td>无法读取系统表中的记录</td></tr><tr><td>1013</td><td>无法获取的状态</td></tr><tr><td>1014</td><td>无法获得工作目录</td></tr><tr><td>1015</td><td>无法锁定文件</td></tr><tr><td>1016</td><td>无法打开文件</td></tr><tr><td>1017</td><td>无法找到文件</td></tr><tr><td>1018</td><td>无法读取的目录</td></tr><tr><td>1019</td><td>无法为更改目录</td></tr><tr><td>1020</td><td>记录已被其它用户修改</td></tr><tr><td>1021</td><td>硬盘剩余空间不足，请加大硬盘可用空间</td></tr><tr><td>1022</td><td>关键词重读，更改记录失败</td></tr><tr><td>1023</td><td>关闭时发生错误</td></tr><tr><td>1025</td><td>更改名字时发生错误</td></tr><tr><td>1032</td><td>记录不存在</td></tr><tr><td>1036</td><td>数据表是只读的，不能对它进行修改</td></tr><tr><td>1037</td><td>系统内存不足，请重启数据库或重启服务器</td></tr><tr><td>1042</td><td>无效的主机名</td></tr><tr><td>1044</td><td>当前用户没有访问数据库的权限</td></tr><tr><td>1045</td><td>不能连接数据库，用户名或密码错误</td></tr></tbody></table><p><strong>客户端</strong></p><table><thead><tr><th>错误代码</th><th>说  明</th></tr></thead><tbody><tr><td>2000</td><td>未知 MySQL 错误</td></tr><tr><td>2001</td><td>不能创建 UNIX 套接字（%d）</td></tr><tr><td>2002</td><td>不能通过套接字“ %s”（%d）连接到本地 MySQL 服务器， self 服务未启动</td></tr><tr><td>2003</td><td>不能连接到 %s ”（%d ）上的 MySQL 服务器，未启动 mysql 服务</td></tr><tr><td>2004</td><td>不能创建 TCP/IP 接字（%d）</td></tr><tr><td>2005</td><td>未知的 MySQL 服务器主机“ %s”（%d）</td></tr><tr><td>2007</td><td>协议不匹配，服务器版本=%d，客户端版本=%d</td></tr><tr><td>2008</td><td>MySQL 客户端内存溢出</td></tr><tr><td>2009</td><td>错误的主机信息</td></tr><tr><td>2010</td><td>通过 UNIX 套接字连接的本地主机</td></tr><tr><td>2012</td><td>服务器握手过程中出错</td></tr><tr><td>2013</td><td>查询过程中丢失了与 SQL 服务器的连接</td></tr><tr><td>2014</td><td>命令不同步，现在不能运行该命令</td></tr><tr><td>2024</td><td>连接到从服务器时出错</td></tr><tr><td>2025</td><td>连接到主服务器时出错</td></tr><tr><td>2026</td><td>SSL 连接错误</td></tr></tbody></table><h2 id="faq" tabindex="-1">FAQ <a class="header-anchor" href="#faq" aria-hidden="true">#</a></h2><p>MySQL启动失败一般是路径错误</p><ul><li>注册表：HKEY_LOCAL_MACHINE -&gt;SYSTEM -&gt; CurrentControlSet -&gt; services -&gt;MySQL，ImagePath的路径</li><li>检查安装目录中的配置文件my.ini里得路径</li></ul><p>远程连接Mysql数据库的问题 <br> ERROR 2003 (HY000): Can&#39;t connect to MySQL server on &#39;192.168.0.19&#39; <br> Mysql数据库的默认配置文件my.cnf（linux下，一般在/etc/mysql）中的bind-address默认为127.0.0.1，此时Mysql只接受localhost，所以需要把bind-address注释</p><p><strong>无法导出问题</strong> <br> The MySQL server is running with the --secure-file-priv option so it cannot execute this statement <br> show variables like &#39;%secure%&#39;;</p><p>部分参考：<a href="https://shockerli.net/post/1000-line-mysql-note/" target="_blank" rel="noreferrer">https://shockerli.net/post/1000-line-mysql-note/</a></p></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-cfb513e0 data-v-a54a85bd><div class="edit-info" data-v-a54a85bd><div class="edit-link" data-v-a54a85bd><a class="VPLink link edit-link-button" href="https://github.com/sower/Notes/tree/main/docs/CS/MySQL.md" target="_blank" rel="noreferrer" data-v-a54a85bd data-v-3c355974><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-a54a85bd><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page on GitHub<!--]--><!----></a></div><div class="last-updated" data-v-a54a85bd><p class="VPLastUpdated" data-v-a54a85bd data-v-f7d51a9c>Updated Date: <time datatime="2022-10-31T13:26:41.000Z" data-v-f7d51a9c></time></p></div></div><div class="prev-next" data-v-a54a85bd><div class="pager" data-v-a54a85bd><a class="pager-link prev" href="/Notes/CS/SQL.html" data-v-a54a85bd><span class="desc" data-v-a54a85bd>Previous page</span><span class="title" data-v-a54a85bd>SQL</span></a></div><div class="has-prev pager" data-v-a54a85bd><a class="pager-link next" href="/Notes/CS/NoSQL.html" data-v-a54a85bd><span class="desc" data-v-a54a85bd>Next page</span><span class="title" data-v-a54a85bd>NoSQL</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-c6a644e1 data-v-9f24cc86><div class="container" data-v-9f24cc86><p class="message" data-v-9f24cc86>Released under the MIT License.</p><p class="copyright" data-v-9f24cc86>Copyright © 2022-present Ylem</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"cs_algorithm.md\":\"b67eae03\",\"cs_android sdk.md\":\"3ca0dc15\",\"cs_android.md\":\"a4046081\",\"cs_bash.md\":\"e64505e8\",\"cs_batch.md\":\"ddfafce3\",\"cs_c__.md\":\"1e25cc61\",\"cs_c.md\":\"db255547\",\"cs_css.md\":\"2e7cceaa\",\"cs_command.md\":\"0df19b84\",\"cs_data structure _ algorithm.md\":\"e4028716\",\"cs_data structure.md\":\"30bb9939\",\"cs_design patterns.md\":\"780292b7\",\"cs_docker.md\":\"91d0b57a\",\"cs_git.md\":\"e9e4b1d9\",\"cs_github.md\":\"f5cbe450\",\"cs_html.md\":\"f5c1dafb\",\"cs_java api.md\":\"a1e251ba\",\"cs_java advance.md\":\"7885904f\",\"cs_java framework.md\":\"67019040\",\"cs_java.md\":\"bfe03f3e\",\"cs_javascript.md\":\"2f9701b3\",\"cs_kubernetes.md\":\"77edf1ce\",\"cs_linux.md\":\"3f185439\",\"cs_microsoft.md\":\"16a44595\",\"cs_mysql.md\":\"4398eaf7\",\"cs_nosql.md\":\"cca0ce24\",\"cs_node.js.md\":\"39887357\",\"cs_operating system.md\":\"e40c6dc4\",\"cs_powershell.md\":\"041a2d6a\",\"cs_py web.md\":\"ad5f2076\",\"cs_pypi.md\":\"05506d6d\",\"cs_python lib.md\":\"48eca1da\",\"cs_python.md\":\"dc95ca07\",\"cs_pythonic.md\":\"b40359b3\",\"cs_sql.md\":\"b94669b0\",\"cs_ssh.md\":\"22f90684\",\"cs_spring.md\":\"245454dd\",\"cs_vue ecosystem.md\":\"c9785a62\",\"cs_vue.js.md\":\"dee0c67f\",\"cs_web api.md\":\"7051f647\",\"cs_windows.md\":\"f7c65ade\",\"cs_善假于键.md\":\"b2971d5d\",\"cs_数据交换格式.md\":\"2a15d6dd\",\"cs_注册表（registry）.md\":\"13b9fb06\",\"cs_网络（network）.md\":\"5c68d6fd\",\"contents.md\":\"6a54a2df\",\"software_api collections.md\":\"eb666542\",\"software_application.md\":\"a3aea0e5\",\"software_chrome.md\":\"7917b69d\",\"software_ffmpeg.md\":\"766f1b0e\",\"software_micro office.md\":\"7a6a2501\",\"universal_markdown.md\":\"2ce27eef\",\"universal_programming paradigm.md\":\"aa3d2853\",\"universal_qa.md\":\"ffd126f9\",\"universal_regular expression.md\":\"59572650\",\"universal_security.md\":\"5e12c9b0\",\"universal_software.md\":\"d0479d94\",\"universal_terminology.md\":\"a1dffe69\",\"universal_uml.md\":\"e2db36d8\",\"universal_编码 _ 加密.md\":\"1542bd4a\",\"index.md\":\"3a04fe8e\"}")</script>
    <script type="module" async src="/Notes/assets/app.81a94463.js"></script>
    
  </body>
</html>