<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Android | Ylem's Notes</title>
    <meta name="description" content="My vitepress style site">
    <link rel="preload stylesheet" href="/Notes/assets/style.f2395899.css" as="style">
    <link rel="modulepreload" href="/Notes/assets/app.c729a732.js">
    <link rel="modulepreload" href="/Notes/assets/CS_Android.md.e35a6e6c.lean.js">
    
    <link rel="icon" type="image/svg+xml" href="/ylem.svg">
  <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-93a960b4><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-93a960b4 data-v-0fa0e57d><div class="VPNavBar has-sidebar" data-v-0fa0e57d data-v-be450ad9><div class="container" data-v-be450ad9><div class="title" data-v-be450ad9><div class="VPNavBarTitle has-sidebar" data-v-be450ad9 data-v-6d2fb2d9><a class="title" href="/Notes/" data-v-6d2fb2d9><!--[--><!--]--><!--[--><img class="VPImage logo" src="/Notes/ylem.svg" alt data-v-6db2186b><!--]--><!--[-->Ylem&#39;s Notes<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-be450ad9><div class="curtain" data-v-be450ad9></div><div class="content-body" data-v-be450ad9><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-be450ad9 data-v-bdedfc22><span id="main-nav-aria-label" class="visually-hidden" data-v-bdedfc22>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/Notes/Contents.html" data-v-bdedfc22 data-v-95f5d58b data-v-30c06bd3><!--[-->Contents<!--]--><!----></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-bdedfc22 data-v-96001b6b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-96001b6b><span class="text" data-v-96001b6b><!----> 1.0.7 <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-96001b6b><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-96001b6b><div class="VPMenu" data-v-96001b6b data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-a5bbb52c><a class="VPLink link" href="https://github.com/sower/Notes/commits" target="_blank" rel="noreferrer" data-v-a5bbb52c data-v-30c06bd3><!--[-->Changelog<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-30c06bd3><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-a5bbb52c><a class="VPLink link" href="https://ylem-notes.netlify.app" target="_blank" rel="noreferrer" data-v-a5bbb52c data-v-30c06bd3><!--[-->Netlify<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-30c06bd3><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-a5bbb52c><a class="VPLink link" href="https://ylem-notes.vercel.app" target="_blank" rel="noreferrer" data-v-a5bbb52c data-v-30c06bd3><!--[-->Vercel<!--]--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" height="24px" viewbox="0 0 24 24" width="24px" class="icon" data-v-30c06bd3><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M9 5v2h6.59L4 18.59 5.41 20 17 8.41V15h2V5H9z"></path></svg></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-be450ad9 data-v-da3f667a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-da3f667a data-v-0d529b6d data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-0d529b6d><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-0d529b6d><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-be450ad9 data-v-2ab2a029 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://ravigation.netlify.app" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M21 3L3 10.53v.97l6.84 2.66L12.5 21h.96L21 3Z"/></svg></a><a class="VPSocialLink" href="https://github.com/sower/Notes" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="/" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16.84 14.5c-.26-.17-.62-.61-.79-.82C17.24 12 19 8.87 19 5c0-1.95-.74-3-2-3c-1.54 0-3.96 2.06-5 5.97C10.96 4.06 8.54 2 7 2C5.74 2 5 3.05 5 5c0 3.87 1.76 7 2.95 8.68c-.17.21-.53.65-.79.82c-.5.43-1.66 1.39-1.66 3c0 2.21 1.79 4 4 4c1.55 0 2.5-.56 2.5-.56s.95.56 2.5.56c2.21 0 4-1.79 4-4c0-1.61-1.16-2.57-1.66-3m-7.49-2.3C8.34 10.7 7 8.12 7 5c0-.5.06-.8.12-.97c.94.31 3.24 2.71 3.38 7.64c-.47.12-.84.3-1.15.53m1.15 4.55c-.28 0-.5-.34-.5-.75s.22-.75.5-.75s.5.34.5.75s-.22.75-.5.75M12 19.5c-.55 0-1-.72-1-1s.45-.5 1-.5s1 .22 1 .5s-.45 1-1 1m1.5-2.75c-.28 0-.5-.34-.5-.75s.22-.75.5-.75s.5.34.5.75s-.22.75-.5.75m0-5.08c.14-4.93 2.44-7.33 3.38-7.64c.06.17.12.47.12.97c0 3.12-1.34 5.7-2.35 7.2c-.31-.23-.68-.41-1.15-.53Z"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-be450ad9 data-v-66bb1f24 data-v-96001b6b><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-96001b6b><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-96001b6b><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-96001b6b><div class="VPMenu" data-v-96001b6b data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-66bb1f24><div class="item appearance" data-v-66bb1f24><p class="label" data-v-66bb1f24>Appearance</p><div class="appearance-action" data-v-66bb1f24><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-66bb1f24 data-v-0d529b6d data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-0d529b6d><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-0d529b6d><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-66bb1f24><div class="item social-links" data-v-66bb1f24><div class="VPSocialLinks social-links-list" data-v-66bb1f24 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://ravigation.netlify.app" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M21 3L3 10.53v.97l6.84 2.66L12.5 21h.96L21 3Z"/></svg></a><a class="VPSocialLink" href="https://github.com/sower/Notes" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink" href="/" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M16.84 14.5c-.26-.17-.62-.61-.79-.82C17.24 12 19 8.87 19 5c0-1.95-.74-3-2-3c-1.54 0-3.96 2.06-5 5.97C10.96 4.06 8.54 2 7 2C5.74 2 5 3.05 5 5c0 3.87 1.76 7 2.95 8.68c-.17.21-.53.65-.79.82c-.5.43-1.66 1.39-1.66 3c0 2.21 1.79 4 4 4c1.55 0 2.5-.56 2.5-.56s.95.56 2.5.56c2.21 0 4-1.79 4-4c0-1.61-1.16-2.57-1.66-3m-7.49-2.3C8.34 10.7 7 8.12 7 5c0-.5.06-.8.12-.97c.94.31 3.24 2.71 3.38 7.64c-.47.12-.84.3-1.15.53m1.15 4.55c-.28 0-.5-.34-.5-.75s.22-.75.5-.75s.5.34.5.75s-.22.75-.5.75M12 19.5c-.55 0-1-.72-1-1s.45-.5 1-.5s1 .22 1 .5s-.45 1-1 1m1.5-2.75c-.28 0-.5-.34-.5-.75s.22-.75.5-.75s.5.34.5.75s-.22.75-.5.75m0-5.08c.14-4.93 2.44-7.33 3.38-7.64c.06.17.12.47.12.97c0 3.12-1.34 5.7-2.35 7.2c-.31-.23-.68-.41-1.15-.53Z"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-be450ad9 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav" data-v-93a960b4 data-v-2817d72e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2817d72e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-2817d72e><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-2817d72e>Menu</span></button><a class="top-link" href="#" data-v-2817d72e>Return to top</a></div><aside class="VPSidebar" data-v-93a960b4 data-v-c79ccefa><div class="curtain" data-v-c79ccefa></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-c79ccefa><span class="visually-hidden" id="sidebar-aria-label" data-v-c79ccefa> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0 collapsible has-active" data-v-c79ccefa data-v-b05232f3><div class="item" role="button" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link" data-v-b05232f3 data-v-30c06bd3><!--[--><h2 class="text" data-v-b05232f3>CS</h2><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><section class="VPSidebarItem level-1 collapsible" data-v-b05232f3 data-v-b05232f3><div class="item" role="button" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link" data-v-b05232f3 data-v-30c06bd3><!--[--><h3 class="text" data-v-b05232f3>Web</h3><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/HTML.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>HTML</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/CSS.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>CSS</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/JavaScript.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>JavaScript</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Web%20API.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Web API</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Node.js.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Node.js</p><!--]--><!----></a><!----></div><!----></div><section class="VPSidebarItem level-2 collapsible is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Vue.js.html" data-v-b05232f3 data-v-30c06bd3><!--[--><h4 class="text" data-v-b05232f3>Vue.js</h4><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-3 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Vue%20Ecosystem.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Vue Ecosystem</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><section class="VPSidebarItem level-1 collapsible is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Python.html" data-v-b05232f3 data-v-30c06bd3><!--[--><h3 class="text" data-v-b05232f3>Python</h3><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Pythonic.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Pythonic</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Python%20Lib.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Python Lib</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/PyPI.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>PyPI</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Py%20Web.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Py Web</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Java.html" data-v-b05232f3 data-v-30c06bd3><!--[--><h3 class="text" data-v-b05232f3>Java</h3><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Java%20Advance.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Java Advance</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Java%20API.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Java API</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Spring.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Spring</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Java%20Framework.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Java Framework</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Unit%20Test.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Unit Test</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Design%20Patterns.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Design Patterns</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Big%20Data.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Big Data</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible is-link has-active" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Operating%20System.html" data-v-b05232f3 data-v-30c06bd3><!--[--><h3 class="text" data-v-b05232f3>Operating System</h3><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><section class="VPSidebarItem level-2 collapsible is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Windows.html" data-v-b05232f3 data-v-30c06bd3><!--[--><h4 class="text" data-v-b05232f3>Windows</h4><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-3 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Microsoft.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Microsoft</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/PowerShell.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>PowerShell</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Batch.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Batch</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/%E5%96%84%E5%81%87%E4%BA%8E%E9%94%AE.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>善假于键</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/%E6%B3%A8%E5%86%8C%E8%A1%A8%EF%BC%88Registry%EF%BC%89.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>注册表（Registry）</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Linux.html" data-v-b05232f3 data-v-30c06bd3><!--[--><h4 class="text" data-v-b05232f3>Linux</h4><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-3 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Command.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Command</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Bash.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Bash</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Docker.html" data-v-b05232f3 data-v-30c06bd3><!--[--><h4 class="text" data-v-b05232f3>Docker</h4><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-3 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Kubernetes.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Kubernetes</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Git.html" data-v-b05232f3 data-v-30c06bd3><!--[--><h4 class="text" data-v-b05232f3>Git</h4><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-3 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Github.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Github</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-2 collapsible is-link is-active has-active" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Android.html" data-v-b05232f3 data-v-30c06bd3><!--[--><h4 class="text" data-v-b05232f3>Android</h4><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-3 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Android%20SDK.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Android SDK</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/SSH.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>SSH</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/%E7%BD%91%E7%BB%9C%EF%BC%88Network%EF%BC%89.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>网络（Network）</p><!--]--><!----></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/C.html" data-v-b05232f3 data-v-30c06bd3><!--[--><h3 class="text" data-v-b05232f3>C</h3><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/C++.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>C++</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Data%20Structure%20&amp;%20Algorithm.html" data-v-b05232f3 data-v-30c06bd3><!--[--><h3 class="text" data-v-b05232f3>Data Structure & Algorithm</h3><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Data%20structure.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Data structure</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Algorithm.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Algorithm</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/SQL.html" data-v-b05232f3 data-v-30c06bd3><!--[--><h3 class="text" data-v-b05232f3>SQL</h3><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/MySQL.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>MySQL</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/NoSQL.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>NoSQL</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/CS/Machine%20learning.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Machine learning</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0 collapsible" data-v-c79ccefa data-v-b05232f3><div class="item" role="button" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link" data-v-b05232f3 data-v-30c06bd3><!--[--><h2 class="text" data-v-b05232f3>Software</h2><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/Software/Application.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Application</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/Software/API%20Collections.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>API Collections</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/Software/Chrome.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Chrome</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/Software/Micro%20Office.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Micro Office</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/Software/FFmpeg.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>FFmpeg</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-c79ccefa><section class="VPSidebarItem level-0 collapsible" data-v-c79ccefa data-v-b05232f3><div class="item" role="button" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link" data-v-b05232f3 data-v-30c06bd3><!--[--><h2 class="text" data-v-b05232f3>Universal</h2><!--]--><!----></a><div class="caret" role="button" data-v-b05232f3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-b05232f3><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-b05232f3><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/Universal/%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2%E6%A0%BC%E5%BC%8F.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>数据交换格式</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/Universal/UML.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>UML</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/Universal/Markdown.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Markdown</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/Universal/Regular%20expression.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Regular expression</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/Universal/%E7%BC%96%E7%A0%81%20&amp;%20%E5%8A%A0%E5%AF%86.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>编码 & 加密</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/Universal/Terminology.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Terminology</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/Universal/QA.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>QA</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/Universal/Software.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Software</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/Universal/Programming%20paradigm.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Programming paradigm</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/Universal/Security.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Security</p><!--]--><!----></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b05232f3 data-v-b05232f3><div class="item" data-v-b05232f3><div class="indicator" data-v-b05232f3></div><a class="VPLink link link" href="/Notes/Universal/Refactor%20%E9%87%8D%E6%9E%84.html" data-v-b05232f3 data-v-30c06bd3><!--[--><p class="text" data-v-b05232f3>Refactor 重构</p><!--]--><!----></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-93a960b4 data-v-0bd490fb><div class="VPDoc has-sidebar has-aside" data-v-0bd490fb data-v-c5936a1e><div class="container" data-v-c5936a1e><div class="aside" data-v-c5936a1e><div class="aside-curtain" data-v-c5936a1e></div><div class="aside-container" data-v-c5936a1e><div class="aside-content" data-v-c5936a1e><div class="VPDocAside" data-v-c5936a1e data-v-cdc66372><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-cdc66372 data-v-5dd9d5f6><div class="content" data-v-5dd9d5f6><div class="outline-marker" data-v-5dd9d5f6></div><div class="outline-title" data-v-5dd9d5f6>⚔ TOC</div><nav aria-labelledby="doc-outline-aria-label" data-v-5dd9d5f6><span class="visually-hidden" id="doc-outline-aria-label" data-v-5dd9d5f6> Table of Contents for current page </span><ul class="root" data-v-5dd9d5f6 data-v-1188541a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-cdc66372></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--[--><!--[--><!--[--> ᕙ(`▽´)ᕗ <!--]--><!--]--><!--]--><!--]--></div></div></div></div><div class="content" data-v-c5936a1e><div class="content-container" data-v-c5936a1e><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--><main class="main" data-v-c5936a1e><div style="position:relative;" class="vp-doc _Notes_CS_Android" data-v-c5936a1e><div><h2 id="——-android-——" tabindex="-1">—— Android —— <a class="header-anchor" href="#——-android-——" aria-hidden="true">#</a></h2><p>App类型</p><ul><li>原生应用（native application） 专门为特定手机平台开发的应用程序 ，无法在其他平台运行</li><li>Web 应用（web application）</li><li>混合应用（hybrid application） 分三层：HTML5 网页层、网页引擎层（本质是一个隔离的浏览器实例）、容器层。</li></ul><p>操作系统的架构</p><ul><li>应用程序层</li><li>应用程序框架层</li><li>核心类库</li><li>Linux 内核</li></ul><p><img src="http://c.biancheng.net/uploads/allimg/190327/5-1Z32G5124H60.gif#id=CegQR&amp;originHeight=517&amp;originWidth=799&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>应用程序框架层</p><table><thead><tr><th>系统/服务</th><th>英文名称</th><th>说明</th></tr></thead><tbody><tr><td>视图</td><td>View</td><td>丰富的、可扩展的视图集合，用于构建一个应用程序，包括列表 (Lists)、网格 (Grids)、文本框 (TextBoxes)、按钮 (Buttons)，甚至是内嵌的 Web 浏览器。</td></tr><tr><td>内容管理器</td><td>Content Provider</td><td>使应用可以访问另一个应用的数据或者共享自己的数据。</td></tr><tr><td>资源管理器</td><td>Resource Manager</td><td>提供访问非代码资源，如本地字符串、图形和分层文件 (layout files)</td></tr><tr><td>通知管理器</td><td>Notification Manager</td><td>使所有的应用程序都能够在状态栏显示通知信息。</td></tr><tr><td>活动管理器</td><td>Activity  Manager</td><td>管理应用程序生命周期，并且提供通用的导航回退功能。</td></tr></tbody></table><p><strong>应用程序层</strong> <br> <strong>四大组件</strong></p><ul><li>Activity：用户和应用程序交互的窗口</li><li>Service：实现程序后台运行的解决方案</li><li>Content Provide：内容提供者，提供程序所需要的数据</li><li>Broadcast Receiver：广播接收器，监听外部事件的到来</li></ul><h2 id="ui" tabindex="-1">UI <a class="header-anchor" href="#ui" aria-hidden="true">#</a></h2><p>引入布局</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">include layout</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;@layout/title&quot;</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">/&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>自定义控件</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">com.uicustomviews.TitleLayout</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">layout_width</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;match_parent&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">layout_height</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;wrap_content&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">       </span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">TitleLayout</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">context</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Context</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">attrs</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">AttributeSet</span><span style="color:#ABB2BF;">) : </span><span style="color:#E5C07B;">LinearLayout</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">attrs</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#E06C75;">init</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E5C07B;">LayoutInflater</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">from</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">inflate</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">layout</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E5C07B;">titleBack</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">setOnClickListener</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#E06C75;">val</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">activity</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">as</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Activity</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#E5C07B;">activity</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">finish</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E5C07B;">titleEdit</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">setOnClickListener</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">makeText</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;You clicked Edit button&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">LENGTH_SHORT</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">show</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>Android 的布局</strong> <br> 通过容器的布局属性来管理子控件的位置关系</p><ul><li>线性布局：LinearLayout</li><li>相对布局：RelativeLayout</li><li>帧布局：FrameLayout</li><li>绝对布局：AbsoluteLayout</li><li>表格布局：TableLayout</li><li>网格布局：GirdLayout</li><li>约束布局：ConstraintLayout</li></ul><p><strong>Android 常用的控件</strong></p><ul><li>TextView：文本控件</li><li>EditText：可编辑文本控件</li><li>Button：按钮</li><li>ImageButton：图标按钮</li><li>ToggleButton:开关按钮</li><li>ImageView：图片控件</li><li>CheckBox：复选框控件</li><li>RadioButton：单选框控件</li></ul><h3 id="应用资源" tabindex="-1"><a href="https://developer.android.google.cn/guide/topics/resources/providing-resources?hl=zh-cn" target="_blank" rel="noreferrer">应用资源</a> <a class="header-anchor" href="#应用资源" aria-hidden="true">#</a></h3><p>res</p><ul><li>drawable 图片</li><li>mipmap 应用图标</li><li>values 字符串、样式、颜色等配置</li><li>layout 布局文件</li></ul><table><thead><tr><th>目录</th><th>资源类型</th></tr></thead><tbody><tr><td>animator/</td><td>用于定义<a href="https://developer.android.google.cn/guide/topics/graphics/prop-animation?hl=zh-cn" target="_blank" rel="noreferrer">属性动画</a>的 XML 文件。</td></tr><tr><td>anim/</td><td>用于定义<a href="https://developer.android.google.cn/guide/topics/graphics/view-animation?hl=zh-cn#tween-animation" target="_blank" rel="noreferrer">渐变动画</a>的 XML 文件</td></tr><tr><td>color/</td><td>用于定义颜色状态列表的 XML 文件。<a href="https://developer.android.google.cn/guide/topics/resources/color-list-resource?hl=zh-cn" target="_blank" rel="noreferrer">颜色状态列表资源</a></td></tr><tr><td>drawable/</td><td>位图文件（.png、.9.png、.jpg、.gif）</td></tr><tr><td>mipmap/</td><td>启动器图标。<a href="https://developer.android.google.cn/tools/projects?hl=zh-cn#mipmap" target="_blank" rel="noreferrer">管理项目概览</a>。</td></tr><tr><td>layout/</td><td>用于定义用户界面布局的 XML 文件。请参阅<a href="https://developer.android.google.cn/guide/topics/resources/layout-resource?hl=zh-cn" target="_blank" rel="noreferrer">布局资源</a>。</td></tr><tr><td>menu/</td><td>用于定义应用菜单（如选项菜单、上下文菜单或子菜单）的 XML 文件。请参阅<a href="https://developer.android.google.cn/guide/topics/resources/menu-resource?hl=zh-cn" target="_blank" rel="noreferrer">菜单资源</a>。</td></tr><tr><td>raw/</td><td>需以原始形式保存的任意文件。</td></tr><tr><td>values/</td><td>包含字符串、整型数和颜色等简单值的 XML 文件。 <br> arrays.xml：资源数组（类型数组）。 <br> colors.xml：颜色值。 <br> dimens.xml：尺寸值。 <br> strings.xml：字符串值。 <br> styles.xml：样式。 <br> 请参阅字符串资源、样式资源和更多资源类型。</td></tr><tr><td>xml/</td><td>可在运行时通过调用 <a href="https://developer.android.google.cn/reference/android/content/res/Resources?hl=zh-cn#getXml(int)" target="_blank" rel="noreferrer">Resources.getXML()</a> 读取的任意 XML 文件。各种 XML 配置文件（如<a href="https://developer.android.google.cn/guide/topics/search/searchable-config?hl=zh-cn" target="_blank" rel="noreferrer">可搜索配置</a>）都必须保存在此处。</td></tr><tr><td>font/</td><td>带有扩展名的字体文件（如 .ttf、.otf 或 .ttc），或包含 <code>&lt;font-family&gt;</code> 元素的 XML 文件。如需详细了解作为资源的字体，请参阅 <a href="https://developer.android.google.cn/preview/features/fonts-in-xml?hl=zh-cn" target="_blank" rel="noreferrer">XML 中的字体</a>。</td></tr></tbody></table><p>访问资源的方法</p><ul><li>在代码中 <code>[&lt;package_name&gt;.]R.&lt;resource_type&gt;.&lt;resource_name&gt;</code> R.string.app_name</li><li>在XML中 <code>@[&lt;package_name&gt;:]&lt;resource_type&gt;/&lt;resource_name&gt;</code> @string/app_name</li></ul><p>单位</p><ul><li>px pixe，像素。一个像素单位对应一个屏幕像素单位。不推荐使用px，不会根据屏幕密度自动缩放。</li><li>dp density-independent pixel，密度无关像素。1dp在设备屏幕上总是等于1/160英寸。</li><li>sp scale-independent pixel，缩放无关像素。通常用来设置屏幕上的字体大小。</li></ul><p><strong>AndroidManifest.xml</strong></p><table><thead><tr><th>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/action-element?hl=zh-cn" target="_blank" rel="noreferrer">action</a>&gt;</th><th>向 Intent 过滤器添加操作。</th></tr></thead><tbody><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/activity-element?hl=zh-cn" target="_blank" rel="noreferrer">activity</a>&gt;</td><td>声明 Activity 组件。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/activity-alias-element?hl=zh-cn" target="_blank" rel="noreferrer">activity-alias</a>&gt;</td><td>声明 Activity 的别名。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/application-element?hl=zh-cn" target="_blank" rel="noreferrer">application</a>&gt;</td><td>应用的声明。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/category-element?hl=zh-cn" target="_blank" rel="noreferrer">category</a>&gt;</td><td>向 Intent 过滤器添加类别名称。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/compatible-screens-element?hl=zh-cn" target="_blank" rel="noreferrer">compatible-screens</a>&gt;</td><td>指定与应用兼容的每个屏幕配置。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/data-element?hl=zh-cn" target="_blank" rel="noreferrer">data</a>&gt;</td><td>向 Intent 过滤器添加数据规范。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/grant-uri-permission-element?hl=zh-cn" target="_blank" rel="noreferrer">grant-uri-permission</a>&gt;</td><td>指定父级内容提供程序有权访问的应用数据的子集。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/instrumentation-element?hl=zh-cn" target="_blank" rel="noreferrer">instrumentation</a>&gt;</td><td>声明支持您监控应用与系统进行交互的 Instrumentation 类。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/intent-filter-element?hl=zh-cn" target="_blank" rel="noreferrer">intent-filter</a>&gt;</td><td>指定 Activity、服务或广播接收器可以响应的 Intent 类型。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/manifest-element?hl=zh-cn" target="_blank" rel="noreferrer">manifest</a>&gt;</td><td>AndroidManifest.xml 文件的根元素。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/meta-data-element?hl=zh-cn" target="_blank" rel="noreferrer">meta-data</a>&gt;</td><td>可以提供给父级组件的其他任意数据项的名称-值对。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/path-permission-element?hl=zh-cn" target="_blank" rel="noreferrer">path-permission</a>&gt;</td><td>定义内容提供程序中特定数据子集的路径和所需权限。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/permission-element?hl=zh-cn" target="_blank" rel="noreferrer">permission</a>&gt;</td><td>声明安全权限，可用于限制对此应用或其他应用的特定组件或功能的访问。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/permission-group-element?hl=zh-cn" target="_blank" rel="noreferrer">permission-group</a>&gt;</td><td>为相关权限的逻辑分组声明名称。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/permission-tree-element?hl=zh-cn" target="_blank" rel="noreferrer">permission-tree</a>&gt;</td><td>声明权限树的基本名称。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/provider-element?hl=zh-cn" target="_blank" rel="noreferrer">provider</a>&gt;</td><td>声明内容提供程序组件。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/receiver-element?hl=zh-cn" target="_blank" rel="noreferrer">receiver</a>&gt;</td><td>声明广播接收器组件。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/service-element?hl=zh-cn" target="_blank" rel="noreferrer">service</a>&gt;</td><td>声明服务组件。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/supports-gl-texture-element?hl=zh-cn" target="_blank" rel="noreferrer">supports-gl-texture</a>&gt;</td><td>声明应用支持的一种 GL 纹理压缩格式。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/supports-screens-element?hl=zh-cn" target="_blank" rel="noreferrer">supports-screens</a>&gt;</td><td>声明应用支持的屏幕尺寸，并为大于此尺寸的屏幕启用屏幕兼容模式。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/uses-configuration-element?hl=zh-cn" target="_blank" rel="noreferrer">uses-configuration</a>&gt;</td><td>指明应用要求的特定输入功能。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/uses-feature-element?hl=zh-cn" target="_blank" rel="noreferrer">uses-feature</a>&gt;</td><td>声明应用使用的单个硬件或软件功能。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/uses-library-element?hl=zh-cn" target="_blank" rel="noreferrer">uses-library</a>&gt;</td><td>指定应用必须链接到的共享库。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/uses-permission-element?hl=zh-cn" target="_blank" rel="noreferrer">uses-permission</a>&gt;</td><td>指定为使应用正常运行，用户必须授予的系统权限。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/uses-permission-sdk-23-element?hl=zh-cn" target="_blank" rel="noreferrer">uses-permission-sdk-23</a>&gt;</td><td>指明应用需要特定权限，但仅当应用在运行 Android 6.0（API 级别 23）或更高版本的设备上安装时才需要。</td></tr><tr><td>&lt;<a href="https://developer.android.google.cn/guide/topics/manifest/uses-sdk-element?hl=zh-cn" target="_blank" rel="noreferrer">uses-sdk</a>&gt;</td><td>您可以通过整数形式的 API 级别，表示应用与一个或多个版本的 Android 平台的兼容性。</td></tr></tbody></table><p>Android中的日志工具类是Log（android.util.Log）</p><ul><li>Log.v(tag, msg)</li><li>Log.d()</li><li>Log.i()</li><li>Log.w()</li><li>Log.e()</li></ul><h3 id="activity" tabindex="-1"><a href="https://developer.android.google.cn/reference/android/app/Activity" target="_blank" rel="noreferrer">Activity</a> <a class="header-anchor" href="#activity" aria-hidden="true">#</a></h3><p><a href="https://developer.android.google.cn/reference/android/app/Activity?hl=zh-cn" target="_blank" rel="noreferrer">Activity</a> 类是 Android 应用的关键组件，而 Activity 的启动和组合方式则是该平台应用模型的基本组成部分。</p><table><thead><tr><th>名称</th><th>调用时间</th></tr></thead><tbody><tr><td>onCreate(Bundle savedInstanceState)</td><td>创建 Activity 时调用。 设置在该方法中，还以 Bundle 的形式提供对以前储存的任何状态的访问。其中参数 savedInstanceState 对象是用于保存 Activity 的对象的状态。</td></tr><tr><td>onStart()</td><td>Activity 变为在屏幕上对用户可见时调用。</td></tr><tr><td>onResume()</td><td>Activity 开始与用户交互时调用（无论是启动还是重启一个活动，该方法总是被调用）。</td></tr><tr><td>onPause()</td><td>当 Android 系统要激活其他 Activity 时，该方法被调用，暂停或收回 CPU 和其他资源时调用。</td></tr><tr><td>onStop()</td><td>Activity 被停止并转为不可见阶段时调用。</td></tr><tr><td>onRestart()</td><td>重新启动已经停止的 Activity 时调用。</td></tr><tr><td>onDestroy()</td><td>Activity 被完全从系统内存中移除时调用。 该方法被调用可能是因为有人直接调用 finish() 方法或者系统决定停止该活动以释放资源。</td></tr></tbody></table><p><img src="https://developer.android.google.cn/guide/components/images/activity_lifecycle.png#id=GUirm&amp;originHeight=663&amp;originWidth=513&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""> <br> 活动间数据传递</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ParentActivity</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">AppCompatActivity</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    @</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">protected</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Bundle</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">savedInstanceState</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">savedInstanceState</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">d</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ParentActivity&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Task id is &quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">getTaskId</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">setContentView</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">layout</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">parent_layout</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">Button</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">Button</span><span style="color:#ABB2BF;">) </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">button</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setOnClickListener</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">View</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">OnClickListener</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">            @</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">            public void </span><span style="color:#61AFEF;">onClick</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">View</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">v</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">//  向下一个活动传递数据</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E06C75;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">intent</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">ParentActivity</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">ChildActivity</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">class</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E5C07B;">intent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">putExtra</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;extra_data&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;data&quot;</span><span style="color:#ABB2BF;">);        </span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#61AFEF;">startActivity</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">intent</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#7F848E;font-style:italic;">//   更好地传递方式                </span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#7F848E;font-style:italic;">//   SecondActivity.actionStart(ParentActivity.this, &quot;data&quot;);</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#7F848E;font-style:italic;">// 接收前提</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#7F848E;font-style:italic;">// startActivityForResult(intent, 1);</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 用于接收上一个活动关闭后返回的数据</span></span>
<span class="line"><span style="color:#ABB2BF;">    @</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">protected</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onActivityResult</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">requestCode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">resultCode</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">requestCode</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">resultCode</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">RESULT_OK</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">returnedData</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getStringExtra</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;data_return&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">Log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">d</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;ParentActivity&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">returnedData</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ChildActivity</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">AppCompatActivity</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 方便传递到此活动的方法</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">static</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">actionStart</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Context</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">intent</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">ChildActivity</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">class</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">intent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">putExtra</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;extra_data&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">context</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">startActivity</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">intent</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#ABB2BF;">    @</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">protected</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Bundle</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">savedInstanceState</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">savedInstanceState</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        ...</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 接收数据</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">intent</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">getIntent</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">data</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">intent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getStringExtra</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;extra_data&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 传递返回数据</span></span>
<span class="line"><span style="color:#ABB2BF;">    @</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onBackPressed</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">intent</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">intent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">putExtra</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;data_return&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Hello ParentActivity&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">setResult</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">RESULT_OK</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">intent</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">finish</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br></div></div><p><a href="https://developer.android.google.cn/reference/androidx/fragment/app/Fragment?hl=zh-cn" target="_blank" rel="noreferrer">Fragment</a> 表示应用界面中可重复使用的一部分 <br> <img src="https://developer.android.google.cn/images/guide/fragments/fragment-view-lifecycle.png?hl=zh-cn#id=yizdq&amp;originHeight=1004&amp;originWidth=821&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">LeftFragment</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">extends</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Fragment</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">View</span><span style="color:#61AFEF;"> onCreateView</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">LayoutInflater</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">inflater</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">ViewGroup</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">container</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                             </span><span style="color:#E5C07B;">Bundle</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">savedInstanceState</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">View</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">view</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">inflater</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">inflate</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">layout</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">left_fragment</span><span style="color:#ABB2BF;">, container, </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> view;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// Main 动态添加碎片</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">MainActivity</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">extends</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">AppCompatActivity</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">implements</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">View</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">OnClickListener</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">protected</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onCreate</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Bundle</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">savedInstanceState</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">(savedInstanceState);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">setContentView</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">layout</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">activity_main</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (Button) </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">button</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">button</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setOnClickListener</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">replaceFragment</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">RightFragment</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onClick</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">View</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">v</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">v</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getId</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">button</span><span style="color:#C678DD;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#61AFEF;">replaceFragment</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">AnotherRightFragment</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">default:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> replaceFragment</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Fragment</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">fragment</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">FragmentManager</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">fragmentManager</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">getSupportFragmentManager</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">FragmentTransaction</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">transaction</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">fragmentManager</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">beginTransaction</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">transaction</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">replace</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">right_layout</span><span style="color:#ABB2BF;">, fragment);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">transaction</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">commit</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h3 id="intent" tabindex="-1"><a href="https://developer.android.google.cn/guide/components/intents-filters?hl=zh-cn" target="_blank" rel="noreferrer">Intent</a> <a class="header-anchor" href="#intent" aria-hidden="true">#</a></h3><p><a href="https://developer.android.google.cn/reference/android/content/Intent?hl=zh-cn" target="_blank" rel="noreferrer">Intent</a>是一个消息传递对象，可以用来从其他应用组件请求操作</p><ul><li>显式 Intent：通过提供目标应用的软件包名称或完全限定的组件类名来指定可处理 Intent 的应用。</li></ul><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// Executed in an Activity, so &#39;this&#39; is the Context</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// The fileUrl is a string URL, such as &quot;http://www.example.com/image.png&quot;</span></span>
<span class="line"><span style="color:#E5C07B;">Intent</span><span style="color:#E06C75;"> downloadIntent </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#E06C75;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">DownloadService</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">downloadIntent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setData</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">(fileUrl));</span></span>
<span class="line"><span style="color:#61AFEF;">startService</span><span style="color:#E06C75;">(downloadIntent)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>隐式 Intent ：不会指定特定的组件，而是声明要执行的常规操作，从而允许其他应用中的组件来处理。</li></ul><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// Create the text message with a string</span></span>
<span class="line"><span style="color:#E5C07B;">Intent</span><span style="color:#E06C75;"> sendIntent </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#E06C75;">()</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">sendIntent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setAction</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">ACTION_SEND</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">sendIntent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">putExtra</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">EXTRA_TEXT</span><span style="color:#ABB2BF;">, textMessage);</span></span>
<span class="line"><span style="color:#E5C07B;">sendIntent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setType</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;text/plain&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// Verify that the intent will resolve to an activity</span></span>
<span class="line"><span style="color:#C678DD;">if</span><span style="color:#E06C75;"> (</span><span style="color:#E5C07B;">sendIntent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">resolveActivity</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getPackageManager</span><span style="color:#ABB2BF;">())</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">!=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">null</span><span style="color:#E06C75;">) {</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#61AFEF;">startActivity</span><span style="color:#E06C75;">(sendIntent)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>接收</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">activity android</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;ShareActivity&quot;</span><span style="color:#56B6C2;">&gt;</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">intent</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">filter</span><span style="color:#56B6C2;">&gt;</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">action android</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;android.intent.action.SEND&quot;</span><span style="color:#56B6C2;">/&gt;</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">category android</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;android.intent.category.DEFAULT&quot;</span><span style="color:#56B6C2;">/&gt;</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">data android</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;">mimeType</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;text/plain&quot;</span><span style="color:#56B6C2;">/&gt;</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#56B6C2;">&lt;/</span><span style="color:#E06C75;">intent</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">filter</span><span style="color:#56B6C2;">&gt;</span></span>
<span class="line"><span style="color:#56B6C2;">&lt;/</span><span style="color:#E06C75;">activity</span><span style="color:#56B6C2;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="服务" tabindex="-1"><a href="https://developer.android.google.cn/guide/components/services?hl=zh-cn" target="_blank" rel="noreferrer">服务</a> <a class="header-anchor" href="#服务" aria-hidden="true">#</a></h3><p><a href="https://developer.android.google.cn/reference/android/app/Service?hl=zh-cn" target="_blank" rel="noreferrer">Service</a> 是一种可在后台执行长时间运行操作而不提供界面的应用组件</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">MyService</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">extends</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Service</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">DownloadBinder</span><span style="color:#E06C75;"> downloadBinder </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">DownloadBinder</span><span style="color:#E06C75;">()</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">DownloadBinder</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">extends</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Binder</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> startDownload</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">Log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">d</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;MyService&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;startDownload&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">int</span><span style="color:#61AFEF;"> getProgress</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">Log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">d</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;MyService&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;getProgress&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> MyService</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">IBinder</span><span style="color:#61AFEF;"> onBind</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">intent</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> downloadBinder;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onCreate</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">d</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;MyService&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;onCreate executed&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 前台服务</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">intent</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">,</span><span style="color:#E5C07B;">MainActivity</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">PendingIntent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">pi</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">PendingIntent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getActivity</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">,</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">,intent,</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Notification</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">notification</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> NotificationCompat.</span><span style="color:#61AFEF;">Builder</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">setContentTitle</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Title -&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">setContentText</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;--Content--&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">setWhen</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">System</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">currentTimeMillis</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">setSmallIcon</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">mipmap</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">ic_launcher</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">setLargeIcon</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BitmapFactory</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">decodeResource</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getResources</span><span style="color:#ABB2BF;">(),</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">mipmap</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">ic_launcher</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">setContentIntent</span><span style="color:#ABB2BF;">(pi)</span></span>
<span class="line"><span style="color:#ABB2BF;">                .</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">startForeground</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">,notification);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">int</span><span style="color:#61AFEF;"> onStartCommand</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">intent</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">flags</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">startId</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">d</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;MyService&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;onStartCommand&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onStartCommand</span><span style="color:#ABB2BF;">(intent, flags, startId);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onDestroy</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">d</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;MyService&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;onDestroy&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onDestroy</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// Main</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">MainActivity</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">extends</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">AppCompatActivity</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">implements</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">View</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">OnClickListener</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">MyService</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">DownloadBinder</span><span style="color:#E06C75;"> downloadBinder</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">ServiceConnection</span><span style="color:#E06C75;"> connection</span><span style="color:#56B6C2;">=</span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">ServiceConnection</span><span style="color:#E06C75;">() {</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onServiceConnected</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">ComponentName</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">name</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">IBinder</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">service</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">            downloadBinder </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">MyService</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">DownloadBinder</span><span style="color:#ABB2BF;">) service;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">downloadBinder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">startDownload</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">downloadBinder</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getProgress</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">        </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onServiceDisconnected</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">ComponentName</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">name</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#E06C75;">    }</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">protected</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onCreate</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Bundle</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">savedInstanceState</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">(savedInstanceState);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">setContentView</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">layout</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">activity_main</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">startService</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (Button) </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">start_service</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">stopService</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (Button) </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">stop_service</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">startService</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setOnClickListener</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">stopService</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setOnClickListener</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">bindService</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (Button) </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">bind_service</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">unbindService</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (Button) </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">unbind_service</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">bindService</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setOnClickListener</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">unbindService</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setOnClickListener</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onClick</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">View</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">v</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">v</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getId</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">start_service</span><span style="color:#C678DD;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">startIntent</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">MyService</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#61AFEF;">startService</span><span style="color:#ABB2BF;">(startIntent); </span><span style="color:#7F848E;font-style:italic;">// 启动服务</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">stop_service</span><span style="color:#C678DD;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">stopIntent</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">MyService</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#61AFEF;">stopService</span><span style="color:#ABB2BF;">(stopIntent); </span><span style="color:#7F848E;font-style:italic;">// 停止服务</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">bind_service</span><span style="color:#C678DD;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">bindIntent</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">MyService</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#61AFEF;">bindService</span><span style="color:#ABB2BF;">(bindIntent, connection, BIND_AUTO_CREATE); </span><span style="color:#7F848E;font-style:italic;">// 绑定服务</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">unbind_service</span><span style="color:#C678DD;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#61AFEF;">unbindService</span><span style="color:#ABB2BF;">(connection); </span><span style="color:#7F848E;font-style:italic;">// 解绑服务</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">default:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br></div></div><h3 id="权限" tabindex="-1"><a href="https://developer.android.google.cn/guide/topics/permissions/overview?hl=zh-cn" target="_blank" rel="noreferrer">权限</a> <a class="header-anchor" href="#权限" aria-hidden="true">#</a></h3><p>安装时权限 <br> 运行时权限</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">MainActivity</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">extends</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">AppCompatActivity</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">protected</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onCreate</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Bundle</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">savedInstanceState</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">(savedInstanceState);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">setContentView</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">layout</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">activity_main</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">makeCall</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (Button) </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">make_call</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">makeCall</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setOnClickListener</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> View.</span><span style="color:#61AFEF;">OnClickListener</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">            @</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onClick</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">View</span><span style="color:#ABB2BF;"> v) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">ContextCompat</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">checkSelfPermission</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MainActivity</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, Manifest.</span></span>
<span class="line"><span style="color:#ABB2BF;">                        </span><span style="color:#E5C07B;">permission</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">CALL_PHONE</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">!=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">PackageManager</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">PERMISSION_GRANTED</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">ActivityCompat</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">requestPermissions</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MainActivity</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">new</span></span>
<span class="line"><span style="color:#ABB2BF;">                            </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">[]{ </span><span style="color:#E5C07B;">Manifest</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">permission</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">CALL_PHONE</span><span style="color:#ABB2BF;"> }, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">                } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> call</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">intent</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">ACTION_CALL</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">intent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setData</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;tel:10086&quot;</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">startActivity</span><span style="color:#ABB2BF;">(intent);</span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">SecurityException</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">printStackTrace</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onRequestPermissionsResult</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">requestCode</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">permissions</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                                           </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">grantResults</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">switch</span><span style="color:#ABB2BF;"> (requestCode) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#C678DD;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">grantResults</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">length</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> grantResults[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> PackageManager.</span></span>
<span class="line"><span style="color:#ABB2BF;">                        PERMISSION_GRANTED) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#61AFEF;">call</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">                } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">makeText</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;You denied the permission&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">LENGTH_</span></span>
<span class="line"><span style="color:#ABB2BF;">                            SHORT).</span><span style="color:#61AFEF;">show</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">default:</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p>特殊权限 与特定的应用操作相对应。只有平台和原始设备制造商 (OEM) 可以定义特殊权限</p><h3 id="数据存储" tabindex="-1">数据存储 <a class="header-anchor" href="#数据存储" aria-hidden="true">#</a></h3><ul><li><a href="https://developer.android.google.cn/guide/topics/data/data-storage?hl=zh-cn" target="_blank" rel="noreferrer">数据和文件存储概览</a></li></ul><p><strong>文件存储</strong> <br> 默认目录：<code>/data/data/&lt;package name&gt;/files/&lt;file&gt;</code> <br> 文件的操作模式: MODE_PRIVATE、MODE_APPEND</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 存</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">void</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">save</span><span style="color:#E06C75;">(</span><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> data) {</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#E5C07B;">FileOutputStream</span><span style="color:#E06C75;"> out </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#E5C07B;">BufferedWriter</span><span style="color:#E06C75;"> writer </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#C678DD;">try</span><span style="color:#E06C75;"> {</span></span>
<span class="line"><span style="color:#E06C75;">		out </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">openFileOutput</span><span style="color:#E06C75;">(</span><span style="color:#98C379;">&quot;filename&quot;</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Context</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">MODE_PRIVATE</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">		writer </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">BufferedWriter</span><span style="color:#E06C75;">(</span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">OutputStreamWriter</span><span style="color:#E06C75;">(out))</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">		</span><span style="color:#E5C07B;">writer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">write</span><span style="color:#ABB2BF;">(data);</span></span>
<span class="line"><span style="color:#E06C75;">	} </span><span style="color:#C678DD;">catch</span><span style="color:#E06C75;"> (</span><span style="color:#E5C07B;">IOException</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#E06C75;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		</span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">printStackTrace</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">	} </span><span style="color:#C678DD;">finally</span><span style="color:#E06C75;"> {</span></span>
<span class="line"><span style="color:#E06C75;">		</span><span style="color:#C678DD;">try</span><span style="color:#E06C75;"> {</span></span>
<span class="line"><span style="color:#E06C75;">			</span><span style="color:#C678DD;">if</span><span style="color:#E06C75;"> (writer </span><span style="color:#56B6C2;">!=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">null</span><span style="color:#E06C75;">) {</span></span>
<span class="line"><span style="color:#E06C75;">    			</span><span style="color:#E5C07B;">writer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">close</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">			}</span></span>
<span class="line"><span style="color:#E06C75;">		} </span><span style="color:#C678DD;">catch</span><span style="color:#E06C75;"> (</span><span style="color:#E5C07B;">IOException</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#E06C75;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			</span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">printStackTrace</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">		}</span></span>
<span class="line"><span style="color:#E06C75;">	}</span></span>
<span class="line"><span style="color:#E06C75;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 取</span></span>
<span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">load</span><span style="color:#E06C75;">() {</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#E5C07B;">FileInputStream</span><span style="color:#E06C75;"> in </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#E5C07B;">BufferedReader</span><span style="color:#E06C75;"> reader </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#E5C07B;">StringBuilder</span><span style="color:#E06C75;"> content </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">StringBuilder</span><span style="color:#E06C75;">()</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#C678DD;">try</span><span style="color:#E06C75;"> {</span></span>
<span class="line"><span style="color:#E06C75;">		in </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">openFileInput</span><span style="color:#E06C75;">(</span><span style="color:#98C379;">&quot;filename&quot;</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">		reader </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">BufferedReader</span><span style="color:#E06C75;">(</span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">InputStreamReader</span><span style="color:#E06C75;">(in))</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">		</span><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> line </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">		</span><span style="color:#C678DD;">while</span><span style="color:#E06C75;"> ((line </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">reader</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">readLine</span><span style="color:#ABB2BF;">()</span><span style="color:#E06C75;">) </span><span style="color:#56B6C2;">!=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">null</span><span style="color:#E06C75;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			</span><span style="color:#E5C07B;">content</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">append</span><span style="color:#ABB2BF;">(line);</span></span>
<span class="line"><span style="color:#E06C75;">		}</span></span>
<span class="line"><span style="color:#E06C75;">	} </span><span style="color:#C678DD;">catch</span><span style="color:#E06C75;"> (</span><span style="color:#E5C07B;">IOException</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#E06C75;">) {</span></span>
<span class="line"><span style="color:#E06C75;">		</span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">printStackTrace</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">	} </span><span style="color:#C678DD;">finally</span><span style="color:#E06C75;"> {</span></span>
<span class="line"><span style="color:#E06C75;">		</span><span style="color:#C678DD;">if</span><span style="color:#E06C75;"> (reader </span><span style="color:#56B6C2;">!=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">null</span><span style="color:#E06C75;">) {</span></span>
<span class="line"><span style="color:#E06C75;">			</span><span style="color:#C678DD;">try</span><span style="color:#E06C75;"> {</span></span>
<span class="line"><span style="color:#E06C75;">				</span><span style="color:#E5C07B;">reader</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">close</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">			} </span><span style="color:#C678DD;">catch</span><span style="color:#E06C75;"> (</span><span style="color:#E5C07B;">IOException</span><span style="color:#E06C75;"> </span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#E06C75;">) {</span></span>
<span class="line"><span style="color:#E06C75;">				</span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">printStackTrace</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">			}</span></span>
<span class="line"><span style="color:#E06C75;">		}</span></span>
<span class="line"><span style="color:#E06C75;">	}</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#C678DD;">return</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">content</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p><strong>SharedPreferences存储</strong> <br> 使用键值对的方式来存储数据 <br> 默认目录：<code>/data/data/&lt;package name&gt;/shared_prefs/&lt;filename.xml&gt;</code> <br> 文件操作模式：MODE_PRIVATE</p><p>写</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E5C07B;">SharedPreferences</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Editor</span><span style="color:#E06C75;"> editor </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">getSharedPreferences</span><span style="color:#E06C75;">(</span><span style="color:#98C379;">&quot;filename&quot;</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;">MODE_PRIVATE)</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">edit</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">editor</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">putString</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;name&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Tom&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">editor</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">putInt</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;age&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">28</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">editor</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">putBoolean</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;married&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">editor</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">apply</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>读</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E5C07B;">SharedPreferences</span><span style="color:#E06C75;"> pref </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">getSharedPreferences</span><span style="color:#E06C75;">(</span><span style="color:#98C379;">&quot;filename&quot;</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> MODE_PRIVATE)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">String</span><span style="color:#E06C75;"> name </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">pref</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getString</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;name&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> age </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">pref</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getInt</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;age&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">boolean</span><span style="color:#E06C75;"> married </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">pref</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getBoolean</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;married&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="内容提供器-content-provider" tabindex="-1">内容提供器（Content Provider） <a class="header-anchor" href="#内容提供器-content-provider" aria-hidden="true">#</a></h3><p>实现跨程序共享数据，同时保证被访数据的安全性。</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">DatabaseProvider</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ContentProvider</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">static</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">final</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">BOOK_DIR</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">static</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">final</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">BOOK_ITEM</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">static</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">final</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">CATEGORY_DIR</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">static</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">final</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">CATEGORY_ITEM</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">static</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">final</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">AUTHORITY</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;com.example.databasetest.provider&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">private</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">static</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">UriMatcher</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">uriMatcher</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">static</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">uriMatcher</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">UriMatcher</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">UriMatcher</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">NO_MATCH</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">uriMatcher</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addURI</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">AUTHORITY</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;book&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">BOOK_DIR</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">uriMatcher</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addURI</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">AUTHORITY</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;book/#&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">BOOK_ITEM</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">uriMatcher</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addURI</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">AUTHORITY</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;category&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">CATEGORY_DIR</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">uriMatcher</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addURI</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">AUTHORITY</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;category/#&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">CATEGORY_ITEM</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">private</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">MyDatabaseHelper</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">dbHelper</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    @</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">boolean</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">dbHelper</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">MyDatabaseHelper</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getContext</span><span style="color:#ABB2BF;">(), </span><span style="color:#98C379;">&quot;BookStore.db&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    @</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">Cursor</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">query</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Uri</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">uri</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">String</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">projection</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">selection</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;font-style:italic;">String</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">selectionArgs</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">sortOrder</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 查询数据</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">SQLiteDatabase</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">db</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">dbHelper</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getReadableDatabase</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">Cursor</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">cursor</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">uriMatcher</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">match</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">uri</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BOOK_DIR</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">cursor</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">query</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Book&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">projection</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">selection</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">selectionArgs</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sortOrder</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BOOK_ITEM</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">bookId</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getPathSegments</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">cursor</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">query</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Book&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">projection</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;id = ?&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;">[] { </span><span style="color:#E06C75;">bookId</span><span style="color:#ABB2BF;"> }, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sortOrder</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">CATEGORY_DIR</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">cursor</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">query</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Category&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">projection</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">selection</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">selectionArgs</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sortOrder</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">CATEGORY_ITEM</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">categoryId</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getPathSegments</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">cursor</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">query</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Category&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">projection</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;id = ?&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;">[] { </span><span style="color:#E06C75;">categoryId</span><span style="color:#ABB2BF;"> }, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">sortOrder</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">cursor</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    @</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">Uri</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">insert</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Uri</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">uri</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">ContentValues</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">values</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 添加数据</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">SQLiteDatabase</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">db</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">dbHelper</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getWritableDatabase</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">Uri</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">uriReturn</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">uriMatcher</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">match</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">uri</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BOOK_DIR</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BOOK_ITEM</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">long</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">newBookId</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Book&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">values</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">uriReturn</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;content://&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">AUTHORITY</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;/book/&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E06C75;">newBookId</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">CATEGORY_DIR</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">CATEGORY_ITEM</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">long</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">newCategoryId</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">insert</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Category&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">values</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">uriReturn</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;content://&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">AUTHORITY</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;/category/&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E06C75;">newCategoryId</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">uriReturn</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    @</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">update</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Uri</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">uri</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">ContentValues</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">values</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">selection</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;font-style:italic;">String</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">selectionArgs</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 更新数据</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">SQLiteDatabase</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">db</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">dbHelper</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getWritableDatabase</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">updatedRows</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">uriMatcher</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">match</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">uri</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BOOK_DIR</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">updatedRows</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">update</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Book&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">values</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">selection</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">selectionArgs</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BOOK_ITEM</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">bookId</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getPathSegments</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">updatedRows</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">update</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Book&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">values</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;id = ?&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;">[] { </span><span style="color:#E06C75;">bookId</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">CATEGORY_DIR</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">updatedRows</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">update</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Category&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">values</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">selection</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">selectionArgs</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">CATEGORY_ITEM</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">categoryId</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getPathSegments</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">updatedRows</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">update</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Category&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">values</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;id = ?&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;">[] { </span><span style="color:#E06C75;">categoryId</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">updatedRows</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    @</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">delete</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Uri</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">uri</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">selection</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">String</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">selectionArgs</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 删除数据</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">SQLiteDatabase</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">db</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">dbHelper</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getWritableDatabase</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">deletedRows</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">uriMatcher</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">match</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">uri</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BOOK_DIR</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">deletedRows</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">delete</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Book&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">selection</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">selectionArgs</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BOOK_ITEM</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">bookId</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getPathSegments</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">deletedRows</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">delete</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Book&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;id = ?&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;">[] { </span><span style="color:#E06C75;">bookId</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">CATEGORY_DIR</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">deletedRows</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">delete</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Category&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">selection</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">selectionArgs</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">CATEGORY_ITEM</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">categoryId</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getPathSegments</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">get</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E06C75;">deletedRows</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">db</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">delete</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;Category&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;id = ?&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;">[] { </span><span style="color:#E06C75;">categoryId</span><span style="color:#ABB2BF;"> });</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">default</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">deletedRows</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    @</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">getType</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Uri</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">uri</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">uriMatcher</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">match</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">uri</span><span style="color:#ABB2BF;">)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BOOK_DIR</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vnd.android.cursor.dir/vnd.com.example.databasetest.provider.book&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BOOK_ITEM</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vnd.android.cursor.item/vnd.com.example.databasetest.provider.book&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">CATEGORY_DIR</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vnd.android.cursor.dir/vnd.com.example.databasetest.provider.category&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">CATEGORY_ITEM</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;vnd.android.cursor.item/vnd.com.example.databasetest.provider.category&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br></div></div><div class="language-kotlin line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MainActivity</span><span style="color:#ABB2BF;"> : </span><span style="color:#E5C07B;">AppCompatActivity</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> bookId: </span><span style="color:#E5C07B;">String?</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">override</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">fun</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">(</span><span style="color:#ABB2BF;font-style:italic;">savedInstanceState</span><span style="color:#ABB2BF;">: </span><span style="color:#E5C07B;">Bundle?</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.onCreate(savedInstanceState)</span></span>
<span class="line"><span style="color:#ABB2BF;">        setContentView(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.layout.activity_main)</span></span>
<span class="line"><span style="color:#ABB2BF;">        addData.setOnClickListener {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 添加数据</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">val</span><span style="color:#ABB2BF;"> uri </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Uri</span><span style="color:#ABB2BF;">.parse(</span><span style="color:#98C379;">&quot;content://com.example.databasetest.provider/book&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">val</span><span style="color:#ABB2BF;"> values </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> contentValuesOf(</span><span style="color:#98C379;">&quot;name&quot;</span><span style="color:#ABB2BF;"> to </span><span style="color:#98C379;">&quot;A Clash of Kings&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                                         </span><span style="color:#98C379;">&quot;author&quot;</span><span style="color:#ABB2BF;"> to </span><span style="color:#98C379;">&quot;George Martin&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;pages&quot;</span><span style="color:#ABB2BF;"> to </span><span style="color:#D19A66;">1040</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;price&quot;</span><span style="color:#ABB2BF;"> to </span><span style="color:#D19A66;">22.85</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">val</span><span style="color:#ABB2BF;"> newUri </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> contentResolver.insert(uri, values)</span></span>
<span class="line"><span style="color:#ABB2BF;">            bookId </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> new</span><span style="color:#E5C07B;">Uri?</span><span style="color:#ABB2BF;">.path</span><span style="color:#E5C07B;">Segments?</span><span style="color:#ABB2BF;">.get(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span></span>
<span class="line"><span style="color:#ABB2BF;">        queryData.setOnClickListener {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 查询数据</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">val</span><span style="color:#ABB2BF;"> uri </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Uri</span><span style="color:#ABB2BF;">.parse(</span><span style="color:#98C379;">&quot;content://com.example.databasetest.provider/book&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            contentResolver.query(uri, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">)?.</span><span style="color:#56B6C2;">apply</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">while</span><span style="color:#ABB2BF;"> (moveToNext()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#C678DD;">val</span><span style="color:#ABB2BF;"> name </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> getString(getColumnIndex(</span><span style="color:#98C379;">&quot;name&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#C678DD;">val</span><span style="color:#ABB2BF;"> author </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> getString(getColumnIndex(</span><span style="color:#98C379;">&quot;author&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#C678DD;">val</span><span style="color:#ABB2BF;"> pages </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> getInt(getColumnIndex(</span><span style="color:#98C379;">&quot;pages&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#C678DD;">val</span><span style="color:#ABB2BF;"> price </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> getDouble(getColumnIndex(</span><span style="color:#98C379;">&quot;price&quot;</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">Log</span><span style="color:#ABB2BF;">.d(</span><span style="color:#98C379;">&quot;MainActivity&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;book name is $name&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">Log</span><span style="color:#ABB2BF;">.d(</span><span style="color:#98C379;">&quot;MainActivity&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;book author is $author&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">Log</span><span style="color:#ABB2BF;">.d(</span><span style="color:#98C379;">&quot;MainActivity&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;book pages is $pages&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">Log</span><span style="color:#ABB2BF;">.d(</span><span style="color:#98C379;">&quot;MainActivity&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;book price is $price&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                close()</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span></span>
<span class="line"><span style="color:#ABB2BF;">        updateData.setOnClickListener {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 更新数据</span></span>
<span class="line"><span style="color:#ABB2BF;">            book</span><span style="color:#E5C07B;">Id?</span><span style="color:#ABB2BF;">.</span><span style="color:#56B6C2;">let</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">val</span><span style="color:#ABB2BF;"> uri </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Uri</span><span style="color:#ABB2BF;">.parse(</span><span style="color:#98C379;">&quot;content://com.example.databasetest.provider/</span></span>
<span class="line"><span style="color:#98C379;">                                    book/$it&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                                    </span><span style="color:#C678DD;">val</span><span style="color:#ABB2BF;"> values </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> contentValuesOf(</span><span style="color:#98C379;">&quot;name&quot;</span><span style="color:#ABB2BF;"> to </span><span style="color:#98C379;">&quot;A Storm of Swords&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                                                                 </span><span style="color:#98C379;">&quot;pages&quot;</span><span style="color:#ABB2BF;"> to </span><span style="color:#D19A66;">1216</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;price&quot;</span><span style="color:#ABB2BF;"> to </span><span style="color:#D19A66;">24.05</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                                    contentResolver.update(uri, values, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                                    }</span></span>
<span class="line"><span style="color:#ABB2BF;">                                    }</span></span>
<span class="line"><span style="color:#ABB2BF;">                                    deleteData.setOnClickListener {</span></span>
<span class="line"><span style="color:#ABB2BF;">                                        </span><span style="color:#7F848E;font-style:italic;">// 删除数据</span></span>
<span class="line"><span style="color:#ABB2BF;">                                        book</span><span style="color:#E5C07B;">Id?</span><span style="color:#ABB2BF;">.</span><span style="color:#56B6C2;">let</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">                                            </span><span style="color:#C678DD;">val</span><span style="color:#ABB2BF;"> uri </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Uri</span><span style="color:#ABB2BF;">.parse(</span><span style="color:#98C379;">&quot;content://com.example.databasetest.provider/</span></span>
<span class="line"><span style="color:#98C379;">                                                                book/$it&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                                                                contentResolver.delete(uri, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                                                                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                                                                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                                                                }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h3 id="广播" tabindex="-1"><a href="https://developer.android.google.cn/guide/components/broadcasts?hl=zh-cn" target="_blank" rel="noreferrer">广播</a> <a class="header-anchor" href="#广播" aria-hidden="true">#</a></h3><ul><li>标准广播 （Normal broadcasts）是一种完全异步执行的广播，在广播发出之后，所有的广播接收器几乎都会在同一时刻接收到这条广播消息</li><li>有序广播 （Ordered broadcasts）则是一种同步执行的广播，在广播发出之后，同一时刻只会有一个广播接收器能够收到这条广播消息</li></ul><p>接收系统广播 <br> 动态注册监听网络变化 <br> <code>&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;</code></p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MainActivity</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">AppCompatActivity</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">private</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">IntentFilter</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">intentFilter</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">private</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">NetworkChangeReceiver</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">networkChangeReceiver</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span></span>
<span class="line"><span style="color:#ABB2BF;">	@</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">protected</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Bundle</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">savedInstanceState</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">savedInstanceState</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#61AFEF;">setContentView</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">layout</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">activity_main</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E06C75;">intentFilter</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">IntentFilter</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E5C07B;">intentFilter</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addAction</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;android.net.conn.CONNECTIVITY_CHANGE&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E06C75;">networkChangeReceiver</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">NetworkChangeReceiver</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#61AFEF;">registerReceiver</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">networkChangeReceiver</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">intentFilter</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span></span>
<span class="line"><span style="color:#ABB2BF;">	@</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">protected</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onDestroy</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onDestroy</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#61AFEF;">unregisterReceiver</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">networkChangeReceiver</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">NetworkChangeReceiver</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BroadcastReceiver</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">		@</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onReceive</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Context</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">intent</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#E06C75;">ConnectivityManager</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">connectionManager</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">ConnectivityManager</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#61AFEF;">getSystemService</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Context</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">CONNECTIVITY_SERVICE</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#E06C75;">NetworkInfo</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">networkInfo</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">connectionManager</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getActiveNetworkInfo</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">networkInfo</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">!=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">networkInfo</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isAvailable</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">				</span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">makeText</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;network is available&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">				</span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">LENGTH_SHORT</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">show</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">			} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">				</span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">makeText</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;network is unavailable&quot;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">				</span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">LENGTH_SHORT</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">show</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>静态注册实现开机启动</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BootCompleteReceiver</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BroadcastReceiver</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">	@</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onReceive</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Context</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">intent</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">makeText</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;Boot Complete&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">LENGTH_LONG</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">show</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-xml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">application</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#D19A66;">android:allowBackup</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;true&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#D19A66;">android:icon</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;@mipmap/ic_launcher&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#D19A66;">android:label</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;@string/app_name&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#D19A66;">android:supportsRtl</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;true&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#D19A66;">android:theme</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;@style/AppTheme&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  ...</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">receiver</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#D19A66;">android:name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;.BootCompleteReceiver&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#D19A66;">android:enabled</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;true&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#D19A66;">android:exported</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;true&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E06C75;">intent-filter</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">      &lt;</span><span style="color:#E06C75;">action</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">android:name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;android.intent.action.BOOT_COMPLETED&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E06C75;">intent-filter</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">receiver</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">application</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>自定义广播</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MyBroadcastReceiver</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BroadcastReceiver</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">	@</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onReceive</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Context</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">intent</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">makeText</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;received in MyBroadcastReceiver&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">LENGTH_</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E5C07B;">SHORT</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">show</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">receiver</span></span>
<span class="line"><span style="color:#E06C75;">	android</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;.MyBroadcastReceiver&quot;</span></span>
<span class="line"><span style="color:#E06C75;">	android</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;">enabled</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;true&quot;</span></span>
<span class="line"><span style="color:#E06C75;">	android</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;">exported</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;true&quot;</span><span style="color:#56B6C2;">&gt;</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">intent</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">filter</span><span style="color:#56B6C2;">&gt;</span></span>
<span class="line"><span style="color:#E06C75;">		</span><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">action android</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;com.example.broadcasttest.MY_BROADCAST&quot;</span><span style="color:#56B6C2;">/&gt;</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#56B6C2;">&lt;/</span><span style="color:#E06C75;">intent</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">filter</span><span style="color:#56B6C2;">&gt;</span></span>
<span class="line"><span style="color:#56B6C2;">&lt;/</span><span style="color:#E06C75;">receiver</span><span style="color:#56B6C2;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E5C07B;">Intent</span><span style="color:#E06C75;"> intent </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#E06C75;">(</span><span style="color:#98C379;">&quot;com.example.broadcasttest.MY_BROADCAST&quot;</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 默认情况下发出的自定义广播是隐式广播</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 调用setPackage()方法，指定广播发送给哪个应用程序的，从而让它变成一条显式广播</span></span>
<span class="line"><span style="color:#E5C07B;">intent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setPackage</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getpackageName</span><span style="color:#ABB2BF;">())</span><span style="color:#E06C75;">)</span></span>
<span class="line"><span style="color:#61AFEF;">sendBroadcast</span><span style="color:#E06C75;">(intent)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">sendOrderedBroadcast</span><span style="color:#E06C75;">(intent</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">null</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>广播截断，以阻止其继续传播</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#61AFEF;">abortBroadcast</span><span style="color:#E06C75;">()</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>本地广播</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MainActivity</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">AppCompatActivity</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">private</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">IntentFilter</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">intentFilter</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">private</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">LocalReceiver</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">localReceiver</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">private</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">LocalBroadcastManager</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">localBroadcastManager</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span></span>
<span class="line"><span style="color:#ABB2BF;">	@</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">protected</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Bundle</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">savedInstanceState</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">savedInstanceState</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#61AFEF;">setContentView</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">layout</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">activity_main</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E06C75;">localBroadcastManager</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">LocalBroadcastManager</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getInstance</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 获取实例</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E06C75;">Button</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (</span><span style="color:#E06C75;">Button</span><span style="color:#ABB2BF;">) </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E5C07B;">button</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setOnClickListener</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">View</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">OnClickListener</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">			@</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">			public void </span><span style="color:#61AFEF;">onClick</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">View</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">v</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">				</span><span style="color:#E06C75;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">intent</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;com.example.broadcasttest.LOCAL</span><span style="color:#FFFFFF;">_</span></span>
<span class="line"><span style="color:#ABB2BF;">				</span><span style="color:#E5C07B;">BROADCAST</span><span style="color:#98C379;">&quot;)</span><span style="color:#FFFFFF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">				</span><span style="color:#E5C07B;">localBroadcastManager</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">sendBroadcast</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">intent</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 发送本地广播</span></span>
<span class="line"><span style="color:#ABB2BF;">			}</span></span>
<span class="line"><span style="color:#ABB2BF;">		});</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E06C75;">intentFilter</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">IntentFilter</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E5C07B;">intentFilter</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addAction</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;com.example.broadcasttest.LOCAL_BROADCAST&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E06C75;">localReceiver</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">LocalReceiver</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span><span style="color:#E5C07B;">localBroadcastManager</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">registerReceiver</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">localReceiver</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">intentFilter</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// 注册本地广播监听器</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span></span>
<span class="line"><span style="color:#ABB2BF;">		@</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">		protected void </span><span style="color:#61AFEF;">onDestroy</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onDestroy</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">			</span><span style="color:#E5C07B;">localBroadcastManager</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">unregisterReceiver</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">localReceiver</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">		</span></span>
<span class="line"><span style="color:#ABB2BF;">		class LocalReceiver extends BroadcastReceiver {</span></span>
<span class="line"><span style="color:#ABB2BF;">			@</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">			public void </span><span style="color:#61AFEF;">onReceive</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Context</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;font-style:italic;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">intent</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">				</span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">makeText</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">context</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;received local broadcast&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">LENGTH_SHORT</span><span style="color:#ABB2BF;">).</span></span>
<span class="line"><span style="color:#ABB2BF;">				</span><span style="color:#61AFEF;">show</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"><span style="color:#ABB2BF;">	}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="notification" tabindex="-1">Notification <a class="header-anchor" href="#notification" aria-hidden="true">#</a></h3><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E5C07B;">Intent</span><span style="color:#E06C75;"> intent </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#E06C75;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">NotificationActivity</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 执行相应的逻辑</span></span>
<span class="line"><span style="color:#E5C07B;">PendingIntent</span><span style="color:#E06C75;"> pi </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">PendingIntent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getActivity</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, intent, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">NotificationManager</span><span style="color:#E06C75;"> manager </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> (NotificationManager) </span><span style="color:#61AFEF;">getSystemService</span><span style="color:#E06C75;">(NOTIFICATION_SERVICE)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">Notification</span><span style="color:#E06C75;"> notification </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> NotificationCompat</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">Builder</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setContentTitle</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;This is content title&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setContentText</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;This is content text&quot;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setWhen</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">System</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">currentTimeMillis</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setSmallIcon</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">mipmap</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">ic_launcher</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setLargeIcon</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BitmapFactory</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">decodeResource</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getResources</span><span style="color:#ABB2BF;">(),</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">mipmap</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">ic_launcher</span><span style="color:#ABB2BF;">))</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setContentIntent</span><span style="color:#ABB2BF;">(pi)</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setAutoCancel</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#E06C75;">	</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E06C75;"> </span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 显示通知</span></span>
<span class="line"><span style="color:#E5C07B;">manager</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">notify</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">, notification);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>setSound(Uri.fromFile(new File(&quot;/system/media/audio/ringtones/Luna.ogg&quot;)))</li><li>setVibrate(new long[] {0, 1000, 1000, 1000 })</li><li>setLights(Color.GREEN, 1000, 1000)</li><li>setDefaults(NotificationCompat.DEFAULT_ALL)</li><li>setStyle(new NotificationCompat.BigPictureStyle().bigPicture(BitmapFactory.decodeResource(getResources(), R.drawable.big_image)))</li><li>setPriority(NotificationCompat.PRIORITY_MAX) <ul><li>PRIORITY_DEFAULT</li><li>PRIORITY_MIN</li><li>PRIORITY_LOW</li><li>PRIORITY_HIGH</li><li>PRIORITY_MAX</li></ul></li></ul><h3 id="多媒体" tabindex="-1">多媒体 <a class="header-anchor" href="#多媒体" aria-hidden="true">#</a></h3><p>功能声明</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">manifest</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">xmlns</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">android</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;http://schemas.android.com/apk/res/android&quot;</span></span>
<span class="line"><span style="color:#D19A66;font-style:italic;">package</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;com.bignerdranch.android.criminalintent&quot;</span><span style="color:#ABB2BF;"> &gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E5C07B;">uses-feature</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">name</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;android.hardware.camera&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">required</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;false&quot;</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    ...</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">manifest</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>调用摄像头和相册</strong></p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">MainActivity</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">extends</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">AppCompatActivity</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">static</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">final</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> TAKE_PHOTO </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">static</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">final</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">int</span><span style="color:#E06C75;"> CHOOSE_PHOTO </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#D19A66;">2</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">ImageView</span><span style="color:#E06C75;"> picture</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Uri</span><span style="color:#E06C75;"> imageUri</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">protected</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onCreate</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Bundle</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">savedInstanceState</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">(savedInstanceState);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">setContentView</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">layout</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">activity_main</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">takePhoto</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (Button) </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">take_photo</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">chooseFromAlbum</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (Button) </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">choose_from_album</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        picture </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (ImageView) </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">picture</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">takePhoto</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setOnClickListener</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> View.</span><span style="color:#61AFEF;">OnClickListener</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">            @</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onClick</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">View</span><span style="color:#ABB2BF;"> v) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#7F848E;font-style:italic;">// 创建File对象，用于存储拍照后的图片</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E5C07B;">File</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">outputImage</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">File</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getExternalCacheDir</span><span style="color:#ABB2BF;">(), </span><span style="color:#98C379;">&quot;output_image.jpg&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">outputImage</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">exists</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                        </span><span style="color:#E5C07B;">outputImage</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">delete</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">                    }</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">outputImage</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">createNewFile</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">                } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">IOException</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">printStackTrace</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Build</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">VERSION</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">SDK_INT</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&lt;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">24</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    imageUri </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">fromFile</span><span style="color:#ABB2BF;">(outputImage);</span></span>
<span class="line"><span style="color:#ABB2BF;">                } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    imageUri </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">FileProvider</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getUriForFile</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MainActivity</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;com.example.cameraalbumtest.fileprovider&quot;</span><span style="color:#ABB2BF;">, outputImage);</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#7F848E;font-style:italic;">// 启动相机程序</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">intent</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;android.media.action.IMAGE_CAPTURE&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E5C07B;">intent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">putExtra</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MediaStore</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">EXTRA_OUTPUT</span><span style="color:#ABB2BF;">, imageUri);</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#61AFEF;">startActivityForResult</span><span style="color:#ABB2BF;">(intent, TAKE_PHOTO);</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">chooseFromAlbum</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setOnClickListener</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> View.</span><span style="color:#61AFEF;">OnClickListener</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">            @</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onClick</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">View</span><span style="color:#ABB2BF;"> v) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">ContextCompat</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">checkSelfPermission</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MainActivity</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Manifest</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">permission</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">WRITE_EXTERNAL_STORAGE</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">!=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">PackageManager</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">PERMISSION_GRANTED</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">ActivityCompat</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">requestPermissions</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MainActivity</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">[]{ </span><span style="color:#E5C07B;">Manifest</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">permission</span><span style="color:#ABB2BF;">. </span><span style="color:#E5C07B;">WRITE_EXTERNAL_STORAGE</span><span style="color:#ABB2BF;"> }, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">                } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#61AFEF;">openAlbum</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> openAlbum</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">intent</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;android.intent.action.GET_CONTENT&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">intent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setType</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;image/*&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">startActivityForResult</span><span style="color:#ABB2BF;">(intent, CHOOSE_PHOTO); </span><span style="color:#7F848E;font-style:italic;">// 打开相册</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onRequestPermissionsResult</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">requestCode</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">permissions</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">grantResults</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">switch</span><span style="color:#ABB2BF;"> (requestCode) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#C678DD;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">grantResults</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">length</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> grantResults[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">PackageManager</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">PERMISSION_GRANTED</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#61AFEF;">openAlbum</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">                } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">makeText</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;You denied the permission&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">LENGTH_SHORT</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">show</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">default:</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">protected</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onActivityResult</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">requestCode</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">resultCode</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">switch</span><span style="color:#ABB2BF;"> (requestCode) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> TAKE_PHOTO</span><span style="color:#C678DD;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (resultCode </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> RESULT_OK) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">                        </span><span style="color:#7F848E;font-style:italic;">// 将拍摄的照片显示出来</span></span>
<span class="line"><span style="color:#ABB2BF;">                        </span><span style="color:#E5C07B;">Bitmap</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">bitmap</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BitmapFactory</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">decodeStream</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">getContentResolver</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">openInputStream</span><span style="color:#ABB2BF;">(imageUri));</span></span>
<span class="line"><span style="color:#ABB2BF;">                        </span><span style="color:#E5C07B;">picture</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setImageBitmap</span><span style="color:#ABB2BF;">(bitmap);</span></span>
<span class="line"><span style="color:#ABB2BF;">                    } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Exception</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                        </span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">printStackTrace</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">                    }</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> CHOOSE_PHOTO</span><span style="color:#C678DD;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (resultCode </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> RESULT_OK) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#7F848E;font-style:italic;">// 判断手机系统版本号</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Build</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">VERSION</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">SDK_INT</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&gt;=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">19</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                        </span><span style="color:#7F848E;font-style:italic;">// 4.4及以上系统使用这个方法处理图片</span></span>
<span class="line"><span style="color:#ABB2BF;">                        </span><span style="color:#61AFEF;">handleImageOnKitKat</span><span style="color:#ABB2BF;">(data);</span></span>
<span class="line"><span style="color:#ABB2BF;">                    } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">                        </span><span style="color:#7F848E;font-style:italic;">// 4.4以下系统使用这个方法处理图片</span></span>
<span class="line"><span style="color:#ABB2BF;">                        </span><span style="color:#61AFEF;">handleImageBeforeKitKat</span><span style="color:#ABB2BF;">(data);</span></span>
<span class="line"><span style="color:#ABB2BF;">                    }</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">default:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">TargetApi</span><span style="color:#E06C75;">(</span><span style="color:#D19A66;">19</span><span style="color:#E06C75;">)</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> handleImageOnKitKat</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">imagePath</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Uri</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">uri</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getData</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">d</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;TAG&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;handleImageOnKitKat: uri is &quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> uri);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">DocumentsContract</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isDocumentUri</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, uri)) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 如果是document类型的Uri，则通过document id处理</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">docId</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">DocumentsContract</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getDocumentId</span><span style="color:#ABB2BF;">(uri);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;com.android.providers.media.documents&quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">equals</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getAuthority</span><span style="color:#ABB2BF;">())) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">docId</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;:&quot;</span><span style="color:#ABB2BF;">)[</span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">]; </span><span style="color:#7F848E;font-style:italic;">// 解析出数字格式的id</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">selection</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MediaStore</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Images</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Media</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">_ID</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;=&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> id;</span></span>
<span class="line"><span style="color:#ABB2BF;">                imagePath </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">getImagePath</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MediaStore</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Images</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Media</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">EXTERNAL_CONTENT_URI</span><span style="color:#ABB2BF;">, selection);</span></span>
<span class="line"><span style="color:#ABB2BF;">            } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#98C379;">&quot;com.android.providers.downloads.documents&quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">equals</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getAuthority</span><span style="color:#ABB2BF;">())) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E5C07B;">Uri</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">contentUri</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ContentUris</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">withAppendedId</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">parse</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;content://downloads/public_downloads&quot;</span><span style="color:#ABB2BF;">), </span><span style="color:#E5C07B;">Long</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">valueOf</span><span style="color:#ABB2BF;">(docId));</span></span>
<span class="line"><span style="color:#ABB2BF;">                imagePath </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">getImagePath</span><span style="color:#ABB2BF;">(contentUri, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#98C379;">&quot;content&quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">equalsIgnoreCase</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getScheme</span><span style="color:#ABB2BF;">())) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 如果是content类型的Uri，则使用普通方式处理</span></span>
<span class="line"><span style="color:#ABB2BF;">            imagePath </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">getImagePath</span><span style="color:#ABB2BF;">(uri, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#98C379;">&quot;file&quot;</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">equalsIgnoreCase</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getScheme</span><span style="color:#ABB2BF;">())) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// 如果是file类型的Uri，直接获取图片路径即可</span></span>
<span class="line"><span style="color:#ABB2BF;">            imagePath </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">uri</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getPath</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">displayImage</span><span style="color:#ABB2BF;">(imagePath); </span><span style="color:#7F848E;font-style:italic;">// 根据图片路径显示图片</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> handleImageBeforeKitKat</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">data</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Uri</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">uri</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">data</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getData</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">imagePath</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">getImagePath</span><span style="color:#ABB2BF;">(uri, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">displayImage</span><span style="color:#ABB2BF;">(imagePath);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">String</span><span style="color:#61AFEF;"> getImagePath</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Uri</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">uri</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">selection</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 通过Uri和selection来获取真实的图片路径</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Cursor</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">cursor</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">getContentResolver</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">query</span><span style="color:#ABB2BF;">(uri, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, selection, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (cursor </span><span style="color:#56B6C2;">!=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">cursor</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">moveToFirst</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                path </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">cursor</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getString</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">cursor</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getColumnIndex</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MediaStore</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Images</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">Media</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">DATA</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">cursor</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">close</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> path;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> displayImage</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">imagePath</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (imagePath </span><span style="color:#56B6C2;">!=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">Bitmap</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">bitmap</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BitmapFactory</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">decodeFile</span><span style="color:#ABB2BF;">(imagePath);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">picture</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setImageBitmap</span><span style="color:#ABB2BF;">(bitmap);</span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">makeText</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;failed to get image&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">LENGTH_SHORT</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">show</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br></div></div><p>music</p><ul><li>setDataSource() 设置要播放的音频文件的位置</li><li>prepare() 在开始播放之前调用这个方法完成准备工作</li><li>start() 开始或继续播放音频</li><li>pause() 暂停播放音频</li><li>reset() 将MediaPlayer对象重置到刚刚创建的状态</li><li>seekTo() 从指定的位置开始播放音频</li><li>stop() 停止播放音频。调用这个方法后的MediaPlayer对象无法再播放音频</li><li>release() 释放掉与MediaPlayer对象相关的资源</li><li>isPlaying() 判断当前MediaPlayer是否正在播放音频</li><li>getDuration() 获取载入的音频文件的时长</li></ul><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">MainActivity</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">extends</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">AppCompatActivity</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">implements</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">View</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">OnClickListener</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">MediaPlayer</span><span style="color:#E06C75;"> mediaPlayer </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">MediaPlayer</span><span style="color:#E06C75;">()</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">protected</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onCreate</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Bundle</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">savedInstanceState</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">(savedInstanceState);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">setContentView</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">layout</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">activity_main</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">play</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (Button) </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">play</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">pause</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (Button) </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">pause</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Button</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">stop</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (Button) </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">stop</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">play</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setOnClickListener</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">pause</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setOnClickListener</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">stop</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setOnClickListener</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">ContextCompat</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">checkSelfPermission</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MainActivity</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Manifest</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">permission</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">WRITE_EXTERNAL_STORAGE</span><span style="color:#ABB2BF;">) </span><span style="color:#56B6C2;">!=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">PackageManager</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">PERMISSION_GRANTED</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">ActivityCompat</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">requestPermissions</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MainActivity</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">[]{ </span><span style="color:#E5C07B;">Manifest</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">permission</span><span style="color:#ABB2BF;">. </span><span style="color:#E5C07B;">WRITE_EXTERNAL_STORAGE</span><span style="color:#ABB2BF;"> }, </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">initMediaPlayer</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">// 初始化MediaPlayer</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> initMediaPlayer</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">File</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">file</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">File</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Environment</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getExternalStorageDirectory</span><span style="color:#ABB2BF;">(), </span><span style="color:#98C379;">&quot;music.mp3&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">mediaPlayer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setDataSource</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">file</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getPath</span><span style="color:#ABB2BF;">()); </span><span style="color:#7F848E;font-style:italic;">// 指定音频文件的路径</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">mediaPlayer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">prepare</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">// 让MediaPlayer进入到准备状态</span></span>
<span class="line"><span style="color:#ABB2BF;">        } </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">Exception</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">e</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">e</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">printStackTrace</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onRequestPermissionsResult</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">requestCode</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">permissions</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;">[] </span><span style="color:#E06C75;font-style:italic;">grantResults</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">switch</span><span style="color:#ABB2BF;"> (requestCode) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#C678DD;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">grantResults</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">length</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> grantResults[</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">] </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">PackageManager</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">PERMISSION_GRANTED</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#61AFEF;">initMediaPlayer</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">                } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">makeText</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#98C379;">&quot;拒绝权限将无法使用程序&quot;</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">Toast</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">LENGTH_SHORT</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">show</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#61AFEF;">finish</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">default:</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onClick</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">View</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">v</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">switch</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">v</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getId</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">play</span><span style="color:#C678DD;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#E5C07B;">mediaPlayer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isPlaying</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">mediaPlayer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">start</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">// 开始播放</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">pause</span><span style="color:#C678DD;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">mediaPlayer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isPlaying</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">mediaPlayer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">pause</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">// 暂停播放</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">case</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">stop</span><span style="color:#C678DD;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">mediaPlayer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">isPlaying</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">mediaPlayer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">reset</span><span style="color:#ABB2BF;">(); </span><span style="color:#7F848E;font-style:italic;">// 停止播放</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#61AFEF;">initMediaPlayer</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">default:</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">break</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">protected</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onDestroy</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onDestroy</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (mediaPlayer </span><span style="color:#56B6C2;">!=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">mediaPlayer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">stop</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">mediaPlayer</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">release</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br></div></div><p>video</p><ul><li>setVideoPath() 设置要播放的视频文件的位置</li><li>start() 开始或继续播放视频</li><li>pause() 暂停播放视频</li><li>resume() 将视频重头开始播放</li><li>seekTo() 从指定的位置开始播放视频</li><li>isPlaying() 判断当前是否正在播放视频</li><li>getDuration() 获取载入的视频文件的时长</li></ul><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#56B6C2;">&lt;</span><span style="color:#E5C07B;">VideoView</span></span>
<span class="line"><span style="color:#E06C75;">android</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;">id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;@+id/video_view&quot;</span></span>
<span class="line"><span style="color:#E06C75;">android</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;">layout_width</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;match_parent&quot;</span></span>
<span class="line"><span style="color:#E06C75;">android</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;">layout_height</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;wrap_content&quot;</span><span style="color:#E06C75;"> </span><span style="color:#56B6C2;">/&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Android不允许在子线程中进行UI操作</p><p>异步消息处理</p><ul><li><p>Message 在线程之间传递的消息，它可以在内部携带少量的信 息，用于在不同线程之间交换数据</p></li><li><p>Handler 发送消息一般是使用Handler的sendMessage() 方法，发出的消息经过一系列地辗转处理后，最终会传递到Handler的 handleMessage() 方法中</p></li><li><p>MessageQueue 用于存放所有通过 Handler发送的消息。</p></li><li><p>Looper 每个线程中的MessageQueue的管家</p></li><li><p><a href="https://developer.android.google.cn/guide/topics/ui/ui-events?hl=zh-cn" target="_blank" rel="noreferrer">输入事件概览</a></p></li></ul><p>全局获取Context</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">MyApplication</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">extends</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Application</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">private</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">static</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Context</span><span style="color:#E06C75;"> context</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> onCreate</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        context </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">getApplicationContext</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">static</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">Context</span><span style="color:#61AFEF;"> getContext</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> context;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 程序启动时应该初始 化MyApplication 类，而不是默认的Application 类</span></span>
<span class="line"><span style="color:#56B6C2;">&lt;</span><span style="color:#E06C75;">application</span></span>
<span class="line"><span style="color:#E06C75;">    android</span><span style="color:#C678DD;">:</span><span style="color:#E06C75;">name</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;.MyApplication&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">...</span><span style="color:#56B6C2;">&gt;</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">...</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>Alarm</p><div class="language-java line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#C678DD;">public</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">class</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">LongRunningService</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">extends</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">Service</span><span style="color:#E06C75;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#E5C07B;">IBinder</span><span style="color:#61AFEF;"> onBind</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">intent</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#E06C75;">    </span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#ABB2BF;">@</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#E06C75;">    </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">int</span><span style="color:#61AFEF;"> onStartCommand</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">intent</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">flags</span><span style="color:#ABB2BF;">, </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">startId</span><span style="color:#ABB2BF;">)</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Thread</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Runnable</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">            @</span><span style="color:#E5C07B;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">public</span><span style="color:#61AFEF;"> </span><span style="color:#C678DD;">void</span><span style="color:#61AFEF;"> run</span><span style="color:#ABB2BF;">()</span><span style="color:#61AFEF;"> </span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#7F848E;font-style:italic;">// 在这里执行具体的逻辑操作</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }).</span><span style="color:#61AFEF;">start</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">AlarmManager</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">manager</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (AlarmManager) </span><span style="color:#61AFEF;">getSystemService</span><span style="color:#ABB2BF;">(ALARM_SERVICE);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">int</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">anHour</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">60</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">*</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">60</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">*</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1000</span><span style="color:#ABB2BF;">; </span><span style="color:#7F848E;font-style:italic;">// 这是一小时的毫秒数</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">long</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">triggerAtTime</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">SystemClock</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">elapsedRealtime</span><span style="color:#ABB2BF;">() </span><span style="color:#56B6C2;">+</span><span style="color:#ABB2BF;"> anHour;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Intent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">i</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#E5C07B;">LongRunningService</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">PendingIntent</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">pi</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">PendingIntent</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getService</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, i, </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">manager</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">set</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">AlarmManager</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">ELAPSED_REALTIME_WAKEUP</span><span style="color:#ABB2BF;">, triggerAtTime, pi);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onStartCommand</span><span style="color:#ABB2BF;">(intent, flags, startId);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 启动定时服务</span></span>
<span class="line"><span style="color:#E5C07B;">Intent</span><span style="color:#E06C75;"> intent </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> </span><span style="color:#C678DD;">new</span><span style="color:#E06C75;"> </span><span style="color:#61AFEF;">Intent</span><span style="color:#E06C75;">(context</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#E5C07B;">LongRunningService</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">class</span><span style="color:#E06C75;">)</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#E5C07B;">context</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">startService</span><span style="color:#ABB2BF;">(intent);</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p><strong>Android 的CPU类型(ABIs)</strong> <br> 应用程序二进制接口（Application Binary Interface）定义了二进制文件如何运行在相应的系统平台上，从使用的指令集，内存对齐到可用的系统函数库。 <br> 在Android 系统上，每一个CPU架构对应一个ABI</p><ul><li>mips / mips64: 极少用于手机可以忽略（谷歌已经不支持了）</li><li>x86 / x86_64: x86 架构的手机都会包含由 Intel 提供的称为 Houdini 的指令集动态转码工具，实现 对 arm .so 的兼容。占有率极低</li><li>armeabi: ARM v5，旧老版本，缺少对浮点数计算的硬件支持，在需要大量计算时有性能瓶颈</li><li>armeabi-v7a: ARM v7</li><li>arm64-v8a: 64位支持，目前主流的版本</li></ul><p>查询手机cpu命令行：</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">adb</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">shell</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">getprop</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ro</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">product</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">cpu</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">abi</span><span style="color:#ABB2BF;">    </span></span>
<span class="line"><span style="color:#E06C75;">adb</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">shell</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">getprop</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ro</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">product</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">cpu</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">abilist</span><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">CPU</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">支持的</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">abi</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">列表</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="android-studio" tabindex="-1"><a href="https://developer.android.google.cn/studio?hl=zh-cn" target="_blank" rel="noreferrer">ANDROID STUDIO</a> <a class="header-anchor" href="#android-studio" aria-hidden="true">#</a></h2><p><a href="https://developer.android.google.cn/studio/intro/keyboard-shortcuts?hl=zh-cn" target="_blank" rel="noreferrer">键盘快捷键</a></p><table><thead><tr><th>在 Studio 内导航和搜索</th><th></th><th></th></tr></thead><tbody><tr><td>搜索全部内容（包括代码和菜单）</td><td>按两次 <br> Shift</td><td>按两次 <br> Shift</td></tr><tr><td>查找</td><td>Ctrl+F</td><td>Command+F</td></tr><tr><td>查找下一项内容</td><td>F3</td><td>Command+G</td></tr><tr><td>查找上一项内容</td><td>Shift+F3</td><td>Command+Shift+G</td></tr><tr><td>替换</td><td>Ctrl+R</td><td>Command+R</td></tr><tr><td>查找操作</td><td>Ctrl+Shift+A</td><td>Command+Shift+A</td></tr><tr><td>按符号名称搜索</td><td>Ctrl+Alt+Shift+N</td><td>Command+Option+O</td></tr><tr><td>查找类</td><td>Ctrl+N</td><td>Command+O</td></tr><tr><td>查找文件（而不是类）</td><td>Ctrl+Shift+N</td><td>Command+Shift+O</td></tr><tr><td>在路径中查找</td><td>Ctrl+Shift+F</td><td>Command+Shift+F</td></tr><tr><td>打开文件结构弹出式菜单</td><td>Ctrl+F12</td><td>Command+F12</td></tr><tr><td>在打开的编辑器标签页之间导航</td><td>Alt+向右箭头 <br> 或 <br> 向左箭头</td><td>Ctrl+向右箭头 <br> 或 <br> Ctrl+向左箭头</td></tr><tr><td><strong>跳到源代码</strong></td><td><strong>F4 或 Ctrl+Enter</strong></td><td><strong>F4 或 Command+向下箭头</strong></td></tr><tr><td>转到上一个编辑位置</td><td>Ctrl+Shift+退格键</td><td>Command+Shift+Delete</td></tr><tr><td>关闭活动编辑器标签页</td><td>Ctrl+F4</td><td>Command+W</td></tr></tbody></table><table><thead><tr><th>编写代码</th><th></th><th></th></tr></thead><tbody><tr><td>生成代码（getter、setter、构造函数、hashCode/equals、toString、新文件、新类）</td><td>Alt+Insert</td><td>Command+N</td></tr><tr><td>替换方法</td><td>Ctrl+O</td><td>Ctrl+O</td></tr><tr><td>实现方法</td><td>Ctrl+I</td><td>Ctrl+I</td></tr><tr><td>控制语句（if...else / try...catch / 等）</td><td>Ctrl+Alt+T</td><td>Command+Option+T</td></tr><tr><td>删除插入符处的行</td><td>Ctrl+Y</td><td>Command+Delete</td></tr><tr><td>收起/展开当前代码块</td><td>Ctrl+减号键 或 <br> Ctrl+加号键</td><td>Command+减号键 或 <br> Command+加号键</td></tr><tr><td>收起/展开所有代码块</td><td>Ctrl+Shift+减号键 <br> 或 <br> Ctrl+Shift+加号键</td><td>Command+Shift+减号键 <br> 或 <br> Command+Shift+加号键</td></tr><tr><td>复制当前行或选择</td><td>Ctrl+D</td><td>Command+D</td></tr><tr><td>基本代码补全</td><td>Ctrl+空格键</td><td>Ctrl+空格键</td></tr><tr><td>智能代码补全（按预期类型过滤方法和变量列表）</td><td>Ctrl+Shift+空格键</td><td>Ctrl+Shift+空格键</td></tr><tr><td>完成语句</td><td>Ctrl+Shift+Enter</td><td>Command+Shift+Enter</td></tr><tr><td>快速查找文档</td><td>Ctrl+Q</td><td>Ctrl+J</td></tr><tr><td>显示选定方法的参数</td><td>Ctrl+P</td><td>Command+P</td></tr><tr><td>转到声明（直接）</td><td>Ctrl+B 或 <br> Ctrl +点击</td><td>Command+B 或 <br> Command+点击</td></tr><tr><td>转到实现</td><td>Ctrl+Alt+B</td><td>Command+Option+B</td></tr><tr><td>转到超方法/超类</td><td>Ctrl+U</td><td>Command+U</td></tr><tr><td>打开快速定义查找</td><td>Ctrl+Shift+I</td><td>Command+Y</td></tr><tr><td>切换项目工具窗口的可见性</td><td>Alt+1</td><td>Command+1</td></tr><tr><td>切换书签</td><td>F11</td><td>F3</td></tr><tr><td>通过助记符切换书签</td><td>Ctrl+F11</td><td>Option+F3</td></tr><tr><td>通过行注释添加注释/取消注释</td><td>Ctrl+/</td><td>Command+/</td></tr><tr><td>通过块注释添加注释/取消注释</td><td>Ctrl+Shift+/</td><td>Command+Shift+/</td></tr><tr><td>选择连续增加的代码块</td><td>Ctrl+W</td><td>Option+向上箭头</td></tr><tr><td>将当前选择退回到上一个状态</td><td>Ctrl+Shift+W</td><td>Option+向下箭头</td></tr><tr><td>移动到代码块起始位置</td><td>Ctrl+[</td><td>Option+Command+[</td></tr><tr><td>移动到代码块结束位置</td><td>Ctrl+]</td><td>Option+Command+]</td></tr><tr><td>从当前位置选择到代码块起始位置</td><td>Ctrl+Shift+[</td><td>Option+Command+Shift+[</td></tr><tr><td>从当前位置选择到代码块结束位置</td><td>Ctrl+Shift+]</td><td>Option+Command+Shift+]</td></tr><tr><td>从当前位置删除到单词结尾位置</td><td>Ctrl+Delete</td><td>Option+Delete</td></tr><tr><td>从当前位置删除到单词开头位置</td><td>Ctrl+退格键</td><td>Option+Delete</td></tr><tr><td>优化导入</td><td>Ctrl+Alt+O</td><td>Ctrl+Option+O</td></tr><tr><td>项目快速修复（显示意图操作和快速修复）</td><td>Alt+Enter</td><td>Option+Enter</td></tr><tr><td><strong>重新格式化代码</strong></td><td><strong>Ctrl+Alt+L</strong></td><td><strong>Command+Option+L</strong></td></tr><tr><td>自动缩进行</td><td>Ctrl+Alt+I</td><td>Ctrl+Option+I</td></tr><tr><td>缩进/取消缩进行</td><td>Tab <br> 或 <br> Shift+Tab</td><td>Tab <br> 或 <br> Shift+Tab</td></tr><tr><td>智能行合并</td><td>Ctrl+Shift+J</td><td>Ctrl+Shift+J</td></tr><tr><td>智能行拆分</td><td>Ctrl+Enter</td><td>Command+Enter</td></tr><tr><td><strong>开始新行</strong></td><td><strong>Shift+Enter</strong></td><td><strong>Shift+Enter</strong></td></tr><tr><td>下一个/上一个突出显示的错误</td><td>F2 或 <br> Shift+F2</td><td>F2 或 <br> Shift+F2</td></tr><tr><td>编译并运行</td><td></td><td></td></tr><tr><td>编译</td><td>Ctrl+F9</td><td>Command+F9</td></tr><tr><td>编译并运行</td><td>Shift+F10</td><td>Ctrl+R</td></tr><tr><td>应用更改并重启 Activity</td><td>Ctrl+F10</td><td>Ctrl+Command+R</td></tr><tr><td>应用代码更改</td><td>Ctrl+Alt+F10</td><td>Ctrl+Shift+Command+R</td></tr><tr><td>调试</td><td></td><td></td></tr><tr><td>调试</td><td>Shift+F9</td><td>Ctrl+D</td></tr><tr><td>单步执行</td><td>F8</td><td>F8</td></tr><tr><td>单步进入</td><td>F7</td><td>F7</td></tr><tr><td>智能单步进入</td><td>Shift+F7</td><td>Shift+F7</td></tr><tr><td>单步退出</td><td>Shift+F8</td><td>Shift+F8</td></tr><tr><td>运行到光标位置</td><td>Alt+F9</td><td>Option+F9</td></tr><tr><td>评估表达式</td><td>Alt+F8</td><td>Option+F8</td></tr><tr><td>继续运行程序</td><td>F9</td><td>Command+Option+R</td></tr><tr><td>切换断点</td><td>Ctrl+F8</td><td>Command+F8</td></tr><tr><td>查看断点</td><td>Ctrl+Shift+F8</td><td>Command+Shift+F8</td></tr></tbody></table><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">implementation</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">fileTree</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">dir</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;libs&#39;</span><span style="color:#ABB2BF;">, </span><span style="color:#E06C75;">include</span><span style="color:#ABB2BF;">: [</span><span style="color:#98C379;">&#39;*.jar&#39;</span><span style="color:#ABB2BF;">])	</span><span style="color:#E06C75;">本地依赖声明</span><span style="color:#ABB2BF;">，</span><span style="color:#E5C07B;">表示将libs目录下所有</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">jar后缀的文件都添加到项目的构建路径中</span></span>
<span class="line"><span style="color:#E06C75;">implementation</span><span style="color:#ABB2BF;">	</span><span style="color:#E06C75;">远程依赖声明</span></span>
<span class="line"><span style="color:#E06C75;">testImplementation和androidTestImplementation</span><span style="color:#ABB2BF;">	</span><span style="color:#E06C75;">声明测试用例库</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><a href="https://developer.android.google.cn/guide/webapps/webview?hl=zh-cn" target="_blank" rel="noreferrer">在 WebView 中开发 Web 应用</a> <br> Webview调用Java方法 <br> 1、允许WebView加载js <br> webView.getSettings().setJavaScriptEnabled(true); <br> 2、编写js接口类 <br> 3、给WebView添加js接口 <br> webView.addJavascriptInterface(obj, name);</p><p>Android调用js方法 <br> 使用loadUrl方法调用javascript</p><ul><li>webView.loadUrljavascript:jsString);</li><li>jsString是要调用的js代码的字符串</li></ul><p>Chrome调试 <br> 打开允许调试的开关 <br> webView.setWebContentsDebuggingEnabled(true);</p><p>activity_main.xml</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#56B6C2;">&lt;</span><span style="color:#C678DD;">?</span><span style="color:#E06C75;">xml</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">version</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;1.0&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">encoding</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;utf-8&quot;</span><span style="color:#C678DD;">?</span><span style="color:#56B6C2;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">LinearLayout</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">xmlns</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">android</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;http://schemas.android.com/apk/res/android&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#D19A66;">xmlns</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">tools</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;http://schemas.android.com/tools&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">layout_width</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;match_parent&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">layout_height</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;match_parent&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">orientation</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;vertical&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E5C07B;">WebView</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;@+id/webview&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">layout_width</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;match_parent&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">layout_height</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;450dp&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E5C07B;">TextView</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;@+id/appText&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">layout_width</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;match_parent&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">layout_height</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;wrap_content&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">textColor</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;#cc0000&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">textSize</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;20sp&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">layout_marginTop</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;20dp&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#D19A66;">tools</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">text</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;apptext&quot;</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;</span><span style="color:#E5C07B;">androidx.appcompat.widget.LinearLayoutCompat</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">layout_width</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;match_parent&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">layout_height</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;wrap_content&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">orientation</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;horizontal&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E5C07B;">EditText</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;@+id/edittext&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">layout_width</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;wrap_content&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">layout_height</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;wrap_content&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">minWidth</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;80dp&quot;</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">        &lt;</span><span style="color:#E5C07B;">Button</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;@+id/button&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">layout_width</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;wrap_content&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">layout_height</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;wrap_content&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">layout_marginLeft</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;15dp&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#D19A66;">android</span><span style="color:#ABB2BF;">:</span><span style="color:#D19A66;font-style:italic;">text</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;Send&quot;</span><span style="color:#ABB2BF;">/&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    &lt;/</span><span style="color:#E5C07B;">androidx.appcompat.widget.LinearLayoutCompat</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E5C07B;">LinearLayout</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#E06C75;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">interface</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">JSBridge</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">setTextViewValue</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">JSInterface</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">private</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">static</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">final</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">TAG</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;JSInterface&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">private</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">JSBridge</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">jsBridge</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">JSInterface</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">JSBridge</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">jsBridge</span><span style="color:#ABB2BF;">){</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">jsBridge</span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;">jsBridge</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// 该方法不在主线程执行</span></span>
<span class="line"><span style="color:#ABB2BF;">    @</span><span style="color:#E06C75;">JavascriptInterface</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">setValue</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">){</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">Log</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">d</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">TAG</span><span style="color:#ABB2BF;">,</span><span style="color:#98C379;">&quot;value =&quot;</span><span style="color:#56B6C2;">+</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">jsBridge</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setTextViewValue</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MainActivity</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">AppCompatActivity</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">implements</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">JSBridge</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">private</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">WebView</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">mWebview</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">private</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">TextView</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">appText</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">private</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">Handler</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">mHandler</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">private</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">Button</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">mButton</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">private</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">EditText</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">mEditText</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    @</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">protected</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Bundle</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">savedInstanceState</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;font-style:italic;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">onCreate</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">savedInstanceState</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">setContentView</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">layout</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">activity_main</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">initWidgets</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">savedInstanceState</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">private</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">initWidgets</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">Bundle</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">savedInstanceState</span><span style="color:#ABB2BF;">){</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">mWebview</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">webview</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">appText</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">appText</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">mHandler</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Handler</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">mButton</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">button</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">mEditText</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">findViewById</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">R</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">id</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">edittext</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//允许webview加载JS</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">mWebview</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getSettings</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">setJavaScriptEnabled</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 给webview添加JS接口</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">mWebview</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">addJavascriptInterface</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">com</span><span style="color:#ABB2BF;">.</span><span style="color:#E5C07B;">webapp1</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">JSInterface</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">),</span><span style="color:#98C379;">&quot;sendToApp&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">mWebview</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">loadUrl</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;file:///android_asset/index.html&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">mButton</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setOnClickListener</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">View</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">OnClickListener</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">            @</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">            public void </span><span style="color:#61AFEF;">onClick</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">View</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">v</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E06C75;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">str</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">mEditText</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">getText</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">toString</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E5C07B;">mWebview</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">loadUrl</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;javascript:receiveFromApp(&#39;&quot;</span><span style="color:#56B6C2;">+</span><span style="color:#E06C75;">str</span><span style="color:#56B6C2;">+</span><span style="color:#98C379;">&quot;&#39;)&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">mWebview</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setWebContentsDebuggingEnabled</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    @</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">public</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">setTextViewValue</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;font-style:italic;">String</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;font-style:italic;">value</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E5C07B;">mHandler</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">post</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">Runnable</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">            @</span><span style="color:#E06C75;">Override</span></span>
<span class="line"><span style="color:#ABB2BF;">            public void </span><span style="color:#61AFEF;">run</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E5C07B;">appText</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setText</span><span style="color:#ABB2BF;">(</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br></div></div><p>/main/assets/index.html</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki one-dark-pro"><code><span class="line"><span style="color:#56B6C2;">&lt;!</span><span style="color:#E5C07B;">DOCTYPE</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">html</span><span style="color:#56B6C2;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;Webview&lt;/</span><span style="color:#E06C75;">title</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    body </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">background</span><span style="color:#56B6C2;">-</span><span style="color:#E06C75;">color</span><span style="color:#ABB2BF;">: </span><span style="color:#E06C75;">aqua</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">style</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">head</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;Webview&lt;/</span><span style="color:#E06C75;">h1</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;input form&lt;/</span><span style="color:#E06C75;">p</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">form</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;form&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">label</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">for</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;fname&quot;</span><span style="color:#ABB2BF;">&gt;First name:&lt;/</span><span style="color:#E06C75;">label</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">type</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;text&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;fname&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">name</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;fname&quot;</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">br</span><span style="color:#ABB2BF;">&gt;&lt;</span><span style="color:#E06C75;">br</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">input</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">type</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;submit&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">id</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;btn&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;font-style:italic;">value</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">&quot;提交&quot;</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">form</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">    let fname = document.getElementById(&#39;fname&#39;);</span></span>
<span class="line"><span style="color:#ABB2BF;">    let btn = document.getElementById(&#39;btn&#39;);</span></span>
<span class="line"><span style="color:#ABB2BF;">    btn.addEventListener(&#39;click&#39;, () =&gt; </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E06C75;">let</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">str</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">fname</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#61AFEF;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">window</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">sendToApp</span><span style="color:#ABB2BF;">) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        sendToApp.setValue(str);</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">}</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    let receiveFromApp = function (str) </span><span style="color:#C678DD;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">fname</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">value</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">str</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;/</span><span style="color:#E06C75;">script</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">body</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">html</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-c5936a1e data-v-e033cd21><div class="edit-info" data-v-e033cd21><div class="edit-link" data-v-e033cd21><a class="VPLink link edit-link-button" href="https://github.com/sower/Notes/tree/main/docs/CS/Android.md" target="_blank" rel="noreferrer" data-v-e033cd21 data-v-30c06bd3><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-e033cd21><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Suggest changes to this page<!--]--><!----></a></div><!----></div><div class="prev-next" data-v-e033cd21><div class="pager" data-v-e033cd21><a class="pager-link prev" href="/Notes/CS/Github.html" data-v-e033cd21><span class="desc" data-v-e033cd21>Previous page</span><span class="title" data-v-e033cd21>Github</span></a></div><div class="has-prev pager" data-v-e033cd21><a class="pager-link next" href="/Notes/CS/Android%20SDK.html" data-v-e033cd21><span class="desc" data-v-e033cd21>Next page</span><span class="title" data-v-e033cd21>Android SDK</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-93a960b4 data-v-d24360a6><div class="container" data-v-d24360a6><p class="message" data-v-d24360a6>Released under the MIT License.</p><p class="copyright" data-v-d24360a6>Copyright © 2022-present Ylem</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"cs_html.md\":\"f2e35881\",\"cs_java advance.md\":\"141626ae\",\"cs_java api.md\":\"27823c05\",\"cs_git.md\":\"4628249d\",\"cs_data structure.md\":\"57248542\",\"cs_java framework.md\":\"3bfe5775\",\"cs_docker.md\":\"3d1487ff\",\"cs_design patterns.md\":\"c9399c4c\",\"cs_github.md\":\"a421d1c2\",\"cs_css.md\":\"9bd8a9ec\",\"universal_refactor 重构.md\":\"23988d8f\",\"cs_algorithm.md\":\"98fcf374\",\"cs_java.md\":\"fa2cb775\",\"cs_android sdk.md\":\"391bcef8\",\"cs_javascript.md\":\"565aa467\",\"cs_kubernetes.md\":\"28f645b2\",\"cs_linux.md\":\"f41f3e44\",\"cs_machine learning.md\":\"b6e55961\",\"cs_android.md\":\"e35a6e6c\",\"cs_microsoft.md\":\"92aa908c\",\"cs_bash.md\":\"3660910a\",\"cs_batch.md\":\"0f920676\",\"cs_big data.md\":\"d431c981\",\"cs_mysql.md\":\"d7d915da\",\"cs_nosql.md\":\"6f6bbd99\",\"cs_c.md\":\"5d092762\",\"cs_node.js.md\":\"c5fd4775\",\"cs_operating system.md\":\"e92f2cdf\",\"cs_powershell.md\":\"c7177d4e\",\"cs_py web.md\":\"86955f0a\",\"cs_pypi.md\":\"e7ab9c57\",\"cs_python.md\":\"33accc4e\",\"cs_pythonic.md\":\"326382dc\",\"cs_sql.md\":\"6e3ed01c\",\"cs_ssh.md\":\"45028296\",\"cs_unit test.md\":\"e7dd8f2a\",\"cs_vue ecosystem.md\":\"3f5a89f8\",\"cs_c__.md\":\"3f49d14b\",\"cs_windows.md\":\"c7fd27e0\",\"cs_web api.md\":\"826c1f0c\",\"cs_善假于键.md\":\"2b07fc6b\",\"cs_注册表（registry）.md\":\"1eef4f61\",\"cs_网络（network）.md\":\"c893b6b5\",\"contents.md\":\"08636593\",\"software_api collections.md\":\"6fa4d451\",\"software_application.md\":\"1899aca8\",\"software_chrome.md\":\"a026b816\",\"software_ffmpeg.md\":\"319b2329\",\"universal_markdown.md\":\"3c27f49f\",\"universal_programming paradigm.md\":\"1b0d0ecc\",\"universal_qa.md\":\"1dd86323\",\"software_micro office.md\":\"53b92481\",\"cs_command.md\":\"28411517\",\"universal_regular expression.md\":\"0f6df664\",\"universal_security.md\":\"fe5cbff0\",\"universal_terminology.md\":\"b657189c\",\"universal_uml.md\":\"7205089a\",\"universal_数据交换格式.md\":\"4c1c9693\",\"universal_编码 _ 加密.md\":\"2176b9a2\",\"index.md\":\"90506ac9\",\"universal_software.md\":\"9b658a27\",\"cs_python lib.md\":\"6748ae22\",\"cs_vue.js.md\":\"81c993db\",\"cs_data structure _ algorithm.md\":\"018d84af\",\"cs_spring.md\":\"c1db30eb\"}")</script>
    <script type="module" async src="/Notes/assets/app.c729a732.js"></script>
    
  </body>
</html>